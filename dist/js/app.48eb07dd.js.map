{"version":3,"file":"js/app.48eb07dd.js","mappings":"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","sources":["webpack://upshot-refactor/./src/config/constants.ts","webpack://upshot-refactor/./src/utils/loggingService.ts","webpack://upshot-refactor/./src/stores/uiStore.ts","webpack://upshot-refactor/./src/utils/dateUtils.ts","webpack://upshot-refactor/./src/core/excelProcessorServices/personnelProcessorService.ts","webpack://upshot-refactor/./src/types/syllabiTypes.ts","webpack://upshot-refactor/./src/core/excelProcessorServices/syllabusProcessorService.ts","webpack://upshot-refactor/./src/stores/syllabiStore.ts","webpack://upshot-refactor/./src/config/appConfigDefaults.ts","webpack://upshot-refactor/./src/utils/dataUtils.ts","webpack://upshot-refactor/./src/stores/appConfigStore.ts","webpack://upshot-refactor/./src/types/personnelTypes.ts","webpack://upshot-refactor/./src/core/syllabusLogicService.ts","webpack://upshot-refactor/./src/core/trainingLogicService.ts","webpack://upshot-refactor/./src/stores/personnelStore.ts","webpack://upshot-refactor/./src/core/excelProcessorServices/trainingDataProcessorService.ts","webpack://upshot-refactor/./src/stores/progressStore.ts","webpack://upshot-refactor/./src/views/DashboardView.vue?c610","webpack://upshot-refactor/./src/views/DashboardView.vue","webpack://upshot-refactor/./src/views/DashboardView.vue?7280","webpack://upshot-refactor/./src/views/ReportsView.vue?a853","webpack://upshot-refactor/./src/views/ReportsView.vue","webpack://upshot-refactor/./src/views/ReportsView.vue?a5e2","webpack://upshot-refactor/./src/components/ui/ProgressWheel.vue?3055","webpack://upshot-refactor/./src/components/ui/ProgressWheel.vue","webpack://upshot-refactor/./src/components/ui/ProgressWheel.vue?24de","webpack://upshot-refactor/./src/views/IndividualReportListView.vue?f3e8","webpack://upshot-refactor/./src/views/IndividualReportListView.vue","webpack://upshot-refactor/./src/views/IndividualReportListView.vue?4067","webpack://upshot-refactor/./src/components/specific/charts/TrackLevelChart.vue?73b4","webpack://upshot-refactor/./src/components/specific/charts/TrackLevelChart.vue","webpack://upshot-refactor/./src/components/specific/charts/TrackLevelChart.vue?db61","webpack://upshot-refactor/./src/views/TrackReportView.vue?d3bb","webpack://upshot-refactor/./src/views/TrackReportView.vue","webpack://upshot-refactor/./src/views/TrackReportView.vue?3eb7","webpack://upshot-refactor/./src/utils/anonymizer.ts","webpack://upshot-refactor/./src/core/reportGeneratorService.ts","webpack://upshot-refactor/./src/views/MonthlyReportView.vue?786f","webpack://upshot-refactor/./src/views/MonthlyReportView.vue","webpack://upshot-refactor/./src/views/MonthlyReportView.vue?4083","webpack://upshot-refactor/./src/core/geminiService.ts","webpack://upshot-refactor/./src/views/LlmReportView.vue?858b","webpack://upshot-refactor/./src/views/LlmReportView.vue","webpack://upshot-refactor/./src/views/LlmReportView.vue?437f","webpack://upshot-refactor/./src/components/specific/charts/ProgressChart.vue?641c","webpack://upshot-refactor/./src/components/specific/charts/ProgressChart.vue","webpack://upshot-refactor/./src/components/specific/charts/ProgressChart.vue?2d49","webpack://upshot-refactor/./src/components/specific/reports/IndividualReport.vue?f37d","webpack://upshot-refactor/./src/components/specific/reports/IndividualReport.vue","webpack://upshot-refactor/./src/components/specific/reports/IndividualReport.vue?5470","webpack://upshot-refactor/./src/views/StudentDetailView.vue?f8a4","webpack://upshot-refactor/./src/views/StudentDetailView.vue","webpack://upshot-refactor/./src/views/StudentDetailView.vue?ebeb","webpack://upshot-refactor/./src/views/SettingsSyllabiView.vue?21a2","webpack://upshot-refactor/./src/views/SettingsSyllabiView.vue","webpack://upshot-refactor/./src/views/SettingsSyllabiView.vue?03b3","webpack://upshot-refactor/./src/components/specific/SyllabusManager/SyllabusList.vue?d79b","webpack://upshot-refactor/./src/components/specific/SyllabusManager/SyllabusList.vue","webpack://upshot-refactor/./src/components/specific/SyllabusManager/SyllabusList.vue?124f","webpack://upshot-refactor/./src/components/ui/BaseModal.vue?db7e","webpack://upshot-refactor/./src/components/ui/BaseModal.vue","webpack://upshot-refactor/./src/components/ui/BaseModal.vue?6485","webpack://upshot-refactor/./src/utils/arrayUtils.ts","webpack://upshot-refactor/./src/components/specific/SyllabusManager/SyllabusUploadConfirmation.vue?c93c","webpack://upshot-refactor/./src/components/specific/SyllabusManager/SyllabusUploadConfirmation.vue","webpack://upshot-refactor/./src/components/specific/SyllabusManager/SyllabusUploadConfirmation.vue?aaf3","webpack://upshot-refactor/./src/core/fileHandlerService.ts","webpack://upshot-refactor/./src/views/SyllabusManagementView.vue?85d6","webpack://upshot-refactor/./src/views/SyllabusManagementView.vue","webpack://upshot-refactor/./src/views/SyllabusManagementView.vue?5a18","webpack://upshot-refactor/./src/components/specific/SyllabusManager/SyllabusRequirementsTable.vue?ca05","webpack://upshot-refactor/./src/components/specific/SyllabusManager/SyllabusRequirementsTable.vue","webpack://upshot-refactor/./src/components/specific/SyllabusManager/SyllabusRequirementsTable.vue?d60c","webpack://upshot-refactor/./src/components/specific/SyllabusManager/RequirementItem.vue?3078","webpack://upshot-refactor/./src/components/specific/SyllabusManager/RequirementItem.vue","webpack://upshot-refactor/./src/components/specific/SyllabusManager/RequirementItem.vue?1a64","webpack://upshot-refactor/./src/views/SyllabusEditView.vue?8e1b","webpack://upshot-refactor/./src/views/SyllabusEditView.vue","webpack://upshot-refactor/./src/views/SyllabusEditView.vue?e5c6","webpack://upshot-refactor/./src/utils/colorUtils.ts","webpack://upshot-refactor/./src/views/AppSettingsView.vue?1e63","webpack://upshot-refactor/./src/views/AppSettingsView.vue","webpack://upshot-refactor/./src/views/AppSettingsView.vue?2bd4","webpack://upshot-refactor/./src/components/specific/PersonnelManager/PersonnelTable.vue?4594","webpack://upshot-refactor/./src/components/specific/PersonnelManager/PersonnelTable.vue","webpack://upshot-refactor/./src/components/specific/PersonnelManager/PersonnelTable.vue?3e34","webpack://upshot-refactor/./src/views/PersonnelUploadView.vue?f77e","webpack://upshot-refactor/./src/views/PersonnelUploadView.vue","webpack://upshot-refactor/./src/views/PersonnelUploadView.vue?6327","webpack://upshot-refactor/./src/views/TrainingUploadView.vue?787e","webpack://upshot-refactor/./src/views/TrainingUploadView.vue","webpack://upshot-refactor/./src/views/TrainingUploadView.vue?49ad","webpack://upshot-refactor/./src/components/ui/AccordionItem.vue?375a","webpack://upshot-refactor/./src/components/ui/AccordionItem.vue","webpack://upshot-refactor/./src/components/ui/AccordionItem.vue?38c1","webpack://upshot-refactor/./src/views/HelpView.vue?138e","webpack://upshot-refactor/./src/views/HelpView.vue","webpack://upshot-refactor/./src/views/HelpView.vue?8804","webpack://upshot-refactor/./src/views/LogsView.vue?5025","webpack://upshot-refactor/./src/views/LogsView.vue","webpack://upshot-refactor/./src/views/LogsView.vue?731f","webpack://upshot-refactor/./src/router/index.ts","webpack://upshot-refactor/./src/components/layout/AppLayout.vue?14e2","webpack://upshot-refactor/./src/components/layout/AppLayout.vue","webpack://upshot-refactor/./src/components/layout/AppLayout.vue?1c76","webpack://upshot-refactor/./src/components/ui/AppNotifications.vue?8c5f","webpack://upshot-refactor/./src/components/ui/AppNotifications.vue","webpack://upshot-refactor/./src/components/ui/AppNotifications.vue?2cfd","webpack://upshot-refactor/./src/App.vue?2a5e","webpack://upshot-refactor/./src/App.vue","webpack://upshot-refactor/./src/App.vue?7ccd","webpack://upshot-refactor/./src/main.ts","webpack://upshot-refactor/webpack/bootstrap","webpack://upshot-refactor/webpack/runtime/chunk loaded","webpack://upshot-refactor/webpack/runtime/define property getters","webpack://upshot-refactor/webpack/runtime/global","webpack://upshot-refactor/webpack/runtime/hasOwnProperty shorthand","webpack://upshot-refactor/webpack/runtime/jsonp chunk loading","webpack://upshot-refactor/webpack/startup"],"sourcesContent":["export const APP_VERSION = \"0.1.0-alpha\"; // Or pull from package.json if you have a build step for that\nexport const MAX_LOG_ENTRIES = 1000;\n\nexport const NOTIFICATION_TIME = {\n  info: 2000,\n  warning: 5000,\n  error: 10000,\n  default: 2000,\n};\n","import { saveAs } from \"file-saver\";\nimport { useAppConfigStore } from \"../stores/appConfigStore\";\nimport { APP_VERSION, MAX_LOG_ENTRIES } from \"../config/constants\";\n\ninterface LogEntry {\n  timestamp: string;\n  level: \"INFO\" | \"WARN\" | \"ERROR\" | \"DEBUG\";\n  message: string;\n  details?: any;\n}\n\nlet logEntries: LogEntry[] = [];\nlet isInitialized = false;\n\nfunction formatDetails(details: any): string {\n  if (details instanceof Error) {\n    return `Error: ${details.name} - ${details.message}\\nStack: ${details.stack}`;\n  }\n  if (typeof details === \"object\") {\n    try {\n      return JSON.stringify(details, null, 2);\n    } catch (e) {\n      return \"Could not stringify details object.\";\n    }\n  }\n  return String(details);\n}\n\nexport const loggingService = {\n  init: (): void => {\n    if (isInitialized) return;\n    logEntries = [];\n    console.log(\n      `[LOGGING] Service Initialized. Max entries: ${MAX_LOG_ENTRIES}. App Version: ${APP_VERSION}`\n    );\n    isInitialized = true;\n  },\n\n  addEntry: (\n    level: \"INFO\" | \"WARN\" | \"ERROR\" | \"DEBUG\",\n    message: string,\n    details?: any\n  ): void => {\n    if (logEntries.length >= MAX_LOG_ENTRIES) {\n      logEntries.shift();\n    }\n    const entry: LogEntry = {\n      timestamp: new Date().toISOString(),\n      level,\n      message,\n      details: details !== undefined ? formatDetails(details) : undefined,\n    };\n    logEntries.push(entry);\n\n    switch (level) {\n      case \"INFO\":\n        console.info(`[${entry.timestamp}] INFO: ${message}`, details || \"\");\n        break;\n      case \"WARN\":\n        console.warn(`[${entry.timestamp}] WARN: ${message}`, details || \"\");\n        break;\n      case \"ERROR\":\n        console.error(`[${entry.timestamp}] ERROR: ${message}`, details || \"\");\n        break;\n      case \"DEBUG\":\n        console.debug(`[${entry.timestamp}] DEBUG: ${message}`, details || \"\");\n        break;\n    }\n  },\n\n  // NEW: Function to get a copy of the current logs for display\n  getLogs: (): LogEntry[] => {\n    return [...logEntries]; // Return a copy to prevent direct mutation\n  },\n\n  logInfo: (message: string, details?: any): void => {\n    loggingService.addEntry(\"INFO\", message, details);\n  },\n  logWarn: (message: string, details?: any): void => {\n    loggingService.addEntry(\"WARN\", message, details);\n  },\n  logError: (message: string, errorOrDetails?: any): void => {\n    loggingService.addEntry(\"ERROR\", message, errorOrDetails);\n  },\n  logDebug: (message: string, details?: any): void => {\n    loggingService.addEntry(\"DEBUG\", message, details);\n  },\n\n  exportLogs: (): void => {\n    loggingService.logInfo(\"Log export initiated by user.\");\n    let reportContent = `UPSHOT Application Debug Report\\n`;\n    reportContent += `================================\\n`;\n    // ... (rest of the export logic is the same)\n    logEntries.forEach((entry) => {\n      reportContent += `[${entry.timestamp}] [${entry.level}] ${entry.message}\\n`;\n      if (entry.details) {\n        reportContent += `  Details: ${entry.details}\\n`;\n      }\n    });\n\n    const blob = new Blob([reportContent], {\n      type: \"text/plain;charset=utf-8\",\n    });\n    const timestamp = new Date()\n      .toISOString()\n      .replace(/:/g, \"-\")\n      .replace(/\\..+/, \"\");\n    saveAs(blob, `UPSHOT_Debug_Report_${timestamp}.txt`);\n  },\n};\n","// src/stores/uiStore.ts\nimport { defineStore } from \"pinia\";\nimport { type AppNotification } from \"../types/commonTypes\"; // Assuming commonTypes.ts exists\nimport { loggingService } from \"../utils/loggingService\"; // For logging UI actions\n\nconst DEFAULT_NOTIFICATION_DURATION = 3000; // 5 seconds\n\nexport const useUiStore = defineStore(\"ui\", {\n  state: () => ({\n    notifications: [] as AppNotification[],\n    isLoading: false,\n    criticalError: null as Error | null,\n    criticalErrorMessage: \"\" as string,\n    nextNotificationId: 1, // Better way to generate unique IDs\n    isGlobalLoading: false,\n  }),\n  actions: {\n    /**\n     * Sets the global loading state of the application.\n     * @param {boolean} isLoading - Whether the loading indicator should be active.\n     */\n    setGlobalLoading(isLoading: boolean) {\n      this.isGlobalLoading = isLoading;\n    },\n    addNotification(notification: Omit<AppNotification, \"id\">) {\n      const id = this.nextNotificationId++; // Use incrementing ID\n      const duration =\n        notification.duration === 0\n          ? 0\n          : notification.duration || DEFAULT_NOTIFICATION_DURATION; // 0 means persistent\n\n      const newNotification: AppNotification = {\n        ...notification,\n        id,\n        duration,\n      };\n\n      this.notifications.push(newNotification);\n      loggingService.logInfo(\n        `UI Notification Added: ID=${id}, Type=${newNotification.type}, Msg=\"${newNotification.message}\", Duration=${duration}`\n      );\n\n      // Auto-remove notification after duration, if duration is positive\n      if (duration > 0) {\n        setTimeout(() => {\n          this.removeNotification(id);\n        }, duration);\n      }\n    },\n\n    removeNotification(id: number) {\n      const index = this.notifications.findIndex((n) => n.id === id);\n      if (index !== -1) {\n        this.notifications.splice(index, 1);\n        loggingService.logDebug(`UI Notification Removed: ID ${id}`);\n      }\n    },\n\n    setLoading(status: boolean) {\n      if (this.isLoading === status) return;\n      this.isLoading = status;\n      loggingService.logDebug(`UI Loading State Changed: ${status}`);\n    },\n\n    setCriticalError(error: Error, userMessage: string) {\n      this.criticalError = error;\n      this.criticalErrorMessage = userMessage;\n      this.isLoading = false;\n      loggingService.logError(\"CRITICAL UI ERROR SET:\", {\n        userMessage,\n        errorDetails: error,\n      });\n    },\n\n    clearCriticalError() {\n      if (this.criticalError) {\n        loggingService.logInfo(\"Critical UI error cleared.\");\n      }\n      this.criticalError = null;\n      this.criticalErrorMessage = \"\";\n    },\n  },\n});\n","import { type AppConfig } from \"../types/appConfigTypes\";\n\n/**\n * Converts an Excel serial date number into a JavaScript Date object,\n * interpreting it as UTC midnight to avoid timezone shifts.\n * @param excelDate - The serial number for the date from Excel.\n * @returns A JavaScript Date object set to midnight UTC, or null if invalid.\n */\nexport function excelToJsDate_LocalIntent(excelDate: number): Date | null {\n  if (isNaN(excelDate) || excelDate <= 0) return null;\n  // The number of days between the Excel epoch (1900-01-01) and the Unix epoch (1970-01-01) is 25569.\n  // We subtract this and convert the remaining days to milliseconds.\n  const tempDate = new Date((excelDate - 25569) * 86400000);\n  const year = tempDate.getUTCFullYear();\n  const month = tempDate.getUTCMonth();\n  const day = tempDate.getUTCDate();\n  return new Date(Date.UTC(year, month, day));\n}\n\n/**\n * Converts a JavaScript Date object into an Excel serial date number.\n * @param jsDate - The JavaScript Date object.\n * @returns The serial number representation of the date for Excel.\n */\nexport function jsDateToExcel(jsDate: Date): number {\n  const excelEpoch = new Date(Date.UTC(1899, 11, 30));\n  const msPerDay = 24 * 60 * 60 * 1000;\n  const timeDiff = jsDate.getTime() - excelEpoch.getTime();\n  return timeDiff / msPerDay;\n}\n\n/**\n * Formats a UTC Date object into a user-friendly local date string (e.g., MM/DD/YYYY).\n * @param utcDate - The UTC Date object to format.\n * @returns The formatted date string, or \"N/A\" if the date is invalid.\n */\nexport function formatUtcDateToDisplay(\n  utcDate: Date | null | undefined\n): string {\n  if (!utcDate || isNaN(utcDate.getTime())) return \"N/A\";\n  const year = utcDate.getUTCFullYear();\n  const month = utcDate.getUTCMonth();\n  const day = utcDate.getUTCDate();\n  const localDate = new Date(year, month, day);\n  return localDate.toLocaleDateString(undefined, {\n    year: \"numeric\",\n    month: \"2-digit\",\n    day: \"2-digit\",\n  });\n}\n\n/**\n * Adds a specified number of days to a date.\n * @param date - The starting date.\n * @param days - The number of days to add.\n * @returns A new Date object with the days added.\n */\nexport function addDays(date: Date, days: number): Date {\n  const newDate = new Date(date.valueOf());\n  newDate.setUTCDate(newDate.getUTCDate() + days);\n  return newDate;\n}\n\n/**\n * Calculates the number of days between two dates.\n * @param date1 - The first date.\n * @param date2 - The second date.\n * @returns The total number of full days between the two dates.\n */\nexport function daysBetween(date1: Date, date2: Date): number {\n  const msPerDay = 24 * 60 * 60 * 1000;\n  const utc1 = Date.UTC(\n    date1.getUTCFullYear(),\n    date1.getUTCMonth(),\n    date1.getUTCDate()\n  );\n  const utc2 = Date.UTC(\n    date2.getUTCFullYear(),\n    date2.getUTCMonth(),\n    date2.getUTCDate()\n  );\n  return Math.floor((utc2 - utc1) / msPerDay);\n}\n\n/**\n * Gets the current date as a UTC Date object at midnight.\n * @returns A new Date object for today at midnight UTC.\n */\nexport function getTodayUtc(): Date {\n  const today = new Date();\n  return new Date(\n    Date.UTC(today.getFullYear(), today.getMonth(), today.getDate())\n  );\n}\n\n// NOTE: The functions below were part of the original file content provided.\n// They are kept for completeness.\n\nexport function convertLocalDateToUtcMidnight(localDate: Date): Date {\n  return new Date(\n    Date.UTC(localDate.getFullYear(), localDate.getMonth(), localDate.getDate())\n  );\n}\n\nexport function getEffectiveTrainingStartDate(\n  actualStartDate: Date,\n  appConfig: AppConfig\n): Date {\n  if (!appConfig.useRoundedTrainingStartDate) {\n    return actualStartDate;\n  }\n  const localInterpretationForRounding = new Date(\n    actualStartDate.getUTCFullYear(),\n    actualStartDate.getUTCMonth(),\n    actualStartDate.getUTCDate()\n  );\n  const dayOfMonthLocal = localInterpretationForRounding.getDate();\n  const effectiveYear = localInterpretationForRounding.getFullYear();\n  let effectiveMonth = localInterpretationForRounding.getMonth();\n  if (dayOfMonthLocal > 15) {\n    effectiveMonth += 1;\n  }\n  return new Date(Date.UTC(effectiveYear, effectiveMonth, 1));\n}\n\nexport function parseInputDateToUtc(\n  dateString: string | null | undefined\n): Date | null {\n  if (!dateString) return null;\n  const parts = dateString.split(\"-\");\n  if (parts.length === 3) {\n    const year = parseInt(parts[0], 10);\n    const month = parseInt(parts[1], 10) - 1;\n    const day = parseInt(parts[2], 10);\n    if (!isNaN(year) && !isNaN(month) && !isNaN(day)) {\n      return new Date(Date.UTC(year, month, day));\n    }\n  }\n  return null;\n}\n","import * as XLSX from \"xlsx\";\nimport { saveAs } from \"file-saver\";\nimport { type Upgrader } from \"../../types/personnelTypes\";\nimport { useUiStore } from \"../../stores/uiStore\";\nimport {\n  excelToJsDate_LocalIntent,\n  jsDateToExcel,\n} from \"../../utils/dateUtils\";\n\nconst PERSONNEL_FILE_HEADERS = [\n  \"Rank\",\n  \"Display Name\",\n  \"SHARP Name\",\n  \"Start Date\",\n  \"Assigned Position\",\n  \"Assigned Syllabus Year\",\n  \"Target Qualification Level\",\n  \"On Waiver\",\n];\n\ninterface PersonnelExcelRow {\n  Rank?: string;\n  \"Display Name\"?: string;\n  \"SHARP Name\"?: string;\n  \"Start Date\"?: number;\n  \"Assigned Position\"?: string;\n  \"Assigned Syllabus Year\"?: string;\n  \"Target Qualification Level\"?: number;\n  \"On Waiver\"?: string | boolean;\n}\n\nexport async function processPersonnelFile(file: File): Promise<Upgrader[]> {\n  const uiStore = useUiStore();\n  const personnel: Upgrader[] = [];\n  try {\n    const data = await file.arrayBuffer();\n    const workbook = XLSX.read(data);\n    const worksheet = workbook.Sheets[workbook.SheetNames[0]];\n    const jsonData: PersonnelExcelRow[] = XLSX.utils.sheet_to_json(worksheet);\n\n    for (const row of jsonData) {\n      const sharpName = row[\"SHARP Name\"];\n      const position = row[\"Assigned Position\"];\n\n      if (\n        !sharpName ||\n        !row[\"Display Name\"] ||\n        !row[\"Start Date\"] ||\n        !position\n      ) {\n        continue;\n      }\n\n      const startDate = excelToJsDate_LocalIntent(row[\"Start Date\"]);\n      if (!startDate) continue;\n\n      const upgrader: Upgrader = {\n        id: `${sharpName}-${position}`,\n        name: sharpName,\n        displayName: row[\"Display Name\"],\n        rank: row[\"Rank\"],\n        startDate: startDate,\n        assignedPosition: position,\n        assignedSyllabusYear: String(\n          row[\"Assigned Syllabus Year\"] || new Date().getFullYear()\n        ),\n        targetQualificationLevel: row[\"Target Qualification Level\"] || 200,\n        onWaiver: String(row[\"On Waiver\"]).toUpperCase() === \"TRUE\",\n        manuallyUnlockedLevels: [],\n        rawCompletions: [],\n        allCompletions: [],\n      };\n      personnel.push(upgrader);\n    }\n  } catch (error) {\n    console.error(\"Error processing Personnel file:\", error);\n    uiStore.addNotification({\n      message: \"Failed to process Personnel file.\",\n      type: \"error\",\n    });\n  }\n  return personnel;\n}\n\nexport function downloadPersonnelData(personnel: Upgrader[]): void {\n  const excelData = personnel.map((p) => ({\n    Rank: p.rank,\n    \"Display Name\": p.displayName,\n    \"SHARP Name\": p.name,\n    \"Start Date\": jsDateToExcel(p.startDate),\n    \"Assigned Position\": p.assignedPosition,\n    \"Assigned Syllabus Year\": p.assignedSyllabusYear,\n    \"Target Qual Level\": p.targetQualificationLevel,\n    \"On Waiver\": p.onWaiver ? \"TRUE\" : \"FALSE\",\n  }));\n  const worksheet = XLSX.utils.json_to_sheet(excelData, {\n    header: PERSONNEL_FILE_HEADERS,\n  });\n  const workbook = XLSX.utils.book_new();\n  XLSX.utils.book_append_sheet(workbook, worksheet, \"Personnel\");\n  const excelBuffer = XLSX.write(workbook, { bookType: \"xlsx\", type: \"array\" });\n  const dataBlob = new Blob([excelBuffer], {\n    type: \"application/octet-stream\",\n  });\n  saveAs(\n    dataBlob,\n    `Personnel_Data_${new Date().toISOString().slice(0, 10)}.xlsx`\n  );\n}\n\n/**\n * Creates and triggers a download for a blank personnel template file.\n */\nexport function downloadPersonnelTemplate(): void {\n  // Create a worksheet with no data, but with the specified headers\n  const worksheet = XLSX.utils.json_to_sheet([], {\n    header: PERSONNEL_FILE_HEADERS,\n  });\n\n  // Create a new workbook and append the sheet\n  const workbook = XLSX.utils.book_new();\n  XLSX.utils.book_append_sheet(workbook, worksheet, \"Personnel Roster\");\n\n  // Generate the Excel file buffer\n  const excelBuffer = XLSX.write(workbook, { bookType: \"xlsx\", type: \"array\" });\n\n  // Create a Blob from the buffer for downloading\n  const dataBlob = new Blob([excelBuffer], {\n    type: \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8\",\n  });\n\n  // Use file-saver to trigger the download\n  saveAs(dataBlob, \"Personnel_Template.xlsx\");\n}\n","import { type Identifiable, type Named } from \"./commonTypes\";\n\nexport enum RequirementType {\n  PQS = \"PQS\",\n  Event = \"Event\",\n  Board = \"Board\",\n  Other = \"Other\",\n}\n\nexport interface Requirement extends Identifiable, Named {\n  id: string; // Should be the \"Short Name\" for matching\n  name: string; // Should also be the \"Short Name\"\n  displayName: string;\n  description: string; // The \"Long name\" from the syllabus file\n  level: string; // Can be \"200\", \"300\", \"400MC\", etc.\n  type: RequirementType;\n  sequence?: number;\n  prerequisites?: string[];\n  isDefaultWaived: boolean;\n  rawSharpEventSubtype?: string;\n  difficulty?: number;\n}\n\nexport interface Syllabus extends Identifiable, Named {\n  id: string;\n  name: string;\n  displayName: string;\n  position: string;\n  year: string;\n  baseLevel: string; // The starting level, e.g., \"200\"\n  requirements: Requirement[];\n  masterSyllabusIdentifier: string | null;\n}\n\nexport interface PrioritizedRequirement extends Requirement {\n  priorityScore: number;\n  isAvailable: boolean;\n  unlocks: number;\n}\n\n/**\n * Represents a completion record that has been successfully\n * resolved against a specific syllabus requirement.\n */\nexport interface CompletedItemRecord {\n  requirementId: string;\n  requirementDisplayName: string;\n  requirementType: RequirementType;\n  completionDate: Date;\n  instructor?: string | null;\n  grade?: string | number | null;\n  statusRaw?: string | null;\n  statusResolved?: string | null;\n  isActualCompletion: boolean;\n  isSyllabusWaived?: boolean;\n  isIndividuallyWaived?: boolean;\n}\n\n/**\n * Extends the base Requirement type with additional, dynamically calculated\n * properties related to its priority for a specific upgrader.\n */\nexport interface PrioritizedRequirement extends Requirement {\n  priorityScore: number;\n  isAvailable: boolean; // Is the requirement available to be worked on now?\n  unlocks: number; // How many other requirements does this unlock?\n}\n\n// Global augmentation for window object\ndeclare global {\n  interface Window {\n    UPSHOT_USER_SYLLABI: Syllabus[];\n  }\n}\n","import * as XLSX from \"xlsx\";\nimport {\n  type Syllabus,\n  type Requirement,\n  RequirementType,\n} from \"../../types/syllabiTypes\";\nimport { loggingService } from \"../../utils/loggingService\";\n\nconst SVC_MODULE = \"[SyllabusProcessor]\";\n\n// --- NEW: Robust Header Finding Logic ---\n/**\n * Finds the correct key in a data row object, ignoring case.\n * @param row - A row object from xlsx.utils.sheet_to_json.\n * @param targetHeader - The header we are looking for (e.g., \"Long Name\").\n * @returns The actual key from the object, or null if not found.\n */\nfunction findHeaderKey(row: object, targetHeader: string): string | null {\n  const lowerCaseTarget = targetHeader.toLowerCase();\n  for (const key in row) {\n    if (key.trim().toLowerCase() === lowerCaseTarget) {\n      return key;\n    }\n  }\n  return null;\n}\n\n// Helper function to map the 'Event Subtype' from the Excel file to our internal enum.\nfunction mapSubtypeToRequirementType(subtype: string): RequirementType {\n  const upperSubtype = subtype?.toUpperCase() || \"\";\n  if (upperSubtype.includes(\"BOARD\")) return RequirementType.Board;\n  const pqsTypes = [\"PQS\", \"FUNDAMENTAL\", \"SYSTEM\", \"ICW\", \"POWERPOINT\"];\n  if (pqsTypes.some((t) => upperSubtype.includes(t)))\n    return RequirementType.PQS;\n  const eventTypes = [\n    \"FLIGHT\",\n    \"LAB\",\n    \"WTT\",\n    \"PTT\",\n    \"WST\",\n    \"PST\",\n    \"ACFT GND EVENT\",\n  ];\n  if (eventTypes.some((t) => upperSubtype.includes(t)))\n    return RequirementType.Event;\n  return RequirementType.Other;\n}\n\n/** Helper to parse the syllabus identifier string.\n */\nfunction parseMasterSyllabusIdentifier(identifier: string | null | undefined): {\n  year: string;\n  position: string;\n  baseName: string;\n} {\n  const trimmedIdentifier = identifier?.trim() || \"UNKNOWN\";\n\n  let year = new Date().getFullYear().toString();\n  const yearMatch = trimmedIdentifier.match(/\\b(20\\d{2})\\b/);\n  if (yearMatch) year = yearMatch[0];\n\n  let position = \"UNKNOWN\";\n  const positionMatch = trimmedIdentifier.match(/\\b(PILOT|NFO|EWO|AAW|AAS)\\b/i);\n  if (positionMatch) position = positionMatch[0].toUpperCase();\n\n  return { year, position, baseName: trimmedIdentifier };\n}\n\n/**\n * Parses a SHARP Syllabus Export Excel file and creates a single, comprehensive Syllabus object.\n * @param file - The SHARP Syllabus Export .xlsx file.\n * @returns A promise that resolves to an array containing the single parsed Syllabus.\n */\nexport async function excelSyllabusProcessorService(\n  file: File\n): Promise<Syllabus[]> {\n  console.log(`${SVC_MODULE} Processing file: ${file.name}`);\n  try {\n    const data = await file.arrayBuffer();\n    const workbook = XLSX.read(data, { type: \"array\" });\n\n    if (workbook.SheetNames.length < 3) {\n      throw new Error(\n        `Expected at least 3 sheets, but the workbook only has ${workbook.SheetNames.length}.`\n      );\n    }\n\n    const syllabusSheet = workbook.Sheets[\"Syllabus and Stages\"];\n    const eventsSheet = workbook.Sheets[\"Syllabus Events\"];\n    const defaultSheet = workbook.Sheets[\"Default\"];\n\n    if (!syllabusSheet || !eventsSheet || !defaultSheet) {\n      throw new Error(\n        \"One or more required sheets (Syllabus and Stages, Syllabus Events, Default) are missing.\"\n      );\n    }\n\n    // --- Step 1: Initialize master syllabus ---\n    const syllabusSheetData: any[] = XLSX.utils.sheet_to_json(syllabusSheet, {\n      range: 2,\n    });\n    const syllabusInfo = syllabusSheetData[0] || {};\n    const syllabusNameKey = findHeaderKey(syllabusInfo, \"Syllabus Name\");\n    const syllabusTitleKey = findHeaderKey(syllabusInfo, \"Syllabus Title\");\n    const syllabusIdentifier = syllabusInfo[syllabusNameKey!] || file.name;\n    const parsedInfo = parseMasterSyllabusIdentifier(syllabusIdentifier);\n    const masterSyllabus: Syllabus = {\n      id: syllabusInfo[syllabusNameKey!] || file.name,\n      name: syllabusInfo[syllabusNameKey!] || \"Unknown Syllabus\",\n      displayName: syllabusInfo[syllabusTitleKey!] || \"Unknown Syllabus\",\n      position: parsedInfo.position.toUpperCase(),\n      year: parsedInfo.year,\n      baseLevel: \"200\",\n      requirements: [],\n      masterSyllabusIdentifier: null,\n    };\n    loggingService.logInfo(\n      `${SVC_MODULE} Initialized master syllabus: ${masterSyllabus.name}`\n    );\n\n    // --- Step 2: Parse \"Syllabus Events\" sheet with headers on Row 2 ---\n    const rawEventsData: any[][] = XLSX.utils.sheet_to_json(eventsSheet, {\n      header: 1, // Get raw data as an array of arrays\n      blankrows: false,\n    });\n\n    // As specified, headers are on Row 2, which corresponds to index 1.\n    const headerRowIndex = 1;\n\n    // Check if the file has enough rows to contain the specified header and data.\n    if (rawEventsData.length < headerRowIndex + 2) {\n      throw new Error(\n        `'Syllabus Events' sheet is invalid. Headers are expected on Row 2, but the sheet has fewer than 3 rows of data.`\n      );\n    }\n\n    // Directly get the headers from the 2nd row (index 1).\n    const headers = rawEventsData[headerRowIndex].map((h) =>\n      h ? String(h).trim() : \"\"\n    );\n\n    // All data begins on the row immediately after the headers.\n    const dataRows = rawEventsData.slice(headerRowIndex + 1);\n\n    // Manually construct the array of objects. This ensures all columns are read.\n    const eventsSheetData = dataRows\n      .map((row) => {\n        // Skip rows that are completely empty\n        if (!row || row.length === 0 || row.every((cell) => !cell)) {\n          return null;\n        }\n        const rowObject: { [key: string]: any } = {};\n        headers.forEach((header, index) => {\n          if (header) {\n            // Only process columns that have a header.\n            rowObject[header] = row[index];\n          }\n        });\n        return rowObject;\n      })\n      .filter((row): row is { [key: string]: any } => row !== null);\n    const requirementsMap = new Map<string, Requirement>();\n\n    if (eventsSheetData.length > 0) {\n      const firstReqRow = eventsSheetData[5];\n      // Find all the header keys we need, case-insensitively\n      const longNameKey = findHeaderKey(firstReqRow, \"Long name\");\n      const shortNameKey = findHeaderKey(firstReqRow, \"Short Name\");\n      const parentKey = findHeaderKey(firstReqRow, \"Parent\");\n      const subtypeKey = findHeaderKey(firstReqRow, \"Event Subtype\");\n      const prereqsKey = findHeaderKey(firstReqRow, \"Prerequisites\");\n      const requiredKey = findHeaderKey(firstReqRow, \"Required\");\n\n      if (!longNameKey || !shortNameKey) {\n        throw new Error(\n          \"Could not find 'Long name' or 'Short Name' column in 'Syllabus Events' sheet.\"\n        );\n      }\n      console.log(\n        `${SVC_MODULE} Processing row: ${JSON.stringify(eventsSheetData[0])}`\n      );\n      for (const row of eventsSheetData) {\n        const shortName = row[shortNameKey];\n        if (!shortName) continue; // Use Short Name as the key existence check\n\n        const longName = row[longNameKey] || shortName; // Fallback to short name if long name is empty\n        const levelMatch = String(row[parentKey!]).match(/\\d+/);\n        const level = levelMatch ? levelMatch[0] : \"0\";\n        const requiredValue = requiredKey ? row[requiredKey] || \"\" : \"\";\n        let isDefaultWaived = requiredValue.toUpperCase() !== \"X\";\n\n        if (row[subtypeKey!].includes(\"ICW\")) {\n          isDefaultWaived = true;\n        }\n        const newRequirement: Requirement = {\n          id: shortName,\n          name: shortName,\n          displayName: shortName,\n          description: longName,\n          level: level,\n          type: mapSubtypeToRequirementType(row[subtypeKey!]),\n          rawSharpEventSubtype: row[subtypeKey!],\n          prerequisites: ((row[prereqsKey!] || \"\") as string)\n            .split(\"\\n\")\n            .filter(Boolean)\n            .map((prereqString: string) => {\n              const parts = prereqString.split(\"/\");\n              if (parts.length < 3) return null;\n              let eventName = parts[parts.length - 1].trim();\n              eventName = eventName.replace(/\\s*\\((Event|PQS).*/i, \"\").trim();\n              return eventName;\n            })\n            .filter((p): p is string => !!p),\n          isDefaultWaived: isDefaultWaived,\n          // sequence will be added later from the \"Default\" sheet\n        };\n        console.log(\n          `${SVC_MODULE} Parsed requirement: ${newRequirement.id} - ${\n            newRequirement.description\n          }: Level ${newRequirement.level}, Type ${\n            newRequirement.type\n          }, Prereqs: [${newRequirement.prerequisites?.join()}]`\n        );\n        masterSyllabus.requirements.push(newRequirement);\n        // Use the short name as the key for the map as well\n        requirementsMap.set(shortName, newRequirement);\n      }\n    }\n    loggingService.logInfo(\n      `${SVC_MODULE} Parsed ${masterSyllabus.requirements.length} requirements from 'Syllabus Events'.`\n    );\n\n    // --- Step 3: Add sequence numbers from \"Default\" sheet ---\n    const defaultSheetData: any[] = XLSX.utils.sheet_to_json(defaultSheet, {\n      range: 1,\n    });\n    if (defaultSheetData.length > 0) {\n      const firstDefRow = defaultSheetData[0];\n      const eventKey = findHeaderKey(firstDefRow, \"Syllabus event\");\n      const seqKey = findHeaderKey(firstDefRow, \"Sequence\");\n\n      if (eventKey && seqKey) {\n        for (const row of defaultSheetData) {\n          const requirementIdFromSheet = row[eventKey]\n            ?.split(\"/\")\n            .pop()\n            ?.trim();\n          const requirement = masterSyllabus.requirements.find((r) =>\n            r.name.includes(requirementIdFromSheet)\n          );\n\n          if (requirement && row[seqKey]) {\n            requirement.sequence = parseInt(row[seqKey], 10);\n          }\n        }\n      }\n    }\n    loggingService.logInfo(\n      `${SVC_MODULE} Added sequence data from 'Default' sheet.`\n    );\n    return [masterSyllabus];\n  } catch (error) {\n    loggingService.logError(\n      `${SVC_MODULE} Failed to process syllabus file.`,\n      error\n    );\n    return [];\n  }\n}\n","// src/stores/syllabiStore.ts\n\nimport { defineStore } from \"pinia\";\nimport { type Syllabus, type Requirement } from \"../types/syllabiTypes\";\nimport { DEFAULT_SYLLABI } from \"../config/syllabiDefaults\";\nimport { loggingService } from \"../utils/loggingService\";\nimport { saveAs } from \"file-saver\";\nimport { deepClone } from \"@/utils/dataUtils\";\nimport { excelSyllabusProcessorService } from \"../core/excelProcessorServices/syllabusProcessorService\";\nimport { useUiStore } from \"./uiStore\";\n\nexport function getInitialSyllabi(): Syllabus[] {\n  // Check if the correct variable exists and is an array.\n  if (\n    typeof window.UPSHOT_USER_SYLLABI !== \"undefined\" &&\n    Array.isArray(window.UPSHOT_USER_SYLLABI)\n  ) {\n    // Log the success message you were seeing in the console.\n    loggingService.logInfo(\n      \"User syllabi loaded successfully from window.UPSHOT_USER_SYLLABI.\"\n    );\n    try {\n      // Perform a deep copy to prevent bugs with Vue's reactivity system.\n      return JSON.parse(JSON.stringify(window.UPSHOT_USER_SYLLABI));\n    } catch (e) {\n      loggingService.logError(\n        \"Error parsing user syllabi data from window.UPSHOT_USER_SYLLABI.\",\n        e\n      );\n      return []; // Return empty array on parsing error\n    }\n  }\n\n  // This will run if the `UPSHOT_USER_SYLLABI` variable isn't found.\n  loggingService.logWarn(\n    \"window.UPSHOT_USER_SYLLABI not found. No user syllabi loaded.\"\n  );\n  return [];\n}\n\nexport const useSyllabiStore = defineStore(\"syllabi\", {\n  state: () => ({\n    allSyllabi: getInitialSyllabi(),\n    isLoading: false,\n    isDirty: false,\n    lastLoadedSyllabiSnapshot: JSON.stringify(getInitialSyllabi()),\n    pendingSyllabusForConfirmation: null as Syllabus | null, // ADD THIS LINE\n  }),\n  getters: {\n    getSyllabusById:\n      (state) =>\n      (id: string): Syllabus | undefined => {\n        return state.allSyllabi.find((s) => s.id === id);\n      },\n    findSyllabus:\n      (state) =>\n      (position: string, year: string): Syllabus | undefined => {\n        return state.allSyllabi.find(\n          (s) =>\n            s.position.toUpperCase().trim() === position.toUpperCase().trim() &&\n            s.year.trim() === year.trim()\n        );\n      },\n    getRequirementsForSyllabus:\n      (state) =>\n      (position: string, year: string, level?: string): Requirement[] => {\n        const syllabus = state.allSyllabi.find(\n          (s) =>\n            s.position.toUpperCase().trim() === position.toUpperCase().trim() &&\n            s.year.trim() === year.trim()\n        );\n        if (!syllabus) return [];\n        return level === undefined\n          ? syllabus.requirements\n          : syllabus.requirements.filter(\n              (req) => String(req.level).trim() === level.trim()\n            );\n      },\n    getAvailablePositions: (state): string[] => {\n      const positions = new Set(state.allSyllabi.map((s) => s.position.trim()));\n      return Array.from(positions).sort();\n    },\n    getAvailableYearsForPosition:\n      (state) =>\n      (position: string): string[] => {\n        const years = new Set(\n          state.allSyllabi\n            .filter(\n              (s) =>\n                s.position.toUpperCase().trim() ===\n                position.toUpperCase().trim()\n            )\n            .map((s) => s.year.trim())\n        );\n        return Array.from(years).sort((a, b) => b.localeCompare(a));\n      },\n    getAvailableLevels:\n      (state) =>\n      (position: string, year: string): string[] => {\n        const levels = new Set<string>();\n        const syllabus = state.allSyllabi.find(\n          (s) =>\n            s.position.toUpperCase().trim() === position.toUpperCase().trim() &&\n            s.year.trim() === year.trim()\n        );\n        if (syllabus) {\n          syllabus.requirements.forEach((req) =>\n            levels.add(String(req.level).trim())\n          );\n        }\n        return Array.from(levels).sort((a, b) =>\n          a.localeCompare(b, undefined, { numeric: true })\n        );\n      },\n  },\n  actions: {\n    setPendingSyllabus(syllabus: Syllabus | null) {\n      this.pendingSyllabusForConfirmation = syllabus;\n    },\n    acceptPendingSyllabus() {\n      if (this.pendingSyllabusForConfirmation) {\n        this.addSyllabus(this.pendingSyllabusForConfirmation);\n        this.pendingSyllabusForConfirmation = null;\n      }\n    },\n    markAsDirty() {\n      this.isDirty = true;\n    },\n    markAsSaved() {\n      this.isDirty = false;\n      this.lastLoadedSyllabiSnapshot = JSON.stringify(this.allSyllabi);\n    },\n    addSyllabus(syllabus: Syllabus) {\n      this.allSyllabi.push(syllabus);\n      this.markAsDirty();\n    },\n    updateSyllabus(id: string, updatedSyllabus: Syllabus) {\n      const index = this.allSyllabi.findIndex((s) => s.id === id);\n      if (index !== -1) {\n        this.allSyllabi[index] = updatedSyllabus;\n        this.markAsDirty();\n      }\n    },\n    removeSyllabus(id: string) {\n      this.allSyllabi = this.allSyllabi.filter((s) => s.id !== id);\n      this.markAsDirty();\n    },\n    async importSyllabiFromSharpExport(file: File) {\n      const uiStore = useUiStore();\n      uiStore.addNotification({\n        message: `Importing syllabus from \"${file.name}\"...`,\n        type: \"info\",\n        duration: 3000,\n      });\n      uiStore.setGlobalLoading(true);\n      loggingService.logInfo(\n        `Attempting to import syllabi from SHARP export: ${file.name}`\n      );\n      try {\n        const parsedSyllabi = await excelSyllabusProcessorService(file);\n        if (parsedSyllabi.length > 0) {\n          this.setSyllabi(parsedSyllabi);\n          loggingService.logInfo(\n            `${parsedSyllabi.length} syllabi successfully parsed and loaded from SHARP file: ${file.name}`\n          );\n          uiStore.addNotification({\n            message: `${parsedSyllabi.length} syllabi imported successfully from \"${file.name}\". Please review and download to persist.`,\n            type: \"success\",\n            duration: 7000,\n          });\n        } else {\n          throw new Error(\"Syllabus processor returned no syllabi.\");\n        }\n      } catch (error) {\n        loggingService.logError(\n          `Failed to import and process SHARP syllabus file: ${file.name}`,\n          error\n        );\n        uiStore.addNotification({\n          message: \"Failed to import syllabus file. See console for details.\",\n          type: \"error\",\n        });\n      } finally {\n        uiStore.setGlobalLoading(false);\n      }\n    },\n    downloadSyllabi() {\n      const fileContent =\n        \"// UPSHOT User Syllabi File\\nwindow.UPSHOT_USER_SYLLABI = \" +\n        JSON.stringify(this.allSyllabi, null, 2) +\n        \";\";\n      const blob = new Blob([fileContent], {\n        type: \"text/javascript;charset=utf-8\",\n      });\n      saveAs(blob, \"user_syllabi.js\");\n      this.markAsSaved();\n    },\n    setSyllabi(syllabi: Syllabus[]) {\n      this.allSyllabi = syllabi;\n      this.markAsSaved();\n    },\n  },\n});\n","import {\n  type AppConfig,\n  type TrainingDepartmentPersonnelSetting,\n  type PositionLevelDeadlines,\n  PositionSetting,\n  type ColorScheme,\n} from \"../types/appConfigTypes\";\n\nconst defaultColorScheme: ColorScheme = {\n  primary: {\n    DEFAULT: \"#4f46e5\",\n    hover: \"#4338ca\",\n    foreground: \"#ffffff\",\n  },\n  secondary: {\n    DEFAULT: \"#e5e7eb\",\n    hover: \"#d1d5db\",\n    foreground: \"#111827\",\n  },\n  accent: {\n    DEFAULT: \"#ec4899\",\n    hover: \"#db2777\",\n    foreground: \"#ffffff\",\n  },\n  info: {\n    DEFAULT: \"#3b82f6\",\n    foreground: \"#ffffff\",\n  },\n  warning: {\n    DEFAULT: \"#f59e0b\",\n    foreground: \"#111827\",\n  },\n  action: {\n    DEFAULT: \"#22c55e\",\n    foreground: \"#ffffff\",\n  },\n  caution: {\n    DEFAULT: \"#ef4444\",\n    foreground: \"#ffffff\",\n  },\n};\n\n// Default Training Department Personnel\nconst defaultTrainingDepartment: TrainingDepartmentPersonnelSetting = {\n  squadron: \"YOUR SQUADRON\",\n  departmentHead: \"Dept Head Name\",\n  pilotLead: \"Pilot Lead Name\",\n  nfoLead: \"NFO Lead Name\",\n  aawLead: \"AAW Lead Name\",\n  ewoLead: \"EWO Lead Name\",\n};\n\n// Define default deadlines for each position and level\nconst pilotDeadlines: PositionLevelDeadlines = {\n  \"200\": { targetMonths: 6, deadlineMonths: 12 },\n  \"300\": { targetMonths: 10, deadlineMonths: 18 },\n  \"400\": { targetMonths: 12, deadlineMonths: 24 }, // Example\n};\n\nconst nfoDeadlines: PositionLevelDeadlines = {\n  \"200\": { targetMonths: 5, deadlineMonths: 10 },\n  \"300\": { targetMonths: 9, deadlineMonths: 16 },\n  \"400\": { targetMonths: 11, deadlineMonths: 22 }, // Example\n};\n\nconst aawDeadlines: PositionLevelDeadlines = {\n  // Assuming AAW is a distinct position track\n  \"200\": { targetMonths: 7, deadlineMonths: 14 },\n  \"300\": { targetMonths: 8, deadlineMonths: 18 },\n  // Add \"400\" if applicable\n};\n\nconst ewoDeadlines: PositionLevelDeadlines = {\n  // Assuming EWO is a distinct position track\n  \"200\": { targetMonths: 6, deadlineMonths: 13 },\n  \" 300\": { targetMonths: 10, deadlineMonths: 19 },\n  // Add 400 if applicable\n};\n\nconst ewoSettings: PositionSetting = {\n  useDerivedLevels: true,\n  deadlines: ewoDeadlines,\n};\nconst aawSettings: PositionSetting = {\n  useDerivedLevels: true,\n  deadlines: aawDeadlines,\n};\nconst nfoSettings: PositionSetting = {\n  useDerivedLevels: true,\n  deadlines: nfoDeadlines,\n};\nconst pilotSettings: PositionSetting = {\n  useDerivedLevels: true,\n  deadlines: pilotDeadlines,\n};\n\nexport const defaultConfig: AppConfig = {\n  version: 1,\n  positionSettings: {\n    PILOT: pilotSettings,\n    NFO: nfoSettings,\n    AAW: aawSettings,\n    EWO: ewoSettings,\n    // Add other positions as needed\n  },\n  useRoundedTrainingStartDate: true,\n  trainingDepartment: defaultTrainingDepartment,\n  colorScheme: defaultColorScheme,\n};\n","// Helper to deep clone to avoid unintentional state mutations by reference\nexport function deepClone<T>(obj: T): T {\n  if (obj === null || typeof obj !== \"object\") {\n    return obj;\n  }\n  // Handle Date objects\n  if (obj instanceof Date) {\n    return new Date(obj.getTime()) as any;\n  }\n  // Handle Arrays\n  if (Array.isArray(obj)) {\n    return obj.map((item) => deepClone(item)) as any;\n  }\n  // Handle Objects\n  const clonedObj = {} as T;\n  for (const key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      clonedObj[key] = deepClone(obj[key]);\n    }\n  }\n  return clonedObj;\n}\n","/**\n * @file This Pinia store manages the application's global configuration.\n * It is responsible for loading settings and providing access to them for other services.\n */\n\nimport { defineStore } from \"pinia\";\nimport {\n  type AppConfig,\n  type CurveDeadlineSetting,\n  type PositionSetting,\n  type TrainingDepartmentPersonnelSetting,\n} from \"../types/appConfigTypes\";\nimport { defaultConfig } from \"../config/appConfigDefaults\";\nimport { loggingService } from \"../utils/loggingService\";\nimport { saveAs } from \"file-saver\";\nimport { deepClone } from \"@/utils/dataUtils\";\nimport { useUiStore } from \"./uiStore\";\n\nfunction getInitialConfiguration(): AppConfig {\n  let effectiveConfig = deepClone(defaultConfig);\n\n  const userConfig = window.UPSHOT_USER_APP_CONFIG;\n  console.log(\"User config from window object:\", userConfig);\n  if (userConfig && typeof userConfig === \"object\") {\n    loggingService.logInfo(\n      \"User application configuration found. Merging with defaults.\"\n    );\n    // A simple merge. A more robust solution might handle deep merging.\n    effectiveConfig = { ...effectiveConfig, ...userConfig };\n  } else {\n    loggingService.logInfo(\n      \"No user configuration found. Using default application settings.\"\n    );\n  }\n  return effectiveConfig;\n}\n\nexport const useAppConfigStore = defineStore(\"appConfig\", {\n  state: () => ({\n    config: getInitialConfiguration(),\n    isDirty: false,\n  }),\n\n  getters: {\n    /**\n     * Returns the entire current configuration object.\n     */\n    currentConfig: (state): AppConfig => state.config,\n\n    /**\n     * CRITICAL GETTER RESTORED:\n     * Retrieves the specific deadline settings for a given position and level.\n     * This is used by logic services and chart components.\n     * @returns A CurveDeadlineSetting object or null if not found.\n     */\n    getDeadlinesForPositionLevel:\n      (state) =>\n      (position: string, level: string): CurveDeadlineSetting | null => {\n        return (\n          state.config.positionSettings[position]?.deadlines[level] || null\n        );\n      },\n\n    /**\n     * Returns a list of all positions that have settings defined in the config.\n     */\n    getPositionsWithSettings: (state): string[] => {\n      return Object.keys(state.config.positionSettings);\n    },\n  },\n\n  actions: {\n    /**\n     * MODIFICATION: This action now iterates through the nested color objects.\n     */\n    applyColorScheme() {\n      const root = document.documentElement;\n      if (this.config.colorScheme) {\n        for (const [name, themeValue] of Object.entries(\n          this.config.colorScheme\n        )) {\n          // Example: name = \"primary\", themeValue = { DEFAULT: \"#...\", hover: \"#...\", foreground: \"#...\" }\n          for (const [variant, color] of Object.entries(themeValue)) {\n            // Example: variant = \"DEFAULT\", color = \"#...\"\n            // Sets CSS variable like --color-primary-DEFAULT = #...\n            root.style.setProperty(`--color-${name}-${variant}`, color);\n          }\n        }\n      }\n    },\n    /**\n     * Updates a specific part of the configuration and marks it as dirty.\n     */\n    updateConfig(partialConfig: Partial<AppConfig>) {\n      this.config = { ...this.config, ...partialConfig };\n      this.applyColorScheme();\n      this.isDirty = true;\n      loggingService.logInfo(\"Application configuration updated by user.\");\n    },\n\n    /**\n     * Updates the training department settings.\n     * @param {keyof TrainingDepartmentPersonnelSetting} key - The property to update.\n     * @param {string | null} value - The new value.\n     */\n    updateTrainingDepartmentProperty(\n      key: keyof TrainingDepartmentPersonnelSetting,\n      value: string | null\n    ) {\n      if (this.config.trainingDepartment) {\n        (this.config.trainingDepartment[key] as string | null) = value;\n        this.isDirty = true;\n      }\n    },\n    /**\n     * Updates the flag for rounding start dates.\n     * @param {boolean} value - The new value.\n     */\n    updateUseRoundedTrainingStartDate(value: boolean) {\n      this.config.useRoundedTrainingStartDate = value;\n      this.isDirty = true;\n    },\n    /**\n     * NEW ACTION:\n     * Updates the curve deadline settings for a specific position and level.\n     * @param {string} positionKey - The position identifier (e.g., 'PILOT').\n     * @param {number} level - The level identifier (e.g., 200).\n     * @param {Partial<CurveDeadlineSetting>} settings - The settings to update.\n     */\n    updateCurveDeadlineSetting(\n      positionKey: string,\n      level: number,\n      settings: Partial<CurveDeadlineSetting>\n    ) {\n      if (\n        this.config.positionSettings[positionKey] &&\n        this.config.positionSettings[positionKey].deadlines[level]\n      ) {\n        const currentSettings =\n          this.config.positionSettings[positionKey].deadlines[level];\n        this.config.positionSettings[positionKey].deadlines[level] = {\n          ...currentSettings,\n          ...settings,\n        };\n        this.isDirty = true;\n      }\n    },\n    /**\n     * Resets the entire configuration back to the application's defaults.\n     */\n    resetToDefaults() {\n      this.config = deepClone(defaultConfig);\n      this.isDirty = true;\n      loggingService.logInfo(\"Configuration has been reset to defaults.\");\n      useUiStore().addNotification({\n        message:\n          \"Configuration reset to defaults. Download to save these changes.\",\n        type: \"info\",\n      });\n    },\n\n    /**\n     * Triggers a browser download of the current configuration as a 'user_config.js' file.\n     */\n    downloadCurrentConfig() {\n      try {\n        const configString = JSON.stringify(this.config, null, 2);\n        const fileContent = `// UPSHOT User Configuration File\\n// Place this file in a 'config' folder next to your index.html file.\\nwindow.UPSHOT_USER_APP_CONFIG = ${configString};`;\n        const blob = new Blob([fileContent], {\n          type: \"application/javascript;charset=utf-8\",\n        });\n\n        saveAs(blob, \"user_config.js\");\n\n        this.isDirty = false;\n        loggingService.logInfo(\"Configuration downloaded successfully.\");\n      } catch (error) {\n        loggingService.logError(\n          \"Error downloading application configuration:\",\n          error\n        );\n        useUiStore().addNotification({\n          message: \"Failed to download configuration file.\",\n          type: \"error\",\n        });\n      }\n    },\n  },\n});\n","import { type Identifiable, type Named } from \"./commonTypes\";\nimport {\n  type CompletedItemRecord,\n  type PrioritizedRequirement,\n} from \"./syllabiTypes\";\n\n// This interface is now correctly located here.\nexport interface DetailedCompletionRecord {\n  event: string;\n  date: Date;\n  instructor?: string;\n  grade?: number | string;\n  status?: string;\n}\n\nexport enum ReadinessStatus {\n  ReadyForNextLevel = \"Ready for Next Level\",\n  OnTrack = \"On Track\",\n  AtRisk = \"At Risk\",\n  BehindSchedule = \"Behind Schedule\",\n  Blocked = \"Blocked\",\n  Unknown = \"Unknown\",\n}\n\nexport interface Upgrader extends Identifiable, Named {\n  // CORE IDENTITY\n  id: string;\n  name: string;\n  displayName: string;\n  rank?: string;\n  startDate: Date;\n\n  // USER-MANAGED GOALS\n  assignedPosition: string;\n  assignedSyllabusYear: string;\n  targetQualificationLevel: number;\n  onWaiver?: boolean;\n  manuallyUnlockedLevels?: number[];\n\n  // SHARP-DERIVED DATA\n  currentSharpPqsVersion?: string | null;\n  pqsVersionStatus?: string | null;\n  actcLevelData?: { [level: string]: { status?: string | null } };\n  rawCompletions: DetailedCompletionRecord[];\n\n  // APPLICATION-CALCULATED RESULTS\n  allCompletions: CompletedItemRecord[];\n  derivedPqsWorkingLevel?: string;\n  derivedEventsWorkingLevel?: string;\n  pqsProgressPercentage?: number;\n  eventsProgressPercentage?: number;\n  pacingAgainstTargetDays?: number;\n  pacingAgainstDeadlineDays?: number;\n  projectedPqsCompletionDate?: Date;\n  projectedEventsCompletionDate?: Date;\n  projectedTotalCompletionDate?: Date;\n  readinessAgainstTarget?: ReadinessStatus;\n  readinessAgainstDeadline?: ReadinessStatus;\n}\n","import { type Upgrader } from \"../types/personnelTypes\";\nimport { type Requirement } from \"../types/syllabiTypes\";\n\n/**\n * Checks if an upgrader has met all the prerequisite requirements for a given item.\n * @param requirement - The requirement to check prerequisites for.\n * @param upgrader - The upgrader whose completions will be checked.\n * @returns `true` if all prerequisites are met, otherwise `false`.\n */\nexport function arePrerequisitesMet(\n  requirement: Requirement,\n  upgrader: Upgrader\n): boolean {\n  // If there are no prerequisites defined, they are automatically met.\n  if (!requirement.prerequisites || requirement.prerequisites.length === 0) {\n    return true;\n  }\n\n  // Create a Set of completed event names for fast lookups.\n  const completedEventNames = new Set(\n    upgrader.rawCompletions.map((c) => c.event.toUpperCase())\n  );\n\n  // Check if every prerequisite name is present in the set of completed events.\n  return requirement.prerequisites.every((prereqName) =>\n    completedEventNames.has(prereqName.toUpperCase())\n  );\n}\n\n/**\n * Determines if a specific requirement is considered waived for a given upgrader.\n * This checks for multiple waiver conditions.\n * @param requirement - The requirement to check.\n * @param upgrader - The upgrader.\n * @returns `true` if the requirement is waived, otherwise `false`.\n */\nexport function isRequirementWaived(\n  requirement: Requirement,\n  upgrader: Upgrader\n): boolean {\n  // Condition 1: Check for an explicit, individual waiver in the SHARP data.\n  // This is the highest priority waiver.\n  const completionRecord = upgrader.rawCompletions.find(\n    (c) => c.event.toUpperCase() === requirement.name.toUpperCase()\n  );\n  if (completionRecord?.status?.toUpperCase().includes(\"WAIVED\")) {\n    return true;\n  }\n\n  // Condition 2: Check for a default syllabus waiver combined with a personal waiver status.\n  // This is a more general waiver condition.\n  if (upgrader.onWaiver && requirement.isDefaultWaived) {\n    return true;\n  }\n\n  return false;\n}\n\n/**\n * Checks if a requirement is satisfied, meaning it is either completed or waived.\n * @param requirement - The requirement to check.\n * @param upgrader - The upgrader.\n * @returns `true` if the requirement is satisfied, otherwise `false`.\n */\nexport function isRequirementSatisfied(\n  requirement: Requirement,\n  upgrader: Upgrader\n): boolean {\n  // A requirement is satisfied if it's waived...\n  if (isRequirementWaived(requirement, upgrader)) {\n    return true;\n  }\n\n  // ...or if it has been completed.\n  const isCompleted = upgrader.rawCompletions.some(\n    (c) => c.event.toUpperCase() === requirement.name.toUpperCase()\n  );\n\n  return isCompleted;\n}\n","// src/core/trainingLogicService.ts\n\nimport { type Upgrader, ReadinessStatus } from \"../types/personnelTypes\";\nimport {\n  type Syllabus,\n  type Requirement,\n  RequirementType,\n  type PrioritizedRequirement,\n} from \"../types/syllabiTypes\";\nimport { type AppConfig } from \"../types/appConfigTypes\";\nimport { addDays, daysBetween, getTodayUtc } from \"../utils/dateUtils\";\nimport {\n  arePrerequisitesMet,\n  isRequirementWaived,\n} from \"./syllabusLogicService\";\n\nexport function getRemainingRequirements(\n  upgrader: Upgrader,\n  syllabus: Syllabus\n): Requirement[] {\n  if (!upgrader || !syllabus?.requirements) return [];\n  const completedEventNames = new Set(\n    upgrader.rawCompletions.map((c) => c.event.toUpperCase())\n  );\n  return syllabus.requirements.filter((req) => {\n    const waived = isRequirementWaived(req, upgrader);\n    const completed = completedEventNames.has(req.name.toUpperCase());\n    return !waived && !completed;\n  });\n}\n\nexport function calculateDerivedWorkingLevels(\n  upgrader: Upgrader,\n  syllabus: Syllabus,\n  appConfig: AppConfig\n): void {\n  const useDerivedLevels =\n    appConfig.positionSettings[upgrader.assignedPosition]?.useDerivedLevels ===\n    true;\n\n  if (!useDerivedLevels) {\n    upgrader.derivedPqsWorkingLevel = String(\n      upgrader.targetQualificationLevel\n    ).trim();\n    upgrader.derivedEventsWorkingLevel = String(\n      upgrader.targetQualificationLevel\n    ).trim();\n    return;\n  }\n\n  const completedEventNames = new Set(\n    upgrader.rawCompletions.map((c) => c.event.toUpperCase())\n  );\n\n  const levelsToCheck = Array.from(\n    new Set(syllabus.requirements.map((r) => String(r.level).trim()))\n  ).sort((a, b) => a.localeCompare(b, undefined, { numeric: true }));\n\n  let highestPqsLevelCompleted = \"0\";\n\n  for (const level of levelsToCheck) {\n    const isUnlocked =\n      parseInt(level) < 400 ||\n      upgrader.manuallyUnlockedLevels?.includes(parseInt(level));\n    if (!isUnlocked) continue;\n\n    const pqsForLevel = syllabus.requirements.filter(\n      (r) =>\n        String(r.level).trim() === level &&\n        r.type === RequirementType.PQS &&\n        !isRequirementWaived(r, upgrader)\n    );\n    const allIndividualPqsItemsComplete =\n      pqsForLevel.length > 0 &&\n      pqsForLevel.every((req) =>\n        completedEventNames.has(req.name.toUpperCase())\n      );\n    const actcLevelStatus =\n      upgrader.actcLevelData?.[level]?.status?.toUpperCase();\n    const isActcLevelComplete =\n      actcLevelStatus === \"COMPLETE\" || actcLevelStatus === \"ACTIVE\";\n\n    if (allIndividualPqsItemsComplete || isActcLevelComplete) {\n      highestPqsLevelCompleted = level;\n    }\n  }\n\n  const nextLevelIndex = levelsToCheck.indexOf(highestPqsLevelCompleted) + 1;\n  const nextLevel =\n    nextLevelIndex < levelsToCheck.length\n      ? levelsToCheck[nextLevelIndex]\n      : highestPqsLevelCompleted;\n\n  let finalWorkingLevel =\n    highestPqsLevelCompleted !== \"0\"\n      ? nextLevel\n      : String(syllabus.baseLevel).trim();\n\n  if (parseInt(finalWorkingLevel) >= 400) {\n    finalWorkingLevel = highestPqsLevelCompleted;\n  }\n\n  upgrader.derivedPqsWorkingLevel = finalWorkingLevel;\n  upgrader.derivedEventsWorkingLevel = finalWorkingLevel;\n}\n\nexport function calculateProgressMetrics(\n  upgrader: Upgrader,\n  syllabus: Syllabus\n): void {\n  const completedEventNames = new Set(\n    upgrader.rawCompletions.map((c) => c.event.toUpperCase())\n  );\n  const workingLevel =\n    upgrader.derivedPqsWorkingLevel?.trim() ||\n    String(syllabus.baseLevel).trim();\n\n  const requirementsForLevel = syllabus.requirements.filter(\n    (r) =>\n      String(r.level).trim() === workingLevel &&\n      !isRequirementWaived(r, upgrader)\n  );\n\n  const pqsForLevel = requirementsForLevel.filter(\n    (r) => r.type === RequirementType.PQS\n  );\n  if (pqsForLevel.length > 0) {\n    // FIX: Calculate based on difficulty score, defaulting to 1 if not present\n    const completedPqsDifficulty = pqsForLevel\n      .filter((r) => completedEventNames.has(r.name.toUpperCase()))\n      .reduce((sum, r) => sum + (r.difficulty || 1), 0);\n    const totalPqsDifficulty = pqsForLevel.reduce(\n      (sum, r) => sum + (r.difficulty || 1),\n      0\n    );\n    upgrader.pqsProgressPercentage =\n      totalPqsDifficulty > 0\n        ? (completedPqsDifficulty / totalPqsDifficulty) * 100\n        : 100;\n  } else {\n    upgrader.pqsProgressPercentage = 100;\n  }\n\n  const eventsForLevel = requirementsForLevel.filter(\n    (r) => r.type === RequirementType.Event\n  );\n  if (eventsForLevel.length > 0) {\n    // FIX: Apply the same difficulty logic to events\n    const completedEventsDifficulty = eventsForLevel\n      .filter((r) => completedEventNames.has(r.name.toUpperCase()))\n      .reduce((sum, r) => sum + (r.difficulty || 1), 0);\n    const totalEventsDifficulty = eventsForLevel.reduce(\n      (sum, r) => sum + (r.difficulty || 1),\n      0\n    );\n    upgrader.eventsProgressPercentage =\n      totalEventsDifficulty > 0\n        ? (completedEventsDifficulty / totalEventsDifficulty) * 100\n        : 100;\n  } else {\n    upgrader.eventsProgressPercentage = 100;\n  }\n}\n\nfunction _calculateTargetPacing(\n  upgrader: Upgrader,\n  syllabus: Syllabus,\n  appConfig: AppConfig\n): number {\n  const deltas: number[] = [];\n  const positionSettings =\n    appConfig.positionSettings[upgrader.assignedPosition];\n  if (!positionSettings) return 0;\n\n  for (const completion of upgrader.rawCompletions) {\n    const requirement = syllabus.requirements.find(\n      (r) => r.name.toUpperCase() === completion.event.toUpperCase()\n    );\n    if (!requirement) continue;\n\n    const targetMonths =\n      positionSettings.deadlines[requirement.level]?.targetMonths;\n    if (targetMonths == null) continue;\n\n    const targetDate = addDays(upgrader.startDate, targetMonths * 30.44);\n    const delta = daysBetween(completion.date, targetDate);\n    deltas.push(delta);\n  }\n\n  if (deltas.length === 0) return 0;\n  return Math.round(deltas.reduce((a, b) => a + b, 0) / deltas.length);\n}\n\nfunction _calculateDeadlinePacing(\n  upgrader: Upgrader,\n  syllabus: Syllabus,\n  appConfig: AppConfig\n): number {\n  const positionKey = upgrader.assignedPosition;\n  const level = upgrader.derivedPqsWorkingLevel || syllabus.baseLevel;\n  const deadlineMonths =\n    appConfig.positionSettings[positionKey]?.deadlines[level]?.deadlineMonths ||\n    0;\n  if (deadlineMonths === 0) return 0;\n\n  let finalDeadline = addDays(upgrader.startDate, deadlineMonths * 30.44);\n  if (upgrader.onWaiver) finalDeadline = addDays(finalDeadline, 90);\n\n  const totalTimeInDays = daysBetween(upgrader.startDate, finalDeadline);\n  const elapsedTimeInDays = daysBetween(upgrader.startDate, getTodayUtc());\n  if (totalTimeInDays <= 0 || elapsedTimeInDays < 0) return 0;\n\n  const expectedProgressPercent = Math.min(\n    elapsedTimeInDays / totalTimeInDays,\n    1\n  );\n  const totalRequirements = syllabus.requirements.filter(\n    (r) => !isRequirementWaived(r, upgrader)\n  ).length;\n  const expectedCompletions = totalRequirements * expectedProgressPercent;\n  const actualCompletions = upgrader.rawCompletions.length;\n  const completionDelta = actualCompletions - expectedCompletions;\n  const completionRatePerDay =\n    totalTimeInDays > 0 ? totalRequirements / totalTimeInDays : 0;\n\n  return completionRatePerDay > 0\n    ? Math.round(completionDelta / completionRatePerDay)\n    : 0;\n}\n\nexport function calculatePacing(\n  upgrader: Upgrader,\n  syllabus: Syllabus,\n  appConfig: AppConfig\n): void {\n  upgrader.pacingAgainstTargetDays = upgrader.onWaiver\n    ? undefined\n    : _calculateTargetPacing(upgrader, syllabus, appConfig);\n  upgrader.pacingAgainstDeadlineDays = _calculateDeadlinePacing(\n    upgrader,\n    syllabus,\n    appConfig\n  );\n}\n\nexport function calculateProjections(\n  upgrader: Upgrader,\n  syllabus: Syllabus,\n  appConfig: AppConfig\n): void {\n  const today = getTodayUtc();\n  const COMPLETION_THRESHOLD = 3;\n\n  const calculateVelocity = (reqType: RequirementType): number => {\n    const completions = upgrader.rawCompletions\n      .map((c) => ({\n        ...c,\n        req: syllabus.requirements.find(\n          (r) => r.name.toUpperCase() === c.event.toUpperCase()\n        ),\n      }))\n      .filter((c) => c.req?.type === reqType)\n      .sort((a, b) => a.date.getTime() - b.date.getTime());\n    if (completions.length >= COMPLETION_THRESHOLD) {\n      const timeSpan = daysBetween(\n        completions[0].date,\n        completions[completions.length - 1].date\n      );\n      if (timeSpan > 0) {\n        const totalDifficulty = completions.reduce(\n          (sum, c) => sum + (c.req?.difficulty || 1),\n          0\n        );\n        return totalDifficulty / timeSpan;\n      }\n    }\n    const requirementsOfType = syllabus.requirements.filter(\n      (r) => r.type === reqType && !r.isDefaultWaived\n    );\n    const totalDifficulty = requirementsOfType.reduce(\n      (sum, r) => sum + (r.difficulty || 1),\n      0\n    );\n    const goalMonths =\n      appConfig.positionSettings[upgrader.assignedPosition]?.deadlines[\n        syllabus.baseLevel\n      ]?.targetMonths || 12;\n    const goalDays = goalMonths * 30.44;\n    return goalDays > 0 ? totalDifficulty / goalDays : 0.1;\n  };\n\n  const pqsVelocity = calculateVelocity(RequirementType.PQS);\n  const eventsVelocity = calculateVelocity(RequirementType.Event);\n  const remaining = getRemainingRequirements(upgrader, syllabus);\n\n  const remainingPqsDifficulty = remaining\n    .filter((r) => r.type === RequirementType.PQS)\n    .reduce((sum, r) => sum + (r.difficulty || 1), 0);\n  if (pqsVelocity > 0) {\n    upgrader.projectedPqsCompletionDate = addDays(\n      today,\n      remainingPqsDifficulty / pqsVelocity\n    );\n  } else {\n    upgrader.projectedPqsCompletionDate = undefined;\n  }\n\n  const remainingEventsDifficulty = remaining\n    .filter(\n      (r) =>\n        r.type === RequirementType.Event || r.type === RequirementType.Board\n    )\n    .reduce((sum, r) => sum + (r.difficulty || 1), 0);\n  if (eventsVelocity > 0) {\n    upgrader.projectedEventsCompletionDate = addDays(\n      today,\n      remainingEventsDifficulty / eventsVelocity\n    );\n  } else {\n    upgrader.projectedEventsCompletionDate = undefined;\n  }\n\n  const pqsDate = upgrader.projectedPqsCompletionDate?.getTime() || 0;\n  const eventsDate = upgrader.projectedEventsCompletionDate?.getTime() || 0;\n  if (pqsDate > 0 || eventsDate > 0) {\n    upgrader.projectedTotalCompletionDate = new Date(\n      Math.max(pqsDate, eventsDate)\n    );\n  } else {\n    upgrader.projectedTotalCompletionDate = undefined;\n  }\n}\n\nfunction _getReadinessFromPacing(pacingDays?: number): ReadinessStatus {\n  if (pacingDays == null) return ReadinessStatus.Unknown;\n  if (pacingDays < -30) return ReadinessStatus.BehindSchedule;\n  if (pacingDays < 0) return ReadinessStatus.AtRisk;\n  return ReadinessStatus.OnTrack;\n}\n\nexport function calculateReadiness(\n  upgrader: Upgrader,\n  syllabus: Syllabus\n): void {\n  const remaining = getRemainingRequirements(upgrader, syllabus);\n  if (\n    remaining.length > 0 &&\n    remaining.every((req) => !arePrerequisitesMet(req, upgrader))\n  ) {\n    upgrader.readinessAgainstTarget = ReadinessStatus.Blocked;\n    upgrader.readinessAgainstDeadline = ReadinessStatus.Blocked;\n    return;\n  }\n\n  const numericDerivedLevel = parseInt(upgrader.derivedPqsWorkingLevel || \"0\");\n  if (numericDerivedLevel > upgrader.targetQualificationLevel) {\n    upgrader.readinessAgainstTarget = ReadinessStatus.ReadyForNextLevel;\n    upgrader.readinessAgainstDeadline = ReadinessStatus.ReadyForNextLevel;\n    return;\n  }\n\n  upgrader.readinessAgainstTarget = _getReadinessFromPacing(\n    upgrader.pacingAgainstTargetDays\n  );\n  upgrader.readinessAgainstDeadline = _getReadinessFromPacing(\n    upgrader.pacingAgainstDeadlineDays\n  );\n}\n\nexport function getPrioritizedRequirements(\n  upgrader: Upgrader,\n  syllabus: Syllabus\n): PrioritizedRequirement[] {\n  const allRemaining = getRemainingRequirements(upgrader, syllabus);\n\n  const workingLevel = upgrader.derivedPqsWorkingLevel || syllabus.baseLevel;\n  const remainingForLevel = allRemaining.filter(\n    (r) => String(r.level) === workingLevel\n  );\n\n  const unlockMap = new Map<string, number>();\n  syllabus.requirements.forEach((req) =>\n    req.prerequisites?.forEach((prereq) =>\n      unlockMap.set(prereq, (unlockMap.get(prereq) || 0) + 1)\n    )\n  );\n\n  const prioritizedList: PrioritizedRequirement[] = remainingForLevel.map(\n    (req) => {\n      let priorityScore = 0;\n      const isAvailable = arePrerequisitesMet(req, upgrader);\n      if (isAvailable) priorityScore += 1000;\n      priorityScore += (unlockMap.get(req.name) || 0) * 50;\n      if (req.sequence) priorityScore += 100 - req.sequence;\n      return {\n        ...req,\n        priorityScore,\n        isAvailable,\n        unlocks: unlockMap.get(req.name) || 0,\n      };\n    }\n  );\n\n  return prioritizedList.sort((a, b) => b.priorityScore - a.priorityScore);\n}\n\nexport function getPrioritizedUpgraders(\n  upgraders: Upgrader[],\n  syllabus: Syllabus\n): (Upgrader & { priorityScore: number })[] {\n  const scoredUpgraders = upgraders.map((u) => {\n    let priorityScore = 0;\n    if (u.pacingAgainstDeadlineDays && u.pacingAgainstDeadlineDays < 0) {\n      priorityScore += Math.abs(u.pacingAgainstDeadlineDays);\n    }\n    const remaining = getRemainingRequirements(u, syllabus);\n    if (\n      remaining.length > 0 &&\n      remaining.every((req) => !arePrerequisitesMet(req, u))\n    ) {\n      priorityScore += 1000;\n    }\n    return { ...u, priorityScore };\n  });\n\n  return scoredUpgraders.sort((a, b) => b.priorityScore - a.priorityScore);\n}\n","import { defineStore } from \"pinia\";\nimport { type Upgrader } from \"../types/personnelTypes\";\nimport { type RawCompletion } from \"../types/progressTypes\";\nimport { useUiStore } from \"./uiStore\";\nimport { type DetailedCompletionRecord } from \"../types/personnelTypes\";\nimport { processPersonnelFile } from \"../core/excelProcessorServices/personnelProcessorService\";\nimport { useSyllabiStore } from \"./syllabiStore\";\nimport { useAppConfigStore } from \"./appConfigStore\";\nimport {\n  calculateDerivedWorkingLevels,\n  calculatePacing,\n  calculateProgressMetrics,\n  calculateProjections,\n  calculateReadiness,\n} from \"@/core/trainingLogicService\";\n\nexport const usePersonnelStore = defineStore(\"personnel\", {\n  state: () => ({\n    allPersonnel: [] as Upgrader[],\n    personnelMap: new Map<string, Upgrader>(),\n    isDirty: false,\n    isDataLoaded: false,\n  }),\n\n  getters: {\n    getPersonnelById:\n      (state) =>\n      (id: string): Upgrader | undefined => {\n        const trimmedId = id ? id.trim() : \"\";\n        return state.allPersonnel.find((p) => p.id.trim() === trimmedId);\n      },\n    getUpgraderByName:\n      (state) =>\n      (name: string): Upgrader | undefined => {\n        if (!name) return undefined;\n        const normalizedName = name.trim().toUpperCase();\n        return state.allPersonnel.find(\n          (p) => p.name.trim().toUpperCase() === normalizedName\n        );\n      },\n    allPersonnelSortedByName: (state): Upgrader[] => {\n      return [...state.allPersonnel].sort((a, b) =>\n        a.name.localeCompare(b.name)\n      );\n    },\n  },\n\n  actions: {\n    async loadPersonnelFromFile(file: File) {\n      const uiStore = useUiStore();\n      uiStore.setGlobalLoading(true);\n      try {\n        const personnelList = await processPersonnelFile(file);\n        this.setPersonnel(personnelList);\n        if (personnelList.length > 0) {\n          uiStore.addNotification({\n            message: `Successfully loaded ${personnelList.length} personnel records.`,\n            type: \"success\",\n          });\n        } else {\n          uiStore.addNotification({\n            message: \"Processed file, but no personnel records were found.\",\n            type: \"warning\",\n          });\n        }\n      } catch (error) {\n        console.error(\"Failed to process personnel file:\", error);\n        uiStore.addNotification({\n          message: \"An error occurred while processing the personnel file.\",\n          type: \"error\",\n        });\n      } finally {\n        uiStore.setGlobalLoading(false);\n      }\n    },\n    setPersonnel(personnelList: Upgrader[]) {\n      this.allPersonnel = personnelList;\n      this.personnelMap = new Map(personnelList.map((p) => [p.id, p]));\n      this.isDataLoaded = personnelList.length > 0;\n    },\n    updatePersonnel(updatedUpgrader: Upgrader) {\n      const index = this.allPersonnel.findIndex(\n        (p) => p.id === updatedUpgrader.id\n      );\n      if (index !== -1) {\n        this.allPersonnel[index] = updatedUpgrader;\n      }\n    },\n\n    addCompletionsToUpgrader(\n      upgraderId: string,\n      newCompletions: RawCompletion[]\n    ) {\n      const upgrader = this.getPersonnelById(upgraderId);\n      if (!upgrader) {\n        console.error(\n          `Could not find upgrader with ID ${upgraderId} to add completions.`\n        );\n        return;\n      }\n\n      const updatedUpgrader = JSON.parse(JSON.stringify(upgrader));\n\n      // Restore Date objects that were turned into strings by the deep copy\n      updatedUpgrader.startDate = new Date(updatedUpgrader.startDate);\n      if (Array.isArray(updatedUpgrader.rawCompletions)) {\n        updatedUpgrader.rawCompletions.forEach(\n          (comp: DetailedCompletionRecord) => {\n            comp.date = new Date(comp.date);\n          }\n        );\n      }\n      if (Array.isArray(updatedUpgrader.allCompletions)) {\n        updatedUpgrader.allCompletions.forEach((comp: any) => {\n          comp.completionDate = new Date(comp.completionDate);\n        });\n      }\n\n      const mappedCompletions: DetailedCompletionRecord[] = newCompletions.map(\n        (c) => ({\n          event: c.requirementId,\n          date: c.completionDate,\n          grade: c.grade ?? undefined,\n        })\n      );\n\n      updatedUpgrader.rawCompletions.push(...mappedCompletions);\n\n      const syllabiStore = useSyllabiStore();\n      const appConfigStore = useAppConfigStore();\n      const syllabus = syllabiStore.findSyllabus(\n        updatedUpgrader.assignedPosition,\n        updatedUpgrader.assignedSyllabusYear\n      );\n\n      if (syllabus) {\n        // These functions mutate the 'updatedUpgrader' object, adding all calculated fields.\n        // Crucially, calculateProgressMetrics will populate the 'allCompletions' array.\n        calculateProgressMetrics(updatedUpgrader, syllabus);\n        calculateDerivedWorkingLevels(\n          updatedUpgrader,\n          syllabus,\n          appConfigStore.currentConfig\n        );\n        calculatePacing(\n          updatedUpgrader,\n          syllabus,\n          appConfigStore.currentConfig\n        );\n        calculateProjections(\n          updatedUpgrader,\n          syllabus,\n          appConfigStore.currentConfig\n        );\n        calculateReadiness(updatedUpgrader, syllabus);\n\n        // Replace the old object in the store with the fully updated one to ensure reactivity.\n        this.updatePersonnel(updatedUpgrader);\n      }\n    },\n  },\n});\n","import * as XLSX from \"xlsx\";\nimport { excelToJsDate_LocalIntent } from \"../../utils/dateUtils\";\nimport { useUiStore } from \"../../stores/uiStore\";\nimport { loggingService } from \"../../utils/loggingService\";\nimport { DetailedCompletionRecord } from \"@/types/personnelTypes\"; // Import the type from its new home\n\nconst SVC_MODULE = \"[TrainingDataProcessor]\";\n\n// Type definitions for the data this processor will produce\nexport interface ProcessedStudentData {\n  nameFromSharpFile: string;\n  pqsVersionName?: string;\n  pqsVersionStatus?: string;\n  actcLevelStatuses: Map<number, string>;\n  completions: DetailedCompletionRecord[];\n}\n\nexport type ProcessedSharpDataMap = Map<string, ProcessedStudentData>;\n\nexport interface ProcessedSharpFile {\n  detectedTrack: string | null;\n  data: ProcessedSharpDataMap;\n}\n\nfunction detectTrackFromPqsVersion(pqsVersion: string): string | null {\n  if (!pqsVersion) return null;\n  const match = pqsVersion.match(/\\b([A-Z]{3})\\b/);\n  return match ? match[1] : null;\n}\n\nexport async function processSharpTrainingFile(\n  file: File\n): Promise<ProcessedSharpFile> {\n  const uiStore = useUiStore();\n  const processedData: ProcessedSharpDataMap = new Map();\n  let detectedTrack: string | null = null;\n\n  try {\n    const data = await file.arrayBuffer();\n    const workbook = XLSX.read(data, { type: \"array\" });\n\n    const sheets: { [name: string]: any[][] } = {};\n    const sheetNames = [\"Date Received\", \"Instructor\", \"Grade\", \"Status\"];\n\n    for (const name of sheetNames) {\n      const sheet = workbook.Sheets[name];\n      if (!sheet) throw new Error(`Required sheet \"${name}\" not found.`);\n      sheets[name] = XLSX.utils.sheet_to_json(sheet, { header: 1, raw: false });\n    }\n\n    const dateSheetRows = sheets[\"Date Received\"];\n    const headerRowIndex = dateSheetRows.findIndex((row) =>\n      row.some(\n        (cell) =>\n          typeof cell === \"string\" && cell.toUpperCase().includes(\"NAME\")\n      )\n    );\n    if (headerRowIndex === -1) throw new Error(\"Could not locate header row.\");\n\n    const header = dateSheetRows[headerRowIndex];\n    const nameColIndex = header.findIndex(\n      (cell) => typeof cell === \"string\" && cell.toUpperCase().includes(\"NAME\")\n    );\n    const dataStartIndex = headerRowIndex + 1;\n    const pqsVersionName = header[nameColIndex + 1] || \"Unknown PQS Version\";\n    detectedTrack = detectTrackFromPqsVersion(pqsVersionName);\n\n    const specialColumns = new Map<\n      number,\n      { type: \"pqs\" | \"actc\"; level?: number }\n    >();\n    specialColumns.set(nameColIndex + 1, { type: \"pqs\" });\n    header.forEach((h, i) => {\n      if (typeof h === \"string\") {\n        const actcMatch = h.match(/Level\\s*(\\d{3})/i);\n        if (actcMatch && actcMatch[1]) {\n          specialColumns.set(i, {\n            type: \"actc\",\n            level: parseInt(actcMatch[1], 10),\n          });\n        }\n      }\n    });\n\n    for (let i = dataStartIndex; i < dateSheetRows.length; i++) {\n      const name = sheets[\"Date Received\"][i][nameColIndex];\n      if (!name) continue;\n\n      const studentData: ProcessedStudentData = {\n        nameFromSharpFile: name,\n        pqsVersionName: pqsVersionName,\n        completions: [],\n        actcLevelStatuses: new Map(),\n      };\n\n      for (let j = nameColIndex + 1; j < header.length; j++) {\n        const eventName = header[j];\n        if (!eventName) continue;\n        if (specialColumns.has(j)) {\n          const specialInfo = specialColumns.get(j)!;\n          if (specialInfo.type === \"actc\" && specialInfo.level) {\n            const status = sheets[\"Status\"][i][j] || \"Not Started\";\n            studentData.actcLevelStatuses.set(specialInfo.level, status);\n            continue;\n          }\n        }\n\n        const dateValue = sheets[\"Date Received\"][i][j];\n        let parsedDate: Date | null = null;\n\n        if (dateValue != null && dateValue !== \"\") {\n          if (typeof dateValue === \"number\") {\n            parsedDate = excelToJsDate_LocalIntent(dateValue);\n          } else if (typeof dateValue === \"string\") {\n            const d = new Date(dateValue);\n            if (!isNaN(d.getTime())) parsedDate = d;\n          } else if (dateValue instanceof Date && !isNaN(dateValue.getTime())) {\n            parsedDate = dateValue;\n          }\n        }\n\n        if (parsedDate) {\n          studentData.completions.push({\n            event: eventName,\n            date: parsedDate,\n            instructor: sheets[\"Instructor\"][i]?.[j] || undefined,\n            grade: sheets[\"Grade\"][i]?.[j] || undefined,\n            status: sheets[\"Status\"][i]?.[j] || undefined,\n          });\n        }\n      }\n      processedData.set(name, studentData);\n    }\n  } catch (error) {\n    console.error(\"Error processing SHARP Training File:\", error);\n    uiStore.addNotification({\n      message: `An error occurred processing the SHARP file.`,\n      type: \"error\",\n    });\n    return { detectedTrack: null, data: new Map() };\n  }\n\n  return { detectedTrack, data: processedData };\n}\n","import { defineStore } from \"pinia\";\nimport { usePersonnelStore } from \"./personnelStore\";\nimport { useUiStore } from \"./uiStore\";\nimport { useSyllabiStore } from \"./syllabiStore\";\nimport { createPersonnelNameMatcher } from \"../utils/nameMatcher\";\nimport {\n  processSharpTrainingFile,\n  type ProcessedSharpDataMap,\n} from \"../core/excelProcessorServices/trainingDataProcessorService\";\nimport { useAppConfigStore } from \"./appConfigStore\";\nimport { loggingService } from \"@/utils/loggingService\";\nimport { type RawCompletion } from \"@/types/progressTypes\";\n\nconst SVC_MODULE = \"[ProgressStore]\";\n\nexport const useProgressStore = defineStore(\"progress\", {\n  state: () => ({\n    pendingSharpData: null as ProcessedSharpDataMap | null,\n    detectedTrack: null as string | null,\n    lastMergedUpgraderIds: [] as string[],\n  }),\n  actions: {\n    async loadAndProcessSharpFile(sharpFile: File) {\n      const uiStore = useUiStore();\n      this.pendingSharpData = null;\n      this.detectedTrack = null;\n      if (\n        !usePersonnelStore().isDataLoaded ||\n        useSyllabiStore().allSyllabi.length === 0\n      ) {\n        uiStore.addNotification({\n          message: \"Please load Personnel and Syllabi data first.\",\n          type: \"warning\",\n        });\n        return;\n      }\n      uiStore.setGlobalLoading(true);\n      try {\n        const { detectedTrack, data } = await processSharpTrainingFile(\n          sharpFile\n        );\n        if (data.size > 0) {\n          this.pendingSharpData = data;\n          this.detectedTrack = detectedTrack;\n        } else {\n          uiStore.addNotification({\n            message: \"SHARP file processed, but no data was found.\",\n            type: \"warning\",\n          });\n        }\n      } catch (error) {\n        console.error(\"Error processing SHARP file:\", error);\n        uiStore.addNotification({\n          message: \"An error occurred during SHARP file processing.\",\n          type: \"error\",\n        });\n      } finally {\n        uiStore.setGlobalLoading(false);\n      }\n    },\n    confirmAndMergeSharpData() {\n      // This function remains as-is for the single-file workflow\n    },\n    // This is the multi-file action that needs to be fixed\n    async processAndMergeMultipleFiles(files: File[]) {\n      const personnelStore = usePersonnelStore();\n      const uiStore = useUiStore();\n      let totalCompletions = 0;\n      const updatedIds = new Set<string>();\n\n      loggingService.logInfo(\n        `${SVC_MODULE} Starting batch processing of ${files.length} files.`\n      );\n\n      for (const file of files) {\n        try {\n          const { data } = await processSharpTrainingFile(file);\n          if (data.size > 0) {\n            data.forEach((studentData, studentName) => {\n              const person = personnelStore.getUpgraderByName(studentName);\n              if (person) {\n                updatedIds.add(person.id); // Add the person's ID to our set of updated people\n                const rawCompletions: RawCompletion[] =\n                  studentData.completions.map((c) => ({\n                    requirementId: c.event,\n                    completionDate: c.date,\n                    grade: c.grade,\n                  }));\n                personnelStore.addCompletionsToUpgrader(\n                  person.id,\n                  rawCompletions\n                );\n                totalCompletions += rawCompletions.length;\n              }\n            });\n          }\n        } catch (error: any) {\n          loggingService.logError(\n            `${SVC_MODULE} Failed to process file ${file.name} in batch.`,\n            error\n          );\n          uiStore.addNotification({\n            message: `Failed to process ${file.name}: ${error.message}`,\n            type: \"error\",\n          });\n        }\n      }\n\n      // --- THIS IS THE FIX ---\n      // After processing all files, update the store's state with the list of people who were updated.\n      this.lastMergedUpgraderIds = Array.from(updatedIds);\n      // --- END OF FIX ---\n\n      loggingService.logInfo(\n        `${SVC_MODULE} Batch processing complete. Merged ${totalCompletions} records for ${updatedIds.size} personnel.`\n      );\n\n      return {\n        completionsFound: totalCompletions,\n        personnelUpdated: updatedIds.size,\n      };\n    },\n    cancelSharpDataMerge() {\n      this.pendingSharpData = null;\n      this.detectedTrack = null;\n    },\n  },\n});\n","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, normalizeStyle as _normalizeStyle, normalizeClass as _normalizeClass, unref as _unref, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"p-4 sm:p-6 lg:p-8 bg-gray-100 min-h-full\" }\nconst _hoisted_2 = { class: \"mt-8\" }\nconst _hoisted_3 = {\n  class: \"mt-4\",\n  \"aria-hidden\": \"true\"\n}\nconst _hoisted_4 = { class: \"overflow-hidden rounded-full bg-gray-200\" }\nconst _hoisted_5 = { class: \"mt-2 hidden grid-cols-3 text-sm font-medium text-gray-600 sm:grid\" }\nconst _hoisted_6 = { class: \"mt-6 grid grid-cols-1 gap-8 lg:grid-cols-3\" }\nconst _hoisted_7 = { class: \"overflow-hidden rounded-lg bg-white shadow\" }\nconst _hoisted_8 = { class: \"p-5\" }\nconst _hoisted_9 = { class: \"flex items-center\" }\nconst _hoisted_10 = { class: \"flex-shrink-0\" }\nconst _hoisted_11 = {\n  key: 0,\n  class: \"flex-shrink-0\"\n}\nconst _hoisted_12 = { class: \"bg-gray-50 px-5 py-3\" }\nconst _hoisted_13 = { class: \"text-sm\" }\nconst _hoisted_14 = { class: \"overflow-hidden rounded-lg bg-white shadow\" }\nconst _hoisted_15 = { class: \"p-5\" }\nconst _hoisted_16 = { class: \"flex items-center\" }\nconst _hoisted_17 = { class: \"flex-shrink-0\" }\nconst _hoisted_18 = { class: \"ml-4 w-0 flex-1\" }\nconst _hoisted_19 = {\n  key: 0,\n  class: \"flex-shrink-0\"\n}\nconst _hoisted_20 = { class: \"text-sm\" }\nconst _hoisted_21 = {\n  key: 1,\n  class: \"font-medium text-gray-500\"\n}\nconst _hoisted_22 = { class: \"overflow-hidden rounded-lg bg-white shadow\" }\nconst _hoisted_23 = { class: \"p-5\" }\nconst _hoisted_24 = { class: \"flex items-center\" }\nconst _hoisted_25 = { class: \"flex-shrink-0\" }\nconst _hoisted_26 = { class: \"ml-4 w-0 flex-1\" }\nconst _hoisted_27 = { class: \"text-sm\" }\nconst _hoisted_28 = {\n  key: 1,\n  class: \"font-medium text-gray-500\"\n}\nconst _hoisted_29 = { class: \"mt-10\" }\nconst _hoisted_30 = { class: \"mt-4 grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4\" }\nconst _hoisted_31 = { class: \"flex-shrink-0 p-3 bg-green-500 rounded-lg\" }\nconst _hoisted_32 = { class: \"flex-shrink-0 p-3 bg-teal-500 rounded-lg\" }\nconst _hoisted_33 = { class: \"flex-shrink-0 p-3 bg-purple-500 rounded-lg\" }\nconst _hoisted_34 = { class: \"flex-shrink-0 p-3 bg-blue-500 rounded-lg\" }\n\nimport { computed } from \"vue\";\nimport { usePersonnelStore } from \"@/stores/personnelStore\";\nimport { useProgressStore } from \"@/stores/progressStore\";\nimport { downloadPersonnelTemplate } from \"@/core/excelProcessorServices/personnelProcessorService\";\nimport {\n  UsersIcon,\n  DocumentArrowUpIcon,\n  ChartBarIcon,\n  DocumentDuplicateIcon,\n  Cog6ToothIcon,\n  QuestionMarkCircleIcon,\n  ArrowDownTrayIcon,\n} from \"@heroicons/vue/24/outline\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'DashboardView',\n  setup(__props) {\n\nconst personnelStore = usePersonnelStore();\nconst progressStore = useProgressStore();\n\nconst isPersonnelLoaded = computed(() => personnelStore.isDataLoaded);\nconst isTrainingDataMerged = computed(\n  () => progressStore.lastMergedUpgraderIds.length > 0\n);\nconst isAllDataLoaded = computed(\n  () => isPersonnelLoaded.value && isTrainingDataMerged.value\n);\n\nconst progressPercentage = computed(() => {\n  if (isAllDataLoaded.value) return 100;\n  if (isPersonnelLoaded.value) return 50;\n  return 10;\n});\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_router_link = _resolveComponent(\"router-link\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _cache[15] || (_cache[15] = _createElementVNode(\"div\", { class: \"md:flex md:items-center md:justify-between\" }, [\n      _createElementVNode(\"div\", { class: \"min-w-0 flex-1\" }, [\n        _createElementVNode(\"h1\", { class: \"text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight\" }, \" Welcome to UPSHOT \"),\n        _createElementVNode(\"p\", { class: \"mt-1 text-sm text-gray-500\" }, \" Your squadron's training analysis and reporting dashboard. \")\n      ])\n    ], -1)),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", null, [\n        _cache[2] || (_cache[2] = _createElementVNode(\"h2\", { class: \"text-lg font-medium text-gray-900\" }, \"Getting Started\", -1)),\n        _cache[3] || (_cache[3] = _createElementVNode(\"p\", { class: \"mt-1 text-sm text-gray-500\" }, \" Follow these steps to load your data and generate reports. \", -1)),\n        _createElementVNode(\"div\", _hoisted_3, [\n          _createElementVNode(\"div\", _hoisted_4, [\n            _createElementVNode(\"div\", {\n              class: \"h-2 rounded-full bg-indigo-600\",\n              style: _normalizeStyle({ width: progressPercentage.value + '%' })\n            }, null, 4)\n          ]),\n          _createElementVNode(\"div\", _hoisted_5, [\n            _cache[1] || (_cache[1] = _createElementVNode(\"div\", { class: \"text-indigo-600\" }, \"Load Personnel\", -1)),\n            _createElementVNode(\"div\", {\n              class: _normalizeClass([\n                isPersonnelLoaded.value ? 'text-indigo-600' : 'text-gray-500',\n                'text-center',\n              ])\n            }, \" Load Training Data \", 2),\n            _createElementVNode(\"div\", {\n              class: _normalizeClass([\n                isAllDataLoaded.value ? 'text-indigo-600' : 'text-gray-500',\n                'text-right',\n              ])\n            }, \" Analyze & Report \", 2)\n          ])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_6, [\n        _createElementVNode(\"div\", _hoisted_7, [\n          _createElementVNode(\"div\", _hoisted_8, [\n            _createElementVNode(\"div\", _hoisted_9, [\n              _createElementVNode(\"div\", _hoisted_10, [\n                _createVNode(_unref(UsersIcon), {\n                  class: \"h-6 w-6 text-gray-400\",\n                  \"aria-hidden\": \"true\"\n                })\n              ]),\n              _cache[5] || (_cache[5] = _createElementVNode(\"div\", { class: \"ml-4 w-0 flex-1\" }, [\n                _createElementVNode(\"dl\", null, [\n                  _createElementVNode(\"dt\", { class: \"truncate text-sm font-medium text-gray-500\" }, \" Step 1 \"),\n                  _createElementVNode(\"dd\", null, [\n                    _createElementVNode(\"div\", { class: \"text-lg font-medium text-gray-900\" }, \" Load Personnel \")\n                  ])\n                ])\n              ], -1)),\n              (isPersonnelLoaded.value)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, _cache[4] || (_cache[4] = [\n                    _createElementVNode(\"span\", { class: \"inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800\" }, \"Complete\", -1)\n                  ])))\n                : _createCommentVNode(\"\", true)\n            ])\n          ]),\n          _createElementVNode(\"div\", _hoisted_12, [\n            _createElementVNode(\"div\", _hoisted_13, [\n              _createVNode(_component_router_link, {\n                to: \"/personnel-upload\",\n                class: \"font-medium text-indigo-700 hover:text-indigo-900\"\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(_toDisplayString(isPersonnelLoaded.value\n                    ? \"View or Reload Roster\"\n                    : \"Go to Personnel Upload\") + \" \", 1),\n                  _cache[6] || (_cache[6] = _createElementVNode(\"span\", { \"aria-hidden\": \"true\" }, \" \", -1))\n                ]),\n                _: 1,\n                __: [6]\n              })\n            ])\n          ])\n        ]),\n        _createElementVNode(\"div\", _hoisted_14, [\n          _createElementVNode(\"div\", _hoisted_15, [\n            _createElementVNode(\"div\", _hoisted_16, [\n              _createElementVNode(\"div\", _hoisted_17, [\n                _createVNode(_unref(DocumentArrowUpIcon), {\n                  class: _normalizeClass([\n                    'h-6 w-6',\n                    isPersonnelLoaded.value ? 'text-gray-400' : 'text-gray-300',\n                  ]),\n                  \"aria-hidden\": \"true\"\n                }, null, 8, [\"class\"])\n              ]),\n              _createElementVNode(\"div\", _hoisted_18, [\n                _createElementVNode(\"dl\", null, [\n                  _createElementVNode(\"dt\", {\n                    class: _normalizeClass([\n                      'truncate text-sm font-medium',\n                      isPersonnelLoaded.value ? 'text-gray-500' : 'text-gray-400',\n                    ])\n                  }, \" Step 2 \", 2),\n                  _createElementVNode(\"dd\", null, [\n                    _createElementVNode(\"div\", {\n                      class: _normalizeClass([\n                        'text-lg font-medium',\n                        isPersonnelLoaded.value ? 'text-gray-900' : 'text-gray-500',\n                      ])\n                    }, \" Load Training Data \", 2)\n                  ])\n                ])\n              ]),\n              (isTrainingDataMerged.value)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_19, _cache[7] || (_cache[7] = [\n                    _createElementVNode(\"span\", { class: \"inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800\" }, \"Complete\", -1)\n                  ])))\n                : _createCommentVNode(\"\", true)\n            ])\n          ]),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\n              'px-5 py-3',\n              isPersonnelLoaded.value ? 'bg-gray-50' : 'bg-gray-200',\n            ])\n          }, [\n            _createElementVNode(\"div\", _hoisted_20, [\n              (isPersonnelLoaded.value)\n                ? (_openBlock(), _createBlock(_component_router_link, {\n                    key: 0,\n                    to: \"/training-upload\",\n                    class: \"font-medium text-indigo-700 hover:text-indigo-900\"\n                  }, {\n                    default: _withCtx(() => [\n                      _createTextVNode(_toDisplayString(isTrainingDataMerged.value\n                    ? \"Load More Data\"\n                    : \"Go to Training Upload\") + \" \", 1),\n                      _cache[8] || (_cache[8] = _createElementVNode(\"span\", { \"aria-hidden\": \"true\" }, \" \", -1))\n                    ]),\n                    _: 1,\n                    __: [8]\n                  }))\n                : (_openBlock(), _createElementBlock(\"span\", _hoisted_21, \"Personnel data required\"))\n            ])\n          ], 2)\n        ]),\n        _createElementVNode(\"div\", _hoisted_22, [\n          _createElementVNode(\"div\", _hoisted_23, [\n            _createElementVNode(\"div\", _hoisted_24, [\n              _createElementVNode(\"div\", _hoisted_25, [\n                _createVNode(_unref(ChartBarIcon), {\n                  class: _normalizeClass([\n                    'h-6 w-6',\n                    isAllDataLoaded.value ? 'text-gray-400' : 'text-gray-300',\n                  ]),\n                  \"aria-hidden\": \"true\"\n                }, null, 8, [\"class\"])\n              ]),\n              _createElementVNode(\"div\", _hoisted_26, [\n                _createElementVNode(\"dl\", null, [\n                  _createElementVNode(\"dt\", {\n                    class: _normalizeClass([\n                      'truncate text-sm font-medium',\n                      isAllDataLoaded.value ? 'text-gray-500' : 'text-gray-400',\n                    ])\n                  }, \" Step 3 \", 2),\n                  _createElementVNode(\"dd\", null, [\n                    _createElementVNode(\"div\", {\n                      class: _normalizeClass([\n                        'text-lg font-medium',\n                        isAllDataLoaded.value ? 'text-gray-900' : 'text-gray-500',\n                      ])\n                    }, \" Analyze & Report \", 2)\n                  ])\n                ])\n              ])\n            ])\n          ]),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\n              'px-5 py-3',\n              isAllDataLoaded.value ? 'bg-gray-50' : 'bg-gray-200',\n            ])\n          }, [\n            _createElementVNode(\"div\", _hoisted_27, [\n              (isAllDataLoaded.value)\n                ? (_openBlock(), _createBlock(_component_router_link, {\n                    key: 0,\n                    to: \"/reports\",\n                    class: \"font-medium text-indigo-700 hover:text-indigo-900\"\n                  }, {\n                    default: _withCtx(() => _cache[9] || (_cache[9] = [\n                      _createTextVNode(\" View Reports \"),\n                      _createElementVNode(\"span\", { \"aria-hidden\": \"true\" }, \" \", -1)\n                    ])),\n                    _: 1,\n                    __: [9]\n                  }))\n                : (_openBlock(), _createElementBlock(\"span\", _hoisted_28, \"All data required\"))\n            ])\n          ], 2)\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_29, [\n        _cache[14] || (_cache[14] = _createElementVNode(\"h2\", { class: \"text-lg font-medium text-gray-900\" }, \"Quick Access\", -1)),\n        _createElementVNode(\"div\", _hoisted_30, [\n          _createElementVNode(\"div\", {\n            onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_unref(downloadPersonnelTemplate) && _unref(downloadPersonnelTemplate)(...args))),\n            class: \"group flex items-center p-4 bg-white rounded-lg shadow hover:shadow-md transition-shadow cursor-pointer\"\n          }, [\n            _createElementVNode(\"div\", _hoisted_31, [\n              _createVNode(_unref(ArrowDownTrayIcon), { class: \"h-6 w-6 text-white\" })\n            ]),\n            _cache[10] || (_cache[10] = _createElementVNode(\"div\", { class: \"ml-4\" }, [\n              _createElementVNode(\"p\", { class: \"text-sm font-medium text-gray-900\" }, \" Personnel Template \"),\n              _createElementVNode(\"p\", { class: \"text-sm text-gray-500\" }, \"Download Excel template\")\n            ], -1))\n          ]),\n          _createVNode(_component_router_link, {\n            to: \"/syllabi\",\n            class: \"group flex items-center p-4 bg-white rounded-lg shadow hover:shadow-md transition-shadow\"\n          }, {\n            default: _withCtx(() => [\n              _createElementVNode(\"div\", _hoisted_32, [\n                _createVNode(_unref(DocumentDuplicateIcon), { class: \"h-6 w-6 text-white\" })\n              ]),\n              _cache[11] || (_cache[11] = _createElementVNode(\"div\", { class: \"ml-4\" }, [\n                _createElementVNode(\"p\", { class: \"text-sm font-medium text-gray-900\" }, \" Syllabus Management \"),\n                _createElementVNode(\"p\", { class: \"text-sm text-gray-500\" }, \"View and edit syllabi\")\n              ], -1))\n            ]),\n            _: 1,\n            __: [11]\n          }),\n          _createVNode(_component_router_link, {\n            to: \"/settings\",\n            class: \"group flex items-center p-4 bg-white rounded-lg shadow hover:shadow-md transition-shadow\"\n          }, {\n            default: _withCtx(() => [\n              _createElementVNode(\"div\", _hoisted_33, [\n                _createVNode(_unref(Cog6ToothIcon), { class: \"h-6 w-6 text-white\" })\n              ]),\n              _cache[12] || (_cache[12] = _createElementVNode(\"div\", { class: \"ml-4\" }, [\n                _createElementVNode(\"p\", { class: \"text-sm font-medium text-gray-900\" }, \"Settings\"),\n                _createElementVNode(\"p\", { class: \"text-sm text-gray-500\" }, \"Configure app options\")\n              ], -1))\n            ]),\n            _: 1,\n            __: [12]\n          }),\n          _createVNode(_component_router_link, {\n            to: \"/help\",\n            class: \"group flex items-center p-4 bg-white rounded-lg shadow hover:shadow-md transition-shadow\"\n          }, {\n            default: _withCtx(() => [\n              _createElementVNode(\"div\", _hoisted_34, [\n                _createVNode(_unref(QuestionMarkCircleIcon), { class: \"h-6 w-6 text-white\" })\n              ]),\n              _cache[13] || (_cache[13] = _createElementVNode(\"div\", { class: \"ml-4\" }, [\n                _createElementVNode(\"p\", { class: \"text-sm font-medium text-gray-900\" }, \" Help & Documentation \"),\n                _createElementVNode(\"p\", { class: \"text-sm text-gray-500\" }, \"Read the guide\")\n              ], -1))\n            ]),\n            _: 1,\n            __: [13]\n          })\n        ])\n      ])\n    ])\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"p-4 sm:p-6 lg:p-8 bg-gray-100 min-h-full\">\n    <div class=\"md:flex md:items-center md:justify-between\">\n      <div class=\"min-w-0 flex-1\">\n        <h1\n          class=\"text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight\"\n        >\n          Welcome to UPSHOT\n        </h1>\n        <p class=\"mt-1 text-sm text-gray-500\">\n          Your squadron's training analysis and reporting dashboard.\n        </p>\n      </div>\n    </div>\n\n    <div class=\"mt-8\">\n      <div>\n        <h2 class=\"text-lg font-medium text-gray-900\">Getting Started</h2>\n        <p class=\"mt-1 text-sm text-gray-500\">\n          Follow these steps to load your data and generate reports.\n        </p>\n        <div class=\"mt-4\" aria-hidden=\"true\">\n          <div class=\"overflow-hidden rounded-full bg-gray-200\">\n            <div\n              class=\"h-2 rounded-full bg-indigo-600\"\n              :style=\"{ width: progressPercentage + '%' }\"\n            />\n          </div>\n          <div\n            class=\"mt-2 hidden grid-cols-3 text-sm font-medium text-gray-600 sm:grid\"\n          >\n            <div class=\"text-indigo-600\">Load Personnel</div>\n            <div\n              :class=\"[\n                isPersonnelLoaded ? 'text-indigo-600' : 'text-gray-500',\n                'text-center',\n              ]\"\n            >\n              Load Training Data\n            </div>\n            <div\n              :class=\"[\n                isAllDataLoaded ? 'text-indigo-600' : 'text-gray-500',\n                'text-right',\n              ]\"\n            >\n              Analyze & Report\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"mt-6 grid grid-cols-1 gap-8 lg:grid-cols-3\">\n        <div class=\"overflow-hidden rounded-lg bg-white shadow\">\n          <div class=\"p-5\">\n            <div class=\"flex items-center\">\n              <div class=\"flex-shrink-0\">\n                <UsersIcon class=\"h-6 w-6 text-gray-400\" aria-hidden=\"true\" />\n              </div>\n              <div class=\"ml-4 w-0 flex-1\">\n                <dl>\n                  <dt class=\"truncate text-sm font-medium text-gray-500\">\n                    Step 1\n                  </dt>\n                  <dd>\n                    <div class=\"text-lg font-medium text-gray-900\">\n                      Load Personnel\n                    </div>\n                  </dd>\n                </dl>\n              </div>\n              <div v-if=\"isPersonnelLoaded\" class=\"flex-shrink-0\">\n                <span\n                  class=\"inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800\"\n                  >Complete</span\n                >\n              </div>\n            </div>\n          </div>\n          <div class=\"bg-gray-50 px-5 py-3\">\n            <div class=\"text-sm\">\n              <router-link\n                to=\"/personnel-upload\"\n                class=\"font-medium text-indigo-700 hover:text-indigo-900\"\n              >\n                {{\n                  isPersonnelLoaded\n                    ? \"View or Reload Roster\"\n                    : \"Go to Personnel Upload\"\n                }}\n                <span aria-hidden=\"true\"> &rarr;</span>\n              </router-link>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"overflow-hidden rounded-lg bg-white shadow\">\n          <div class=\"p-5\">\n            <div class=\"flex items-center\">\n              <div class=\"flex-shrink-0\">\n                <DocumentArrowUpIcon\n                  :class=\"[\n                    'h-6 w-6',\n                    isPersonnelLoaded ? 'text-gray-400' : 'text-gray-300',\n                  ]\"\n                  aria-hidden=\"true\"\n                />\n              </div>\n              <div class=\"ml-4 w-0 flex-1\">\n                <dl>\n                  <dt\n                    :class=\"[\n                      'truncate text-sm font-medium',\n                      isPersonnelLoaded ? 'text-gray-500' : 'text-gray-400',\n                    ]\"\n                  >\n                    Step 2\n                  </dt>\n                  <dd>\n                    <div\n                      :class=\"[\n                        'text-lg font-medium',\n                        isPersonnelLoaded ? 'text-gray-900' : 'text-gray-500',\n                      ]\"\n                    >\n                      Load Training Data\n                    </div>\n                  </dd>\n                </dl>\n              </div>\n              <div v-if=\"isTrainingDataMerged\" class=\"flex-shrink-0\">\n                <span\n                  class=\"inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800\"\n                  >Complete</span\n                >\n              </div>\n            </div>\n          </div>\n          <div\n            :class=\"[\n              'px-5 py-3',\n              isPersonnelLoaded ? 'bg-gray-50' : 'bg-gray-200',\n            ]\"\n          >\n            <div class=\"text-sm\">\n              <router-link\n                v-if=\"isPersonnelLoaded\"\n                to=\"/training-upload\"\n                class=\"font-medium text-indigo-700 hover:text-indigo-900\"\n              >\n                {{\n                  isTrainingDataMerged\n                    ? \"Load More Data\"\n                    : \"Go to Training Upload\"\n                }}\n                <span aria-hidden=\"true\"> &rarr;</span>\n              </router-link>\n              <span v-else class=\"font-medium text-gray-500\"\n                >Personnel data required</span\n              >\n            </div>\n          </div>\n        </div>\n\n        <div class=\"overflow-hidden rounded-lg bg-white shadow\">\n          <div class=\"p-5\">\n            <div class=\"flex items-center\">\n              <div class=\"flex-shrink-0\">\n                <ChartBarIcon\n                  :class=\"[\n                    'h-6 w-6',\n                    isAllDataLoaded ? 'text-gray-400' : 'text-gray-300',\n                  ]\"\n                  aria-hidden=\"true\"\n                />\n              </div>\n              <div class=\"ml-4 w-0 flex-1\">\n                <dl>\n                  <dt\n                    :class=\"[\n                      'truncate text-sm font-medium',\n                      isAllDataLoaded ? 'text-gray-500' : 'text-gray-400',\n                    ]\"\n                  >\n                    Step 3\n                  </dt>\n                  <dd>\n                    <div\n                      :class=\"[\n                        'text-lg font-medium',\n                        isAllDataLoaded ? 'text-gray-900' : 'text-gray-500',\n                      ]\"\n                    >\n                      Analyze & Report\n                    </div>\n                  </dd>\n                </dl>\n              </div>\n            </div>\n          </div>\n          <div\n            :class=\"[\n              'px-5 py-3',\n              isAllDataLoaded ? 'bg-gray-50' : 'bg-gray-200',\n            ]\"\n          >\n            <div class=\"text-sm\">\n              <router-link\n                v-if=\"isAllDataLoaded\"\n                to=\"/reports\"\n                class=\"font-medium text-indigo-700 hover:text-indigo-900\"\n              >\n                View Reports\n                <span aria-hidden=\"true\"> &rarr;</span>\n              </router-link>\n              <span v-else class=\"font-medium text-gray-500\"\n                >All data required</span\n              >\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"mt-10\">\n        <h2 class=\"text-lg font-medium text-gray-900\">Quick Access</h2>\n        <div class=\"mt-4 grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4\">\n          <div\n            @click=\"downloadPersonnelTemplate\"\n            class=\"group flex items-center p-4 bg-white rounded-lg shadow hover:shadow-md transition-shadow cursor-pointer\"\n          >\n            <div class=\"flex-shrink-0 p-3 bg-green-500 rounded-lg\">\n              <ArrowDownTrayIcon class=\"h-6 w-6 text-white\" />\n            </div>\n            <div class=\"ml-4\">\n              <p class=\"text-sm font-medium text-gray-900\">\n                Personnel Template\n              </p>\n              <p class=\"text-sm text-gray-500\">Download Excel template</p>\n            </div>\n          </div>\n          <router-link\n            to=\"/syllabi\"\n            class=\"group flex items-center p-4 bg-white rounded-lg shadow hover:shadow-md transition-shadow\"\n          >\n            <div class=\"flex-shrink-0 p-3 bg-teal-500 rounded-lg\">\n              <DocumentDuplicateIcon class=\"h-6 w-6 text-white\" />\n            </div>\n            <div class=\"ml-4\">\n              <p class=\"text-sm font-medium text-gray-900\">\n                Syllabus Management\n              </p>\n              <p class=\"text-sm text-gray-500\">View and edit syllabi</p>\n            </div>\n          </router-link>\n          <router-link\n            to=\"/settings\"\n            class=\"group flex items-center p-4 bg-white rounded-lg shadow hover:shadow-md transition-shadow\"\n          >\n            <div class=\"flex-shrink-0 p-3 bg-purple-500 rounded-lg\">\n              <Cog6ToothIcon class=\"h-6 w-6 text-white\" />\n            </div>\n            <div class=\"ml-4\">\n              <p class=\"text-sm font-medium text-gray-900\">Settings</p>\n              <p class=\"text-sm text-gray-500\">Configure app options</p>\n            </div>\n          </router-link>\n          <router-link\n            to=\"/help\"\n            class=\"group flex items-center p-4 bg-white rounded-lg shadow hover:shadow-md transition-shadow\"\n          >\n            <div class=\"flex-shrink-0 p-3 bg-blue-500 rounded-lg\">\n              <QuestionMarkCircleIcon class=\"h-6 w-6 text-white\" />\n            </div>\n            <div class=\"ml-4\">\n              <p class=\"text-sm font-medium text-gray-900\">\n                Help & Documentation\n              </p>\n              <p class=\"text-sm text-gray-500\">Read the guide</p>\n            </div>\n          </router-link>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from \"vue\";\nimport { usePersonnelStore } from \"@/stores/personnelStore\";\nimport { useProgressStore } from \"@/stores/progressStore\";\nimport { downloadPersonnelTemplate } from \"@/core/excelProcessorServices/personnelProcessorService\";\nimport {\n  UsersIcon,\n  DocumentArrowUpIcon,\n  ChartBarIcon,\n  DocumentDuplicateIcon,\n  Cog6ToothIcon,\n  QuestionMarkCircleIcon,\n  ArrowDownTrayIcon,\n} from \"@heroicons/vue/24/outline\";\n\nconst personnelStore = usePersonnelStore();\nconst progressStore = useProgressStore();\n\nconst isPersonnelLoaded = computed(() => personnelStore.isDataLoaded);\nconst isTrainingDataMerged = computed(\n  () => progressStore.lastMergedUpgraderIds.length > 0\n);\nconst isAllDataLoaded = computed(\n  () => isPersonnelLoaded.value && isTrainingDataMerged.value\n);\n\nconst progressPercentage = computed(() => {\n  if (isAllDataLoaded.value) return 100;\n  if (isPersonnelLoaded.value) return 50;\n  return 10;\n});\n</script>\n","import script from \"./DashboardView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DashboardView.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveDynamicComponent as _resolveDynamicComponent, normalizeClass as _normalizeClass, createBlock as _createBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"p-4 sm:p-6 lg:p-8 bg-gray-50 min-h-full\" }\nconst _hoisted_2 = { class: \"mt-8\" }\nconst _hoisted_3 = { class: \"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3\" }\nconst _hoisted_4 = { class: \"text-sm font-medium text-gray-500 truncate\" }\nconst _hoisted_5 = { class: \"mt-1 text-3xl font-semibold text-gray-900\" }\nconst _hoisted_6 = { class: \"mt-8 grid grid-cols-1 gap-8 lg:grid-cols-3\" }\nconst _hoisted_7 = { class: \"lg:col-span-2 space-y-8\" }\nconst _hoisted_8 = { class: \"bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow\" }\nconst _hoisted_9 = { class: \"overflow-x-auto\" }\nconst _hoisted_10 = { class: \"min-w-full divide-y divide-gray-200\" }\nconst _hoisted_11 = { class: \"divide-y divide-gray-200 bg-white\" }\nconst _hoisted_12 = { key: 0 }\nconst _hoisted_13 = { class: \"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\" }\nconst _hoisted_14 = { class: \"px-6 py-4 whitespace-nowrap text-sm\" }\nconst _hoisted_15 = { class: \"lg:col-span-1 space-y-8\" }\nconst _hoisted_16 = { class: \"bg-white p-5 rounded-xl shadow-sm hover:shadow-md transition-shadow\" }\nconst _hoisted_17 = { class: \"mt-4 h-80 flex items-center justify-center\" }\nconst _hoisted_18 = {\n  key: 1,\n  class: \"text-sm text-gray-500\"\n}\nconst _hoisted_19 = { class: \"space-y-4\" }\nconst _hoisted_20 = { class: \"flex items-center\" }\nconst _hoisted_21 = { class: \"ml-4\" }\nconst _hoisted_22 = { class: \"text-base font-semibold text-gray-900\" }\nconst _hoisted_23 = { class: \"text-sm text-gray-500\" }\n\nimport { computed, h } from \"vue\";\nimport { usePersonnelStore } from \"@/stores/personnelStore\";\nimport { ReadinessStatus } from \"@/types/personnelTypes\";\nimport {\n  UsersIcon,\n  ExclamationTriangleIcon,\n  LockClosedIcon,\n  DocumentChartBarIcon,\n  UserGroupIcon,\n  CpuChipIcon,\n  CalendarDaysIcon,\n} from \"@heroicons/vue/24/outline\";\nimport { Chart as ChartJS, ArcElement, Tooltip, Legend } from \"chart.js\";\nimport { Doughnut } from \"vue-chartjs\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'ReportsView',\n  setup(__props) {\n\nChartJS.register(ArcElement, Tooltip, Legend);\n\nconst ReadinessDonutChart = {\n  name: \"ReadinessDonutChart\",\n  components: { Doughnut },\n  props: { chartData: { type: Object, required: true } },\n  setup(props) {\n    const data = computed(() => ({\n      labels: props.chartData.labels,\n      datasets: [\n        {\n          backgroundColor: props.chartData.backgroundColors,\n          data: props.chartData.data,\n          borderWidth: 2,\n          borderColor: \"#fff\",\n        },\n      ],\n    }));\n    const chartOptions = {\n      responsive: true,\n      maintainAspectRatio: false,\n      plugins: { legend: { position: \"top\" } },\n    };\n    return () => h(Doughnut, { data: data.value, options: chartOptions });\n  },\n};\n\nconst personnelStore = usePersonnelStore();\nconst isPersonnelLoaded = computed(() => personnelStore.isDataLoaded);\n\nconst stats = computed(() => [\n  {\n    name: \"Total Personnel\",\n    stat: personnelStore.allPersonnel.length,\n    icon: UsersIcon,\n    bgColor: \"bg-blue-100\",\n    iconColor: \"text-blue-600\",\n  },\n  {\n    name: \"At Risk or Behind\",\n    stat: personnelStore.allPersonnel.filter((p) =>\n      [ReadinessStatus.AtRisk, ReadinessStatus.BehindSchedule].includes(\n        p.readinessAgainstDeadline\n      )\n    ).length,\n    icon: ExclamationTriangleIcon,\n    bgColor: \"bg-yellow-100\",\n    iconColor: \"text-yellow-600\",\n  },\n  {\n    name: \"Blocked\",\n    stat: personnelStore.allPersonnel.filter(\n      (p) => p.readinessAgainstDeadline === ReadinessStatus.Blocked\n    ).length,\n    icon: LockClosedIcon,\n    bgColor: \"bg-red-100\",\n    iconColor: \"text-red-600\",\n  },\n]);\n\nconst readinessDataForChart = computed(() => {\n  const orderedStatuses = [\n    ReadinessStatus.OnTrack,\n    ReadinessStatus.AtRisk,\n    ReadinessStatus.BehindSchedule,\n    ReadinessStatus.Blocked,\n    ReadinessStatus.ReadyForNextLevel,\n    ReadinessStatus.Unknown,\n  ];\n  const colorMap: { [key in ReadinessStatus]: string } = {\n    [ReadinessStatus.OnTrack]: \"#10B981\",\n    [ReadinessStatus.AtRisk]: \"#F59E0B\",\n    [ReadinessStatus.BehindSchedule]: \"#EF4444\",\n    [ReadinessStatus.Blocked]: \"#6B7280\",\n    [ReadinessStatus.ReadyForNextLevel]: \"#3B82F6\",\n    [ReadinessStatus.Unknown]: \"#A78BFA\",\n  };\n  const counts = new Map<ReadinessStatus, number>();\n  orderedStatuses.forEach((status) => counts.set(status, 0));\n  personnelStore.allPersonnel.forEach((p) => {\n    const status = p.readinessAgainstDeadline || ReadinessStatus.Unknown;\n    if (counts.has(status)) {\n      counts.set(status, counts.get(status)! + 1);\n    }\n  });\n  const labels: string[] = [];\n  const data: number[] = [];\n  const backgroundColors: string[] = [];\n  orderedStatuses.forEach((status) => {\n    if ((counts.get(status) || 0) > 0) {\n      // Only show statuses with data\n      labels.push(status);\n      data.push(counts.get(status) || 0);\n      backgroundColors.push(colorMap[status]);\n    }\n  });\n  return { labels, data, backgroundColors };\n});\n\nconst watchList = computed(() => {\n  return personnelStore.allPersonnel\n    .filter(\n      (p) =>\n        p.readinessAgainstDeadline &&\n        [\n          ReadinessStatus.AtRisk,\n          ReadinessStatus.BehindSchedule,\n          ReadinessStatus.Blocked,\n        ].includes(p.readinessAgainstDeadline)\n    )\n    .sort(\n      (a, b) =>\n        (a.pacingAgainstDeadlineDays ?? 0) - (b.pacingAgainstDeadlineDays ?? 0)\n    )\n    .slice(0, 5);\n});\n\nconst getPacingText = (pacing?: number) => {\n  if (pacing === undefined || pacing === null) return \"N/A\";\n  if (pacing >= 0) return `${pacing}d Ahead`;\n  return `${Math.abs(pacing)}d Behind`;\n};\n\nconst getPacingClass = (pacing?: number) => {\n  if (pacing === undefined || pacing === null) return \"text-gray-500\";\n  return pacing < 0 ? \"text-red-600\" : \"text-green-600\";\n};\n\nconst readinessStatusColor = (status?: ReadinessStatus) => {\n  const classes = {\n    [ReadinessStatus.OnTrack]: \"bg-green-100 text-green-800\",\n    [ReadinessStatus.ReadyForNextLevel]: \"bg-blue-100 text-blue-800\",\n    [ReadinessStatus.AtRisk]: \"bg-yellow-100 text-yellow-800\",\n    [ReadinessStatus.BehindSchedule]: \"bg-red-100 text-red-800\",\n    [ReadinessStatus.Blocked]: \"bg-gray-200 text-gray-800\",\n  };\n  return (\n    classes[status || ReadinessStatus.Unknown] || \"bg-gray-100 text-gray-800\"\n  );\n};\n\nconst reportLinks = [\n  {\n    name: \"Individual Reports\",\n    description: \"View detailed progress for each student.\",\n    href: \"/reports/individual\",\n    icon: DocumentChartBarIcon,\n    color: \"bg-blue-500\",\n  },\n  {\n    name: \"Track Reports\",\n    description: \"Compare progress across a specific track.\",\n    href: \"/reports/track\",\n    icon: UserGroupIcon,\n    color: \"bg-purple-500\",\n  },\n  {\n    name: \"Monthly Report\",\n    description: \"Generate a summary of training activity.\",\n    href: \"/reports/monthly\",\n    icon: CalendarDaysIcon,\n    color: \"bg-green-500\",\n  },\n  {\n    name: \"LLM Report Generation\",\n    description: \"Use AI to generate narrative reports.\",\n    href: \"/reports/llm\",\n    icon: CpuChipIcon,\n    color: \"bg-rose-500\",\n  },\n];\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_router_link = _resolveComponent(\"router-link\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _cache[6] || (_cache[6] = _createElementVNode(\"div\", null, [\n      _createElementVNode(\"h1\", { class: \"text-3xl font-bold text-gray-900\" }, \"Reports Dashboard\"),\n      _createElementVNode(\"p\", { class: \"mt-2 text-sm text-gray-600\" }, \" High-level overview of personnel training status and readiness. \")\n    ], -1)),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _cache[0] || (_cache[0] = _createElementVNode(\"h2\", { class: \"text-lg font-medium text-gray-900 sr-only\" }, \"At a Glance\", -1)),\n      _createElementVNode(\"div\", _hoisted_3, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(stats.value, (item) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: item.name,\n            class: \"bg-white p-5 rounded-xl shadow-sm flex items-center space-x-4 hover:shadow-md transition-shadow\"\n          }, [\n            _createElementVNode(\"div\", {\n              class: _normalizeClass([\"flex-shrink-0 p-3 rounded-full\", item.bgColor])\n            }, [\n              (_openBlock(), _createBlock(_resolveDynamicComponent(item.icon), {\n                class: _normalizeClass([\"h-6 w-6\", item.iconColor]),\n                \"aria-hidden\": \"true\"\n              }, null, 8, [\"class\"]))\n            ], 2),\n            _createElementVNode(\"div\", null, [\n              _createElementVNode(\"p\", _hoisted_4, _toDisplayString(item.name), 1),\n              _createElementVNode(\"p\", _hoisted_5, _toDisplayString(item.stat), 1)\n            ])\n          ]))\n        }), 128))\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_6, [\n      _createElementVNode(\"div\", _hoisted_7, [\n        _createElementVNode(\"div\", _hoisted_8, [\n          _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"p-5\" }, [\n            _createElementVNode(\"h2\", { class: \"text-xl font-semibold text-gray-900\" }, \"Watch List\"),\n            _createElementVNode(\"p\", { class: \"mt-1 text-sm text-gray-500\" }, \" Upgraders who are at risk, behind, or blocked, sorted by urgency. \")\n          ], -1)),\n          _createElementVNode(\"div\", _hoisted_9, [\n            _createElementVNode(\"table\", _hoisted_10, [\n              _cache[2] || (_cache[2] = _createElementVNode(\"thead\", { class: \"bg-gray-50\" }, [\n                _createElementVNode(\"tr\", null, [\n                  _createElementVNode(\"th\", {\n                    scope: \"col\",\n                    class: \"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500\"\n                  }, \" Name \"),\n                  _createElementVNode(\"th\", {\n                    scope: \"col\",\n                    class: \"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500\"\n                  }, \" Pacing \"),\n                  _createElementVNode(\"th\", {\n                    scope: \"col\",\n                    class: \"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500\"\n                  }, \" Status \")\n                ])\n              ], -1)),\n              _createElementVNode(\"tbody\", _hoisted_11, [\n                (watchList.value.length === 0)\n                  ? (_openBlock(), _createElementBlock(\"tr\", _hoisted_12, _cache[1] || (_cache[1] = [\n                      _createElementVNode(\"td\", {\n                        colspan: \"3\",\n                        class: \"px-6 py-10 text-center text-sm text-gray-500\"\n                      }, \" All personnel are on track. Great job! \", -1)\n                    ])))\n                  : _createCommentVNode(\"\", true),\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(watchList.value, (person) => {\n                  return (_openBlock(), _createElementBlock(\"tr\", {\n                    key: person.id,\n                    class: \"hover:bg-gray-50\"\n                  }, [\n                    _createElementVNode(\"td\", _hoisted_13, _toDisplayString(person.displayName), 1),\n                    _createElementVNode(\"td\", {\n                      class: _normalizeClass([\"px-6 py-4 whitespace-nowrap text-sm font-semibold\", getPacingClass(person.pacingAgainstDeadlineDays)])\n                    }, _toDisplayString(getPacingText(person.pacingAgainstDeadlineDays)), 3),\n                    _createElementVNode(\"td\", _hoisted_14, [\n                      _createElementVNode(\"span\", {\n                        class: _normalizeClass([\"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium\", \n                        readinessStatusColor(person.readinessAgainstDeadline)\n                      ])\n                      }, _toDisplayString(person.readinessAgainstDeadline), 3)\n                    ])\n                  ]))\n                }), 128))\n              ])\n            ])\n          ])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_15, [\n        _createElementVNode(\"div\", _hoisted_16, [\n          _cache[4] || (_cache[4] = _createElementVNode(\"h2\", { class: \"text-xl font-semibold text-gray-900\" }, \" Squadron Readiness \", -1)),\n          _createElementVNode(\"div\", _hoisted_17, [\n            (isPersonnelLoaded.value)\n              ? (_openBlock(), _createBlock(ReadinessDonutChart, {\n                  key: 0,\n                  chartData: readinessDataForChart.value\n                }, null, 8, [\"chartData\"]))\n              : (_openBlock(), _createElementBlock(\"p\", _hoisted_18, \" Load personnel data to view chart. \"))\n          ])\n        ]),\n        _createElementVNode(\"div\", _hoisted_19, [\n          _cache[5] || (_cache[5] = _createElementVNode(\"h2\", { class: \"text-xl font-semibold text-gray-900 px-1\" }, \" Available Reports \", -1)),\n          (_openBlock(), _createElementBlock(_Fragment, null, _renderList(reportLinks, (report) => {\n            return _createVNode(_component_router_link, {\n              key: report.name,\n              to: report.href,\n              class: \"block p-4 bg-white rounded-xl shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all\"\n            }, {\n              default: _withCtx(() => [\n                _createElementVNode(\"div\", _hoisted_20, [\n                  _createElementVNode(\"div\", {\n                    class: _normalizeClass([\"flex-shrink-0 p-3 rounded-lg\", report.color])\n                  }, [\n                    (_openBlock(), _createBlock(_resolveDynamicComponent(report.icon), { class: \"h-6 w-6 text-white\" }))\n                  ], 2),\n                  _createElementVNode(\"div\", _hoisted_21, [\n                    _createElementVNode(\"h3\", _hoisted_22, _toDisplayString(report.name), 1),\n                    _createElementVNode(\"p\", _hoisted_23, _toDisplayString(report.description), 1)\n                  ])\n                ])\n              ]),\n              _: 2\n            }, 1032, [\"to\"])\n          }), 64))\n        ])\n      ])\n    ])\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"p-4 sm:p-6 lg:p-8 bg-gray-50 min-h-full\">\n    <div>\n      <h1 class=\"text-3xl font-bold text-gray-900\">Reports Dashboard</h1>\n      <p class=\"mt-2 text-sm text-gray-600\">\n        High-level overview of personnel training status and readiness.\n      </p>\n    </div>\n\n    <div class=\"mt-8\">\n      <h2 class=\"text-lg font-medium text-gray-900 sr-only\">At a Glance</h2>\n      <div class=\"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3\">\n        <div\n          v-for=\"item in stats\"\n          :key=\"item.name\"\n          class=\"bg-white p-5 rounded-xl shadow-sm flex items-center space-x-4 hover:shadow-md transition-shadow\"\n        >\n          <div class=\"flex-shrink-0 p-3 rounded-full\" :class=\"item.bgColor\">\n            <component\n              :is=\"item.icon\"\n              class=\"h-6 w-6\"\n              :class=\"item.iconColor\"\n              aria-hidden=\"true\"\n            />\n          </div>\n          <div>\n            <p class=\"text-sm font-medium text-gray-500 truncate\">\n              {{ item.name }}\n            </p>\n            <p class=\"mt-1 text-3xl font-semibold text-gray-900\">\n              {{ item.stat }}\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"mt-8 grid grid-cols-1 gap-8 lg:grid-cols-3\">\n      <div class=\"lg:col-span-2 space-y-8\">\n        <div\n          class=\"bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow\"\n        >\n          <div class=\"p-5\">\n            <h2 class=\"text-xl font-semibold text-gray-900\">Watch List</h2>\n            <p class=\"mt-1 text-sm text-gray-500\">\n              Upgraders who are at risk, behind, or blocked, sorted by urgency.\n            </p>\n          </div>\n          <div class=\"overflow-x-auto\">\n            <table class=\"min-w-full divide-y divide-gray-200\">\n              <thead class=\"bg-gray-50\">\n                <tr>\n                  <th\n                    scope=\"col\"\n                    class=\"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500\"\n                  >\n                    Name\n                  </th>\n                  <th\n                    scope=\"col\"\n                    class=\"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500\"\n                  >\n                    Pacing\n                  </th>\n                  <th\n                    scope=\"col\"\n                    class=\"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500\"\n                  >\n                    Status\n                  </th>\n                </tr>\n              </thead>\n              <tbody class=\"divide-y divide-gray-200 bg-white\">\n                <tr v-if=\"watchList.length === 0\">\n                  <td\n                    colspan=\"3\"\n                    class=\"px-6 py-10 text-center text-sm text-gray-500\"\n                  >\n                    All personnel are on track. Great job!\n                  </td>\n                </tr>\n                <tr\n                  v-for=\"person in watchList\"\n                  :key=\"person.id\"\n                  class=\"hover:bg-gray-50\"\n                >\n                  <td\n                    class=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\"\n                  >\n                    {{ person.displayName }}\n                  </td>\n                  <td\n                    class=\"px-6 py-4 whitespace-nowrap text-sm font-semibold\"\n                    :class=\"getPacingClass(person.pacingAgainstDeadlineDays)\"\n                  >\n                    {{ getPacingText(person.pacingAgainstDeadlineDays) }}\n                  </td>\n                  <td class=\"px-6 py-4 whitespace-nowrap text-sm\">\n                    <span\n                      class=\"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium\"\n                      :class=\"\n                        readinessStatusColor(person.readinessAgainstDeadline)\n                      \"\n                    >\n                      {{ person.readinessAgainstDeadline }}\n                    </span>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"lg:col-span-1 space-y-8\">\n        <div\n          class=\"bg-white p-5 rounded-xl shadow-sm hover:shadow-md transition-shadow\"\n        >\n          <h2 class=\"text-xl font-semibold text-gray-900\">\n            Squadron Readiness\n          </h2>\n          <div class=\"mt-4 h-80 flex items-center justify-center\">\n            <ReadinessDonutChart\n              v-if=\"isPersonnelLoaded\"\n              :chartData=\"readinessDataForChart\"\n            />\n            <p v-else class=\"text-sm text-gray-500\">\n              Load personnel data to view chart.\n            </p>\n          </div>\n        </div>\n\n        <div class=\"space-y-4\">\n          <h2 class=\"text-xl font-semibold text-gray-900 px-1\">\n            Available Reports\n          </h2>\n          <router-link\n            v-for=\"report in reportLinks\"\n            :key=\"report.name\"\n            :to=\"report.href\"\n            class=\"block p-4 bg-white rounded-xl shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all\"\n          >\n            <div class=\"flex items-center\">\n              <div class=\"flex-shrink-0 p-3 rounded-lg\" :class=\"report.color\">\n                <component :is=\"report.icon\" class=\"h-6 w-6 text-white\" />\n              </div>\n              <div class=\"ml-4\">\n                <h3 class=\"text-base font-semibold text-gray-900\">\n                  {{ report.name }}\n                </h3>\n                <p class=\"text-sm text-gray-500\">{{ report.description }}</p>\n              </div>\n            </div>\n          </router-link>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, h } from \"vue\";\nimport { usePersonnelStore } from \"@/stores/personnelStore\";\nimport { ReadinessStatus } from \"@/types/personnelTypes\";\nimport {\n  UsersIcon,\n  ExclamationTriangleIcon,\n  LockClosedIcon,\n  DocumentChartBarIcon,\n  UserGroupIcon,\n  CpuChipIcon,\n  CalendarDaysIcon,\n} from \"@heroicons/vue/24/outline\";\nimport { Chart as ChartJS, ArcElement, Tooltip, Legend } from \"chart.js\";\nimport { Doughnut } from \"vue-chartjs\";\n\nChartJS.register(ArcElement, Tooltip, Legend);\n\nconst ReadinessDonutChart = {\n  name: \"ReadinessDonutChart\",\n  components: { Doughnut },\n  props: { chartData: { type: Object, required: true } },\n  setup(props) {\n    const data = computed(() => ({\n      labels: props.chartData.labels,\n      datasets: [\n        {\n          backgroundColor: props.chartData.backgroundColors,\n          data: props.chartData.data,\n          borderWidth: 2,\n          borderColor: \"#fff\",\n        },\n      ],\n    }));\n    const chartOptions = {\n      responsive: true,\n      maintainAspectRatio: false,\n      plugins: { legend: { position: \"top\" } },\n    };\n    return () => h(Doughnut, { data: data.value, options: chartOptions });\n  },\n};\n\nconst personnelStore = usePersonnelStore();\nconst isPersonnelLoaded = computed(() => personnelStore.isDataLoaded);\n\nconst stats = computed(() => [\n  {\n    name: \"Total Personnel\",\n    stat: personnelStore.allPersonnel.length,\n    icon: UsersIcon,\n    bgColor: \"bg-blue-100\",\n    iconColor: \"text-blue-600\",\n  },\n  {\n    name: \"At Risk or Behind\",\n    stat: personnelStore.allPersonnel.filter((p) =>\n      [ReadinessStatus.AtRisk, ReadinessStatus.BehindSchedule].includes(\n        p.readinessAgainstDeadline\n      )\n    ).length,\n    icon: ExclamationTriangleIcon,\n    bgColor: \"bg-yellow-100\",\n    iconColor: \"text-yellow-600\",\n  },\n  {\n    name: \"Blocked\",\n    stat: personnelStore.allPersonnel.filter(\n      (p) => p.readinessAgainstDeadline === ReadinessStatus.Blocked\n    ).length,\n    icon: LockClosedIcon,\n    bgColor: \"bg-red-100\",\n    iconColor: \"text-red-600\",\n  },\n]);\n\nconst readinessDataForChart = computed(() => {\n  const orderedStatuses = [\n    ReadinessStatus.OnTrack,\n    ReadinessStatus.AtRisk,\n    ReadinessStatus.BehindSchedule,\n    ReadinessStatus.Blocked,\n    ReadinessStatus.ReadyForNextLevel,\n    ReadinessStatus.Unknown,\n  ];\n  const colorMap: { [key in ReadinessStatus]: string } = {\n    [ReadinessStatus.OnTrack]: \"#10B981\",\n    [ReadinessStatus.AtRisk]: \"#F59E0B\",\n    [ReadinessStatus.BehindSchedule]: \"#EF4444\",\n    [ReadinessStatus.Blocked]: \"#6B7280\",\n    [ReadinessStatus.ReadyForNextLevel]: \"#3B82F6\",\n    [ReadinessStatus.Unknown]: \"#A78BFA\",\n  };\n  const counts = new Map<ReadinessStatus, number>();\n  orderedStatuses.forEach((status) => counts.set(status, 0));\n  personnelStore.allPersonnel.forEach((p) => {\n    const status = p.readinessAgainstDeadline || ReadinessStatus.Unknown;\n    if (counts.has(status)) {\n      counts.set(status, counts.get(status)! + 1);\n    }\n  });\n  const labels: string[] = [];\n  const data: number[] = [];\n  const backgroundColors: string[] = [];\n  orderedStatuses.forEach((status) => {\n    if ((counts.get(status) || 0) > 0) {\n      // Only show statuses with data\n      labels.push(status);\n      data.push(counts.get(status) || 0);\n      backgroundColors.push(colorMap[status]);\n    }\n  });\n  return { labels, data, backgroundColors };\n});\n\nconst watchList = computed(() => {\n  return personnelStore.allPersonnel\n    .filter(\n      (p) =>\n        p.readinessAgainstDeadline &&\n        [\n          ReadinessStatus.AtRisk,\n          ReadinessStatus.BehindSchedule,\n          ReadinessStatus.Blocked,\n        ].includes(p.readinessAgainstDeadline)\n    )\n    .sort(\n      (a, b) =>\n        (a.pacingAgainstDeadlineDays ?? 0) - (b.pacingAgainstDeadlineDays ?? 0)\n    )\n    .slice(0, 5);\n});\n\nconst getPacingText = (pacing?: number) => {\n  if (pacing === undefined || pacing === null) return \"N/A\";\n  if (pacing >= 0) return `${pacing}d Ahead`;\n  return `${Math.abs(pacing)}d Behind`;\n};\n\nconst getPacingClass = (pacing?: number) => {\n  if (pacing === undefined || pacing === null) return \"text-gray-500\";\n  return pacing < 0 ? \"text-red-600\" : \"text-green-600\";\n};\n\nconst readinessStatusColor = (status?: ReadinessStatus) => {\n  const classes = {\n    [ReadinessStatus.OnTrack]: \"bg-green-100 text-green-800\",\n    [ReadinessStatus.ReadyForNextLevel]: \"bg-blue-100 text-blue-800\",\n    [ReadinessStatus.AtRisk]: \"bg-yellow-100 text-yellow-800\",\n    [ReadinessStatus.BehindSchedule]: \"bg-red-100 text-red-800\",\n    [ReadinessStatus.Blocked]: \"bg-gray-200 text-gray-800\",\n  };\n  return (\n    classes[status || ReadinessStatus.Unknown] || \"bg-gray-100 text-gray-800\"\n  );\n};\n\nconst reportLinks = [\n  {\n    name: \"Individual Reports\",\n    description: \"View detailed progress for each student.\",\n    href: \"/reports/individual\",\n    icon: DocumentChartBarIcon,\n    color: \"bg-blue-500\",\n  },\n  {\n    name: \"Track Reports\",\n    description: \"Compare progress across a specific track.\",\n    href: \"/reports/track\",\n    icon: UserGroupIcon,\n    color: \"bg-purple-500\",\n  },\n  {\n    name: \"Monthly Report\",\n    description: \"Generate a summary of training activity.\",\n    href: \"/reports/monthly\",\n    icon: CalendarDaysIcon,\n    color: \"bg-green-500\",\n  },\n  {\n    name: \"LLM Report Generation\",\n    description: \"Use AI to generate narrative reports.\",\n    href: \"/reports/llm\",\n    icon: CpuChipIcon,\n    color: \"bg-rose-500\",\n  },\n];\n</script>\n","import script from \"./ReportsView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ReportsView.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString } from \"vue\"\n\nconst _hoisted_1 = { class: \"relative h-10 w-10\" }\nconst _hoisted_2 = {\n  class: \"h-full w-full\",\n  viewBox: \"0 0 100 100\"\n}\nconst _hoisted_3 = [\"stroke-dashoffset\"]\nconst _hoisted_4 = { class: \"absolute inset-0 flex items-center justify-center text-xs font-semibold text-gray-700\" }\n\nimport { computed } from \"vue\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'ProgressWheel',\n  props: {\n  progress: {\n    type: Number,\n    required: true,\n    default: 0,\n  },\n},\n  setup(__props) {\n\nconst props = __props;\n\nconst circumference = 2 * Math.PI * 45;\n\nconst strokeOffset = computed(() => {\n  const progressValue = Math.max(0, Math.min(100, props.progress));\n  return circumference - (progressValue / 100) * circumference;\n});\n\nconst progressColorClass = computed(() => {\n  if (props.progress < 33) return \"text-red-500\";\n  if (props.progress < 66) return \"text-yellow-500\";\n  return \"text-green-500\";\n});\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (_openBlock(), _createElementBlock(\"svg\", _hoisted_2, [\n      _cache[0] || (_cache[0] = _createElementVNode(\"circle\", {\n        class: \"text-gray-200\",\n        \"stroke-width\": \"10\",\n        stroke: \"currentColor\",\n        fill: \"transparent\",\n        r: \"45\",\n        cx: \"50\",\n        cy: \"50\"\n      }, null, -1)),\n      _createElementVNode(\"circle\", {\n        class: _normalizeClass(progressColorClass.value),\n        \"stroke-width\": \"10\",\n        \"stroke-dasharray\": circumference,\n        \"stroke-dashoffset\": strokeOffset.value,\n        \"stroke-linecap\": \"round\",\n        stroke: \"currentColor\",\n        fill: \"transparent\",\n        r: \"45\",\n        cx: \"50\",\n        cy: \"50\",\n        transform: \"rotate(-90 50 50)\"\n      }, null, 10, _hoisted_3)\n    ])),\n    _createElementVNode(\"span\", _hoisted_4, _toDisplayString(Math.round(__props.progress)) + \"% \", 1)\n  ]))\n}\n}\n\n})","<!-- src/components/ui/ProgressWheel.vue -->\n<template>\n  <div class=\"relative h-10 w-10\">\n    <svg class=\"h-full w-full\" viewBox=\"0 0 100 100\">\n      <!-- Background circle -->\n      <circle\n        class=\"text-gray-200\"\n        stroke-width=\"10\"\n        stroke=\"currentColor\"\n        fill=\"transparent\"\n        r=\"45\"\n        cx=\"50\"\n        cy=\"50\"\n      />\n      <!-- Progress circle -->\n      <circle\n        :class=\"progressColorClass\"\n        stroke-width=\"10\"\n        :stroke-dasharray=\"circumference\"\n        :stroke-dashoffset=\"strokeOffset\"\n        stroke-linecap=\"round\"\n        stroke=\"currentColor\"\n        fill=\"transparent\"\n        r=\"45\"\n        cx=\"50\"\n        cy=\"50\"\n        transform=\"rotate(-90 50 50)\"\n      />\n    </svg>\n    <!-- Percentage text -->\n    <span\n      class=\"absolute inset-0 flex items-center justify-center text-xs font-semibold text-gray-700\"\n    >\n      {{ Math.round(progress) }}%\n    </span>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, defineProps } from \"vue\";\n\nconst props = defineProps({\n  progress: {\n    type: Number,\n    required: true,\n    default: 0,\n  },\n});\n\nconst circumference = 2 * Math.PI * 45;\n\nconst strokeOffset = computed(() => {\n  const progressValue = Math.max(0, Math.min(100, props.progress));\n  return circumference - (progressValue / 100) * circumference;\n});\n\nconst progressColorClass = computed(() => {\n  if (props.progress < 33) return \"text-red-500\";\n  if (props.progress < 66) return \"text-yellow-500\";\n  return \"text-green-500\";\n});\n</script>\n","import script from \"./ProgressWheel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ProgressWheel.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, unref as _unref, createVNode as _createVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass } from \"vue\"\n\nconst _hoisted_1 = { class: \"p-4 sm:p-6 lg:p-8\" }\nconst _hoisted_2 = { class: \"sm:flex sm:items-center sm:justify-between\" }\nconst _hoisted_3 = { class: \"mt-4 sm:mt-0 sm:ml-16 sm:flex-none\" }\nconst _hoisted_4 = { class: \"mt-8 flow-root\" }\nconst _hoisted_5 = { class: \"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8\" }\nconst _hoisted_6 = { class: \"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8\" }\nconst _hoisted_7 = { class: \"overflow-hidden shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg\" }\nconst _hoisted_8 = { class: \"min-w-full divide-y divide-gray-300\" }\nconst _hoisted_9 = { class: \"divide-y divide-gray-200 bg-white\" }\nconst _hoisted_10 = { class: \"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6\" }\nconst _hoisted_11 = { class: \"whitespace-nowrap px-3 py-4 text-sm text-gray-500\" }\nconst _hoisted_12 = { class: \"whitespace-nowrap px-3 py-4 text-sm text-gray-500\" }\nconst _hoisted_13 = { class: \"flex justify-center\" }\nconst _hoisted_14 = { class: \"whitespace-nowrap px-3 py-4 text-sm text-gray-500\" }\nconst _hoisted_15 = { class: \"flex justify-center\" }\nconst _hoisted_16 = { class: \"whitespace-nowrap px-3 py-4 text-sm text-gray-500\" }\nconst _hoisted_17 = { class: \"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6\" }\nconst _hoisted_18 = { class: \"sr-only\" }\n\nimport { computed } from \"vue\";\nimport { usePersonnelStore } from \"@/stores/personnelStore\";\nimport { ReadinessStatus } from \"@/types/personnelTypes\";\nimport ProgressWheel from \"@/components/ui/ProgressWheel.vue\";\nimport { ArrowLeftIcon } from \"@heroicons/vue/20/solid\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'IndividualReportListView',\n  setup(__props) {\n\nconst personnelStore = usePersonnelStore();\nconst personnel = computed(() => personnelStore.allPersonnelSortedByName);\n\nconst readinessStatusColor = (status?: ReadinessStatus) => {\n  switch (status) {\n    case ReadinessStatus.OnTrack:\n      return \"bg-green-100 text-green-800\";\n    case ReadinessStatus.ReadyForNextLevel:\n      return \"bg-blue-100 text-blue-800\";\n    case ReadinessStatus.AtRisk:\n      return \"bg-yellow-100 text-yellow-800\";\n    case ReadinessStatus.BehindSchedule:\n      return \"bg-red-100 text-red-800\";\n    case ReadinessStatus.Blocked:\n      return \"bg-gray-100 text-gray-800\";\n    default:\n      return \"bg-gray-100 text-gray-800\";\n  }\n};\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_router_link = _resolveComponent(\"router-link\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _cache[1] || (_cache[1] = _createElementVNode(\"div\", { class: \"sm:flex-auto\" }, [\n        _createElementVNode(\"h1\", { class: \"text-2xl font-bold text-gray-900\" }, \"Individual Reports\"),\n        _createElementVNode(\"p\", { class: \"mt-2 text-sm text-gray-500\" }, \" Select an individual to view their detailed training report. \")\n      ], -1)),\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createVNode(_component_router_link, {\n          to: { name: 'Reports' },\n          type: \"button\",\n          class: \"inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50\"\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_unref(ArrowLeftIcon), { class: \"-ml-0.5 mr-1.5 h-5 w-5 text-gray-400\" }),\n            _cache[0] || (_cache[0] = _createTextVNode(\" Back to Reports Dashboard \"))\n          ]),\n          _: 1,\n          __: [0]\n        })\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_4, [\n      _createElementVNode(\"div\", _hoisted_5, [\n        _createElementVNode(\"div\", _hoisted_6, [\n          _createElementVNode(\"div\", _hoisted_7, [\n            _createElementVNode(\"table\", _hoisted_8, [\n              _cache[3] || (_cache[3] = _createElementVNode(\"thead\", { class: \"bg-gray-50\" }, [\n                _createElementVNode(\"tr\", null, [\n                  _createElementVNode(\"th\", {\n                    scope: \"col\",\n                    class: \"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6\"\n                  }, \" Name \"),\n                  _createElementVNode(\"th\", {\n                    scope: \"col\",\n                    class: \"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\"\n                  }, \" Position \"),\n                  _createElementVNode(\"th\", {\n                    scope: \"col\",\n                    class: \"px-3 py-3.5 text-center text-sm font-semibold text-gray-900\"\n                  }, \" PQS Progress \"),\n                  _createElementVNode(\"th\", {\n                    scope: \"col\",\n                    class: \"px-3 py-3.5 text-center text-sm font-semibold text-gray-900\"\n                  }, \" Events Progress \"),\n                  _createElementVNode(\"th\", {\n                    scope: \"col\",\n                    class: \"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\"\n                  }, \" Readiness Status \"),\n                  _createElementVNode(\"th\", {\n                    scope: \"col\",\n                    class: \"relative py-3.5 pl-3 pr-4 sm:pr-6\"\n                  }, [\n                    _createElementVNode(\"span\", { class: \"sr-only\" }, \"View\")\n                  ])\n                ])\n              ], -1)),\n              _createElementVNode(\"tbody\", _hoisted_9, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(personnel.value, (person) => {\n                  return (_openBlock(), _createElementBlock(\"tr\", {\n                    key: person.id\n                  }, [\n                    _createElementVNode(\"td\", _hoisted_10, _toDisplayString(person.displayName), 1),\n                    _createElementVNode(\"td\", _hoisted_11, _toDisplayString(person.assignedPosition), 1),\n                    _createElementVNode(\"td\", _hoisted_12, [\n                      _createElementVNode(\"div\", _hoisted_13, [\n                        _createVNode(ProgressWheel, {\n                          progress: person.pqsProgressPercentage ?? 0\n                        }, null, 8, [\"progress\"])\n                      ])\n                    ]),\n                    _createElementVNode(\"td\", _hoisted_14, [\n                      _createElementVNode(\"div\", _hoisted_15, [\n                        _createVNode(ProgressWheel, {\n                          progress: person.eventsProgressPercentage ?? 0\n                        }, null, 8, [\"progress\"])\n                      ])\n                    ]),\n                    _createElementVNode(\"td\", _hoisted_16, [\n                      _createElementVNode(\"span\", {\n                        class: _normalizeClass([\"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium\", \n                        readinessStatusColor(person.readinessAgainstDeadline)\n                      ])\n                      }, _toDisplayString(person.readinessAgainstDeadline || \"Unknown\"), 3)\n                    ]),\n                    _createElementVNode(\"td\", _hoisted_17, [\n                      _createVNode(_component_router_link, {\n                        to: `/student/${person.id}`,\n                        class: \"text-indigo-600 hover:text-indigo-900\"\n                      }, {\n                        default: _withCtx(() => [\n                          _cache[2] || (_cache[2] = _createTextVNode(\"View Report\")),\n                          _createElementVNode(\"span\", _hoisted_18, \", \" + _toDisplayString(person.displayName), 1)\n                        ]),\n                        _: 2,\n                        __: [2]\n                      }, 1032, [\"to\"])\n                    ])\n                  ]))\n                }), 128))\n              ])\n            ])\n          ])\n        ])\n      ])\n    ])\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"p-4 sm:p-6 lg:p-8\">\n    <div class=\"sm:flex sm:items-center sm:justify-between\">\n      <div class=\"sm:flex-auto\">\n        <h1 class=\"text-2xl font-bold text-gray-900\">Individual Reports</h1>\n        <p class=\"mt-2 text-sm text-gray-500\">\n          Select an individual to view their detailed training report.\n        </p>\n      </div>\n      <div class=\"mt-4 sm:mt-0 sm:ml-16 sm:flex-none\">\n        <router-link\n          :to=\"{ name: 'Reports' }\"\n          type=\"button\"\n          class=\"inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50\"\n        >\n          <ArrowLeftIcon class=\"-ml-0.5 mr-1.5 h-5 w-5 text-gray-400\" />\n          Back to Reports Dashboard\n        </router-link>\n      </div>\n    </div>\n    <div class=\"mt-8 flow-root\">\n      <div class=\"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8\">\n        <div class=\"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8\">\n          <div\n            class=\"overflow-hidden shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg\"\n          >\n            <table class=\"min-w-full divide-y divide-gray-300\">\n              <thead class=\"bg-gray-50\">\n                <tr>\n                  <th\n                    scope=\"col\"\n                    class=\"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6\"\n                  >\n                    Name\n                  </th>\n                  <th\n                    scope=\"col\"\n                    class=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\"\n                  >\n                    Position\n                  </th>\n                  <th\n                    scope=\"col\"\n                    class=\"px-3 py-3.5 text-center text-sm font-semibold text-gray-900\"\n                  >\n                    PQS Progress\n                  </th>\n                  <th\n                    scope=\"col\"\n                    class=\"px-3 py-3.5 text-center text-sm font-semibold text-gray-900\"\n                  >\n                    Events Progress\n                  </th>\n                  <th\n                    scope=\"col\"\n                    class=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\"\n                  >\n                    Readiness Status\n                  </th>\n                  <th scope=\"col\" class=\"relative py-3.5 pl-3 pr-4 sm:pr-6\">\n                    <span class=\"sr-only\">View</span>\n                  </th>\n                </tr>\n              </thead>\n              <tbody class=\"divide-y divide-gray-200 bg-white\">\n                <tr v-for=\"person in personnel\" :key=\"person.id\">\n                  <td\n                    class=\"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6\"\n                  >\n                    {{ person.displayName }}\n                  </td>\n                  <td class=\"whitespace-nowrap px-3 py-4 text-sm text-gray-500\">\n                    {{ person.assignedPosition }}\n                  </td>\n                  <td class=\"whitespace-nowrap px-3 py-4 text-sm text-gray-500\">\n                    <div class=\"flex justify-center\">\n                      <ProgressWheel\n                        :progress=\"person.pqsProgressPercentage ?? 0\"\n                      />\n                    </div>\n                  </td>\n                  <td class=\"whitespace-nowrap px-3 py-4 text-sm text-gray-500\">\n                    <div class=\"flex justify-center\">\n                      <ProgressWheel\n                        :progress=\"person.eventsProgressPercentage ?? 0\"\n                      />\n                    </div>\n                  </td>\n                  <td class=\"whitespace-nowrap px-3 py-4 text-sm text-gray-500\">\n                    <span\n                      class=\"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium\"\n                      :class=\"\n                        readinessStatusColor(person.readinessAgainstDeadline)\n                      \"\n                    >\n                      {{ person.readinessAgainstDeadline || \"Unknown\" }}\n                    </span>\n                  </td>\n                  <td\n                    class=\"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6\"\n                  >\n                    <router-link\n                      :to=\"`/student/${person.id}`\"\n                      class=\"text-indigo-600 hover:text-indigo-900\"\n                      >View Report<span class=\"sr-only\"\n                        >, {{ person.displayName }}</span\n                      ></router-link\n                    >\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from \"vue\";\nimport { usePersonnelStore } from \"@/stores/personnelStore\";\nimport { ReadinessStatus } from \"@/types/personnelTypes\";\nimport ProgressWheel from \"@/components/ui/ProgressWheel.vue\";\nimport { ArrowLeftIcon } from \"@heroicons/vue/20/solid\";\n\nconst personnelStore = usePersonnelStore();\nconst personnel = computed(() => personnelStore.allPersonnelSortedByName);\n\nconst readinessStatusColor = (status?: ReadinessStatus) => {\n  switch (status) {\n    case ReadinessStatus.OnTrack:\n      return \"bg-green-100 text-green-800\";\n    case ReadinessStatus.ReadyForNextLevel:\n      return \"bg-blue-100 text-blue-800\";\n    case ReadinessStatus.AtRisk:\n      return \"bg-yellow-100 text-yellow-800\";\n    case ReadinessStatus.BehindSchedule:\n      return \"bg-red-100 text-red-800\";\n    case ReadinessStatus.Blocked:\n      return \"bg-gray-100 text-gray-800\";\n    default:\n      return \"bg-gray-100 text-gray-800\";\n  }\n};\n</script>\n","import script from \"./IndividualReportListView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./IndividualReportListView.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"h-96 w-full\" }\n\nimport {\n  ref,\n  onMounted,\n  onBeforeUnmount,\n  watch,\n  type PropType,\n} from \"vue\";\nimport { Chart, registerables } from \"chart.js\";\nimport type { Upgrader } from \"@/types/personnelTypes\";\nimport { RequirementType, type Syllabus } from \"@/types/syllabiTypes\";\nimport { addDays, daysBetween, getTodayUtc } from \"@/utils/dateUtils\";\nimport { useSyllabiStore } from \"@/stores/syllabiStore\";\nimport { useAppConfigStore } from \"@/stores/appConfigStore\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'TrackLevelChart',\n  props: {\n  upgraders: {\n    type: Array as PropType<Upgrader[]>,\n    required: true,\n  },\n  level: {\n    type: String,\n    required: true,\n  },\n  chartType: {\n    type: String as PropType<RequirementType>,\n    required: true,\n    validator: (value: string) =>\n      [RequirementType.PQS, RequirementType.Event].includes(\n        value as RequirementType\n      ),\n  },\n},\n  setup(__props) {\n\nChart.register(...registerables);\n\nconst props = __props;\n\nconst chartCanvas = ref<HTMLCanvasElement | null>(null);\nlet chartInstance: Chart | null = null;\n\n// Helper to generate distinct colors for each upgrader line\nfunction generateColor(index: number, alpha = 1): string {\n  const colors = [\n    `rgba(59, 130, 246, ${alpha})`, // blue\n    `rgba(16, 185, 129, ${alpha})`, // green\n    `rgba(239, 68, 68, ${alpha})`, // red\n    `rgba(245, 158, 11, ${alpha})`, // amber\n    `rgba(139, 92, 246, ${alpha})`, // violet\n    `rgba(236, 72, 153, ${alpha})`, // pink\n    `rgba(20, 184, 166, ${alpha})`, // teal\n    `rgba(99, 102, 241, ${alpha})`, // indigo\n  ];\n  return colors[index % colors.length];\n}\n\n// This function will create or update the chart\nconst renderChart = () => {\n  if (chartInstance) {\n    chartInstance.destroy();\n  }\n  if (!chartCanvas.value || props.upgraders.length === 0) return;\n\n  const syllabiStore = useSyllabiStore();\n  const appConfigStore = useAppConfigStore();\n  const firstUpgrader = props.upgraders[0];\n\n  const syllabus = syllabiStore.findSyllabus(\n    firstUpgrader.assignedPosition,\n    firstUpgrader.assignedSyllabusYear\n  );\n\n  if (!syllabus) {\n    console.warn(\n      `No syllabus found for ${firstUpgrader.assignedPosition} ${firstUpgrader.assignedSyllabusYear}`\n    );\n    return;\n  }\n\n  // Get deadlines and set max months for the chart\n  const deadlines = appConfigStore.getDeadlinesForPositionLevel(\n    firstUpgrader.assignedPosition,\n    props.level\n  );\n\n  if (!deadlines) {\n    console.warn(\n      `No deadlines configured for ${firstUpgrader.assignedPosition} level ${props.level}`\n    );\n    return;\n  }\n\n  const { targetMonths, deadlineMonths } = deadlines;\n  const maxMonths = deadlineMonths + 3; // Requirement: track deadline + 3 months\n  const labels = Array.from({ length: maxMonths + 1 }, (_, i) => `Month ${i}`);\n\n  const reqsForLevel = syllabus.requirements.filter(\n    (r) =>\n      String(r.level) === props.level &&\n      r.type === props.chartType &&\n      !r.isDefaultWaived\n  );\n\n  const totalReqsCount = reqsForLevel.length;\n  if (totalReqsCount === 0) return; // Don't render chart if no requirements for this type/level\n\n  const today = getTodayUtc();\n  const datasets: any[] = [];\n\n  // Create a dataset for each upgrader\n  props.upgraders.forEach((upgrader, index) => {\n    const monthsSinceStart = daysBetween(upgrader.startDate, today) / 30.44;\n    const color = generateColor(index);\n\n    const actualData = labels.map((_, monthIndex) => {\n      if (monthIndex > monthsSinceStart) return null; // Don't plot future actuals\n\n      const monthEndDate = addDays(upgrader.startDate, monthIndex * 30.44);\n      const completedCount = upgrader.rawCompletions.filter((comp) => {\n        const req = reqsForLevel.find(\n          (r) => r.name.toUpperCase() === comp.event.toUpperCase()\n        );\n        return req && comp.date <= monthEndDate;\n      }).length;\n\n      return (completedCount / totalReqsCount) * 100;\n    });\n\n    datasets.push({\n      label: upgrader.displayName,\n      data: actualData,\n      borderColor: color,\n      backgroundColor: color.replace(/, \\d?\\.?\\d*\\)$/, \", 0.1)\"),\n      tension: 0.1,\n      borderWidth: 2,\n    });\n  });\n\n  // Add Squadron Target and Wing Deadline lines\n  datasets.push(\n    {\n      label: \"Squadron Target\",\n      data: labels\n        .map((_, i) => (targetMonths > 0 ? (100 / targetMonths) * i : null))\n        .map((val) => (val !== null && val > 100 ? 100 : val)), // Cap at 100%\n      borderColor: \"rgba(234, 179, 8, 0.7)\", // amber-400\n      borderDash: [10, 5],\n      pointRadius: 0,\n      fill: false,\n      borderWidth: 2,\n    },\n    {\n      label: \"Wing Deadline\",\n      data: labels\n        .map((_, i) => (deadlineMonths > 0 ? (100 / deadlineMonths) * i : null))\n        .map((val) => (val !== null && val > 100 ? 100 : val)), // Cap at 100%\n      borderColor: \"rgba(220, 38, 38, 0.7)\", // red-600\n      borderDash: [10, 5],\n      pointRadius: 0,\n      fill: false,\n      borderWidth: 2,\n    }\n  );\n\n  const ctx = chartCanvas.value.getContext(\"2d\");\n  if (!ctx) return;\n\n  chartInstance = new Chart(ctx, {\n    type: \"line\",\n    data: { labels, datasets },\n    options: {\n      responsive: true,\n      maintainAspectRatio: false,\n      plugins: {\n        title: {\n          display: true,\n          text: `L${props.level} ${props.chartType} Progress`,\n          font: { size: 16 },\n        },\n        legend: {\n          position: \"bottom\",\n          labels: {\n            boxWidth: 20,\n            font: { size: 10 },\n          },\n        },\n      },\n      scales: {\n        y: {\n          min: 0,\n          max: 100,\n          title: {\n            display: true,\n            text: \"% Complete\",\n          },\n        },\n        x: {\n          title: {\n            display: true,\n            text: \"Months Since Student Start Date\",\n          },\n        },\n      },\n    },\n  });\n};\n\n// Initial mount\nonMounted(renderChart);\n\n// Watch for prop changes to re-render the chart\nwatch(() => [props.upgraders, props.level, props.chartType], renderChart, {\n  deep: true,\n});\n\nonBeforeUnmount(() => {\n  if (chartInstance) {\n    chartInstance.destroy();\n  }\n});\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"canvas\", {\n      ref_key: \"chartCanvas\",\n      ref: chartCanvas\n    }, null, 512)\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"h-96 w-full\">\n    <canvas ref=\"chartCanvas\"></canvas>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  ref,\n  onMounted,\n  onBeforeUnmount,\n  watch,\n  type PropType,\n  defineProps,\n} from \"vue\";\nimport { Chart, registerables } from \"chart.js\";\nimport type { Upgrader } from \"@/types/personnelTypes\";\nimport { RequirementType, type Syllabus } from \"@/types/syllabiTypes\";\nimport { addDays, daysBetween, getTodayUtc } from \"@/utils/dateUtils\";\nimport { useSyllabiStore } from \"@/stores/syllabiStore\";\nimport { useAppConfigStore } from \"@/stores/appConfigStore\";\n\nChart.register(...registerables);\n\nconst props = defineProps({\n  upgraders: {\n    type: Array as PropType<Upgrader[]>,\n    required: true,\n  },\n  level: {\n    type: String,\n    required: true,\n  },\n  chartType: {\n    type: String as PropType<RequirementType>,\n    required: true,\n    validator: (value: string) =>\n      [RequirementType.PQS, RequirementType.Event].includes(\n        value as RequirementType\n      ),\n  },\n});\n\nconst chartCanvas = ref<HTMLCanvasElement | null>(null);\nlet chartInstance: Chart | null = null;\n\n// Helper to generate distinct colors for each upgrader line\nfunction generateColor(index: number, alpha = 1): string {\n  const colors = [\n    `rgba(59, 130, 246, ${alpha})`, // blue\n    `rgba(16, 185, 129, ${alpha})`, // green\n    `rgba(239, 68, 68, ${alpha})`, // red\n    `rgba(245, 158, 11, ${alpha})`, // amber\n    `rgba(139, 92, 246, ${alpha})`, // violet\n    `rgba(236, 72, 153, ${alpha})`, // pink\n    `rgba(20, 184, 166, ${alpha})`, // teal\n    `rgba(99, 102, 241, ${alpha})`, // indigo\n  ];\n  return colors[index % colors.length];\n}\n\n// This function will create or update the chart\nconst renderChart = () => {\n  if (chartInstance) {\n    chartInstance.destroy();\n  }\n  if (!chartCanvas.value || props.upgraders.length === 0) return;\n\n  const syllabiStore = useSyllabiStore();\n  const appConfigStore = useAppConfigStore();\n  const firstUpgrader = props.upgraders[0];\n\n  const syllabus = syllabiStore.findSyllabus(\n    firstUpgrader.assignedPosition,\n    firstUpgrader.assignedSyllabusYear\n  );\n\n  if (!syllabus) {\n    console.warn(\n      `No syllabus found for ${firstUpgrader.assignedPosition} ${firstUpgrader.assignedSyllabusYear}`\n    );\n    return;\n  }\n\n  // Get deadlines and set max months for the chart\n  const deadlines = appConfigStore.getDeadlinesForPositionLevel(\n    firstUpgrader.assignedPosition,\n    props.level\n  );\n\n  if (!deadlines) {\n    console.warn(\n      `No deadlines configured for ${firstUpgrader.assignedPosition} level ${props.level}`\n    );\n    return;\n  }\n\n  const { targetMonths, deadlineMonths } = deadlines;\n  const maxMonths = deadlineMonths + 3; // Requirement: track deadline + 3 months\n  const labels = Array.from({ length: maxMonths + 1 }, (_, i) => `Month ${i}`);\n\n  const reqsForLevel = syllabus.requirements.filter(\n    (r) =>\n      String(r.level) === props.level &&\n      r.type === props.chartType &&\n      !r.isDefaultWaived\n  );\n\n  const totalReqsCount = reqsForLevel.length;\n  if (totalReqsCount === 0) return; // Don't render chart if no requirements for this type/level\n\n  const today = getTodayUtc();\n  const datasets: any[] = [];\n\n  // Create a dataset for each upgrader\n  props.upgraders.forEach((upgrader, index) => {\n    const monthsSinceStart = daysBetween(upgrader.startDate, today) / 30.44;\n    const color = generateColor(index);\n\n    const actualData = labels.map((_, monthIndex) => {\n      if (monthIndex > monthsSinceStart) return null; // Don't plot future actuals\n\n      const monthEndDate = addDays(upgrader.startDate, monthIndex * 30.44);\n      const completedCount = upgrader.rawCompletions.filter((comp) => {\n        const req = reqsForLevel.find(\n          (r) => r.name.toUpperCase() === comp.event.toUpperCase()\n        );\n        return req && comp.date <= monthEndDate;\n      }).length;\n\n      return (completedCount / totalReqsCount) * 100;\n    });\n\n    datasets.push({\n      label: upgrader.displayName,\n      data: actualData,\n      borderColor: color,\n      backgroundColor: color.replace(/, \\d?\\.?\\d*\\)$/, \", 0.1)\"),\n      tension: 0.1,\n      borderWidth: 2,\n    });\n  });\n\n  // Add Squadron Target and Wing Deadline lines\n  datasets.push(\n    {\n      label: \"Squadron Target\",\n      data: labels\n        .map((_, i) => (targetMonths > 0 ? (100 / targetMonths) * i : null))\n        .map((val) => (val !== null && val > 100 ? 100 : val)), // Cap at 100%\n      borderColor: \"rgba(234, 179, 8, 0.7)\", // amber-400\n      borderDash: [10, 5],\n      pointRadius: 0,\n      fill: false,\n      borderWidth: 2,\n    },\n    {\n      label: \"Wing Deadline\",\n      data: labels\n        .map((_, i) => (deadlineMonths > 0 ? (100 / deadlineMonths) * i : null))\n        .map((val) => (val !== null && val > 100 ? 100 : val)), // Cap at 100%\n      borderColor: \"rgba(220, 38, 38, 0.7)\", // red-600\n      borderDash: [10, 5],\n      pointRadius: 0,\n      fill: false,\n      borderWidth: 2,\n    }\n  );\n\n  const ctx = chartCanvas.value.getContext(\"2d\");\n  if (!ctx) return;\n\n  chartInstance = new Chart(ctx, {\n    type: \"line\",\n    data: { labels, datasets },\n    options: {\n      responsive: true,\n      maintainAspectRatio: false,\n      plugins: {\n        title: {\n          display: true,\n          text: `L${props.level} ${props.chartType} Progress`,\n          font: { size: 16 },\n        },\n        legend: {\n          position: \"bottom\",\n          labels: {\n            boxWidth: 20,\n            font: { size: 10 },\n          },\n        },\n      },\n      scales: {\n        y: {\n          min: 0,\n          max: 100,\n          title: {\n            display: true,\n            text: \"% Complete\",\n          },\n        },\n        x: {\n          title: {\n            display: true,\n            text: \"Months Since Student Start Date\",\n          },\n        },\n      },\n    },\n  });\n};\n\n// Initial mount\nonMounted(renderChart);\n\n// Watch for prop changes to re-render the chart\nwatch(() => [props.upgraders, props.level, props.chartType], renderChart, {\n  deep: true,\n});\n\nonBeforeUnmount(() => {\n  if (chartInstance) {\n    chartInstance.destroy();\n  }\n});\n</script>\n","import script from \"./TrackLevelChart.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TrackLevelChart.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, withDirectives as _withDirectives, normalizeClass as _normalizeClass, createCommentVNode as _createCommentVNode, unref as _unref } from \"vue\"\n\nconst _hoisted_1 = { class: \"p-4 lg:p-6 space-y-6 report-container\" }\nconst _hoisted_2 = { class: \"flex justify-between items-center non-printable\" }\nconst _hoisted_3 = { class: \"flex items-center gap-4\" }\nconst _hoisted_4 = { class: \"p-4 bg-gray-100 rounded-lg shadow-sm non-printable\" }\nconst _hoisted_5 = [\"value\"]\nconst _hoisted_6 = {\n  key: 0,\n  class: \"printable-content\"\n}\nconst _hoisted_7 = { class: \"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3 mb-6\" }\nconst _hoisted_8 = { class: \"bg-white p-3 rounded-lg shadow-sm flex items-center space-x-2\" }\nconst _hoisted_9 = { class: \"text-xl font-bold\" }\nconst _hoisted_10 = { class: \"bg-white p-3 rounded-lg shadow-sm flex items-center space-x-2\" }\nconst _hoisted_11 = { class: \"text-xl font-bold\" }\nconst _hoisted_12 = { class: \"bg-white p-3 rounded-lg shadow-sm flex items-center space-x-2\" }\nconst _hoisted_13 = { class: \"text-xl font-bold\" }\nconst _hoisted_14 = { class: \"bg-white p-3 rounded-lg shadow-sm flex items-center space-x-2\" }\nconst _hoisted_15 = { class: \"text-xl font-bold\" }\nconst _hoisted_16 = { class: \"bg-white p-3 rounded-lg shadow-sm flex items-center space-x-2\" }\nconst _hoisted_17 = { class: \"text-xl font-bold\" }\nconst _hoisted_18 = { class: \"grid grid-cols-1 lg:grid-cols-3 gap-6\" }\nconst _hoisted_19 = { class: \"lg:col-span-1\" }\nconst _hoisted_20 = { class: \"p-4 bg-white rounded-lg shadow-sm\" }\nconst _hoisted_21 = {\n  key: 0,\n  class: \"space-y-2\"\n}\nconst _hoisted_22 = { class: \"font-medium text-sm\" }\nconst _hoisted_23 = { class: \"text-xs font-semibold\" }\nconst _hoisted_24 = {\n  key: 1,\n  class: \"text-sm text-gray-500\"\n}\nconst _hoisted_25 = { class: \"lg:col-span-2 space-y-8\" }\nconst _hoisted_26 = { class: \"text-xl font-semibold\" }\nconst _hoisted_27 = { class: \"grid grid-cols-1 xl:grid-cols-2 gap-4 mt-2\" }\nconst _hoisted_28 = {\n  key: 1,\n  class: \"text-center p-8 text-gray-500 bg-white rounded-lg shadow-sm\"\n}\n\nimport { ref, computed } from \"vue\";\nimport { usePersonnelStore } from \"@/stores/personnelStore\";\nimport { useSyllabiStore } from \"@/stores/syllabiStore\";\nimport TrackLevelChart from \"@/components/specific/charts/TrackLevelChart.vue\";\nimport { RequirementType } from \"@/types/syllabiTypes\";\nimport { type Upgrader, ReadinessStatus } from \"@/types/personnelTypes\";\nimport * as trainingLogicService from \"@/core/trainingLogicService\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'TrackReportView',\n  setup(__props) {\n\nconst personnelStore = usePersonnelStore();\nconst syllabiStore = useSyllabiStore();\n\nconst availablePositions = computed(() =>\n  Array.from(\n    new Set(personnelStore.allPersonnel.map((u) => u.assignedPosition))\n  )\n);\nconst selectedPosition = ref(\n  availablePositions.value.length > 0 ? availablePositions.value[0] : \"\"\n);\n\nconst filteredUpgraders = computed(() => {\n  return personnelStore.allPersonnel.filter((upgrader) => {\n    if (upgrader.assignedPosition !== selectedPosition.value) return false;\n    if (!upgrader.rawCompletions?.length) return false;\n    const currentLevel = parseInt(upgrader.derivedPqsWorkingLevel || \"0\");\n    return currentLevel > 0;\n  });\n});\n\nconst healthSummary = computed(() => {\n  return filteredUpgraders.value.reduce(\n    (acc, upgrader) => {\n      acc.total++;\n      switch (upgrader.readinessAgainstDeadline) {\n        case ReadinessStatus.Blocked:\n          acc.blocked++;\n          break;\n        case ReadinessStatus.BehindSchedule:\n          acc.behind++;\n          break;\n        case ReadinessStatus.AtRisk:\n          acc.atRisk++;\n          break;\n        case ReadinessStatus.ReadyForNextLevel:\n          acc.readyForNext++;\n          break;\n      }\n      return acc;\n    },\n    { total: 0, blocked: 0, behind: 0, atRisk: 0, readyForNext: 0 }\n  );\n});\n\nconst priorityUpgraders = computed(() => {\n  if (!filteredUpgraders.value.length) return [];\n  const syllabus = syllabiStore.findSyllabus(\n    filteredUpgraders.value[0].assignedPosition,\n    filteredUpgraders.value[0].assignedSyllabusYear\n  );\n  if (!syllabus) return [];\n  return trainingLogicService\n    .getPrioritizedUpgraders(filteredUpgraders.value, syllabus)\n    .slice(0, 3);\n});\n\nconst uniqueLevels = computed(() => {\n  const levels = new Set(\n    filteredUpgraders.value\n      .map((u) => parseInt(u.derivedPqsWorkingLevel || \"0\"))\n      .filter((l) => l > 0)\n  );\n  return Array.from(levels).sort((a, b) => a - b);\n});\n\nconst getUpgradersForLevel = (level: number): Upgrader[] => {\n  return filteredUpgraders.value.filter(\n    (u) => parseInt(u.derivedPqsWorkingLevel || \"0\") === level\n  );\n};\n\nconst getReadinessClass = (status: ReadinessStatus) => {\n  const classes = {\n    [ReadinessStatus.Blocked]: \"bg-gray-200 text-gray-800\",\n    [ReadinessStatus.BehindSchedule]: \"bg-red-200 text-red-800\",\n    [ReadinessStatus.AtRisk]: \"bg-yellow-200 text-yellow-800\",\n    [ReadinessStatus.ReadyForNextLevel]: \"bg-purple-200 text-purple-800\",\n    [ReadinessStatus.OnTrack]: \"bg-green-200 text-green-800\",\n  };\n  return classes[status] || \"bg-green-200 text-green-800\";\n};\n\nconst getPacingText = (pacing?: number) => {\n  if (pacing === undefined || pacing === null) return \"N/A\";\n  if (pacing >= 0) return `${pacing}d Ahead`;\n  return `${Math.abs(pacing)}d Behind`;\n};\n\nconst printReport = () => {\n  window.print();\n};\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_router_link = _resolveComponent(\"router-link\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createVNode(_component_router_link, {\n          to: \"/reports\",\n          class: \"flex items-center gap-1 text-sm p-2 rounded-md text-gray-600 hover:bg-gray-200 hover:text-gray-900\"\n        }, {\n          default: _withCtx(() => _cache[1] || (_cache[1] = [\n            _createElementVNode(\"svg\", {\n              xmlns: \"http://www.w3.org/2000/svg\",\n              class: \"h-5 w-5\",\n              viewBox: \"0 0 20 20\",\n              fill: \"currentColor\"\n            }, [\n              _createElementVNode(\"path\", {\n                \"fill-rule\": \"evenodd\",\n                d: \"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z\",\n                \"clip-rule\": \"evenodd\"\n              })\n            ], -1),\n            _createTextVNode(\" Back \")\n          ])),\n          _: 1,\n          __: [1]\n        }),\n        _cache[2] || (_cache[2] = _createElementVNode(\"h1\", { class: \"text-2xl font-bold\" }, \"Track Report\", -1))\n      ]),\n      _createElementVNode(\"button\", {\n        onClick: printReport,\n        class: \"p-2 rounded-full hover:bg-gray-200\",\n        title: \"Print Report\"\n      }, _cache[3] || (_cache[3] = [\n        _createElementVNode(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          class: \"h-6 w-6 text-gray-600\",\n          fill: \"none\",\n          viewBox: \"0 0 24 24\",\n          stroke: \"currentColor\"\n        }, [\n          _createElementVNode(\"path\", {\n            \"stroke-linecap\": \"round\",\n            \"stroke-linejoin\": \"round\",\n            \"stroke-width\": \"2\",\n            d: \"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z\"\n          })\n        ], -1)\n      ]))\n    ]),\n    _createElementVNode(\"div\", _hoisted_4, [\n      _cache[4] || (_cache[4] = _createElementVNode(\"label\", {\n        for: \"position-select\",\n        class: \"block text-sm font-medium text-gray-700\"\n      }, \"Track/Position\", -1)),\n      _withDirectives(_createElementVNode(\"select\", {\n        id: \"position-select\",\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((selectedPosition).value = $event)),\n        class: \"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md\"\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(availablePositions.value, (pos) => {\n          return (_openBlock(), _createElementBlock(\"option\", {\n            key: pos,\n            value: pos\n          }, _toDisplayString(pos), 9, _hoisted_5))\n        }), 128))\n      ], 512), [\n        [_vModelSelect, selectedPosition.value]\n      ])\n    ]),\n    (filteredUpgraders.value.length > 0)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n          _createElementVNode(\"div\", _hoisted_7, [\n            _createElementVNode(\"div\", _hoisted_8, [\n              _cache[6] || (_cache[6] = _createElementVNode(\"div\", { class: \"bg-blue-100 p-2 rounded-full\" }, [\n                _createElementVNode(\"svg\", {\n                  class: \"h-5 w-5 text-blue-600\",\n                  fill: \"none\",\n                  viewBox: \"0 0 24 24\",\n                  stroke: \"currentColor\"\n                }, [\n                  _createElementVNode(\"path\", {\n                    \"stroke-linecap\": \"round\",\n                    \"stroke-linejoin\": \"round\",\n                    \"stroke-width\": \"2\",\n                    d: \"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\"\n                  })\n                ])\n              ], -1)),\n              _createElementVNode(\"div\", null, [\n                _createElementVNode(\"p\", _hoisted_9, _toDisplayString(healthSummary.value.total), 1),\n                _cache[5] || (_cache[5] = _createElementVNode(\"p\", { class: \"text-xs text-gray-500\" }, \"Total\", -1))\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_10, [\n              _cache[8] || (_cache[8] = _createElementVNode(\"div\", { class: \"bg-red-100 p-2 rounded-full\" }, [\n                _createElementVNode(\"svg\", {\n                  class: \"h-5 w-5 text-red-600\",\n                  fill: \"none\",\n                  viewBox: \"0 0 24 24\",\n                  stroke: \"currentColor\"\n                }, [\n                  _createElementVNode(\"path\", {\n                    \"stroke-linecap\": \"round\",\n                    \"stroke-linejoin\": \"round\",\n                    \"stroke-width\": \"2\",\n                    d: \"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6\"\n                  })\n                ])\n              ], -1)),\n              _createElementVNode(\"div\", null, [\n                _createElementVNode(\"p\", _hoisted_11, _toDisplayString(healthSummary.value.behind), 1),\n                _cache[7] || (_cache[7] = _createElementVNode(\"p\", { class: \"text-xs text-gray-500\" }, \"Behind\", -1))\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_12, [\n              _cache[10] || (_cache[10] = _createElementVNode(\"div\", { class: \"bg-yellow-100 p-2 rounded-full\" }, [\n                _createElementVNode(\"svg\", {\n                  class: \"h-5 w-5 text-yellow-600\",\n                  fill: \"none\",\n                  viewBox: \"0 0 24 24\",\n                  stroke: \"currentColor\"\n                }, [\n                  _createElementVNode(\"path\", {\n                    \"stroke-linecap\": \"round\",\n                    \"stroke-linejoin\": \"round\",\n                    \"stroke-width\": \"2\",\n                    d: \"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"\n                  })\n                ])\n              ], -1)),\n              _createElementVNode(\"div\", null, [\n                _createElementVNode(\"p\", _hoisted_13, _toDisplayString(healthSummary.value.atRisk), 1),\n                _cache[9] || (_cache[9] = _createElementVNode(\"p\", { class: \"text-xs text-gray-500\" }, \"At Risk\", -1))\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_14, [\n              _cache[12] || (_cache[12] = _createElementVNode(\"div\", { class: \"bg-purple-100 p-2 rounded-full\" }, [\n                _createElementVNode(\"svg\", {\n                  class: \"h-5 w-5 text-purple-600\",\n                  fill: \"none\",\n                  viewBox: \"0 0 24 24\",\n                  stroke: \"currentColor\"\n                }, [\n                  _createElementVNode(\"path\", {\n                    \"stroke-linecap\": \"round\",\n                    \"stroke-linejoin\": \"round\",\n                    \"stroke-width\": \"2\",\n                    d: \"M9 11l3-3m0 0l3 3m-3-3v8m0-13a9 9 0 110 18 9 9 0 010-18z\"\n                  })\n                ])\n              ], -1)),\n              _createElementVNode(\"div\", null, [\n                _createElementVNode(\"p\", _hoisted_15, _toDisplayString(healthSummary.value.readyForNext), 1),\n                _cache[11] || (_cache[11] = _createElementVNode(\"p\", { class: \"text-xs text-gray-500\" }, \"Next Level\", -1))\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_16, [\n              _cache[14] || (_cache[14] = _createElementVNode(\"div\", { class: \"bg-gray-200 p-2 rounded-full\" }, [\n                _createElementVNode(\"svg\", {\n                  class: \"h-5 w-5 text-gray-600\",\n                  fill: \"none\",\n                  viewBox: \"0 0 24 24\",\n                  stroke: \"currentColor\"\n                }, [\n                  _createElementVNode(\"path\", {\n                    \"stroke-linecap\": \"round\",\n                    \"stroke-linejoin\": \"round\",\n                    \"stroke-width\": \"2\",\n                    d: \"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636\"\n                  })\n                ])\n              ], -1)),\n              _createElementVNode(\"div\", null, [\n                _createElementVNode(\"p\", _hoisted_17, _toDisplayString(healthSummary.value.blocked), 1),\n                _cache[13] || (_cache[13] = _createElementVNode(\"p\", { class: \"text-xs text-gray-500\" }, \"Blocked\", -1))\n              ])\n            ])\n          ]),\n          _createElementVNode(\"div\", _hoisted_18, [\n            _createElementVNode(\"div\", _hoisted_19, [\n              _createElementVNode(\"div\", _hoisted_20, [\n                _cache[15] || (_cache[15] = _createElementVNode(\"h2\", { class: \"text-xl font-semibold mb-3\" }, \"Top Priority Students\", -1)),\n                (priorityUpgraders.value.length > 0)\n                  ? (_openBlock(), _createElementBlock(\"ul\", _hoisted_21, [\n                      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(priorityUpgraders.value, (upgrader) => {\n                        return (_openBlock(), _createElementBlock(\"li\", {\n                          key: upgrader.id,\n                          class: _normalizeClass([\"flex justify-between items-center p-2 rounded-md\", getReadinessClass(upgrader.readinessAgainstDeadline!)])\n                        }, [\n                          _createElementVNode(\"span\", _hoisted_22, _toDisplayString(upgrader.displayName), 1),\n                          _createElementVNode(\"span\", _hoisted_23, _toDisplayString(getPacingText(upgrader.pacingAgainstDeadlineDays)), 1)\n                        ], 2))\n                      }), 128))\n                    ]))\n                  : (_openBlock(), _createElementBlock(\"p\", _hoisted_24, \" All students are on track. \"))\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_25, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(uniqueLevels.value, (level) => {\n                return (_openBlock(), _createElementBlock(\"div\", { key: level }, [\n                  _createElementVNode(\"h2\", _hoisted_26, \"Level \" + _toDisplayString(level) + \" Progress\", 1),\n                  _createElementVNode(\"div\", _hoisted_27, [\n                    _createVNode(TrackLevelChart, {\n                      upgraders: getUpgradersForLevel(level),\n                      level: String(level),\n                      \"chart-type\": _unref(RequirementType).PQS\n                    }, null, 8, [\"upgraders\", \"level\", \"chart-type\"]),\n                    _createVNode(TrackLevelChart, {\n                      upgraders: getUpgradersForLevel(level),\n                      level: String(level),\n                      \"chart-type\": _unref(RequirementType).Event\n                    }, null, 8, [\"upgraders\", \"level\", \"chart-type\"])\n                  ])\n                ]))\n              }), 128))\n            ])\n          ])\n        ]))\n      : (_openBlock(), _createElementBlock(\"div\", _hoisted_28, _cache[16] || (_cache[16] = [\n          _createElementVNode(\"p\", { class: \"text-lg font-medium\" }, \" No upgraders match the selected criteria. \", -1)\n        ])))\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"p-4 lg:p-6 space-y-6 report-container\">\n    <div class=\"flex justify-between items-center non-printable\">\n      <div class=\"flex items-center gap-4\">\n        <router-link\n          to=\"/reports\"\n          class=\"flex items-center gap-1 text-sm p-2 rounded-md text-gray-600 hover:bg-gray-200 hover:text-gray-900\"\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            class=\"h-5 w-5\"\n            viewBox=\"0 0 20 20\"\n            fill=\"currentColor\"\n          >\n            <path\n              fill-rule=\"evenodd\"\n              d=\"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z\"\n              clip-rule=\"evenodd\"\n            />\n          </svg>\n          Back\n        </router-link>\n        <h1 class=\"text-2xl font-bold\">Track Report</h1>\n      </div>\n      <button\n        @click=\"printReport\"\n        class=\"p-2 rounded-full hover:bg-gray-200\"\n        title=\"Print Report\"\n      >\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          class=\"h-6 w-6 text-gray-600\"\n          fill=\"none\"\n          viewBox=\"0 0 24 24\"\n          stroke=\"currentColor\"\n        >\n          <path\n            stroke-linecap=\"round\"\n            stroke-linejoin=\"round\"\n            stroke-width=\"2\"\n            d=\"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z\"\n          />\n        </svg>\n      </button>\n    </div>\n\n    <div class=\"p-4 bg-gray-100 rounded-lg shadow-sm non-printable\">\n      <label\n        for=\"position-select\"\n        class=\"block text-sm font-medium text-gray-700\"\n        >Track/Position</label\n      >\n      <select\n        id=\"position-select\"\n        v-model=\"selectedPosition\"\n        class=\"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md\"\n      >\n        <option v-for=\"pos in availablePositions\" :key=\"pos\" :value=\"pos\">\n          {{ pos }}\n        </option>\n      </select>\n    </div>\n\n    <div v-if=\"filteredUpgraders.length > 0\" class=\"printable-content\">\n      <div class=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3 mb-6\">\n        <div\n          class=\"bg-white p-3 rounded-lg shadow-sm flex items-center space-x-2\"\n        >\n          <div class=\"bg-blue-100 p-2 rounded-full\">\n            <svg\n              class=\"h-5 w-5 text-blue-600\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n                stroke-width=\"2\"\n                d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\"\n              />\n            </svg>\n          </div>\n          <div>\n            <p class=\"text-xl font-bold\">{{ healthSummary.total }}</p>\n            <p class=\"text-xs text-gray-500\">Total</p>\n          </div>\n        </div>\n        <div\n          class=\"bg-white p-3 rounded-lg shadow-sm flex items-center space-x-2\"\n        >\n          <div class=\"bg-red-100 p-2 rounded-full\">\n            <svg\n              class=\"h-5 w-5 text-red-600\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n                stroke-width=\"2\"\n                d=\"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6\"\n              />\n            </svg>\n          </div>\n          <div>\n            <p class=\"text-xl font-bold\">{{ healthSummary.behind }}</p>\n            <p class=\"text-xs text-gray-500\">Behind</p>\n          </div>\n        </div>\n        <div\n          class=\"bg-white p-3 rounded-lg shadow-sm flex items-center space-x-2\"\n        >\n          <div class=\"bg-yellow-100 p-2 rounded-full\">\n            <svg\n              class=\"h-5 w-5 text-yellow-600\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n                stroke-width=\"2\"\n                d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"\n              />\n            </svg>\n          </div>\n          <div>\n            <p class=\"text-xl font-bold\">{{ healthSummary.atRisk }}</p>\n            <p class=\"text-xs text-gray-500\">At Risk</p>\n          </div>\n        </div>\n        <div\n          class=\"bg-white p-3 rounded-lg shadow-sm flex items-center space-x-2\"\n        >\n          <div class=\"bg-purple-100 p-2 rounded-full\">\n            <svg\n              class=\"h-5 w-5 text-purple-600\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n                stroke-width=\"2\"\n                d=\"M9 11l3-3m0 0l3 3m-3-3v8m0-13a9 9 0 110 18 9 9 0 010-18z\"\n              />\n            </svg>\n          </div>\n          <div>\n            <p class=\"text-xl font-bold\">{{ healthSummary.readyForNext }}</p>\n            <p class=\"text-xs text-gray-500\">Next Level</p>\n          </div>\n        </div>\n        <div\n          class=\"bg-white p-3 rounded-lg shadow-sm flex items-center space-x-2\"\n        >\n          <div class=\"bg-gray-200 p-2 rounded-full\">\n            <svg\n              class=\"h-5 w-5 text-gray-600\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n                stroke-width=\"2\"\n                d=\"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636\"\n              />\n            </svg>\n          </div>\n          <div>\n            <p class=\"text-xl font-bold\">{{ healthSummary.blocked }}</p>\n            <p class=\"text-xs text-gray-500\">Blocked</p>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        <div class=\"lg:col-span-1\">\n          <div class=\"p-4 bg-white rounded-lg shadow-sm\">\n            <h2 class=\"text-xl font-semibold mb-3\">Top Priority Students</h2>\n            <ul v-if=\"priorityUpgraders.length > 0\" class=\"space-y-2\">\n              <li\n                v-for=\"upgrader in priorityUpgraders\"\n                :key=\"upgrader.id\"\n                class=\"flex justify-between items-center p-2 rounded-md\"\n                :class=\"getReadinessClass(upgrader.readinessAgainstDeadline!)\"\n              >\n                <span class=\"font-medium text-sm\">{{\n                  upgrader.displayName\n                }}</span>\n                <span class=\"text-xs font-semibold\">{{\n                  getPacingText(upgrader.pacingAgainstDeadlineDays)\n                }}</span>\n              </li>\n            </ul>\n            <p v-else class=\"text-sm text-gray-500\">\n              All students are on track.\n            </p>\n          </div>\n        </div>\n        <div class=\"lg:col-span-2 space-y-8\">\n          <div v-for=\"level in uniqueLevels\" :key=\"level\">\n            <h2 class=\"text-xl font-semibold\">Level {{ level }} Progress</h2>\n            <div class=\"grid grid-cols-1 xl:grid-cols-2 gap-4 mt-2\">\n              <TrackLevelChart\n                :upgraders=\"getUpgradersForLevel(level)\"\n                :level=\"String(level)\"\n                :chart-type=\"RequirementType.PQS\"\n              />\n              <TrackLevelChart\n                :upgraders=\"getUpgradersForLevel(level)\"\n                :level=\"String(level)\"\n                :chart-type=\"RequirementType.Event\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div\n      v-else\n      class=\"text-center p-8 text-gray-500 bg-white rounded-lg shadow-sm\"\n    >\n      <p class=\"text-lg font-medium\">\n        No upgraders match the selected criteria.\n      </p>\n    </div>\n  </div>\n</template>\n\n<style>\n@media print {\n  body * {\n    visibility: hidden;\n  }\n  .printable-content,\n  .printable-content * {\n    visibility: visible;\n  }\n  .printable-content {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n  }\n  .non-printable {\n    display: none;\n  }\n}\n</style>\n\n<script setup lang=\"ts\">\nimport { ref, computed } from \"vue\";\nimport { usePersonnelStore } from \"@/stores/personnelStore\";\nimport { useSyllabiStore } from \"@/stores/syllabiStore\";\nimport TrackLevelChart from \"@/components/specific/charts/TrackLevelChart.vue\";\nimport { RequirementType } from \"@/types/syllabiTypes\";\nimport { type Upgrader, ReadinessStatus } from \"@/types/personnelTypes\";\nimport * as trainingLogicService from \"@/core/trainingLogicService\";\n\nconst personnelStore = usePersonnelStore();\nconst syllabiStore = useSyllabiStore();\n\nconst availablePositions = computed(() =>\n  Array.from(\n    new Set(personnelStore.allPersonnel.map((u) => u.assignedPosition))\n  )\n);\nconst selectedPosition = ref(\n  availablePositions.value.length > 0 ? availablePositions.value[0] : \"\"\n);\n\nconst filteredUpgraders = computed(() => {\n  return personnelStore.allPersonnel.filter((upgrader) => {\n    if (upgrader.assignedPosition !== selectedPosition.value) return false;\n    if (!upgrader.rawCompletions?.length) return false;\n    const currentLevel = parseInt(upgrader.derivedPqsWorkingLevel || \"0\");\n    return currentLevel > 0;\n  });\n});\n\nconst healthSummary = computed(() => {\n  return filteredUpgraders.value.reduce(\n    (acc, upgrader) => {\n      acc.total++;\n      switch (upgrader.readinessAgainstDeadline) {\n        case ReadinessStatus.Blocked:\n          acc.blocked++;\n          break;\n        case ReadinessStatus.BehindSchedule:\n          acc.behind++;\n          break;\n        case ReadinessStatus.AtRisk:\n          acc.atRisk++;\n          break;\n        case ReadinessStatus.ReadyForNextLevel:\n          acc.readyForNext++;\n          break;\n      }\n      return acc;\n    },\n    { total: 0, blocked: 0, behind: 0, atRisk: 0, readyForNext: 0 }\n  );\n});\n\nconst priorityUpgraders = computed(() => {\n  if (!filteredUpgraders.value.length) return [];\n  const syllabus = syllabiStore.findSyllabus(\n    filteredUpgraders.value[0].assignedPosition,\n    filteredUpgraders.value[0].assignedSyllabusYear\n  );\n  if (!syllabus) return [];\n  return trainingLogicService\n    .getPrioritizedUpgraders(filteredUpgraders.value, syllabus)\n    .slice(0, 3);\n});\n\nconst uniqueLevels = computed(() => {\n  const levels = new Set(\n    filteredUpgraders.value\n      .map((u) => parseInt(u.derivedPqsWorkingLevel || \"0\"))\n      .filter((l) => l > 0)\n  );\n  return Array.from(levels).sort((a, b) => a - b);\n});\n\nconst getUpgradersForLevel = (level: number): Upgrader[] => {\n  return filteredUpgraders.value.filter(\n    (u) => parseInt(u.derivedPqsWorkingLevel || \"0\") === level\n  );\n};\n\nconst getReadinessClass = (status: ReadinessStatus) => {\n  const classes = {\n    [ReadinessStatus.Blocked]: \"bg-gray-200 text-gray-800\",\n    [ReadinessStatus.BehindSchedule]: \"bg-red-200 text-red-800\",\n    [ReadinessStatus.AtRisk]: \"bg-yellow-200 text-yellow-800\",\n    [ReadinessStatus.ReadyForNextLevel]: \"bg-purple-200 text-purple-800\",\n    [ReadinessStatus.OnTrack]: \"bg-green-200 text-green-800\",\n  };\n  return classes[status] || \"bg-green-200 text-green-800\";\n};\n\nconst getPacingText = (pacing?: number) => {\n  if (pacing === undefined || pacing === null) return \"N/A\";\n  if (pacing >= 0) return `${pacing}d Ahead`;\n  return `${Math.abs(pacing)}d Behind`;\n};\n\nconst printReport = () => {\n  window.print();\n};\n</script>\n","import script from \"./TrackReportView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TrackReportView.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./TrackReportView.vue?vue&type=style&index=0&id=32d8a044&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","// src/utils/anonymizer.ts\n\nimport type { Upgrader } from \"@/types/personnelTypes\";\nimport { deepClone } from \"./dataUtils\";\n\n/**\n * Defines the structure for the object returned by the anonymization process.\n * @property anonymizedPersonnel - A list of upgraders with their names replaced by pseudonyms.\n * @property keyMap - A map to convert pseudonyms back to real names. The key is the pseudonym, the value is the real name.\n */\nexport interface AnonymizationResult {\n  anonymizedPersonnel: Upgrader[];\n  keyMap: Map<string, string>;\n}\n\n/**\n * Anonymizes personnel data by replacing display names with generic pseudonyms.\n * It creates a deep copy of the personnel data to avoid mutating the original state.\n *\n * @param personnel - An array of Upgrader objects to be anonymized.\n * @returns An AnonymizationResult object containing the anonymized data and a keyMap for de-anonymization.\n */\nexport function anonymizeData(personnel: Upgrader[]): AnonymizationResult {\n  const keyMap = new Map<string, string>();\n\n  const anonymizedPersonnel = personnel.map((person, index) => {\n    const pseudonym = `Student ${index + 1}`;\n\n    // Store the mapping to reverse the process later\n    keyMap.set(pseudonym, person.displayName);\n\n    // Create a deep copy to avoid changing the original object in the store\n    const anonymizedPerson = deepClone(person);\n    anonymizedPerson.displayName = pseudonym;\n\n    return anonymizedPerson;\n  });\n\n  return { anonymizedPersonnel, keyMap };\n}\n\n/**\n * Replaces pseudonyms in a given text with their original names using a keyMap.\n *\n * @param text - The text content (e.g., an AI-generated report) containing pseudonyms.\n * @param keyMap - A map where keys are pseudonyms and values are the real names.\n * @returns The text with all pseudonyms replaced by their original names.\n */\nexport function deAnonymizeText(\n  text: string,\n  keyMap: Map<string, string>\n): string {\n  let deAnonymizedText = text;\n\n  // Iterate over the map and replace all occurrences of the pseudonym (key) with the real name (value)\n  keyMap.forEach((realName, pseudonym) => {\n    // Use a regular expression with the 'g' flag to ensure all instances are replaced\n    const regex = new RegExp(pseudonym, \"g\");\n    deAnonymizedText = deAnonymizedText.replace(regex, realName);\n  });\n\n  return deAnonymizedText;\n}\n","/**\n * @file This service is responsible for generating structured report data.\n * It acts as an orchestrator, pulling data from various stores and using\n * logic services to assemble final, presentation-ready report objects.\n */\n\nimport { usePersonnelStore } from \"../stores/personnelStore\";\nimport { useSyllabiStore } from \"../stores/syllabiStore\";\nimport {\n  getPrioritizedRequirements,\n  getPrioritizedUpgraders,\n} from \"./trainingLogicService\";\nimport {\n  type IndividualReport,\n  type TrackReport,\n  type LLMAnonymizedMultiPositionMonthlyReport,\n  type LLMAnonymizedPositionLevelReportData,\n  type LLMAnonymizedUpgraderReportData,\n  type MonthlyReportData,\n  type MonthlyTrackSummary,\n} from \"../types/reportTypes\";\nimport { loggingService } from \"../utils/loggingService\";\nimport { ReadinessStatus, Upgrader } from \"@/types/personnelTypes\";\nimport { anonymizeData } from \"@/utils/anonymizer\";\nimport { addDays } from \"date-fns\";\nimport { getTodayUtc } from \"@/utils/dateUtils\";\nimport { RequirementType } from \"@/types/syllabiTypes\";\nconst SVC_MODULE = \"[ReportGenerator]\";\n\n/**\n * Generates a detailed report for a single upgrader.\n * @param upgraderId The ID of the upgrader to generate the report for.\n * @returns An `IndividualReport` object, or null if the upgrader or their syllabus can't be found.\n */\nexport function generateIndividualReport(\n  upgraderId: string\n): IndividualReport | null {\n  loggingService.logInfo(\n    `${SVC_MODULE} Generating individual report for ID: ${upgraderId}`\n  );\n\n  const personnelStore = usePersonnelStore();\n  const syllabiStore = useSyllabiStore();\n\n  const upgrader = personnelStore.getPersonnelById(upgraderId);\n  if (!upgrader) {\n    loggingService.logError(\n      `${SVC_MODULE} Could not find upgrader with ID: ${upgraderId}`\n    );\n    return null;\n  }\n\n  const syllabus = syllabiStore.findSyllabus(\n    upgrader.assignedPosition,\n    upgrader.assignedSyllabusYear\n  );\n  if (!syllabus) {\n    loggingService.logError(\n      `${SVC_MODULE} Could not find syllabus for upgrader: ${upgrader.displayName}`\n    );\n    return null;\n  }\n\n  const priorityTasks = getPrioritizedRequirements(upgrader, syllabus);\n\n  const report: IndividualReport = {\n    upgrader: upgrader,\n    summary: {\n      readinessAgainstDeadline:\n        upgrader.readinessAgainstDeadline || ReadinessStatus.Unknown,\n      pacingAgainstDeadlineDays: upgrader.pacingAgainstDeadlineDays || 0,\n      projectedCompletionDate:\n        upgrader.projectedTotalCompletionDate || undefined,\n    },\n    priorityTasks: priorityTasks,\n  };\n\n  loggingService.logInfo(\n    `${SVC_MODULE} Successfully generated individual report for ${upgrader.displayName}.`\n  );\n  return report;\n}\n\n/**\n * Generates a report for an entire track (position/year).\n */\nexport function generateTrackReport(\n  position: string,\n  year: string\n): TrackReport | null {\n  loggingService.logInfo(\n    `${SVC_MODULE} Generating track report for ${position} ${year}`\n  );\n  const personnelStore = usePersonnelStore();\n  const syllabiStore = useSyllabiStore();\n\n  const syllabus = syllabiStore.findSyllabus(position, year);\n  if (!syllabus) {\n    loggingService.logError(\n      `${SVC_MODULE} No syllabus found for ${position} ${year}`\n    );\n    return null;\n  }\n\n  const personnelForTrack = personnelStore.allPersonnel.filter(\n    (p) => p.assignedPosition === position && p.assignedSyllabusYear === year\n  );\n\n  const prioritized = getPrioritizedUpgraders(personnelForTrack, syllabus);\n\n  const summaryStats = {\n    totalPersonnel: prioritized.length,\n    numberOnTrack: prioritized.filter(\n      (p) => p.readinessAgainstDeadline === ReadinessStatus.OnTrack\n    ).length,\n    numberAtRisk: prioritized.filter(\n      (p) => p.readinessAgainstDeadline === ReadinessStatus.AtRisk\n    ).length,\n    numberBehind: prioritized.filter(\n      (p) => p.readinessAgainstDeadline === ReadinessStatus.BehindSchedule\n    ).length,\n    numberBlocked: prioritized.filter(\n      (p) => p.readinessAgainstDeadline === ReadinessStatus.Blocked\n    ).length,\n  };\n\n  return {\n    position,\n    year,\n    prioritizedUpgraders: prioritized,\n    summaryStats,\n  };\n}\n\n/**\n * Generates the anonymized report data structured for an LLM.\n * This has been enhanced to filter out irrelevant personnel and provide clearer data points.\n * @returns An object containing the structured report data and the keyMap for de-anonymization.\n */\nexport async function generateLLMReportData(): Promise<{\n  reportData: LLMAnonymizedMultiPositionMonthlyReport;\n  keyMap: Map<string, string>;\n}> {\n  const personnelStore = usePersonnelStore();\n\n  // 1. Filter personnel to include only those with valid data and status\n  const relevantPersonnel = personnelStore.allPersonnel.filter((p) => {\n    const hasData = p.rawCompletions && p.rawCompletions.length > 0;\n    const hasStatus =\n      p.readinessAgainstDeadline &&\n      p.readinessAgainstDeadline !== ReadinessStatus.Unknown;\n    return hasData && hasStatus;\n  });\n\n  // 2. Anonymize the relevant data\n  const { anonymizedPersonnel, keyMap } = anonymizeData(relevantPersonnel);\n\n  const positionGroups = anonymizedPersonnel.reduce((acc, p) => {\n    const key = p.assignedPosition;\n    if (!acc[key]) acc[key] = [];\n    acc[key].push(p);\n    return acc;\n  }, {} as Record<string, Upgrader[]>);\n\n  const positionReports: LLMAnonymizedPositionLevelReportData[] = [];\n  const today = getTodayUtc();\n  const thirtyDaysAgo = addDays(today, -30);\n\n  for (const [positionName, members] of Object.entries(positionGroups)) {\n    const sortedMembers = members.sort((a, b) => {\n      const levelA = parseInt(a.derivedPqsWorkingLevel || \"0\");\n      const levelB = parseInt(b.derivedPqsWorkingLevel || \"0\");\n      if (levelA !== levelB) return levelB - levelA;\n      return a.displayName.localeCompare(b.displayName);\n    });\n\n    const upgraderReports: LLMAnonymizedUpgraderReportData[] = [];\n    for (const upgrader of sortedMembers) {\n      let status: LLMAnonymizedUpgraderReportData[\"overallStatus\"] =\n        \"data_pending\";\n      const summaryPoints: string[] = [];\n      let reportedLevel = upgrader.derivedPqsWorkingLevel;\n\n      // 3. Provide clearer, more contextual data points to the AI\n      if (\n        upgrader.readinessAgainstDeadline === ReadinessStatus.ReadyForNextLevel\n      ) {\n        status = \"complete\"; // Simplified status for clarity\n        const completedLevel =\n          parseInt(upgrader.derivedPqsWorkingLevel || \"0\") - 100;\n        reportedLevel = String(\n          completedLevel > 0 ? completedLevel : upgrader.derivedPqsWorkingLevel\n        );\n\n        summaryPoints.push(\n          `Status Note: Completed Level ${reportedLevel}. Now working on Level ${upgrader.derivedPqsWorkingLevel}.`\n        );\n        summaryPoints.push(\"Pacing: N/A (Level Complete)\");\n      } else {\n        // Use the switch for all other \"in-progress\" statuses\n        switch (upgrader.readinessAgainstDeadline) {\n          case ReadinessStatus.OnTrack:\n            status = \"on_track\";\n            break;\n          case ReadinessStatus.AtRisk:\n            status = \"at_risk\";\n            break;\n          case ReadinessStatus.BehindSchedule:\n            status = \"behind\";\n            break;\n          case ReadinessStatus.Blocked:\n            status = \"blocked\";\n            break;\n        }\n        summaryPoints.push(\n          `Pacing: ${upgrader.pacingAgainstDeadlineDays ?? \"N/A\"} days`\n        );\n      }\n\n      summaryPoints.push(\n        `PQS Progress (current level): ${\n          upgrader.pqsProgressPercentage?.toFixed(0) ?? \"N/A\"\n        }%`\n      );\n      summaryPoints.push(\n        `Event Progress (current level): ${\n          upgrader.eventsProgressPercentage?.toFixed(0) ?? \"N/A\"\n        }%`\n      );\n\n      const completedLastMonthCount = upgrader.rawCompletions.filter(\n        (c) => new Date(c.date) >= thirtyDaysAgo\n      ).length;\n\n      const reportData: LLMAnonymizedUpgraderReportData = {\n        anonymizedUpgraderId: upgrader.displayName,\n        assignedPosition: upgrader.assignedPosition,\n        currentPqsWorkingLevel: reportedLevel, // Report the correct level\n        currentEventsWorkingLevel: upgrader.derivedEventsWorkingLevel,\n        overallStatus: status,\n        completedLastMonthCount: completedLastMonthCount,\n        summaryPoints: summaryPoints,\n      };\n      upgraderReports.push(reportData);\n    }\n\n    const reportsByLevel = upgraderReports.reduce((acc, report) => {\n      const level = parseInt(report.currentPqsWorkingLevel || \"0\");\n      if (!acc[level]) acc[level] = [];\n      acc[level].push(report);\n      return acc;\n    }, {} as Record<number, LLMAnonymizedUpgraderReportData[]>);\n\n    for (const [level, reports] of Object.entries(reportsByLevel)) {\n      positionReports.push({\n        positionName: positionName,\n        level: parseInt(level),\n        upgraderReports: reports,\n      });\n    }\n  }\n\n  const reportData: LLMAnonymizedMultiPositionMonthlyReport = {\n    reportGeneratedDate: today.toISOString().split(\"T\")[0],\n    positions: positionReports.sort((a, b) => b.level - a.level),\n  };\n\n  return { reportData, keyMap };\n}\n\n/**\n * Takes structured LLM report data and formats it into final prompt strings for the AI.\n *\n * @param reportData - The structured data object from generateLLMReportData.\n * @returns An object where keys are track names and values are the complete prompt strings.\n */\nexport function generateLlmPromptsFromData(\n  reportData: LLMAnonymizedMultiPositionMonthlyReport\n): { [trackName: string]: string } {\n  const allPrompts: { [trackName: string]: string } = {};\n\n  // Group reports by position name, as one position might have multiple levels\n  const reportsByPosition = reportData.positions.reduce(\n    (acc, positionReport) => {\n      if (!acc[positionReport.positionName]) {\n        acc[positionReport.positionName] = [];\n      }\n      acc[positionReport.positionName].push(positionReport);\n      return acc;\n    },\n    {} as Record<string, LLMAnonymizedPositionLevelReportData[]>\n  );\n\n  for (const [positionName, reports] of Object.entries(reportsByPosition)) {\n    const studentSummaries = reports\n      .map((r) => r.upgraderReports)\n      .flat()\n      .map(\n        (p) =>\n          `- Student: ${p.anonymizedUpgraderId} (Level ${p.currentPqsWorkingLevel})\\n` +\n          `  - Status: ${p.overallStatus}\\n` +\n          `  - Pacing: ${\n            p.summaryPoints?.[0]?.replace(\"Pacing: \", \"\") ?? \"N/A\"\n          }\\n` +\n          `  - Last 30 Days: ${p.completedLastMonthCount} item(s) completed.`\n      )\n      .join(\"\\n\");\n\n    const trackSummary = `\n- Track: ${positionName}\n- Total Students: ${reports\n      .map((r) => r.upgraderReports.length)\n      .reduce((a, b) => a + b, 0)}\n    `.trim();\n\n    const prompt = `\nYou are an expert training analyst for a military aviation unit. Your task is to provide a concise, insightful monthly training summary for a specific track.\n\nAnalyze the raw data provided below. The data is already sorted by ACTC level (descending) and then by student name (alphabetical). **Your report must follow this exact order.**\n\n**OUTPUT FORMAT:**\n\n1.  **Student Progress (Last 30 Days):**\n    * Following the provided order, write 1-2 sentences for each student summarizing their progress and status.\n\n2.  **Overall Track Health for '${positionName}':**\n    * Write a 3-4 sentence summary of this track's overall performance, noting any trends or widespread issues.\n\n3.  **Strategic Recommendations for '${positionName}':**\n    * Write 2-4 sentences outlining the most effective path forward for this specific track. Identify top priorities and suggest concrete actions.\n\n---\n**RAW DATA FOR ANALYSIS (DO NOT REPEAT THIS SECTION IN YOUR OUTPUT):**\n\n**Track Health Summary:**\n${trackSummary}\n\n**Sorted Student Data:**\n${studentSummaries}\n---\n\nNow, please generate the complete narrative report for the '${positionName}' track based on the data and instructions provided.\n    `;\n    allPrompts[positionName] = prompt.trim();\n  }\n\n  return allPrompts;\n}\n\n/**\n * Generates a summary report of all training activity over the last 30 days.\n * @returns A MonthlyReportData object containing aggregated stats for each track.\n */\nexport function generateMonthlyReport(): MonthlyReportData {\n  loggingService.logInfo(`${SVC_MODULE} Generating Monthly Report.`);\n\n  const personnelStore = usePersonnelStore();\n  const syllabiStore = useSyllabiStore();\n  const today = getTodayUtc();\n  const thirtyDaysAgo = addDays(today, -30);\n\n  // Filter for personnel who have assigned tracks and completion data\n  const relevantPersonnel = personnelStore.allPersonnel.filter(\n    (p) => p.assignedPosition && p.rawCompletions && p.rawCompletions.length > 0\n  );\n\n  // For efficient lookup, create a map of every requirement name to its type\n  const requirementTypeMap = new Map<string, RequirementType>();\n  syllabiStore.allSyllabi.forEach((syllabus) => {\n    syllabus.requirements.forEach((req) => {\n      requirementTypeMap.set(req.name.toUpperCase(), req.type);\n    });\n  });\n\n  // Group personnel by their assigned track\n  const personnelByTrack = relevantPersonnel.reduce((acc, p) => {\n    if (!acc[p.assignedPosition]) {\n      acc[p.assignedPosition] = [];\n    }\n    acc[p.assignedPosition].push(p);\n    return acc;\n  }, {} as Record<string, Upgrader[]>);\n\n  const trackSummaries: MonthlyTrackSummary[] = [];\n\n  for (const [trackName, members] of Object.entries(personnelByTrack)) {\n    let eventsCompletedThisMonth = 0;\n    let pqsCompletedThisMonth = 0;\n\n    members.forEach((member) => {\n      const recentCompletions = member.rawCompletions.filter(\n        (c) => new Date(c.date) >= thirtyDaysAgo\n      );\n      recentCompletions.forEach((completion) => {\n        const reqType = requirementTypeMap.get(completion.event.toUpperCase());\n        if (reqType === RequirementType.Event) {\n          eventsCompletedThisMonth++;\n        } else if (reqType === RequirementType.PQS) {\n          pqsCompletedThisMonth++;\n        }\n      });\n    });\n\n    const summary: MonthlyTrackSummary = {\n      trackName: trackName,\n      totalEnrolled: members.length,\n      numberBehind: members.filter(\n        (m) => m.readinessAgainstDeadline === ReadinessStatus.BehindSchedule\n      ).length,\n      eventsCompletedThisMonth: eventsCompletedThisMonth,\n      pqsCompletedThisMonth: pqsCompletedThisMonth,\n    };\n    trackSummaries.push(summary);\n  }\n\n  return {\n    reportDate: today,\n    startDate: thirtyDaysAgo,\n    trackSummaries: trackSummaries.sort((a, b) =>\n      a.trackName.localeCompare(b.trackName)\n    ), // Sort tracks alphabetically\n  };\n}\n","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass } from \"vue\"\n\nconst _hoisted_1 = { class: \"p-4 sm:p-6 lg:p-8 report-container\" }\nconst _hoisted_2 = { class: \"sm:flex sm:items-center sm:justify-between non-printable\" }\nconst _hoisted_3 = {\n  key: 0,\n  class: \"mt-2 text-sm text-gray-700\"\n}\nconst _hoisted_4 = {\n  key: 0,\n  class: \"mt-8 printable-content\"\n}\nconst _hoisted_5 = { class: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\" }\nconst _hoisted_6 = { class: \"text-xl font-semibold text-gray-800 border-b pb-2 mb-4\" }\nconst _hoisted_7 = { class: \"space-y-4\" }\nconst _hoisted_8 = { class: \"flex justify-between items-baseline\" }\nconst _hoisted_9 = { class: \"text-lg font-bold text-gray-900\" }\nconst _hoisted_10 = { class: \"flex justify-between items-baseline\" }\nconst _hoisted_11 = { class: \"flex justify-between items-baseline\" }\nconst _hoisted_12 = { class: \"text-lg font-bold text-gray-900\" }\nconst _hoisted_13 = { class: \"flex justify-between items-baseline\" }\nconst _hoisted_14 = { class: \"text-lg font-bold text-gray-900\" }\nconst _hoisted_15 = {\n  key: 1,\n  class: \"mt-8 text-center py-12 px-6 bg-white rounded-lg shadow-sm\"\n}\n\nimport { ref, onMounted } from \"vue\";\nimport { generateMonthlyReport } from \"@/core/reportGeneratorService\";\nimport type { MonthlyReportData } from \"@/types/reportTypes\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'MonthlyReportView',\n  setup(__props) {\n\nconst reportData = ref<MonthlyReportData | null>(null);\n\nonMounted(() => {\n  reportData.value = generateMonthlyReport();\n});\n\nconst formatDate = (date: Date): string => {\n  return new Intl.DateTimeFormat(\"en-US\", {\n    month: \"long\",\n    day: \"numeric\",\n    year: \"numeric\",\n  }).format(date);\n};\n\nconst printReport = () => {\n  window.print();\n};\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", null, [\n        _cache[0] || (_cache[0] = _createElementVNode(\"h1\", { class: \"text-2xl font-bold text-gray-900\" }, \" Monthly Training Summary \", -1)),\n        (reportData.value)\n          ? (_openBlock(), _createElementBlock(\"p\", _hoisted_3, \" Showing training activity from \" + _toDisplayString(formatDate(reportData.value.startDate)) + \" to \" + _toDisplayString(formatDate(reportData.value.reportDate)) + \". \", 1))\n          : _createCommentVNode(\"\", true)\n      ]),\n      _createElementVNode(\"div\", { class: \"mt-4 sm:mt-0\" }, [\n        _createElementVNode(\"button\", {\n          onClick: printReport,\n          class: \"inline-flex items-center gap-x-2 rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600\"\n        }, _cache[1] || (_cache[1] = [\n          _createElementVNode(\"svg\", {\n            class: \"h-5 w-5\",\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 20 20\",\n            fill: \"currentColor\"\n          }, [\n            _createElementVNode(\"path\", {\n              \"fill-rule\": \"evenodd\",\n              d: \"M5 2.5a2.5 2.5 0 00-2.5 2.5v9a2.5 2.5 0 002.5 2.5h10a2.5 2.5 0 002.5-2.5v-9a2.5 2.5 0 00-2.5-2.5H5zM6 5a.5.5 0 01.5-.5h7a.5.5 0 010 1h-7A.5.5 0 016 5zm0 2.5a.5.5 0 01.5-.5h7a.5.5 0 010 1h-7a.5.5 0 01-.5-.5zm0 2.5a.5.5 0 01.5-.5h4a.5.5 0 010 1h-4a.5.5 0 01-.5-.5z\",\n              \"clip-rule\": \"evenodd\"\n            })\n          ], -1),\n          _createTextVNode(\" Print Report \")\n        ]))\n      ])\n    ]),\n    (reportData.value && reportData.value.trackSummaries.length > 0)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n          _createElementVNode(\"div\", _hoisted_5, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(reportData.value.trackSummaries, (track) => {\n              return (_openBlock(), _createElementBlock(\"div\", {\n                key: track.trackName,\n                class: \"bg-white p-6 rounded-lg shadow-sm border border-gray-200\"\n              }, [\n                _createElementVNode(\"h2\", _hoisted_6, _toDisplayString(track.trackName), 1),\n                _createElementVNode(\"div\", _hoisted_7, [\n                  _createElementVNode(\"div\", _hoisted_8, [\n                    _cache[2] || (_cache[2] = _createElementVNode(\"span\", { class: \"text-sm font-medium text-gray-600\" }, \"Students Enrolled:\", -1)),\n                    _createElementVNode(\"span\", _hoisted_9, _toDisplayString(track.totalEnrolled), 1)\n                  ]),\n                  _createElementVNode(\"div\", _hoisted_10, [\n                    _cache[3] || (_cache[3] = _createElementVNode(\"span\", { class: \"text-sm font-medium text-gray-600\" }, \"Students Behind:\", -1)),\n                    _createElementVNode(\"span\", {\n                      class: _normalizeClass([\"text-lg font-bold\", \n                  track.numberBehind > 0 ? 'text-red-600' : 'text-gray-900'\n                ])\n                    }, _toDisplayString(track.numberBehind), 3)\n                  ]),\n                  _createElementVNode(\"div\", _hoisted_11, [\n                    _cache[4] || (_cache[4] = _createElementVNode(\"span\", { class: \"text-sm font-medium text-gray-600\" }, \"Events Completed (Month):\", -1)),\n                    _createElementVNode(\"span\", _hoisted_12, _toDisplayString(track.eventsCompletedThisMonth), 1)\n                  ]),\n                  _createElementVNode(\"div\", _hoisted_13, [\n                    _cache[5] || (_cache[5] = _createElementVNode(\"span\", { class: \"text-sm font-medium text-gray-600\" }, \"PQS Completed (Month):\", -1)),\n                    _createElementVNode(\"span\", _hoisted_14, _toDisplayString(track.pqsCompletedThisMonth), 1)\n                  ])\n                ])\n              ]))\n            }), 128))\n          ])\n        ]))\n      : (_openBlock(), _createElementBlock(\"div\", _hoisted_15, _cache[6] || (_cache[6] = [\n          _createElementVNode(\"h3\", { class: \"text-lg font-medium text-gray-900\" }, \" No Training Data Available \", -1),\n          _createElementVNode(\"p\", { class: \"mt-1 text-sm text-gray-500\" }, \" There is no monthly training data to display. Please ensure personnel have assigned tracks and recent completions. \", -1)\n        ])))\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"p-4 sm:p-6 lg:p-8 report-container\">\n    <div class=\"sm:flex sm:items-center sm:justify-between non-printable\">\n      <div>\n        <h1 class=\"text-2xl font-bold text-gray-900\">\n          Monthly Training Summary\n        </h1>\n        <p v-if=\"reportData\" class=\"mt-2 text-sm text-gray-700\">\n          Showing training activity from\n          {{ formatDate(reportData.startDate) }} to\n          {{ formatDate(reportData.reportDate) }}.\n        </p>\n      </div>\n      <div class=\"mt-4 sm:mt-0\">\n        <button\n          @click=\"printReport\"\n          class=\"inline-flex items-center gap-x-2 rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600\"\n        >\n          <svg\n            class=\"h-5 w-5\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 20 20\"\n            fill=\"currentColor\"\n          >\n            <path\n              fill-rule=\"evenodd\"\n              d=\"M5 2.5a2.5 2.5 0 00-2.5 2.5v9a2.5 2.5 0 002.5 2.5h10a2.5 2.5 0 002.5-2.5v-9a2.5 2.5 0 00-2.5-2.5H5zM6 5a.5.5 0 01.5-.5h7a.5.5 0 010 1h-7A.5.5 0 016 5zm0 2.5a.5.5 0 01.5-.5h7a.5.5 0 010 1h-7a.5.5 0 01-.5-.5zm0 2.5a.5.5 0 01.5-.5h4a.5.5 0 010 1h-4a.5.5 0 01-.5-.5z\"\n              clip-rule=\"evenodd\"\n            />\n          </svg>\n          Print Report\n        </button>\n      </div>\n    </div>\n\n    <div\n      v-if=\"reportData && reportData.trackSummaries.length > 0\"\n      class=\"mt-8 printable-content\"\n    >\n      <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        <div\n          v-for=\"track in reportData.trackSummaries\"\n          :key=\"track.trackName\"\n          class=\"bg-white p-6 rounded-lg shadow-sm border border-gray-200\"\n        >\n          <h2 class=\"text-xl font-semibold text-gray-800 border-b pb-2 mb-4\">\n            {{ track.trackName }}\n          </h2>\n          <div class=\"space-y-4\">\n            <div class=\"flex justify-between items-baseline\">\n              <span class=\"text-sm font-medium text-gray-600\"\n                >Students Enrolled:</span\n              >\n              <span class=\"text-lg font-bold text-gray-900\">{{\n                track.totalEnrolled\n              }}</span>\n            </div>\n            <div class=\"flex justify-between items-baseline\">\n              <span class=\"text-sm font-medium text-gray-600\"\n                >Students Behind:</span\n              >\n              <span\n                class=\"text-lg font-bold\"\n                :class=\"\n                  track.numberBehind > 0 ? 'text-red-600' : 'text-gray-900'\n                \"\n              >\n                {{ track.numberBehind }}\n              </span>\n            </div>\n            <div class=\"flex justify-between items-baseline\">\n              <span class=\"text-sm font-medium text-gray-600\"\n                >Events Completed (Month):</span\n              >\n              <span class=\"text-lg font-bold text-gray-900\">{{\n                track.eventsCompletedThisMonth\n              }}</span>\n            </div>\n            <div class=\"flex justify-between items-baseline\">\n              <span class=\"text-sm font-medium text-gray-600\"\n                >PQS Completed (Month):</span\n              >\n              <span class=\"text-lg font-bold text-gray-900\">{{\n                track.pqsCompletedThisMonth\n              }}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div\n      v-else\n      class=\"mt-8 text-center py-12 px-6 bg-white rounded-lg shadow-sm\"\n    >\n      <h3 class=\"text-lg font-medium text-gray-900\">\n        No Training Data Available\n      </h3>\n      <p class=\"mt-1 text-sm text-gray-500\">\n        There is no monthly training data to display. Please ensure personnel\n        have assigned tracks and recent completions.\n      </p>\n    </div>\n  </div>\n</template>\n\n<style>\n@media print {\n  body * {\n    visibility: hidden;\n  }\n  .printable-content,\n  .printable-content * {\n    visibility: visible;\n  }\n  .printable-content {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    padding: 2rem;\n  }\n  .non-printable {\n    display: none;\n  }\n}\n</style>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted } from \"vue\";\nimport { generateMonthlyReport } from \"@/core/reportGeneratorService\";\nimport type { MonthlyReportData } from \"@/types/reportTypes\";\n\nconst reportData = ref<MonthlyReportData | null>(null);\n\nonMounted(() => {\n  reportData.value = generateMonthlyReport();\n});\n\nconst formatDate = (date: Date): string => {\n  return new Intl.DateTimeFormat(\"en-US\", {\n    month: \"long\",\n    day: \"numeric\",\n    year: \"numeric\",\n  }).format(date);\n};\n\nconst printReport = () => {\n  window.print();\n};\n</script>\n","import script from \"./MonthlyReportView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MonthlyReportView.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./MonthlyReportView.vue?vue&type=style&index=0&id=3bb31c6e&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","// src/core/geminiService.ts\n\nimport { loggingService } from \"@/utils/loggingService\";\n\nconst SVC_MODULE = \"[GeminiService]\";\nconst API_ENDPOINT =\n  \"https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent\";\n\n/**\n * Calls the Google Gemini API with a given prompt.\n *\n * @param prompt - The full text prompt to send to the AI model.\n * @param apiKey - The user's Gemini API key.\n * @returns A promise that resolves to the text content of the AI's response.\n * @throws An error if the API call fails or returns an error.\n */\nexport async function callGeminiApi(\n  prompt: string,\n  apiKey: string\n): Promise<string> {\n  const fullApiEndpoint = `${API_ENDPOINT}?key=${apiKey}`;\n\n  loggingService.logInfo(`${SVC_MODULE} Calling Gemini API.`);\n\n  try {\n    const response = await fetch(fullApiEndpoint, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        contents: [\n          {\n            parts: [\n              {\n                text: prompt,\n              },\n            ],\n          },\n        ],\n      }),\n    });\n\n    if (!response.ok) {\n      const errorBody = await response.json();\n      loggingService.logError(\n        `${SVC_MODULE} API call failed with status: ${response.status}`,\n        errorBody\n      );\n      throw new Error(\n        `Gemini API request failed: ${\n          errorBody.error?.message || response.statusText\n        }`\n      );\n    }\n\n    const responseData = await response.json();\n    const textContent = responseData.candidates?.[0]?.content?.parts?.[0]?.text;\n\n    if (!textContent) {\n      loggingService.logWarn(\n        `${SVC_MODULE} API response did not contain valid text content.`,\n        responseData\n      );\n      throw new Error(\n        \"Received an invalid or empty response from the Gemini API.\"\n      );\n    }\n\n    loggingService.logInfo(\n      `${SVC_MODULE} Successfully received response from Gemini API.`\n    );\n    return textContent;\n  } catch (error) {\n    loggingService.logError(\n      `${SVC_MODULE} An error occurred during the Gemini API call.`,\n      error\n    );\n    // Re-throw the error so the UI layer can catch it and notify the user\n    throw error;\n  }\n}\n","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, vModelText as _vModelText, withDirectives as _withDirectives } from \"vue\"\n\nconst _hoisted_1 = { class: \"p-4 sm:p-6 lg:p-8\" }\nconst _hoisted_2 = { class: \"mt-8\" }\nconst _hoisted_3 = { class: \"bg-white p-6 rounded-lg shadow-sm\" }\nconst _hoisted_4 = {\n  key: 0,\n  class: \"p-4 bg-yellow-50 border-l-4 border-yellow-400\"\n}\nconst _hoisted_5 = { class: \"text-sm text-yellow-700\" }\nconst _hoisted_6 = { class: \"mt-4 flex items-center gap-4\" }\nconst _hoisted_7 = [\"disabled\"]\nconst _hoisted_8 = {\n  key: 0,\n  class: \"animate-spin -ml-1 mr-3 h-5 w-5 text-white\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  fill: \"none\",\n  viewBox: \"0 0 24 24\"\n}\nconst _hoisted_9 = {\n  key: 0,\n  class: \"text-sm text-gray-600\"\n}\nconst _hoisted_10 = {\n  key: 1,\n  class: \"mt-4 p-4 bg-red-50 border-l-4 border-red-400\"\n}\nconst _hoisted_11 = { class: \"mt-2 text-sm text-red-700\" }\nconst _hoisted_12 = {\n  key: 0,\n  class: \"mt-8\"\n}\nconst _hoisted_13 = {\n  key: 0,\n  class: \"space-y-6\"\n}\nconst _hoisted_14 = { class: \"text-lg font-semibold text-gray-800\" }\nconst _hoisted_15 = [\"value\"]\nconst _hoisted_16 = [\"onClick\"]\nconst _hoisted_17 = { class: \"mt-4\" }\nconst _hoisted_18 = [\"for\"]\nconst _hoisted_19 = [\"onUpdate:modelValue\", \"id\"]\nconst _hoisted_20 = {\n  key: 1,\n  class: \"space-y-6\"\n}\nconst _hoisted_21 = { class: \"!text-2xl !font-bold !text-indigo-700\" }\nconst _hoisted_22 = [\"innerHTML\"]\n\nimport { ref, computed } from \"vue\";\nimport { useAppConfigStore } from \"@/stores/appConfigStore\";\nimport { useUiStore } from \"@/stores/uiStore\";\nimport * as reportGenerator from \"@/core/reportGeneratorService\";\nimport * as anonymizer from \"@/utils/anonymizer\";\nimport { callGeminiApi } from \"@/core/geminiService\";\nimport { marked } from \"marked\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'LlmReportView',\n  setup(__props) {\n\nconst appConfigStore = useAppConfigStore();\nconst uiStore = useUiStore();\n\nconst isLoading = ref(false);\nconst loadingStatus = ref(\"\");\nconst error = ref(\"\");\nconst prompts = ref<{ [key: string]: string }>({});\nconst manualResponses = ref<{ [key: string]: string }>({});\nconst finalReports = ref<{ [key: string]: string }>({});\nconst keyMap = ref<Map<string, string>>(new Map());\nconst showFinalReport = ref(false);\n\nconst apiKey = computed(() => appConfigStore.config.geminiApiKey);\nconst buttonText = computed(() => {\n  if (isLoading.value) return \"Generating...\";\n  return apiKey.value\n    ? \"Generate Full Report\"\n    : \"Generate Prompts for Manual Entry\";\n});\n\nconst handleGenerate = async () => {\n  isLoading.value = true;\n  error.value = \"\";\n  showFinalReport.value = false;\n  prompts.value = {};\n  finalReports.value = {};\n\n  try {\n    loadingStatus.value = \"Preparing and anonymizing data...\";\n    const { reportData, keyMap: newKeyMap } =\n      await reportGenerator.generateLLMReportData();\n    keyMap.value = newKeyMap;\n\n    loadingStatus.value = \"Generating prompts...\";\n    const generatedPrompts =\n      reportGenerator.generateLlmPromptsFromData(reportData);\n    prompts.value = generatedPrompts;\n\n    if (apiKey.value) {\n      // Pathway 1: Automatic API call\n      const trackNames = Object.keys(generatedPrompts);\n      for (let i = 0; i < trackNames.length; i++) {\n        const trackName = trackNames[i];\n        loadingStatus.value = `Calling AI for ${trackName} report (${i + 1}/${\n          trackNames.length\n        })...`;\n        const responseText = await callGeminiApi(\n          generatedPrompts[trackName],\n          apiKey.value\n        );\n        finalReports.value[trackName] = anonymizer.deAnonymizeText(\n          responseText,\n          keyMap.value\n        );\n      }\n      showFinalReport.value = true;\n    }\n    // For Pathway 2, we just stop here and let the user copy prompts\n  } catch (e: any) {\n    error.value = e.message || \"An unknown error occurred.\";\n    uiStore.addNotification({ type: \"error\", message: error.value });\n  } finally {\n    isLoading.value = false;\n    loadingStatus.value = \"\";\n  }\n};\n\nconst processManualResponses = () => {\n  finalReports.value = {};\n  for (const trackName in manualResponses.value) {\n    const rawResponse = manualResponses.value[trackName];\n    if (rawResponse) {\n      finalReports.value[trackName] = anonymizer.deAnonymizeText(\n        rawResponse,\n        keyMap.value\n      );\n    }\n  }\n  showFinalReport.value = true;\n};\n\nconst copyToClipboard = (text: string) => {\n  navigator.clipboard.writeText(text);\n  uiStore.addNotification({\n    type: \"success\",\n    message: \"Prompt copied to clipboard!\",\n  });\n};\n\nconst formatReport = (reportText: string) => {\n  // Use the 'marked' library to convert Markdown from the AI into HTML\n  return marked(reportText);\n};\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_router_link = _resolveComponent(\"router-link\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _cache[5] || (_cache[5] = _createElementVNode(\"div\", { class: \"sm:flex sm:items-center\" }, [\n      _createElementVNode(\"div\", { class: \"sm:flex-auto\" }, [\n        _createElementVNode(\"h1\", { class: \"text-2xl font-bold text-gray-900\" }, \"LLM Report Generation\"),\n        _createElementVNode(\"p\", { class: \"mt-2 text-sm text-gray-700\" }, \" Use AI to generate narrative summaries for each track. \")\n      ])\n    ], -1)),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        (!apiKey.value)\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n              _createElementVNode(\"p\", _hoisted_5, [\n                _cache[1] || (_cache[1] = _createTextVNode(\" No Gemini API key found. Reports must be generated manually. \")),\n                _createVNode(_component_router_link, {\n                  to: \"/settings/app\",\n                  class: \"font-medium underline hover:text-yellow-800\"\n                }, {\n                  default: _withCtx(() => _cache[0] || (_cache[0] = [\n                    _createTextVNode(\"Add API Key in Settings\")\n                  ])),\n                  _: 1,\n                  __: [0]\n                }),\n                _cache[2] || (_cache[2] = _createTextVNode(\" to enable automatic report generation. \"))\n              ])\n            ]))\n          : _createCommentVNode(\"\", true),\n        _createElementVNode(\"div\", _hoisted_6, [\n          _createElementVNode(\"button\", {\n            onClick: handleGenerate,\n            disabled: isLoading.value,\n            class: \"inline-flex items-center justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 disabled:bg-gray-400\"\n          }, [\n            (isLoading.value)\n              ? (_openBlock(), _createElementBlock(\"svg\", _hoisted_8, _cache[3] || (_cache[3] = [\n                  _createElementVNode(\"circle\", {\n                    class: \"opacity-25\",\n                    cx: \"12\",\n                    cy: \"12\",\n                    r: \"10\",\n                    stroke: \"currentColor\",\n                    \"stroke-width\": \"4\"\n                  }, null, -1),\n                  _createElementVNode(\"path\", {\n                    class: \"opacity-75\",\n                    fill: \"currentColor\",\n                    d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                  }, null, -1)\n                ])))\n              : _createCommentVNode(\"\", true),\n            _createTextVNode(\" \" + _toDisplayString(buttonText.value), 1)\n          ], 8, _hoisted_7),\n          (isLoading.value)\n            ? (_openBlock(), _createElementBlock(\"p\", _hoisted_9, _toDisplayString(loadingStatus.value), 1))\n            : _createCommentVNode(\"\", true)\n        ]),\n        (error.value)\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [\n              _cache[4] || (_cache[4] = _createElementVNode(\"h3\", { class: \"text-sm font-medium text-red-800\" }, \" Error Generating Report \", -1)),\n              _createElementVNode(\"p\", _hoisted_11, _toDisplayString(error.value), 1)\n            ]))\n          : _createCommentVNode(\"\", true)\n      ]),\n      (Object.keys(prompts.value).length > 0)\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [\n            (!apiKey.value && !showFinalReport.value)\n              ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(prompts.value, (prompt, trackName) => {\n                    return (_openBlock(), _createElementBlock(\"div\", {\n                      key: trackName,\n                      class: \"bg-white p-6 rounded-lg shadow-sm\"\n                    }, [\n                      _createElementVNode(\"h3\", _hoisted_14, _toDisplayString(trackName) + \" Report Prompt \", 1),\n                      _createElementVNode(\"textarea\", {\n                        readonly: \"\",\n                        value: prompt\n                      }, null, 8, _hoisted_15),\n                      _createElementVNode(\"button\", {\n                        onClick: ($event: any) => (copyToClipboard(prompt)),\n                        class: \"mt-2 text-sm text-indigo-600 hover:text-indigo-800\"\n                      }, \" Copy Prompt \", 8, _hoisted_16),\n                      _createElementVNode(\"div\", _hoisted_17, [\n                        _createElementVNode(\"label\", {\n                          for: `response-${trackName}`,\n                          class: \"block text-sm font-medium text-gray-700\"\n                        }, \"Paste AI Response for \" + _toDisplayString(trackName), 9, _hoisted_18),\n                        _withDirectives(_createElementVNode(\"textarea\", {\n                          \"onUpdate:modelValue\": ($event: any) => ((manualResponses.value[trackName]) = $event),\n                          id: `response-${trackName}`,\n                          rows: \"8\",\n                          class: \"w-full mt-1 p-2 border rounded shadow-sm\"\n                        }, null, 8, _hoisted_19), [\n                          [_vModelText, manualResponses.value[trackName]]\n                        ])\n                      ])\n                    ]))\n                  }), 128)),\n                  _createElementVNode(\"button\", {\n                    onClick: processManualResponses,\n                    class: \"rounded-md bg-green-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500\"\n                  }, \" Process Pasted Responses \")\n                ]))\n              : _createCommentVNode(\"\", true),\n            (showFinalReport.value)\n              ? (_openBlock(), _createElementBlock(\"div\", _hoisted_20, [\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(finalReports.value, (report, trackName) => {\n                    return (_openBlock(), _createElementBlock(\"div\", {\n                      key: trackName,\n                      class: \"bg-white p-6 rounded-lg shadow-sm prose max-w-none\"\n                    }, [\n                      _createElementVNode(\"h2\", _hoisted_21, _toDisplayString(trackName) + \" :: AI-Generated Narrative Report \", 1),\n                      _createElementVNode(\"div\", {\n                        innerHTML: formatReport(report)\n                      }, null, 8, _hoisted_22)\n                    ]))\n                  }), 128))\n                ]))\n              : _createCommentVNode(\"\", true)\n          ]))\n        : _createCommentVNode(\"\", true)\n    ])\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"p-4 sm:p-6 lg:p-8\">\n    <div class=\"sm:flex sm:items-center\">\n      <div class=\"sm:flex-auto\">\n        <h1 class=\"text-2xl font-bold text-gray-900\">LLM Report Generation</h1>\n        <p class=\"mt-2 text-sm text-gray-700\">\n          Use AI to generate narrative summaries for each track.\n        </p>\n      </div>\n    </div>\n\n    <div class=\"mt-8\">\n      <div class=\"bg-white p-6 rounded-lg shadow-sm\">\n        <div\n          v-if=\"!apiKey\"\n          class=\"p-4 bg-yellow-50 border-l-4 border-yellow-400\"\n        >\n          <p class=\"text-sm text-yellow-700\">\n            No Gemini API key found. Reports must be generated manually.\n            <router-link\n              to=\"/settings/app\"\n              class=\"font-medium underline hover:text-yellow-800\"\n              >Add API Key in Settings</router-link\n            >\n            to enable automatic report generation.\n          </p>\n        </div>\n\n        <div class=\"mt-4 flex items-center gap-4\">\n          <button\n            @click=\"handleGenerate\"\n            :disabled=\"isLoading\"\n            class=\"inline-flex items-center justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 disabled:bg-gray-400\"\n          >\n            <svg\n              v-if=\"isLoading\"\n              class=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n            >\n              <circle\n                class=\"opacity-25\"\n                cx=\"12\"\n                cy=\"12\"\n                r=\"10\"\n                stroke=\"currentColor\"\n                stroke-width=\"4\"\n              ></circle>\n              <path\n                class=\"opacity-75\"\n                fill=\"currentColor\"\n                d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n              ></path>\n            </svg>\n            {{ buttonText }}\n          </button>\n          <p v-if=\"isLoading\" class=\"text-sm text-gray-600\">\n            {{ loadingStatus }}\n          </p>\n        </div>\n\n        <div v-if=\"error\" class=\"mt-4 p-4 bg-red-50 border-l-4 border-red-400\">\n          <h3 class=\"text-sm font-medium text-red-800\">\n            Error Generating Report\n          </h3>\n          <p class=\"mt-2 text-sm text-red-700\">{{ error }}</p>\n        </div>\n      </div>\n\n      <div v-if=\"Object.keys(prompts).length > 0\" class=\"mt-8\">\n        <div v-if=\"!apiKey && !showFinalReport\" class=\"space-y-6\">\n          <div\n            v-for=\"(prompt, trackName) in prompts\"\n            :key=\"trackName\"\n            class=\"bg-white p-6 rounded-lg shadow-sm\"\n          >\n            <h3 class=\"text-lg font-semibold text-gray-800\">\n              {{ trackName }} Report Prompt\n            </h3>\n            <textarea readonly :value=\"prompt\"></textarea>\n            <button\n              @click=\"copyToClipboard(prompt)\"\n              class=\"mt-2 text-sm text-indigo-600 hover:text-indigo-800\"\n            >\n              Copy Prompt\n            </button>\n            <div class=\"mt-4\">\n              <label\n                :for=\"`response-${trackName}`\"\n                class=\"block text-sm font-medium text-gray-700\"\n                >Paste AI Response for {{ trackName }}</label\n              >\n              <textarea\n                v-model=\"manualResponses[trackName]\"\n                :id=\"`response-${trackName}`\"\n                rows=\"8\"\n                class=\"w-full mt-1 p-2 border rounded shadow-sm\"\n              ></textarea>\n            </div>\n          </div>\n          <button\n            @click=\"processManualResponses\"\n            class=\"rounded-md bg-green-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500\"\n          >\n            Process Pasted Responses\n          </button>\n        </div>\n\n        <div v-if=\"showFinalReport\" class=\"space-y-6\">\n          <div\n            v-for=\"(report, trackName) in finalReports\"\n            :key=\"trackName\"\n            class=\"bg-white p-6 rounded-lg shadow-sm prose max-w-none\"\n          >\n            <h2 class=\"!text-2xl !font-bold !text-indigo-700\">\n              {{ trackName }} :: AI-Generated Narrative Report\n            </h2>\n            <div v-html=\"formatReport(report)\"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed } from \"vue\";\nimport { useAppConfigStore } from \"@/stores/appConfigStore\";\nimport { useUiStore } from \"@/stores/uiStore\";\nimport * as reportGenerator from \"@/core/reportGeneratorService\";\nimport * as anonymizer from \"@/utils/anonymizer\";\nimport { callGeminiApi } from \"@/core/geminiService\";\nimport { marked } from \"marked\";\n\nconst appConfigStore = useAppConfigStore();\nconst uiStore = useUiStore();\n\nconst isLoading = ref(false);\nconst loadingStatus = ref(\"\");\nconst error = ref(\"\");\nconst prompts = ref<{ [key: string]: string }>({});\nconst manualResponses = ref<{ [key: string]: string }>({});\nconst finalReports = ref<{ [key: string]: string }>({});\nconst keyMap = ref<Map<string, string>>(new Map());\nconst showFinalReport = ref(false);\n\nconst apiKey = computed(() => appConfigStore.config.geminiApiKey);\nconst buttonText = computed(() => {\n  if (isLoading.value) return \"Generating...\";\n  return apiKey.value\n    ? \"Generate Full Report\"\n    : \"Generate Prompts for Manual Entry\";\n});\n\nconst handleGenerate = async () => {\n  isLoading.value = true;\n  error.value = \"\";\n  showFinalReport.value = false;\n  prompts.value = {};\n  finalReports.value = {};\n\n  try {\n    loadingStatus.value = \"Preparing and anonymizing data...\";\n    const { reportData, keyMap: newKeyMap } =\n      await reportGenerator.generateLLMReportData();\n    keyMap.value = newKeyMap;\n\n    loadingStatus.value = \"Generating prompts...\";\n    const generatedPrompts =\n      reportGenerator.generateLlmPromptsFromData(reportData);\n    prompts.value = generatedPrompts;\n\n    if (apiKey.value) {\n      // Pathway 1: Automatic API call\n      const trackNames = Object.keys(generatedPrompts);\n      for (let i = 0; i < trackNames.length; i++) {\n        const trackName = trackNames[i];\n        loadingStatus.value = `Calling AI for ${trackName} report (${i + 1}/${\n          trackNames.length\n        })...`;\n        const responseText = await callGeminiApi(\n          generatedPrompts[trackName],\n          apiKey.value\n        );\n        finalReports.value[trackName] = anonymizer.deAnonymizeText(\n          responseText,\n          keyMap.value\n        );\n      }\n      showFinalReport.value = true;\n    }\n    // For Pathway 2, we just stop here and let the user copy prompts\n  } catch (e: any) {\n    error.value = e.message || \"An unknown error occurred.\";\n    uiStore.addNotification({ type: \"error\", message: error.value });\n  } finally {\n    isLoading.value = false;\n    loadingStatus.value = \"\";\n  }\n};\n\nconst processManualResponses = () => {\n  finalReports.value = {};\n  for (const trackName in manualResponses.value) {\n    const rawResponse = manualResponses.value[trackName];\n    if (rawResponse) {\n      finalReports.value[trackName] = anonymizer.deAnonymizeText(\n        rawResponse,\n        keyMap.value\n      );\n    }\n  }\n  showFinalReport.value = true;\n};\n\nconst copyToClipboard = (text: string) => {\n  navigator.clipboard.writeText(text);\n  uiStore.addNotification({\n    type: \"success\",\n    message: \"Prompt copied to clipboard!\",\n  });\n};\n\nconst formatReport = (reportText: string) => {\n  // Use the 'marked' library to convert Markdown from the AI into HTML\n  return marked(reportText);\n};\n</script>\n","import script from \"./LlmReportView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./LlmReportView.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"h-80 w-full\" }\n\nimport { ref, onMounted, onBeforeUnmount, PropType } from \"vue\";\nimport { Chart, registerables } from \"chart.js\";\nimport type { Upgrader } from \"@/types/personnelTypes\";\nimport { RequirementType, type Syllabus } from \"@/types/syllabiTypes\";\nimport { addDays, daysBetween, getTodayUtc } from \"@/utils/dateUtils\";\nimport { useAppConfigStore } from \"@/stores/appConfigStore\";\nimport { useSyllabiStore } from \"@/stores/syllabiStore\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'ProgressChart',\n  props: {\n  upgrader: {\n    type: Object as PropType<Upgrader>,\n    required: true,\n  },\n  chartType: {\n    type: String as PropType<RequirementType>,\n    required: true,\n  },\n},\n  setup(__props) {\n\nChart.register(...registerables);\n\nconst props = __props;\n\nconst chartCanvas = ref<HTMLCanvasElement | null>(null);\nlet chartInstance: Chart | null = null;\n\nonMounted(() => {\n  if (!chartCanvas.value) return;\n\n  const appConfigStore = useAppConfigStore();\n  const syllabiStore = useSyllabiStore();\n\n  const syllabus = syllabiStore.findSyllabus(\n    props.upgrader.assignedPosition,\n    props.upgrader.assignedSyllabusYear\n  );\n\n  if (!syllabus) return;\n\n  const currentLevel =\n    props.chartType === RequirementType.PQS\n      ? props.upgrader.derivedPqsWorkingLevel\n      : props.upgrader.derivedEventsWorkingLevel;\n\n  if (!currentLevel) return;\n\n  const deadlines =\n    appConfigStore.currentConfig.positionSettings[\n      props.upgrader.assignedPosition\n    ]?.deadlines[currentLevel];\n\n  if (!deadlines) return;\n\n  const { targetMonths, deadlineMonths } = deadlines;\n  const labels = Array.from(\n    { length: deadlineMonths + 1 },\n    (_, i) => `Month ${i}`\n  );\n\n  const reqsForCurrentLevel = syllabus.requirements.filter(\n    (r) =>\n      String(r.level) === currentLevel &&\n      r.type === props.chartType &&\n      !r.isDefaultWaived\n  );\n  const totalRequirementCount = reqsForCurrentLevel.length;\n  if (totalRequirementCount === 0) return;\n\n  const today = getTodayUtc();\n  const monthsSinceStart = daysBetween(props.upgrader.startDate, today) / 30.44;\n\n  const actualData = labels.map((_, i) => {\n    if (i > monthsSinceStart) return null;\n    const monthEndDate = addDays(props.upgrader.startDate, i * 30.44);\n\n    const completedCount = props.upgrader.rawCompletions.filter((c) => {\n      const req = reqsForCurrentLevel.find(\n        (r) => r.name.toUpperCase() === c.event.toUpperCase()\n      );\n      return req && c.date <= monthEndDate;\n    }).length;\n\n    return (completedCount / totalRequirementCount) * 100;\n  });\n\n  const lastValidIndex = actualData.findLastIndex((v) => v !== null);\n  const lastKnownProgress =\n    lastValidIndex > -1 ? actualData[lastValidIndex] : 0;\n\n  const projectionDate =\n    props.chartType === RequirementType.PQS\n      ? props.upgrader.projectedPqsCompletionDate\n      : props.upgrader.projectedEventsCompletionDate;\n  const projectionData: (number | null)[] = new Array(labels.length).fill(null);\n\n  if (projectionDate && lastKnownProgress != null && lastKnownProgress < 100) {\n    projectionData[lastValidIndex] = lastKnownProgress;\n    const projectionEndMonth = Math.ceil(\n      daysBetween(props.upgrader.startDate, projectionDate) / 30.44\n    );\n    if (\n      projectionEndMonth > lastValidIndex &&\n      projectionEndMonth < labels.length\n    ) {\n      projectionData[projectionEndMonth] = 100;\n    }\n  }\n\n  const ctx = chartCanvas.value.getContext(\"2d\");\n  if (ctx) {\n    chartInstance = new Chart(ctx, {\n      type: \"line\",\n      data: {\n        labels,\n        // --- FIX ---\n        // The datasets array was empty before. It is now correctly populated.\n        datasets: [\n          {\n            label: \"Squadron Target\",\n            data: labels.map((_, i) =>\n              targetMonths > 0 ? (100 / targetMonths) * i : null\n            ),\n            borderColor: \"rgba(234, 179, 8, 0.7)\",\n            borderDash: [10, 5],\n            pointRadius: 0,\n            fill: false,\n          },\n          {\n            label: \"Wing Deadline\",\n            data: labels.map((_, i) =>\n              deadlineMonths > 0 ? (100 / deadlineMonths) * i : null\n            ),\n            borderColor: \"rgba(220, 38, 38, 0.7)\",\n            borderDash: [10, 5],\n            pointRadius: 0,\n            fill: false,\n          },\n          {\n            label: \"Actual Progress\",\n            data: actualData,\n            borderColor: \"rgba(59, 130, 246, 1)\",\n            backgroundColor: \"rgba(59, 130, 246, 0.1)\",\n            tension: 0.1,\n            fill: false,\n          },\n          {\n            label: \"Projection\",\n            data: projectionData,\n            borderColor: \"rgba(22, 163, 74, 1)\",\n            borderDash: [3, 4],\n            pointRadius: 0,\n            fill: false,\n          },\n        ],\n      },\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        plugins: {\n          legend: {\n            position: \"top\",\n          },\n          title: {\n            display: true,\n            text: `${props.chartType} Progress`,\n          },\n        },\n        scales: {\n          y: {\n            min: 0,\n            max: 100,\n            title: {\n              display: true,\n              text: \"% Complete\",\n            },\n          },\n          x: {\n            title: {\n              display: true,\n              text: \"Months Since Start Date\",\n            },\n          },\n        },\n      },\n    });\n  }\n});\n\nonBeforeUnmount(() => {\n  if (chartInstance) chartInstance.destroy();\n});\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"canvas\", {\n      ref_key: \"chartCanvas\",\n      ref: chartCanvas\n    }, null, 512)\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"h-80 w-full\">\n    <canvas ref=\"chartCanvas\"></canvas>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted, onBeforeUnmount, PropType, defineProps } from \"vue\";\nimport { Chart, registerables } from \"chart.js\";\nimport type { Upgrader } from \"@/types/personnelTypes\";\nimport { RequirementType, type Syllabus } from \"@/types/syllabiTypes\";\nimport { addDays, daysBetween, getTodayUtc } from \"@/utils/dateUtils\";\nimport { useAppConfigStore } from \"@/stores/appConfigStore\";\nimport { useSyllabiStore } from \"@/stores/syllabiStore\";\n\nChart.register(...registerables);\n\nconst props = defineProps({\n  upgrader: {\n    type: Object as PropType<Upgrader>,\n    required: true,\n  },\n  chartType: {\n    type: String as PropType<RequirementType>,\n    required: true,\n  },\n});\n\nconst chartCanvas = ref<HTMLCanvasElement | null>(null);\nlet chartInstance: Chart | null = null;\n\nonMounted(() => {\n  if (!chartCanvas.value) return;\n\n  const appConfigStore = useAppConfigStore();\n  const syllabiStore = useSyllabiStore();\n\n  const syllabus = syllabiStore.findSyllabus(\n    props.upgrader.assignedPosition,\n    props.upgrader.assignedSyllabusYear\n  );\n\n  if (!syllabus) return;\n\n  const currentLevel =\n    props.chartType === RequirementType.PQS\n      ? props.upgrader.derivedPqsWorkingLevel\n      : props.upgrader.derivedEventsWorkingLevel;\n\n  if (!currentLevel) return;\n\n  const deadlines =\n    appConfigStore.currentConfig.positionSettings[\n      props.upgrader.assignedPosition\n    ]?.deadlines[currentLevel];\n\n  if (!deadlines) return;\n\n  const { targetMonths, deadlineMonths } = deadlines;\n  const labels = Array.from(\n    { length: deadlineMonths + 1 },\n    (_, i) => `Month ${i}`\n  );\n\n  const reqsForCurrentLevel = syllabus.requirements.filter(\n    (r) =>\n      String(r.level) === currentLevel &&\n      r.type === props.chartType &&\n      !r.isDefaultWaived\n  );\n  const totalRequirementCount = reqsForCurrentLevel.length;\n  if (totalRequirementCount === 0) return;\n\n  const today = getTodayUtc();\n  const monthsSinceStart = daysBetween(props.upgrader.startDate, today) / 30.44;\n\n  const actualData = labels.map((_, i) => {\n    if (i > monthsSinceStart) return null;\n    const monthEndDate = addDays(props.upgrader.startDate, i * 30.44);\n\n    const completedCount = props.upgrader.rawCompletions.filter((c) => {\n      const req = reqsForCurrentLevel.find(\n        (r) => r.name.toUpperCase() === c.event.toUpperCase()\n      );\n      return req && c.date <= monthEndDate;\n    }).length;\n\n    return (completedCount / totalRequirementCount) * 100;\n  });\n\n  const lastValidIndex = actualData.findLastIndex((v) => v !== null);\n  const lastKnownProgress =\n    lastValidIndex > -1 ? actualData[lastValidIndex] : 0;\n\n  const projectionDate =\n    props.chartType === RequirementType.PQS\n      ? props.upgrader.projectedPqsCompletionDate\n      : props.upgrader.projectedEventsCompletionDate;\n  const projectionData: (number | null)[] = new Array(labels.length).fill(null);\n\n  if (projectionDate && lastKnownProgress != null && lastKnownProgress < 100) {\n    projectionData[lastValidIndex] = lastKnownProgress;\n    const projectionEndMonth = Math.ceil(\n      daysBetween(props.upgrader.startDate, projectionDate) / 30.44\n    );\n    if (\n      projectionEndMonth > lastValidIndex &&\n      projectionEndMonth < labels.length\n    ) {\n      projectionData[projectionEndMonth] = 100;\n    }\n  }\n\n  const ctx = chartCanvas.value.getContext(\"2d\");\n  if (ctx) {\n    chartInstance = new Chart(ctx, {\n      type: \"line\",\n      data: {\n        labels,\n        // --- FIX ---\n        // The datasets array was empty before. It is now correctly populated.\n        datasets: [\n          {\n            label: \"Squadron Target\",\n            data: labels.map((_, i) =>\n              targetMonths > 0 ? (100 / targetMonths) * i : null\n            ),\n            borderColor: \"rgba(234, 179, 8, 0.7)\",\n            borderDash: [10, 5],\n            pointRadius: 0,\n            fill: false,\n          },\n          {\n            label: \"Wing Deadline\",\n            data: labels.map((_, i) =>\n              deadlineMonths > 0 ? (100 / deadlineMonths) * i : null\n            ),\n            borderColor: \"rgba(220, 38, 38, 0.7)\",\n            borderDash: [10, 5],\n            pointRadius: 0,\n            fill: false,\n          },\n          {\n            label: \"Actual Progress\",\n            data: actualData,\n            borderColor: \"rgba(59, 130, 246, 1)\",\n            backgroundColor: \"rgba(59, 130, 246, 0.1)\",\n            tension: 0.1,\n            fill: false,\n          },\n          {\n            label: \"Projection\",\n            data: projectionData,\n            borderColor: \"rgba(22, 163, 74, 1)\",\n            borderDash: [3, 4],\n            pointRadius: 0,\n            fill: false,\n          },\n        ],\n      },\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        plugins: {\n          legend: {\n            position: \"top\",\n          },\n          title: {\n            display: true,\n            text: `${props.chartType} Progress`,\n          },\n        },\n        scales: {\n          y: {\n            min: 0,\n            max: 100,\n            title: {\n              display: true,\n              text: \"% Complete\",\n            },\n          },\n          x: {\n            title: {\n              display: true,\n              text: \"Months Since Start Date\",\n            },\n          },\n        },\n      },\n    });\n  }\n});\n\nonBeforeUnmount(() => {\n  if (chartInstance) chartInstance.destroy();\n});\n</script>\n","import script from \"./ProgressChart.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ProgressChart.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, unref as _unref, createVNode as _createVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveDynamicComponent as _resolveDynamicComponent, createBlock as _createBlock, normalizeClass as _normalizeClass, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = {\n  key: 0,\n  class: \"space-y-6\"\n}\nconst _hoisted_2 = { class: \"md:flex md:items-center md:justify-between\" }\nconst _hoisted_3 = { class: \"min-w-0 flex-1\" }\nconst _hoisted_4 = { class: \"text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight\" }\nconst _hoisted_5 = { class: \"mt-1 flex flex-col sm:flex-row sm:flex-wrap sm:space-x-6 text-sm text-gray-500\" }\nconst _hoisted_6 = { class: \"font-semibold text-gray-700\" }\nconst _hoisted_7 = { class: \"font-semibold text-gray-700\" }\nconst _hoisted_8 = { class: \"mt-4 flex md:mt-0 md:ml-4\" }\nconst _hoisted_9 = { class: \"bg-white shadow-lg rounded-lg border border-gray-200 overflow-hidden\" }\nconst _hoisted_10 = { class: \"p-6\" }\nconst _hoisted_11 = { class: \"mt-1 max-w-2xl text-sm leading-6 text-gray-500\" }\nconst _hoisted_12 = { class: \"mt-6 grid grid-cols-1 gap-x-6 gap-y-4 sm:grid-cols-2 lg:grid-cols-4\" }\nconst _hoisted_13 = { class: \"flex items-center text-sm font-medium text-gray-500\" }\nconst _hoisted_14 = { class: \"border-t border-gray-200 p-6\" }\nconst _hoisted_15 = { class: \"mt-4 grid grid-cols-1 md:grid-cols-2 print:grid-cols-2 gap-8\" }\nconst _hoisted_16 = { class: \"border-t border-gray-200 p-6\" }\nconst _hoisted_17 = {\n  key: 0,\n  role: \"list\",\n  class: \"mt-4 divide-y divide-gray-200 border-t border-b border-gray-200\"\n}\nconst _hoisted_18 = { class: \"flex-none\" }\nconst _hoisted_19 = { class: \"flex-auto text-sm font-semibold text-gray-900\" }\nconst _hoisted_20 = { class: \"flex-none text-xs text-gray-500\" }\nconst _hoisted_21 = {\n  key: 1,\n  class: \"mt-4 text-sm text-gray-500 italic\"\n}\nconst _hoisted_22 = {\n  key: 1,\n  class: \"text-center p-8 bg-white rounded-lg shadow\"\n}\n\nimport { ref, onMounted, computed } from \"vue\";\nimport { generateIndividualReport } from \"@/core/reportGeneratorService\";\nimport type { IndividualReport } from \"@/types/reportTypes\";\nimport { ReadinessStatus } from \"@/types/personnelTypes\";\nimport { RequirementType } from \"@/types/syllabiTypes\";\nimport { formatUtcDateToDisplay } from \"@/utils/dateUtils\";\nimport ProgressChart from \"../charts/ProgressChart.vue\";\nimport {\n  ArrowLeftIcon,\n  PrinterIcon,\n  ScaleIcon,\n  ClockIcon,\n  CheckCircleIcon,\n  LockClosedIcon,\n  RocketLaunchIcon,\n  ChartPieIcon,\n} from \"@heroicons/vue/24/outline\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'IndividualReport',\n  props: {\n    upgraderId: {}\n  },\n  setup(__props: any) {\n\nconst props = __props;\n\nconst report = ref<IndividualReport | null>(null);\n\nonMounted(() => {\n  report.value = generateIndividualReport(props.upgraderId);\n});\n\nconst summaryNarrative = computed(() => {\n  if (!report.value) return \"\";\n  const { upgrader, summary } = report.value;\n  const pacing = summary.pacingAgainstDeadlineDays;\n  const pacingText =\n    pacing >= 0 ? `${pacing} days ahead of` : `${Math.abs(pacing)} days behind`;\n  return `${upgrader.displayName} is currently rated as ${summary.readinessAgainstDeadline}. They are pacing ${pacingText} schedule to meet their deadline.`;\n});\n\nconst summaryStats = computed(() => {\n  if (!report.value) return [];\n  const { summary, upgrader } = report.value;\n  return [\n    {\n      name: \"Readiness Status\",\n      value: summary.readinessAgainstDeadline,\n      icon: ScaleIcon,\n      color: readinessColorClass(summary.readinessAgainstDeadline),\n    },\n    {\n      name: \"Pacing (Deadline)\",\n      value: `${summary.pacingAgainstDeadlineDays ?? \"N/A\"} days`,\n      icon: ClockIcon,\n      color:\n        (summary.pacingAgainstDeadlineDays ?? 0) < 0\n          ? \"text-red-600\"\n          : \"text-green-600\",\n    },\n    {\n      name: \"Projected Completion\",\n      value: formatUtcDateToDisplay(summary.projectedCompletionDate),\n      icon: RocketLaunchIcon,\n      color: \"text-gray-900\",\n    },\n    {\n      name: \"Overall Progress\",\n      value: `${(\n        ((upgrader.pqsProgressPercentage ?? 0) +\n          (upgrader.eventsProgressPercentage ?? 0)) /\n        2\n      ).toFixed(0)}%`,\n      icon: ChartPieIcon,\n      color: \"text-gray-900\",\n    },\n  ];\n});\n\nconst readinessColorClass = (status: ReadinessStatus) => {\n  switch (status) {\n    case ReadinessStatus.OnTrack:\n      return \"text-green-600 font-semibold\";\n    case ReadinessStatus.AtRisk:\n      return \"text-yellow-600 font-semibold\";\n    case ReadinessStatus.BehindSchedule:\n      return \"text-red-600 font-semibold\";\n    case ReadinessStatus.Blocked:\n      return \"text-red-800 font-bold\";\n    default:\n      return \"text-gray-900 font-semibold\";\n  }\n};\n\nconst handlePrint = () => {\n  window.print();\n};\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_router_link = _resolveComponent(\"router-link\")!\n\n  return (report.value)\n    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _createElementVNode(\"div\", _hoisted_2, [\n          _createElementVNode(\"div\", _hoisted_3, [\n            _createElementVNode(\"h1\", _hoisted_4, \" Individual Report: \" + _toDisplayString(report.value.upgrader.displayName), 1),\n            _createElementVNode(\"p\", _hoisted_5, [\n              _createElementVNode(\"span\", null, [\n                _cache[0] || (_cache[0] = _createTextVNode(\"PQS Level: \")),\n                _createElementVNode(\"strong\", _hoisted_6, _toDisplayString(report.value.upgrader.derivedPqsWorkingLevel || \"N/A\"), 1)\n              ]),\n              _createElementVNode(\"span\", null, [\n                _cache[1] || (_cache[1] = _createTextVNode(\"Events Level: \")),\n                _createElementVNode(\"strong\", _hoisted_7, _toDisplayString(report.value.upgrader.derivedEventsWorkingLevel || \"N/A\"), 1)\n              ])\n            ])\n          ]),\n          _createElementVNode(\"div\", _hoisted_8, [\n            _createVNode(_component_router_link, {\n              to: { name: 'IndividualReportList' },\n              type: \"button\",\n              class: \"inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50\"\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_unref(ArrowLeftIcon), { class: \"-ml-0.5 mr-1.5 h-5 w-5 text-gray-400\" }),\n                _cache[2] || (_cache[2] = _createTextVNode(\" Back to List \"))\n              ]),\n              _: 1,\n              __: [2]\n            }),\n            _createElementVNode(\"button\", {\n              onClick: handlePrint,\n              type: \"button\",\n              class: \"ml-3 inline-flex items-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500\"\n            }, [\n              _createVNode(_unref(PrinterIcon), { class: \"-ml-0.5 mr-1.5 h-5 w-5\" }),\n              _cache[3] || (_cache[3] = _createTextVNode(\" Print to PDF \"))\n            ])\n          ])\n        ]),\n        _createElementVNode(\"div\", _hoisted_9, [\n          _createElementVNode(\"div\", _hoisted_10, [\n            _cache[4] || (_cache[4] = _createElementVNode(\"h3\", { class: \"text-base font-semibold leading-7 text-gray-900\" }, \" Training Summary \", -1)),\n            _createElementVNode(\"p\", _hoisted_11, _toDisplayString(summaryNarrative.value), 1),\n            _createElementVNode(\"dl\", _hoisted_12, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(summaryStats.value, (stat) => {\n                return (_openBlock(), _createElementBlock(\"div\", {\n                  key: stat.name,\n                  class: \"rounded-lg bg-gray-50 p-4\"\n                }, [\n                  _createElementVNode(\"dt\", _hoisted_13, [\n                    (_openBlock(), _createBlock(_resolveDynamicComponent(stat.icon), { class: \"h-5 w-5 text-gray-400 mr-2\" })),\n                    _createElementVNode(\"span\", null, _toDisplayString(stat.name), 1)\n                  ]),\n                  _createElementVNode(\"dd\", {\n                    class: _normalizeClass([\"mt-1 text-xl font-semibold tracking-tight text-gray-900\", stat.color])\n                  }, _toDisplayString(stat.value), 3)\n                ]))\n              }), 128))\n            ])\n          ]),\n          _createElementVNode(\"div\", _hoisted_14, [\n            _cache[5] || (_cache[5] = _createElementVNode(\"h3\", { class: \"text-base font-semibold leading-7 text-gray-900\" }, \" Level Progression \", -1)),\n            _createElementVNode(\"div\", _hoisted_15, [\n              _createVNode(ProgressChart, {\n                upgrader: report.value.upgrader,\n                \"chart-type\": _unref(RequirementType).PQS\n              }, null, 8, [\"upgrader\", \"chart-type\"]),\n              _createVNode(ProgressChart, {\n                upgrader: report.value.upgrader,\n                \"chart-type\": _unref(RequirementType).Event\n              }, null, 8, [\"upgrader\", \"chart-type\"])\n            ])\n          ]),\n          _createElementVNode(\"div\", _hoisted_16, [\n            _cache[6] || (_cache[6] = _createElementVNode(\"h3\", { class: \"text-base font-semibold leading-7 text-gray-900\" }, \" Priority Tasks \", -1)),\n            _cache[7] || (_cache[7] = _createElementVNode(\"p\", { class: \"mt-1 text-sm text-gray-500\" }, \" Top 5 recommended next steps to continue progression. \", -1)),\n            (report.value.priorityTasks.length > 0)\n              ? (_openBlock(), _createElementBlock(\"ul\", _hoisted_17, [\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(report.value.priorityTasks.slice(0, 5), (task) => {\n                    return (_openBlock(), _createElementBlock(\"li\", {\n                      key: task.id,\n                      class: \"flex items-center gap-x-3 py-3 px-2\"\n                    }, [\n                      _createElementVNode(\"div\", _hoisted_18, [\n                        (task.isAvailable)\n                          ? (_openBlock(), _createBlock(_unref(CheckCircleIcon), {\n                              key: 0,\n                              class: \"h-6 w-6 text-green-500\"\n                            }))\n                          : (_openBlock(), _createBlock(_unref(LockClosedIcon), {\n                              key: 1,\n                              class: \"h-6 w-6 text-gray-400\"\n                            }))\n                      ]),\n                      _createElementVNode(\"p\", _hoisted_19, _toDisplayString(task.displayName) + \" (L\" + _toDisplayString(task.level) + \") \", 1),\n                      _createElementVNode(\"p\", _hoisted_20, \" P-Score: \" + _toDisplayString(task.priorityScore.toFixed(0)), 1)\n                    ]))\n                  }), 128))\n                ]))\n              : (_openBlock(), _createElementBlock(\"p\", _hoisted_21, \" No remaining tasks. \"))\n          ])\n        ])\n      ]))\n    : (_openBlock(), _createElementBlock(\"div\", _hoisted_22, _cache[8] || (_cache[8] = [\n        _createElementVNode(\"p\", null, \"Generating report...\", -1)\n      ])))\n}\n}\n\n})","<template>\n  <div v-if=\"report\" class=\"space-y-6\">\n    <div class=\"md:flex md:items-center md:justify-between\">\n      <div class=\"min-w-0 flex-1\">\n        <h1\n          class=\"text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight\"\n        >\n          Individual Report: {{ report.upgrader.displayName }}\n        </h1>\n        <p\n          class=\"mt-1 flex flex-col sm:flex-row sm:flex-wrap sm:space-x-6 text-sm text-gray-500\"\n        >\n          <span\n            >PQS Level:\n            <strong class=\"font-semibold text-gray-700\">{{\n              report.upgrader.derivedPqsWorkingLevel || \"N/A\"\n            }}</strong></span\n          >\n          <span\n            >Events Level:\n            <strong class=\"font-semibold text-gray-700\">{{\n              report.upgrader.derivedEventsWorkingLevel || \"N/A\"\n            }}</strong></span\n          >\n        </p>\n      </div>\n      <div class=\"mt-4 flex md:mt-0 md:ml-4\">\n        <router-link\n          :to=\"{ name: 'IndividualReportList' }\"\n          type=\"button\"\n          class=\"inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50\"\n        >\n          <ArrowLeftIcon class=\"-ml-0.5 mr-1.5 h-5 w-5 text-gray-400\" />\n          Back to List\n        </router-link>\n        <button\n          @click=\"handlePrint\"\n          type=\"button\"\n          class=\"ml-3 inline-flex items-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500\"\n        >\n          <PrinterIcon class=\"-ml-0.5 mr-1.5 h-5 w-5\" />\n          Print to PDF\n        </button>\n      </div>\n    </div>\n\n    <div\n      class=\"bg-white shadow-lg rounded-lg border border-gray-200 overflow-hidden\"\n    >\n      <div class=\"p-6\">\n        <h3 class=\"text-base font-semibold leading-7 text-gray-900\">\n          Training Summary\n        </h3>\n        <p class=\"mt-1 max-w-2xl text-sm leading-6 text-gray-500\">\n          {{ summaryNarrative }}\n        </p>\n\n        <dl\n          class=\"mt-6 grid grid-cols-1 gap-x-6 gap-y-4 sm:grid-cols-2 lg:grid-cols-4\"\n        >\n          <div\n            v-for=\"stat in summaryStats\"\n            :key=\"stat.name\"\n            class=\"rounded-lg bg-gray-50 p-4\"\n          >\n            <dt class=\"flex items-center text-sm font-medium text-gray-500\">\n              <component :is=\"stat.icon\" class=\"h-5 w-5 text-gray-400 mr-2\" />\n              <span>{{ stat.name }}</span>\n            </dt>\n            <dd\n              class=\"mt-1 text-xl font-semibold tracking-tight text-gray-900\"\n              :class=\"stat.color\"\n            >\n              {{ stat.value }}\n            </dd>\n          </div>\n        </dl>\n      </div>\n\n      <div class=\"border-t border-gray-200 p-6\">\n        <h3 class=\"text-base font-semibold leading-7 text-gray-900\">\n          Level Progression\n        </h3>\n        <div\n          class=\"mt-4 grid grid-cols-1 md:grid-cols-2 print:grid-cols-2 gap-8\"\n        >\n          <ProgressChart\n            :upgrader=\"report.upgrader\"\n            :chart-type=\"RequirementType.PQS\"\n          />\n          <ProgressChart\n            :upgrader=\"report.upgrader\"\n            :chart-type=\"RequirementType.Event\"\n          />\n        </div>\n      </div>\n\n      <div class=\"border-t border-gray-200 p-6\">\n        <h3 class=\"text-base font-semibold leading-7 text-gray-900\">\n          Priority Tasks\n        </h3>\n        <p class=\"mt-1 text-sm text-gray-500\">\n          Top 5 recommended next steps to continue progression.\n        </p>\n        <ul\n          v-if=\"report.priorityTasks.length > 0\"\n          role=\"list\"\n          class=\"mt-4 divide-y divide-gray-200 border-t border-b border-gray-200\"\n        >\n          <li\n            v-for=\"task in report.priorityTasks.slice(0, 5)\"\n            :key=\"task.id\"\n            class=\"flex items-center gap-x-3 py-3 px-2\"\n          >\n            <div class=\"flex-none\">\n              <CheckCircleIcon\n                v-if=\"task.isAvailable\"\n                class=\"h-6 w-6 text-green-500\"\n              />\n              <LockClosedIcon v-else class=\"h-6 w-6 text-gray-400\" />\n            </div>\n            <p class=\"flex-auto text-sm font-semibold text-gray-900\">\n              {{ task.displayName }} (L{{ task.level }})\n            </p>\n            <p class=\"flex-none text-xs text-gray-500\">\n              P-Score: {{ task.priorityScore.toFixed(0) }}\n            </p>\n          </li>\n        </ul>\n        <p v-else class=\"mt-4 text-sm text-gray-500 italic\">\n          No remaining tasks.\n        </p>\n      </div>\n    </div>\n  </div>\n  <div v-else class=\"text-center p-8 bg-white rounded-lg shadow\">\n    <p>Generating report...</p>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted, defineProps, computed } from \"vue\";\nimport { generateIndividualReport } from \"@/core/reportGeneratorService\";\nimport type { IndividualReport } from \"@/types/reportTypes\";\nimport { ReadinessStatus } from \"@/types/personnelTypes\";\nimport { RequirementType } from \"@/types/syllabiTypes\";\nimport { formatUtcDateToDisplay } from \"@/utils/dateUtils\";\nimport ProgressChart from \"../charts/ProgressChart.vue\";\nimport {\n  ArrowLeftIcon,\n  PrinterIcon,\n  ScaleIcon,\n  ClockIcon,\n  CheckCircleIcon,\n  LockClosedIcon,\n  RocketLaunchIcon,\n  ChartPieIcon,\n} from \"@heroicons/vue/24/outline\";\n\nconst props = defineProps<{\n  upgraderId: string;\n}>();\n\nconst report = ref<IndividualReport | null>(null);\n\nonMounted(() => {\n  report.value = generateIndividualReport(props.upgraderId);\n});\n\nconst summaryNarrative = computed(() => {\n  if (!report.value) return \"\";\n  const { upgrader, summary } = report.value;\n  const pacing = summary.pacingAgainstDeadlineDays;\n  const pacingText =\n    pacing >= 0 ? `${pacing} days ahead of` : `${Math.abs(pacing)} days behind`;\n  return `${upgrader.displayName} is currently rated as ${summary.readinessAgainstDeadline}. They are pacing ${pacingText} schedule to meet their deadline.`;\n});\n\nconst summaryStats = computed(() => {\n  if (!report.value) return [];\n  const { summary, upgrader } = report.value;\n  return [\n    {\n      name: \"Readiness Status\",\n      value: summary.readinessAgainstDeadline,\n      icon: ScaleIcon,\n      color: readinessColorClass(summary.readinessAgainstDeadline),\n    },\n    {\n      name: \"Pacing (Deadline)\",\n      value: `${summary.pacingAgainstDeadlineDays ?? \"N/A\"} days`,\n      icon: ClockIcon,\n      color:\n        (summary.pacingAgainstDeadlineDays ?? 0) < 0\n          ? \"text-red-600\"\n          : \"text-green-600\",\n    },\n    {\n      name: \"Projected Completion\",\n      value: formatUtcDateToDisplay(summary.projectedCompletionDate),\n      icon: RocketLaunchIcon,\n      color: \"text-gray-900\",\n    },\n    {\n      name: \"Overall Progress\",\n      value: `${(\n        ((upgrader.pqsProgressPercentage ?? 0) +\n          (upgrader.eventsProgressPercentage ?? 0)) /\n        2\n      ).toFixed(0)}%`,\n      icon: ChartPieIcon,\n      color: \"text-gray-900\",\n    },\n  ];\n});\n\nconst readinessColorClass = (status: ReadinessStatus) => {\n  switch (status) {\n    case ReadinessStatus.OnTrack:\n      return \"text-green-600 font-semibold\";\n    case ReadinessStatus.AtRisk:\n      return \"text-yellow-600 font-semibold\";\n    case ReadinessStatus.BehindSchedule:\n      return \"text-red-600 font-semibold\";\n    case ReadinessStatus.Blocked:\n      return \"text-red-800 font-bold\";\n    default:\n      return \"text-gray-900 font-semibold\";\n  }\n};\n\nconst handlePrint = () => {\n  window.print();\n};\n</script>\n","import script from \"./IndividualReport.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./IndividualReport.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx } from \"vue\"\n\nconst _hoisted_1 = { class: \"p-4 sm:p-6 lg:p-8\" }\nconst _hoisted_2 = { key: 0 }\nconst _hoisted_3 = { class: \"flex items-center justify-between\" }\nconst _hoisted_4 = { class: \"text-2xl font-bold text-gray-900\" }\nconst _hoisted_5 = { class: \"mt-1 text-sm text-gray-600\" }\nconst _hoisted_6 = { class: \"mt-6\" }\nconst _hoisted_7 = {\n  key: 1,\n  class: \"text-center py-12\"\n}\nconst _hoisted_8 = { class: \"mt-2 text-gray-500\" }\nconst _hoisted_9 = { class: \"mt-6\" }\n\nimport { computed } from \"vue\";\nimport { usePersonnelStore } from \"@/stores/personnelStore\";\nimport IndividualReport from \"@/components/specific/reports/IndividualReport.vue\";\nimport { useRouter } from \"vue-router\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'StudentDetailView',\n  props: {\n  id: {\n    type: String,\n    required: true,\n  },\n},\n  setup(__props) {\n\nconst props = __props;\n\nconst personnelStore = usePersonnelStore();\nconst router = useRouter();\n\n// Find the upgrader in the store based on the ID from the URL\nconst upgrader = computed(() => personnelStore.getPersonnelById(props.id));\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_router_link = _resolveComponent(\"router-link\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (upgrader.value)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n          _createElementVNode(\"div\", _hoisted_3, [\n            _createElementVNode(\"div\", null, [\n              _createElementVNode(\"h1\", _hoisted_4, _toDisplayString(upgrader.value.displayName), 1),\n              _createElementVNode(\"p\", _hoisted_5, _toDisplayString(upgrader.value.rank) + \" | \" + _toDisplayString(upgrader.value.assignedPosition) + \" | Start Date: \" + _toDisplayString(new Date(upgrader.value.startDate).toLocaleDateString()), 1)\n            ]),\n            _createElementVNode(\"button\", {\n              onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.$router.back())),\n              class: \"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50\"\n            }, \"  Back to Reports \")\n          ]),\n          _createElementVNode(\"div\", _hoisted_6, [\n            _createVNode(IndividualReport, { \"upgrader-id\": __props.id }, null, 8, [\"upgrader-id\"])\n          ])\n        ]))\n      : (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n          _cache[2] || (_cache[2] = _createElementVNode(\"h2\", { class: \"text-xl font-semibold text-gray-700\" }, \"Upgrader Not Found\", -1)),\n          _createElementVNode(\"p\", _hoisted_8, \" Could not find a student with the ID: \" + _toDisplayString(__props.id), 1),\n          _createElementVNode(\"div\", _hoisted_9, [\n            _createVNode(_component_router_link, {\n              to: \"/reports/individual\",\n              class: \"text-indigo-600 hover:text-indigo-500 font-semibold\"\n            }, {\n              default: _withCtx(() => _cache[1] || (_cache[1] = [\n                _createTextVNode(\"  Return to Individual Reports List \")\n              ])),\n              _: 1,\n              __: [1]\n            })\n          ])\n        ]))\n  ]))\n}\n}\n\n})","<!-- src/views/StudentDetailView.vue -->\n<template>\n  <div class=\"p-4 sm:p-6 lg:p-8\">\n    <div v-if=\"upgrader\">\n      <div class=\"flex items-center justify-between\">\n        <div>\n          <h1 class=\"text-2xl font-bold text-gray-900\">\n            {{ upgrader.displayName }}\n          </h1>\n          <p class=\"mt-1 text-sm text-gray-600\">\n            {{ upgrader.rank }} | {{ upgrader.assignedPosition }} | Start Date:\n            {{ new Date(upgrader.startDate).toLocaleDateString() }}\n          </p>\n        </div>\n        <button\n          @click=\"$router.back()\"\n          class=\"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50\"\n        >\n          &larr; Back to Reports\n        </button>\n      </div>\n\n      <!-- The IndividualReport component will render the detailed charts and lists -->\n      <div class=\"mt-6\">\n        <IndividualReport :upgrader-id=\"id\" />\n      </div>\n    </div>\n    <div v-else class=\"text-center py-12\">\n      <h2 class=\"text-xl font-semibold text-gray-700\">Upgrader Not Found</h2>\n      <p class=\"mt-2 text-gray-500\">\n        Could not find a student with the ID: {{ id }}\n      </p>\n      <div class=\"mt-6\">\n        <router-link\n          to=\"/reports/individual\"\n          class=\"text-indigo-600 hover:text-indigo-500 font-semibold\"\n        >\n          &larr; Return to Individual Reports List\n        </router-link>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, defineProps } from \"vue\";\nimport { usePersonnelStore } from \"@/stores/personnelStore\";\nimport IndividualReport from \"@/components/specific/reports/IndividualReport.vue\";\nimport { useRouter } from \"vue-router\";\n\nconst props = defineProps({\n  id: {\n    type: String,\n    required: true,\n  },\n});\n\nconst personnelStore = usePersonnelStore();\nconst router = useRouter();\n\n// Find the upgrader in the store based on the ID from the URL\nconst upgrader = computed(() => personnelStore.getPersonnelById(props.id));\n</script>\n","import script from \"./StudentDetailView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./StudentDetailView.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, unref as _unref, createVNode as _createVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"p-8\" }\nconst _hoisted_2 = { class: \"mt-6 grid grid-cols-1 gap-8 sm:grid-cols-2\" }\nconst _hoisted_3 = { class: \"flex items-center\" }\nconst _hoisted_4 = { class: \"flex items-center\" }\n\nimport {\n  Cog6ToothIcon,\n  DocumentDuplicateIcon,\n} from \"@heroicons/vue/24/outline\";\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'SettingsSyllabiView',\n  setup(__props) {\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_router_link = _resolveComponent(\"router-link\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _cache[2] || (_cache[2] = _createElementVNode(\"h1\", { class: \"text-2xl font-bold text-gray-900 border-b pb-4\" }, \"Settings\", -1)),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createVNode(_component_router_link, {\n        to: \"/settings/app\",\n        class: \"block p-6 bg-white rounded-lg shadow hover:shadow-lg transition-transform transform hover:-translate-y-1\"\n      }, {\n        default: _withCtx(() => [\n          _createElementVNode(\"div\", _hoisted_3, [\n            _createVNode(_unref(Cog6ToothIcon), { class: \"h-10 w-10 text-indigo-500\" }),\n            _cache[0] || (_cache[0] = _createElementVNode(\"div\", { class: \"ml-4\" }, [\n              _createElementVNode(\"h2\", { class: \"text-lg font-semibold text-gray-800\" }, \" App Configuration \"),\n              _createElementVNode(\"p\", { class: \"text-sm text-gray-600\" }, \" Adjust global application settings and deadlines. \")\n            ], -1))\n          ])\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_router_link, {\n        to: \"/syllabi\",\n        class: \"block p-6 bg-white rounded-lg shadow hover:shadow-lg transition-transform transform hover:-translate-y-1\"\n      }, {\n        default: _withCtx(() => [\n          _createElementVNode(\"div\", _hoisted_4, [\n            _createVNode(_unref(DocumentDuplicateIcon), { class: \"h-10 w-10 text-teal-500\" }),\n            _cache[1] || (_cache[1] = _createElementVNode(\"div\", { class: \"ml-4\" }, [\n              _createElementVNode(\"h2\", { class: \"text-lg font-semibold text-gray-800\" }, \" Syllabus Management \"),\n              _createElementVNode(\"p\", { class: \"text-sm text-gray-600\" }, \" Upload, view, and edit training syllabi. \")\n            ], -1))\n          ])\n        ]),\n        _: 1\n      })\n    ])\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"p-8\">\n    <h1 class=\"text-2xl font-bold text-gray-900 border-b pb-4\">Settings</h1>\n    <div class=\"mt-6 grid grid-cols-1 gap-8 sm:grid-cols-2\">\n      <router-link\n        to=\"/settings/app\"\n        class=\"block p-6 bg-white rounded-lg shadow hover:shadow-lg transition-transform transform hover:-translate-y-1\"\n      >\n        <div class=\"flex items-center\">\n          <Cog6ToothIcon class=\"h-10 w-10 text-indigo-500\" />\n          <div class=\"ml-4\">\n            <h2 class=\"text-lg font-semibold text-gray-800\">\n              App Configuration\n            </h2>\n            <p class=\"text-sm text-gray-600\">\n              Adjust global application settings and deadlines.\n            </p>\n          </div>\n        </div>\n      </router-link>\n\n      <router-link\n        to=\"/syllabi\"\n        class=\"block p-6 bg-white rounded-lg shadow hover:shadow-lg transition-transform transform hover:-translate-y-1\"\n      >\n        <div class=\"flex items-center\">\n          <DocumentDuplicateIcon class=\"h-10 w-10 text-teal-500\" />\n          <div class=\"ml-4\">\n            <h2 class=\"text-lg font-semibold text-gray-800\">\n              Syllabus Management\n            </h2>\n            <p class=\"text-sm text-gray-600\">\n              Upload, view, and edit training syllabi.\n            </p>\n          </div>\n        </div>\n      </router-link>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  Cog6ToothIcon,\n  DocumentDuplicateIcon,\n} from \"@heroicons/vue/24/outline\";\n</script>\n","import script from \"./SettingsSyllabiView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SettingsSyllabiView.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, unref as _unref, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"bg-white shadow rounded-lg\" }\nconst _hoisted_2 = { class: \"px-4 py-5 sm:p-6\" }\nconst _hoisted_3 = {\n  key: 0,\n  class: \"mt-4\"\n}\nconst _hoisted_4 = {\n  role: \"list\",\n  class: \"divide-y divide-gray-200\"\n}\nconst _hoisted_5 = { class: \"min-w-0 flex-1\" }\nconst _hoisted_6 = { class: \"text-sm font-medium text-indigo-600 truncate\" }\nconst _hoisted_7 = { class: \"text-sm text-gray-500\" }\nconst _hoisted_8 = { class: \"ml-4 flex-shrink-0 space-x-2\" }\nconst _hoisted_9 = [\"onClick\"]\nconst _hoisted_10 = {\n  key: 1,\n  class: \"text-center py-6\"\n}\n\nimport { useSyllabiStore } from \"@/stores/syllabiStore\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'SyllabusList',\n  setup(__props) {\n\nconst syllabiStore = useSyllabiStore();\n\nconst handleDelete = (id: string) => {\n  // FIX: Ensure syllabus exists before attempting deletion\n  if (\n    confirm(\n      \"Are you sure you want to delete this syllabus? This cannot be undone.\"\n    )\n  ) {\n    const syllabusExists = syllabiStore.allSyllabi.some((s) => s.id === id);\n    if (syllabusExists) {\n      syllabiStore.removeSyllabus(id);\n    } else {\n      console.warn(\n        `Attempted to delete a syllabus that does not exist with id: ${id}`\n      );\n    }\n  }\n};\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_router_link = _resolveComponent(\"router-link\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _cache[2] || (_cache[2] = _createElementVNode(\"h3\", { class: \"text-lg font-medium leading-6 text-gray-900\" }, \" Loaded Syllabi \", -1)),\n      (_unref(syllabiStore).allSyllabi.length > 0)\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n            _createElementVNode(\"ul\", _hoisted_4, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(syllabiStore).allSyllabi, (syllabus) => {\n                return (_openBlock(), _createElementBlock(\"li\", {\n                  key: syllabus.id,\n                  class: \"flex items-center justify-between py-3\"\n                }, [\n                  _createElementVNode(\"div\", _hoisted_5, [\n                    _createElementVNode(\"p\", _hoisted_6, _toDisplayString(syllabus.displayName), 1),\n                    _createElementVNode(\"p\", _hoisted_7, _toDisplayString(syllabus.position) + \" - \" + _toDisplayString(syllabus.year), 1)\n                  ]),\n                  _createElementVNode(\"div\", _hoisted_8, [\n                    _createVNode(_component_router_link, {\n                      to: { name: 'SyllabusEdit', params: { id: syllabus.id } },\n                      class: \"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50\"\n                    }, {\n                      default: _withCtx(() => _cache[0] || (_cache[0] = [\n                        _createTextVNode(\" Edit \")\n                      ])),\n                      _: 2,\n                      __: [0]\n                    }, 1032, [\"to\"]),\n                    _createElementVNode(\"button\", {\n                      onClick: ($event: any) => (handleDelete(syllabus.id)),\n                      class: \"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200\"\n                    }, \" Delete \", 8, _hoisted_9)\n                  ])\n                ]))\n              }), 128))\n            ])\n          ]))\n        : (_openBlock(), _createElementBlock(\"div\", _hoisted_10, _cache[1] || (_cache[1] = [\n            _createElementVNode(\"p\", { class: \"text-gray-500\" }, \"No syllabi have been loaded.\", -1)\n          ])))\n    ])\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"bg-white shadow rounded-lg\">\n    <div class=\"px-4 py-5 sm:p-6\">\n      <h3 class=\"text-lg font-medium leading-6 text-gray-900\">\n        Loaded Syllabi\n      </h3>\n      <div v-if=\"syllabiStore.allSyllabi.length > 0\" class=\"mt-4\">\n        <ul role=\"list\" class=\"divide-y divide-gray-200\">\n          <li\n            v-for=\"syllabus in syllabiStore.allSyllabi\"\n            :key=\"syllabus.id\"\n            class=\"flex items-center justify-between py-3\"\n          >\n            <div class=\"min-w-0 flex-1\">\n              <p class=\"text-sm font-medium text-indigo-600 truncate\">\n                {{ syllabus.displayName }}\n              </p>\n              <p class=\"text-sm text-gray-500\">\n                {{ syllabus.position }} - {{ syllabus.year }}\n              </p>\n            </div>\n            <div class=\"ml-4 flex-shrink-0 space-x-2\">\n              <router-link\n                :to=\"{ name: 'SyllabusEdit', params: { id: syllabus.id } }\"\n                class=\"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50\"\n              >\n                Edit\n              </router-link>\n              <button\n                @click=\"handleDelete(syllabus.id)\"\n                class=\"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200\"\n              >\n                Delete\n              </button>\n            </div>\n          </li>\n        </ul>\n      </div>\n      <div v-else class=\"text-center py-6\">\n        <p class=\"text-gray-500\">No syllabi have been loaded.</p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { useSyllabiStore } from \"@/stores/syllabiStore\";\n\nconst syllabiStore = useSyllabiStore();\n\nconst handleDelete = (id: string) => {\n  // FIX: Ensure syllabus exists before attempting deletion\n  if (\n    confirm(\n      \"Are you sure you want to delete this syllabus? This cannot be undone.\"\n    )\n  ) {\n    const syllabusExists = syllabiStore.allSyllabi.some((s) => s.id === id);\n    if (syllabusExists) {\n      syllabiStore.removeSyllabus(id);\n    } else {\n      console.warn(\n        `Attempted to delete a syllabus that does not exist with id: ${id}`\n      );\n    }\n  }\n};\n</script>\n","import script from \"./SyllabusList.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SyllabusList.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { renderSlot as _renderSlot, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, withModifiers as _withModifiers, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode, Teleport as _Teleport, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = [\"aria-labelledby\"]\nconst _hoisted_2 = { class: \"px-6 py-4 border-b border-gray-200\" }\nconst _hoisted_3 = { class: \"flex items-center justify-between\" }\nconst _hoisted_4 = [\"id\"]\nconst _hoisted_5 = { class: \"px-6 py-5\" }\nconst _hoisted_6 = {\n  key: 0,\n  class: \"px-6 py-4 bg-gray-50 border-t border-gray-200 text-right space-x-3 rounded-b-lg\"\n}\n\nimport {\n  ref,\n  computed,\n  watch,\n  useSlots,\n  onMounted,\n  onUnmounted,\n} from \"vue\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'BaseModal',\n  props: {\n  isOpen: {\n    type: Boolean,\n    required: true,\n  },\n  title: {\n    type: String,\n    default: \"Modal Title\",\n  },\n  size: {\n    type: String, // e.g., 'sm', 'md', 'lg', 'xl', '2xl', 'full' (maps to Tailwind max-w)\n    default: \"2xl\", // Corresponds to sm:max-w-2xl\n  },\n},\n  emits: [\"close\"],\n  setup(__props, { emit: __emit }) {\n\nconst props = __props;\n\nconst emit = __emit;\n\nconst modalId = `modal-${Math.random().toString(36).substring(2, 9)}`;\nconst slots = useSlots();\nconst hasFooterSlot = computed(() => !!slots.footer);\n\nconst closeModal = () => {\n  emit(\"close\");\n};\n\n// Optional: Close modal on Escape key press\nconst handleEscKey = (event: KeyboardEvent) => {\n  if (event.key === \"Escape\" && props.isOpen) {\n    closeModal();\n  }\n};\n\nonMounted(() => {\n  document.addEventListener(\"keydown\", handleEscKey);\n});\n\nonUnmounted(() => {\n  document.removeEventListener(\"keydown\", handleEscKey);\n});\n\n// Prevent body scroll when modal is open\nwatch(\n  () => props.isOpen,\n  (newValue) => {\n    if (typeof document !== \"undefined\" && document.body) {\n      if (newValue) {\n        document.body.style.overflow = \"hidden\";\n      } else {\n        document.body.style.overflow = \"\";\n      }\n    }\n  }\n);\n\nconst modalSizeClass = computed(() => {\n  switch (props.size) {\n    case \"sm\":\n      return \"sm:max-w-sm\";\n    case \"md\":\n      return \"sm:max-w-md\";\n    case \"lg\":\n      return \"sm:max-w-lg\";\n    case \"xl\":\n      return \"sm:max-w-xl\";\n    case \"full\":\n      return \"sm:max-w-full h-full\"; // For a full screen modal experience\n    case \"2xl\": // Default\n    default:\n      return \"sm:max-w-2xl\";\n  }\n});\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(_Teleport, { to: \"body\" }, [\n    _createVNode(_Transition, { name: \"modal-fade\" }, {\n      default: _withCtx(() => [\n        (__props.isOpen)\n          ? (_openBlock(), _createElementBlock(\"div\", {\n              key: 0,\n              class: \"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center p-4\",\n              onClick: _withModifiers(closeModal, [\"self\"])\n            }, [\n              _createElementVNode(\"div\", {\n                class: _normalizeClass([\"bg-white rounded-lg shadow-xl transform transition-all sm:max-w-2xl w-full\", modalSizeClass.value]),\n                role: \"dialog\",\n                \"aria-modal\": \"true\",\n                \"aria-labelledby\": `modal-title-${modalId}`\n              }, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                  _createElementVNode(\"div\", _hoisted_3, [\n                    _createElementVNode(\"h3\", {\n                      id: `modal-title-${modalId}`,\n                      class: \"text-lg font-medium text-gray-900\"\n                    }, [\n                      _renderSlot(_ctx.$slots, \"header\", {}, () => [\n                        _createTextVNode(_toDisplayString(__props.title), 1)\n                      ])\n                    ], 8, _hoisted_4),\n                    _createElementVNode(\"button\", {\n                      onClick: closeModal,\n                      type: \"button\",\n                      class: \"text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-md\",\n                      \"aria-label\": \"Close modal\"\n                    }, _cache[0] || (_cache[0] = [\n                      _createElementVNode(\"svg\", {\n                        class: \"h-6 w-6\",\n                        xmlns: \"http://www.w3.org/2000/svg\",\n                        fill: \"none\",\n                        viewBox: \"0 0 24 24\",\n                        stroke: \"currentColor\",\n                        \"aria-hidden\": \"true\"\n                      }, [\n                        _createElementVNode(\"path\", {\n                          \"stroke-linecap\": \"round\",\n                          \"stroke-linejoin\": \"round\",\n                          \"stroke-width\": \"2\",\n                          d: \"M6 18L18 6M6 6l12 12\"\n                        })\n                      ], -1)\n                    ]))\n                  ])\n                ]),\n                _createElementVNode(\"div\", _hoisted_5, [\n                  _renderSlot(_ctx.$slots, \"body\")\n                ]),\n                (hasFooterSlot.value)\n                  ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n                      _renderSlot(_ctx.$slots, \"footer\")\n                    ]))\n                  : _createCommentVNode(\"\", true)\n              ], 10, _hoisted_1)\n            ]))\n          : _createCommentVNode(\"\", true)\n      ]),\n      _: 3\n    })\n  ]))\n}\n}\n\n})","<template>\n  <teleport to=\"body\">\n    <transition name=\"modal-fade\">\n      <div\n        v-if=\"isOpen\"\n        class=\"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center p-4\"\n        @click.self=\"closeModal\"\n      >\n        <div\n          class=\"bg-white rounded-lg shadow-xl transform transition-all sm:max-w-2xl w-full\"\n          :class=\"modalSizeClass\"\n          role=\"dialog\"\n          aria-modal=\"true\"\n          :aria-labelledby=\"`modal-title-${modalId}`\"\n        >\n          <div class=\"px-6 py-4 border-b border-gray-200\">\n            <div class=\"flex items-center justify-between\">\n              <h3\n                :id=\"`modal-title-${modalId}`\"\n                class=\"text-lg font-medium text-gray-900\"\n              >\n                <slot name=\"header\">\n                  {{ title }}\n                </slot>\n              </h3>\n              <button\n                @click=\"closeModal\"\n                type=\"button\"\n                class=\"text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-md\"\n                aria-label=\"Close modal\"\n              >\n                <svg\n                  class=\"h-6 w-6\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  fill=\"none\"\n                  viewBox=\"0 0 24 24\"\n                  stroke=\"currentColor\"\n                  aria-hidden=\"true\"\n                >\n                  <path\n                    stroke-linecap=\"round\"\n                    stroke-linejoin=\"round\"\n                    stroke-width=\"2\"\n                    d=\"M6 18L18 6M6 6l12 12\"\n                  />\n                </svg>\n              </button>\n            </div>\n          </div>\n\n          <div class=\"px-6 py-5\">\n            <slot name=\"body\"> </slot>\n          </div>\n\n          <div\n            v-if=\"hasFooterSlot\"\n            class=\"px-6 py-4 bg-gray-50 border-t border-gray-200 text-right space-x-3 rounded-b-lg\"\n          >\n            <slot name=\"footer\"> </slot>\n          </div>\n        </div>\n      </div>\n    </transition>\n  </teleport>\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  ref,\n  computed,\n  watch,\n  useSlots,\n  onMounted,\n  onUnmounted,\n  defineProps,\n  defineEmits,\n} from \"vue\";\n\nconst props = defineProps({\n  isOpen: {\n    type: Boolean,\n    required: true,\n  },\n  title: {\n    type: String,\n    default: \"Modal Title\",\n  },\n  size: {\n    type: String, // e.g., 'sm', 'md', 'lg', 'xl', '2xl', 'full' (maps to Tailwind max-w)\n    default: \"2xl\", // Corresponds to sm:max-w-2xl\n  },\n});\n\nconst emit = defineEmits([\"close\"]);\n\nconst modalId = `modal-${Math.random().toString(36).substring(2, 9)}`;\nconst slots = useSlots();\nconst hasFooterSlot = computed(() => !!slots.footer);\n\nconst closeModal = () => {\n  emit(\"close\");\n};\n\n// Optional: Close modal on Escape key press\nconst handleEscKey = (event: KeyboardEvent) => {\n  if (event.key === \"Escape\" && props.isOpen) {\n    closeModal();\n  }\n};\n\nonMounted(() => {\n  document.addEventListener(\"keydown\", handleEscKey);\n});\n\nonUnmounted(() => {\n  document.removeEventListener(\"keydown\", handleEscKey);\n});\n\n// Prevent body scroll when modal is open\nwatch(\n  () => props.isOpen,\n  (newValue) => {\n    if (typeof document !== \"undefined\" && document.body) {\n      if (newValue) {\n        document.body.style.overflow = \"hidden\";\n      } else {\n        document.body.style.overflow = \"\";\n      }\n    }\n  }\n);\n\nconst modalSizeClass = computed(() => {\n  switch (props.size) {\n    case \"sm\":\n      return \"sm:max-w-sm\";\n    case \"md\":\n      return \"sm:max-w-md\";\n    case \"lg\":\n      return \"sm:max-w-lg\";\n    case \"xl\":\n      return \"sm:max-w-xl\";\n    case \"full\":\n      return \"sm:max-w-full h-full\"; // For a full screen modal experience\n    case \"2xl\": // Default\n    default:\n      return \"sm:max-w-2xl\";\n  }\n});\n</script>\n\n<style scoped>\n.modal-fade-enter-active,\n.modal-fade-leave-active {\n  transition: opacity 0.3s ease;\n}\n.modal-fade-enter-from,\n.modal-fade-leave-to {\n  opacity: 0;\n}\n\n/* Optional: Transition for the modal dialog itself */\n.modal-fade-enter-active .bg-white,\n.modal-fade-leave-active .bg-white {\n  transition: all 0.3s ease-out;\n}\n.modal-fade-enter-from .bg-white,\n.modal-fade-leave-to .bg-white {\n  transform: translateY(-20px);\n  opacity: 0;\n}\n</style>\n","import script from \"./BaseModal.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./BaseModal.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./BaseModal.vue?vue&type=style&index=0&id=7fee56be&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7fee56be\"]])\n\nexport default __exports__","/**\n * Returns a new array containing only the unique values from the input array.\n * @param array The array to process.\n * @returns A new array with unique values.\n */\nexport function getUniqueValues<T>(array: T[]): T[] {\n  if (!array) {\n    return [];\n  }\n  return [...new Set(array)];\n}\n","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createVNode as _createVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withCtx as _withCtx, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  key: 0,\n  class: \"space-y-4\"\n}\nconst _hoisted_2 = { class: \"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-green-100\" }\nconst _hoisted_3 = { class: \"mt-6 border-t border-b border-gray-200 divide-y divide-gray-200\" }\nconst _hoisted_4 = { class: \"py-4 flex items-center justify-between\" }\nconst _hoisted_5 = { class: \"text-sm font-medium text-gray-600 flex items-center\" }\nconst _hoisted_6 = { class: \"text-sm font-semibold text-gray-900\" }\nconst _hoisted_7 = { class: \"py-4 flex items-center justify-between\" }\nconst _hoisted_8 = { class: \"text-sm font-medium text-gray-600 flex items-center\" }\nconst _hoisted_9 = { class: \"text-sm font-semibold text-gray-900\" }\nconst _hoisted_10 = { class: \"py-4 flex items-center justify-between\" }\nconst _hoisted_11 = { class: \"text-sm font-medium text-gray-600 flex items-center\" }\nconst _hoisted_12 = { class: \"text-sm font-semibold text-gray-900\" }\nconst _hoisted_13 = { class: \"py-4 flex items-center justify-between\" }\nconst _hoisted_14 = { class: \"text-sm font-medium text-gray-600 flex items-center\" }\nconst _hoisted_15 = { class: \"text-sm font-semibold text-gray-900\" }\nconst _hoisted_16 = {\n  key: 1,\n  class: \"text-center\"\n}\nconst _hoisted_17 = { class: \"flex flex-col sm:flex-row-reverse gap-3\" }\n\nimport { computed, PropType } from \"vue\";\nimport BaseModal from \"@/components/ui/BaseModal.vue\";\nimport type { Syllabus } from \"@/types/syllabiTypes\";\nimport { getUniqueValues } from \"@/utils/arrayUtils\";\nimport { loggingService } from \"@/utils/loggingService\";\nimport {\n  CheckIcon,\n  UserGroupIcon,\n  CalendarDaysIcon,\n  ClipboardDocumentListIcon,\n  Bars3BottomLeftIcon,\n} from \"@heroicons/vue/24/outline\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'SyllabusUploadConfirmation',\n  props: {\n  isOpen: {\n    type: Boolean,\n    required: true,\n  },\n  syllabus: {\n    type: Object as PropType<Syllabus | null>,\n    default: null,\n  },\n},\n  emits: [\"accept\", \"edit\", \"deny\"],\n  setup(__props) {\n\nconst props = __props;\n\n\n\nconst distinctLevels = computed(() => {\n  if (\n    !props.syllabus ||\n    !Array.isArray(props.syllabus.requirements) ||\n    props.syllabus.requirements.length === 0\n  ) {\n    return \"N/A\";\n  }\n  try {\n    const levels = getUniqueValues(\n      props.syllabus.requirements.map((r) => r.level.toString())\n    );\n    return levels\n      .sort((a, b) => a.localeCompare(b, undefined, { numeric: true }))\n      .join(\", \");\n  } catch (error) {\n    loggingService.error(\"Could not compute distinct levels:\", error);\n    return \"Error\";\n  }\n});\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(BaseModal, {\n    \"is-open\": __props.isOpen,\n    title: \"Confirm Syllabus\",\n    onClose: _cache[3] || (_cache[3] = ($event: any) => (_ctx.$emit('deny')))\n  }, {\n    body: _withCtx(() => [\n      (__props.syllabus)\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n            _createElementVNode(\"div\", _hoisted_2, [\n              _createVNode(_unref(CheckIcon), {\n                class: \"h-6 w-6 text-green-600\",\n                \"aria-hidden\": \"true\"\n              })\n            ]),\n            _cache[8] || (_cache[8] = _createElementVNode(\"div\", { class: \"mt-3 text-center sm:mt-5\" }, [\n              _createElementVNode(\"h3\", { class: \"text-lg font-medium leading-6 text-gray-900\" }, \" Syllabus Parsed \"),\n              _createElementVNode(\"p\", { class: \"mt-2 text-sm text-gray-500\" }, \" Please review the details below before saving. \")\n            ], -1)),\n            _createElementVNode(\"div\", _hoisted_3, [\n              _createElementVNode(\"div\", _hoisted_4, [\n                _createElementVNode(\"dt\", _hoisted_5, [\n                  _createVNode(_unref(UserGroupIcon), { class: \"h-5 w-5 text-gray-400 mr-3\" }),\n                  _cache[4] || (_cache[4] = _createTextVNode(\" Track / Position \"))\n                ]),\n                _createElementVNode(\"dd\", _hoisted_6, _toDisplayString(__props.syllabus.position || \"N/A\"), 1)\n              ]),\n              _createElementVNode(\"div\", _hoisted_7, [\n                _createElementVNode(\"dt\", _hoisted_8, [\n                  _createVNode(_unref(CalendarDaysIcon), { class: \"h-5 w-5 text-gray-400 mr-3\" }),\n                  _cache[5] || (_cache[5] = _createTextVNode(\" Year \"))\n                ]),\n                _createElementVNode(\"dd\", _hoisted_9, _toDisplayString(__props.syllabus.year || \"N/A\"), 1)\n              ]),\n              _createElementVNode(\"div\", _hoisted_10, [\n                _createElementVNode(\"dt\", _hoisted_11, [\n                  _createVNode(_unref(ClipboardDocumentListIcon), { class: \"h-5 w-5 text-gray-400 mr-3\" }),\n                  _cache[6] || (_cache[6] = _createTextVNode(\" Total Requirements \"))\n                ]),\n                _createElementVNode(\"dd\", _hoisted_12, _toDisplayString(Array.isArray(__props.syllabus.requirements)\n                  ? __props.syllabus.requirements.length\n                  : 0), 1)\n              ]),\n              _createElementVNode(\"div\", _hoisted_13, [\n                _createElementVNode(\"dt\", _hoisted_14, [\n                  _createVNode(_unref(Bars3BottomLeftIcon), { class: \"h-5 w-5 text-gray-400 mr-3\" }),\n                  _cache[7] || (_cache[7] = _createTextVNode(\" Detected Levels \"))\n                ]),\n                _createElementVNode(\"dd\", _hoisted_15, _toDisplayString(distinctLevels.value), 1)\n              ])\n            ])\n          ]))\n        : (_openBlock(), _createElementBlock(\"div\", _hoisted_16, _cache[9] || (_cache[9] = [\n            _createElementVNode(\"p\", null, \"Loading syllabus details...\", -1)\n          ])))\n    ]),\n    footer: _withCtx(() => [\n      _createElementVNode(\"div\", _hoisted_17, [\n        _createElementVNode(\"button\", {\n          type: \"button\",\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.$emit('accept'))),\n          class: \"inline-flex w-full justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-indigo-700 sm:w-auto sm:text-sm\"\n        }, \" Accept & Save \"),\n        _createElementVNode(\"button\", {\n          type: \"button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.$emit('edit'))),\n          class: \"inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 sm:mt-0 sm:w-auto sm:text-sm\"\n        }, \" Edit \"),\n        _createElementVNode(\"button\", {\n          type: \"button\",\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.$emit('deny'))),\n          class: \"inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 sm:mt-0 sm:w-auto sm:text-sm\"\n        }, \" Deny \")\n      ])\n    ]),\n    _: 1\n  }, 8, [\"is-open\"]))\n}\n}\n\n})","<template>\n  <BaseModal :is-open=\"isOpen\" title=\"Confirm Syllabus\" @close=\"$emit('deny')\">\n    <template #body>\n      <div v-if=\"syllabus\" class=\"space-y-4\">\n        <div\n          class=\"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-green-100\"\n        >\n          <CheckIcon class=\"h-6 w-6 text-green-600\" aria-hidden=\"true\" />\n        </div>\n        <div class=\"mt-3 text-center sm:mt-5\">\n          <h3 class=\"text-lg font-medium leading-6 text-gray-900\">\n            Syllabus Parsed\n          </h3>\n          <p class=\"mt-2 text-sm text-gray-500\">\n            Please review the details below before saving.\n          </p>\n        </div>\n\n        <div\n          class=\"mt-6 border-t border-b border-gray-200 divide-y divide-gray-200\"\n        >\n          <div class=\"py-4 flex items-center justify-between\">\n            <dt class=\"text-sm font-medium text-gray-600 flex items-center\">\n              <UserGroupIcon class=\"h-5 w-5 text-gray-400 mr-3\" />\n              Track / Position\n            </dt>\n            <dd class=\"text-sm font-semibold text-gray-900\">\n              {{ syllabus.position || \"N/A\" }}\n            </dd>\n          </div>\n\n          <div class=\"py-4 flex items-center justify-between\">\n            <dt class=\"text-sm font-medium text-gray-600 flex items-center\">\n              <CalendarDaysIcon class=\"h-5 w-5 text-gray-400 mr-3\" />\n              Year\n            </dt>\n            <dd class=\"text-sm font-semibold text-gray-900\">\n              {{ syllabus.year || \"N/A\" }}\n            </dd>\n          </div>\n\n          <div class=\"py-4 flex items-center justify-between\">\n            <dt class=\"text-sm font-medium text-gray-600 flex items-center\">\n              <ClipboardDocumentListIcon class=\"h-5 w-5 text-gray-400 mr-3\" />\n              Total Requirements\n            </dt>\n            <dd class=\"text-sm font-semibold text-gray-900\">\n              {{\n                Array.isArray(syllabus.requirements)\n                  ? syllabus.requirements.length\n                  : 0\n              }}\n            </dd>\n          </div>\n\n          <div class=\"py-4 flex items-center justify-between\">\n            <dt class=\"text-sm font-medium text-gray-600 flex items-center\">\n              <Bars3BottomLeftIcon class=\"h-5 w-5 text-gray-400 mr-3\" />\n              Detected Levels\n            </dt>\n            <dd class=\"text-sm font-semibold text-gray-900\">\n              {{ distinctLevels }}\n            </dd>\n          </div>\n        </div>\n      </div>\n      <div v-else class=\"text-center\">\n        <p>Loading syllabus details...</p>\n      </div>\n    </template>\n\n    <template #footer>\n      <div class=\"flex flex-col sm:flex-row-reverse gap-3\">\n        <button\n          type=\"button\"\n          @click=\"$emit('accept')\"\n          class=\"inline-flex w-full justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-indigo-700 sm:w-auto sm:text-sm\"\n        >\n          Accept & Save\n        </button>\n        <button\n          type=\"button\"\n          @click=\"$emit('edit')\"\n          class=\"inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 sm:mt-0 sm:w-auto sm:text-sm\"\n        >\n          Edit\n        </button>\n        <button\n          type=\"button\"\n          @click=\"$emit('deny')\"\n          class=\"inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 sm:mt-0 sm:w-auto sm:text-sm\"\n        >\n          Deny\n        </button>\n      </div>\n    </template>\n  </BaseModal>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, PropType, defineProps, defineEmits } from \"vue\";\nimport BaseModal from \"@/components/ui/BaseModal.vue\";\nimport type { Syllabus } from \"@/types/syllabiTypes\";\nimport { getUniqueValues } from \"@/utils/arrayUtils\";\nimport { loggingService } from \"@/utils/loggingService\";\nimport {\n  CheckIcon,\n  UserGroupIcon,\n  CalendarDaysIcon,\n  ClipboardDocumentListIcon,\n  Bars3BottomLeftIcon,\n} from \"@heroicons/vue/24/outline\";\n\nconst props = defineProps({\n  isOpen: {\n    type: Boolean,\n    required: true,\n  },\n  syllabus: {\n    type: Object as PropType<Syllabus | null>,\n    default: null,\n  },\n});\n\ndefineEmits([\"accept\", \"edit\", \"deny\"]);\n\nconst distinctLevels = computed(() => {\n  if (\n    !props.syllabus ||\n    !Array.isArray(props.syllabus.requirements) ||\n    props.syllabus.requirements.length === 0\n  ) {\n    return \"N/A\";\n  }\n  try {\n    const levels = getUniqueValues(\n      props.syllabus.requirements.map((r) => r.level.toString())\n    );\n    return levels\n      .sort((a, b) => a.localeCompare(b, undefined, { numeric: true }))\n      .join(\", \");\n  } catch (error) {\n    loggingService.error(\"Could not compute distinct levels:\", error);\n    return \"Error\";\n  }\n});\n</script>\n","import script from \"./SyllabusUploadConfirmation.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SyllabusUploadConfirmation.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","// File download/upload helpers (wrappers for FileSaver.js, etc.)\nimport { saveAs } from \"file-saver\";\nimport { type Syllabus } from \"@/types/syllabiTypes\";\nimport { useAppConfigStore } from \"@/stores/appConfigStore\";\n\n// Use 'export const' to create a named export for the service object\nexport const fileHandlerService = {\n  /**\n   * Downloads the provided syllabi array as a 'user_syllabi.js' file.\n   * @param syllabi - The array of Syllabus objects to download.\n   */\n  downloadSyllabi(syllabi: Syllabus[]): void {\n    const dataStr = `window.UPSHOT_USER_SYLLABI = ${JSON.stringify(\n      syllabi,\n      null,\n      2\n    )};`;\n    const blob = new Blob([dataStr], { type: \"text/javascript;charset=utf-8\" });\n    saveAs(blob, \"user_syllabi.json\");\n  },\n\n  /**\n   * Downloads the application's configuration as a 'user_app_config.js' file.\n   */\n  downloadAppConfig(): void {\n    const appConfigStore = useAppConfigStore();\n    const configStr = `window.UPSHOT_USER_APP_CONFIG = ${JSON.stringify(\n      appConfigStore.currentConfig,\n      null,\n      2\n    )};`;\n    const blob = new Blob([configStr], {\n      type: \"text/javascript;charset=utf-8\",\n    });\n    saveAs(blob, \"user_app_config.json\");\n  },\n};\n","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, unref as _unref, withModifiers as _withModifiers, normalizeClass as _normalizeClass, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"p-4 sm:p-6 lg:p-8 space-y-6\" }\nconst _hoisted_2 = { class: \"flex justify-between items-center\" }\nconst _hoisted_3 = [\"disabled\"]\n\nimport { ref, computed } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { useSyllabiStore } from \"@/stores/syllabiStore\";\nimport { useUiStore } from \"@/stores/uiStore\";\nimport { excelSyllabusProcessorService } from \"@/core/excelProcessorServices/syllabusProcessorService\";\nimport SyllabusList from \"@/components/specific/SyllabusManager/SyllabusList.vue\";\nimport SyllabusUploadConfirmation from \"@/components/specific/SyllabusManager/SyllabusUploadConfirmation.vue\";\nimport type { Syllabus } from \"@/types/syllabiTypes\";\nimport { fileHandlerService } from \"@/core/fileHandlerService\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'SyllabusManagementView',\n  setup(__props) {\n\nconst router = useRouter();\nconst syllabiStore = useSyllabiStore();\nconst uiStore = useUiStore();\nconst allSyllabi = computed(() => syllabiStore.allSyllabi);\n\nconst isConfirmationModalOpen = ref(false);\nconst pendingSyllabus = ref<Syllabus | null>(null);\nconst fileInput = ref<HTMLInputElement | null>(null);\nconst isDragOver = ref(false);\n\nconst triggerFileInput = () => {\n  fileInput.value?.click();\n};\nconst handleFileDrop = (event: DragEvent) => {\n  isDragOver.value = false;\n  const files = event.dataTransfer?.files;\n  if (files && files.length > 0) processFile(files[0]);\n};\nconst handleFileInput = (event: Event) => {\n  const target = event.target as HTMLInputElement;\n  const files = target.files;\n  if (files && files.length > 0) processFile(files[0]);\n};\n\nconst processFile = async (file: File) => {\n  if (!file) return;\n  uiStore.setGlobalLoading(true);\n  try {\n    const parsedSyllabiArray = await excelSyllabusProcessorService(file);\n    if (parsedSyllabiArray && parsedSyllabiArray.length > 0) {\n      const newSyllabus = parsedSyllabiArray[0];\n      if (newSyllabus && newSyllabus.id) {\n        pendingSyllabus.value = newSyllabus;\n        isConfirmationModalOpen.value = true;\n      } else {\n        throw new Error(\"Parsed syllabus is malformed or missing an ID.\");\n      }\n    } else {\n      throw new Error(\"No syllabi could be parsed from the file.\");\n    }\n  } catch (error: any) {\n    console.error(\"Error during syllabus processing:\", error);\n    uiStore.addNotification({\n      message: `Error parsing syllabus: ${error.message}`,\n      type: \"error\",\n    });\n  } finally {\n    uiStore.setGlobalLoading(false);\n    if (fileInput.value) fileInput.value.value = \"\";\n  }\n};\n\n// --- CORRECTED LOGIC ---\nconst handleAcceptSyllabus = () => {\n  if (pendingSyllabus.value) {\n    syllabiStore.addSyllabus(pendingSyllabus.value);\n  }\n  resetFlow();\n};\n\nconst handleEditPendingSyllabus = () => {\n  if (pendingSyllabus.value && pendingSyllabus.value.id) {\n    // 1. Add the syllabus to the store IMMEDIATELY.\n    syllabiStore.addSyllabus(pendingSyllabus.value);\n    // 2. THEN, navigate. The syllabus is guaranteed to be in the store.\n    router.push({\n      name: \"SyllabusEdit\",\n      params: { id: pendingSyllabus.value.id },\n    });\n  }\n  resetFlow();\n};\n// --- END OF CORRECTION ---\n\nconst handleEditExistingSyllabus = (syllabusId: string) => {\n  router.push({ name: \"SyllabusEdit\", params: { id: syllabusId } });\n};\n\nconst handleDenySyllabus = () => {\n  resetFlow();\n};\nconst resetFlow = () => {\n  isConfirmationModalOpen.value = false;\n  pendingSyllabus.value = null;\n};\nconst handleDownloadSyllabi = () => {\n  fileHandlerService.downloadSyllabi(syllabiStore.allSyllabi);\n};\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"header\", _hoisted_2, [\n      _cache[2] || (_cache[2] = _createElementVNode(\"div\", null, [\n        _createElementVNode(\"h1\", { class: \"text-2xl font-bold text-gray-800\" }, \"Syllabus Management\"),\n        _createElementVNode(\"p\", { class: \"text-gray-600\" }, \" Manage existing syllabi or upload a new one. \")\n      ], -1)),\n      _createElementVNode(\"button\", {\n        onClick: handleDownloadSyllabi,\n        class: \"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:bg-gray-400\",\n        disabled: !_unref(syllabiStore).isDirty,\n        title: \"Download all current syllabi as a user_syllabi.js file\"\n      }, \" Download Syllabi \", 8, _hoisted_3)\n    ]),\n    _createElementVNode(\"div\", {\n      class: _normalizeClass([\"relative border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-indigo-500 transition-colors\", { 'bg-indigo-50 border-indigo-500': isDragOver.value }]),\n      onDragover: _cache[0] || (_cache[0] = _withModifiers(($event: any) => (isDragOver.value = true), [\"prevent\"])),\n      onDragleave: _cache[1] || (_cache[1] = _withModifiers(($event: any) => (isDragOver.value = false), [\"prevent\"])),\n      onDrop: _withModifiers(handleFileDrop, [\"prevent\"]),\n      onClick: triggerFileInput\n    }, [\n      _createElementVNode(\"input\", {\n        ref_key: \"fileInput\",\n        ref: fileInput,\n        type: \"file\",\n        class: \"hidden\",\n        accept: \".xlsx, .xls\",\n        onChange: handleFileInput\n      }, null, 544),\n      _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"space-y-2\" }, [\n        _createElementVNode(\"p\", { class: \"text-gray-500\" }, \" Drag & drop your SHARP syllabus export here, or click to select a file. \")\n      ], -1))\n    ], 34),\n    _createVNode(SyllabusList, {\n      syllabi: allSyllabi.value,\n      onEdit: handleEditExistingSyllabus\n    }, null, 8, [\"syllabi\"]),\n    (pendingSyllabus.value)\n      ? (_openBlock(), _createBlock(SyllabusUploadConfirmation, {\n          key: 0,\n          \"is-open\": isConfirmationModalOpen.value,\n          syllabus: pendingSyllabus.value,\n          onAccept: handleAcceptSyllabus,\n          onEdit: handleEditPendingSyllabus,\n          onDeny: handleDenySyllabus\n        }, null, 8, [\"is-open\", \"syllabus\"]))\n      : _createCommentVNode(\"\", true)\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"p-4 sm:p-6 lg:p-8 space-y-6\">\n    <header class=\"flex justify-between items-center\">\n      <div>\n        <h1 class=\"text-2xl font-bold text-gray-800\">Syllabus Management</h1>\n        <p class=\"text-gray-600\">\n          Manage existing syllabi or upload a new one.\n        </p>\n      </div>\n      <button\n        @click=\"handleDownloadSyllabi\"\n        class=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:bg-gray-400\"\n        :disabled=\"!syllabiStore.isDirty\"\n        title=\"Download all current syllabi as a user_syllabi.js file\"\n      >\n        Download Syllabi\n      </button>\n    </header>\n\n    <div\n      class=\"relative border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-indigo-500 transition-colors\"\n      :class=\"{ 'bg-indigo-50 border-indigo-500': isDragOver }\"\n      @dragover.prevent=\"isDragOver = true\"\n      @dragleave.prevent=\"isDragOver = false\"\n      @drop.prevent=\"handleFileDrop\"\n      @click=\"triggerFileInput\"\n    >\n      <input\n        ref=\"fileInput\"\n        type=\"file\"\n        class=\"hidden\"\n        accept=\".xlsx, .xls\"\n        @change=\"handleFileInput\"\n      />\n      <div class=\"space-y-2\">\n        <p class=\"text-gray-500\">\n          Drag & drop your SHARP syllabus export here, or click to select a\n          file.\n        </p>\n      </div>\n    </div>\n\n    <SyllabusList :syllabi=\"allSyllabi\" @edit=\"handleEditExistingSyllabus\" />\n\n    <SyllabusUploadConfirmation\n      v-if=\"pendingSyllabus\"\n      :is-open=\"isConfirmationModalOpen\"\n      :syllabus=\"pendingSyllabus\"\n      @accept=\"handleAcceptSyllabus\"\n      @edit=\"handleEditPendingSyllabus\"\n      @deny=\"handleDenySyllabus\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { useSyllabiStore } from \"@/stores/syllabiStore\";\nimport { useUiStore } from \"@/stores/uiStore\";\nimport { excelSyllabusProcessorService } from \"@/core/excelProcessorServices/syllabusProcessorService\";\nimport SyllabusList from \"@/components/specific/SyllabusManager/SyllabusList.vue\";\nimport SyllabusUploadConfirmation from \"@/components/specific/SyllabusManager/SyllabusUploadConfirmation.vue\";\nimport type { Syllabus } from \"@/types/syllabiTypes\";\nimport { fileHandlerService } from \"@/core/fileHandlerService\";\n\nconst router = useRouter();\nconst syllabiStore = useSyllabiStore();\nconst uiStore = useUiStore();\nconst allSyllabi = computed(() => syllabiStore.allSyllabi);\n\nconst isConfirmationModalOpen = ref(false);\nconst pendingSyllabus = ref<Syllabus | null>(null);\nconst fileInput = ref<HTMLInputElement | null>(null);\nconst isDragOver = ref(false);\n\nconst triggerFileInput = () => {\n  fileInput.value?.click();\n};\nconst handleFileDrop = (event: DragEvent) => {\n  isDragOver.value = false;\n  const files = event.dataTransfer?.files;\n  if (files && files.length > 0) processFile(files[0]);\n};\nconst handleFileInput = (event: Event) => {\n  const target = event.target as HTMLInputElement;\n  const files = target.files;\n  if (files && files.length > 0) processFile(files[0]);\n};\n\nconst processFile = async (file: File) => {\n  if (!file) return;\n  uiStore.setGlobalLoading(true);\n  try {\n    const parsedSyllabiArray = await excelSyllabusProcessorService(file);\n    if (parsedSyllabiArray && parsedSyllabiArray.length > 0) {\n      const newSyllabus = parsedSyllabiArray[0];\n      if (newSyllabus && newSyllabus.id) {\n        pendingSyllabus.value = newSyllabus;\n        isConfirmationModalOpen.value = true;\n      } else {\n        throw new Error(\"Parsed syllabus is malformed or missing an ID.\");\n      }\n    } else {\n      throw new Error(\"No syllabi could be parsed from the file.\");\n    }\n  } catch (error: any) {\n    console.error(\"Error during syllabus processing:\", error);\n    uiStore.addNotification({\n      message: `Error parsing syllabus: ${error.message}`,\n      type: \"error\",\n    });\n  } finally {\n    uiStore.setGlobalLoading(false);\n    if (fileInput.value) fileInput.value.value = \"\";\n  }\n};\n\n// --- CORRECTED LOGIC ---\nconst handleAcceptSyllabus = () => {\n  if (pendingSyllabus.value) {\n    syllabiStore.addSyllabus(pendingSyllabus.value);\n  }\n  resetFlow();\n};\n\nconst handleEditPendingSyllabus = () => {\n  if (pendingSyllabus.value && pendingSyllabus.value.id) {\n    // 1. Add the syllabus to the store IMMEDIATELY.\n    syllabiStore.addSyllabus(pendingSyllabus.value);\n    // 2. THEN, navigate. The syllabus is guaranteed to be in the store.\n    router.push({\n      name: \"SyllabusEdit\",\n      params: { id: pendingSyllabus.value.id },\n    });\n  }\n  resetFlow();\n};\n// --- END OF CORRECTION ---\n\nconst handleEditExistingSyllabus = (syllabusId: string) => {\n  router.push({ name: \"SyllabusEdit\", params: { id: syllabusId } });\n};\n\nconst handleDenySyllabus = () => {\n  resetFlow();\n};\nconst resetFlow = () => {\n  isConfirmationModalOpen.value = false;\n  pendingSyllabus.value = null;\n};\nconst handleDownloadSyllabi = () => {\n  fileHandlerService.downloadSyllabi(syllabiStore.allSyllabi);\n};\n</script>\n","import script from \"./SyllabusManagementView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SyllabusManagementView.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"overflow-x-auto rounded-lg border border-gray-200 shadow-sm\" }\nconst _hoisted_2 = { class: \"min-w-full divide-y divide-gray-200\" }\nconst _hoisted_3 = { class: \"bg-gray-50\" }\nconst _hoisted_4 = [\"onClick\"]\nconst _hoisted_5 = { class: \"bg-white divide-y divide-gray-200\" }\nconst _hoisted_6 = { key: 0 }\nconst _hoisted_7 = [\"colspan\"]\nconst _hoisted_8 = [\"onClick\"]\nconst _hoisted_9 = { class: \"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-800\" }\nconst _hoisted_10 = { class: \"px-6 py-4 whitespace-nowrap text-sm text-gray-500\" }\nconst _hoisted_11 = { class: \"px-6 py-4 whitespace-nowrap text-sm text-gray-500\" }\nconst _hoisted_12 = { class: \"px-6 py-4 whitespace-nowrap text-sm text-gray-500\" }\nconst _hoisted_13 = { class: \"px-6 py-4 text-sm text-gray-500\" }\nconst _hoisted_14 = {\n  key: 0,\n  class: \"whitespace-normal\"\n}\nconst _hoisted_15 = {\n  key: 1,\n  class: \"text-gray-400\"\n}\nconst _hoisted_16 = { class: \"px-6 py-4 whitespace-nowrap text-sm text-gray-500\" }\nconst _hoisted_17 = {\n  key: 0,\n  class: \"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800\"\n}\nconst _hoisted_18 = {\n  key: 1,\n  class: \"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800\"\n}\nconst _hoisted_19 = { class: \"px-6 py-4 whitespace-nowrap text-sm text-gray-500\" }\n\nimport { ref, computed, type PropType, h } from \"vue\";\nimport { type Requirement } from \"@/types/syllabiTypes\";\nimport {\n  ChevronUpDownIcon,\n  ChevronUpIcon,\n  ChevronDownIcon,\n} from \"@heroicons/vue/24/solid\";\n\n// A small functional component to render the correct sort icon\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'SyllabusRequirementsTable',\n  props: {\n  requirements: { type: Array as PropType<Requirement[]>, required: true },\n},\n  emits: [\"edit-requirement\"],\n  setup(__props) {\n\nconst SortableIcon = (props: {\n  sortKey: string;\n  currentSortKey: string;\n  sortDirection: \"asc\" | \"desc\";\n}) => {\n  const iconClass = \"h-4 w-4 text-gray-400\";\n  if (props.sortKey !== props.currentSortKey) {\n    return h(ChevronUpDownIcon, { class: iconClass });\n  }\n  return props.sortDirection === \"asc\"\n    ? h(ChevronUpIcon, { class: \"h-4 w-4 text-gray-600\" })\n    : h(ChevronDownIcon, { class: \"h-4 w-4 text-gray-600\" });\n};\n\nconst props = __props;\n\n\nconst headers = ref([\n  { key: \"displayName\", label: \"Display Name\", sortable: true },\n  { key: \"type\", label: \"Type\", sortable: true },\n  { key: \"level\", label: \"Level\", sortable: true },\n  { key: \"difficulty\", label: \"Difficulty\", sortable: true },\n  { key: \"prerequisites\", label: \"Prereqs\", sortable: false },\n  { key: \"isDefaultWaived\", label: \"Waived\", sortable: true },\n  { key: \"rawSharpEventSubtype\", label: \"SubType\", sortable: true },\n]);\n\nconst sortKey = ref<keyof Requirement>(\"displayName\");\nconst sortDirection = ref<\"asc\" | \"desc\">(\"asc\");\n\nconst sortedRequirements = computed(() => {\n  if (!props.requirements) return [];\n  return [...props.requirements].sort((a, b) => {\n    let aValue = a[sortKey.value];\n    let bValue = b[sortKey.value];\n\n    if (aValue == null) return 1;\n    if (bValue == null) return -1;\n\n    let comparison = 0;\n    if (typeof aValue === \"string\" && typeof bValue === \"string\") {\n      comparison = aValue.localeCompare(bValue);\n    } else if (typeof aValue === \"boolean\" && typeof bValue === \"boolean\") {\n      comparison = aValue === bValue ? 0 : aValue ? -1 : 1;\n    } else {\n      if (aValue > bValue) comparison = 1;\n      else if (aValue < bValue) comparison = -1;\n    }\n\n    return sortDirection.value === \"asc\" ? comparison : -comparison;\n  });\n});\n\nfunction sortBy(key: keyof Requirement) {\n  if (sortKey.value === key) {\n    sortDirection.value = sortDirection.value === \"asc\" ? \"desc\" : \"asc\";\n  } else {\n    sortKey.value = key;\n    sortDirection.value = \"asc\";\n  }\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"table\", _hoisted_2, [\n      _createElementVNode(\"thead\", _hoisted_3, [\n        _createElementVNode(\"tr\", null, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(headers.value, (header) => {\n            return (_openBlock(), _createElementBlock(\"th\", {\n              key: header.key,\n              scope: \"col\",\n              class: \"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider\"\n            }, [\n              _createElementVNode(\"div\", {\n                class: \"flex items-center gap-x-2 cursor-pointer\",\n                onClick: ($event: any) => (header.sortable ? sortBy(header.key) : null)\n              }, [\n                _createTextVNode(_toDisplayString(header.label) + \" \", 1),\n                (header.sortable)\n                  ? (_openBlock(), _createBlock(SortableIcon, {\n                      key: 0,\n                      sortKey: header.key,\n                      currentSortKey: sortKey.value,\n                      sortDirection: sortDirection.value\n                    }, null, 8, [\"sortKey\", \"currentSortKey\", \"sortDirection\"]))\n                  : _createCommentVNode(\"\", true)\n              ], 8, _hoisted_4)\n            ]))\n          }), 128))\n        ])\n      ]),\n      _createElementVNode(\"tbody\", _hoisted_5, [\n        (sortedRequirements.value.length === 0)\n          ? (_openBlock(), _createElementBlock(\"tr\", _hoisted_6, [\n              _createElementVNode(\"td\", {\n                colspan: headers.value.length,\n                class: \"text-center py-10 text-gray-500\"\n              }, \" No requirements match the current filters. \", 8, _hoisted_7)\n            ]))\n          : _createCommentVNode(\"\", true),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(sortedRequirements.value, (req) => {\n          return (_openBlock(), _createElementBlock(\"tr\", {\n            key: req.id,\n            onClick: ($event: any) => (_ctx.$emit('edit-requirement', req)),\n            class: \"hover:bg-gray-50 cursor-pointer transition-colors duration-150\"\n          }, [\n            _createElementVNode(\"td\", _hoisted_9, _toDisplayString(req.displayName), 1),\n            _createElementVNode(\"td\", _hoisted_10, _toDisplayString(req.type), 1),\n            _createElementVNode(\"td\", _hoisted_11, _toDisplayString(req.level), 1),\n            _createElementVNode(\"td\", _hoisted_12, _toDisplayString(req.difficulty ?? \"N/A\"), 1),\n            _createElementVNode(\"td\", _hoisted_13, [\n              (req.prerequisites && req.prerequisites.length > 0)\n                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_14, _toDisplayString(req.prerequisites.join(\", \")), 1))\n                : (_openBlock(), _createElementBlock(\"span\", _hoisted_15, \"N/A\"))\n            ]),\n            _createElementVNode(\"td\", _hoisted_16, [\n              (req.isDefaultWaived)\n                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_17, \" Waived \"))\n                : (_openBlock(), _createElementBlock(\"span\", _hoisted_18, \" Required \"))\n            ]),\n            _createElementVNode(\"td\", _hoisted_19, _toDisplayString(req.rawSharpEventSubtype ?? \"N/A\"), 1)\n          ], 8, _hoisted_8))\n        }), 128))\n      ])\n    ])\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"overflow-x-auto rounded-lg border border-gray-200 shadow-sm\">\n    <table class=\"min-w-full divide-y divide-gray-200\">\n      <thead class=\"bg-gray-50\">\n        <tr>\n          <th\n            v-for=\"header in headers\"\n            :key=\"header.key\"\n            scope=\"col\"\n            class=\"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider\"\n          >\n            <div\n              class=\"flex items-center gap-x-2 cursor-pointer\"\n              @click=\"header.sortable ? sortBy(header.key) : null\"\n            >\n              {{ header.label }}\n              <SortableIcon\n                v-if=\"header.sortable\"\n                :sortKey=\"header.key\"\n                :currentSortKey=\"sortKey\"\n                :sortDirection=\"sortDirection\"\n              />\n            </div>\n          </th>\n        </tr>\n      </thead>\n      <tbody class=\"bg-white divide-y divide-gray-200\">\n        <tr v-if=\"sortedRequirements.length === 0\">\n          <td :colspan=\"headers.length\" class=\"text-center py-10 text-gray-500\">\n            No requirements match the current filters.\n          </td>\n        </tr>\n        <tr\n          v-for=\"req in sortedRequirements\"\n          :key=\"req.id\"\n          @click=\"$emit('edit-requirement', req)\"\n          class=\"hover:bg-gray-50 cursor-pointer transition-colors duration-150\"\n        >\n          <td\n            class=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-800\"\n          >\n            {{ req.displayName }}\n          </td>\n          <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n            {{ req.type }}\n          </td>\n          <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n            {{ req.level }}\n          </td>\n          <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n            {{ req.difficulty ?? \"N/A\" }}\n          </td>\n\n          <td class=\"px-6 py-4 text-sm text-gray-500\">\n            <span\n              v-if=\"req.prerequisites && req.prerequisites.length > 0\"\n              class=\"whitespace-normal\"\n            >\n              {{ req.prerequisites.join(\", \") }}\n            </span>\n            <span v-else class=\"text-gray-400\">N/A</span>\n          </td>\n\n          <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n            <span\n              v-if=\"req.isDefaultWaived\"\n              class=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800\"\n            >\n              Waived\n            </span>\n            <span\n              v-else\n              class=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800\"\n            >\n              Required\n            </span>\n          </td>\n          <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n            {{ req.rawSharpEventSubtype ?? \"N/A\" }}\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, type PropType, defineProps, defineEmits, h } from \"vue\";\nimport { type Requirement } from \"@/types/syllabiTypes\";\nimport {\n  ChevronUpDownIcon,\n  ChevronUpIcon,\n  ChevronDownIcon,\n} from \"@heroicons/vue/24/solid\";\n\n// A small functional component to render the correct sort icon\nconst SortableIcon = (props: {\n  sortKey: string;\n  currentSortKey: string;\n  sortDirection: \"asc\" | \"desc\";\n}) => {\n  const iconClass = \"h-4 w-4 text-gray-400\";\n  if (props.sortKey !== props.currentSortKey) {\n    return h(ChevronUpDownIcon, { class: iconClass });\n  }\n  return props.sortDirection === \"asc\"\n    ? h(ChevronUpIcon, { class: \"h-4 w-4 text-gray-600\" })\n    : h(ChevronDownIcon, { class: \"h-4 w-4 text-gray-600\" });\n};\n\nconst props = defineProps({\n  requirements: { type: Array as PropType<Requirement[]>, required: true },\n});\ndefineEmits([\"edit-requirement\"]);\n\nconst headers = ref([\n  { key: \"displayName\", label: \"Display Name\", sortable: true },\n  { key: \"type\", label: \"Type\", sortable: true },\n  { key: \"level\", label: \"Level\", sortable: true },\n  { key: \"difficulty\", label: \"Difficulty\", sortable: true },\n  { key: \"prerequisites\", label: \"Prereqs\", sortable: false },\n  { key: \"isDefaultWaived\", label: \"Waived\", sortable: true },\n  { key: \"rawSharpEventSubtype\", label: \"SubType\", sortable: true },\n]);\n\nconst sortKey = ref<keyof Requirement>(\"displayName\");\nconst sortDirection = ref<\"asc\" | \"desc\">(\"asc\");\n\nconst sortedRequirements = computed(() => {\n  if (!props.requirements) return [];\n  return [...props.requirements].sort((a, b) => {\n    let aValue = a[sortKey.value];\n    let bValue = b[sortKey.value];\n\n    if (aValue == null) return 1;\n    if (bValue == null) return -1;\n\n    let comparison = 0;\n    if (typeof aValue === \"string\" && typeof bValue === \"string\") {\n      comparison = aValue.localeCompare(bValue);\n    } else if (typeof aValue === \"boolean\" && typeof bValue === \"boolean\") {\n      comparison = aValue === bValue ? 0 : aValue ? -1 : 1;\n    } else {\n      if (aValue > bValue) comparison = 1;\n      else if (aValue < bValue) comparison = -1;\n    }\n\n    return sortDirection.value === \"asc\" ? comparison : -comparison;\n  });\n});\n\nfunction sortBy(key: keyof Requirement) {\n  if (sortKey.value === key) {\n    sortDirection.value = sortDirection.value === \"asc\" ? \"desc\" : \"asc\";\n  } else {\n    sortKey.value = key;\n    sortDirection.value = \"asc\";\n  }\n}\n</script>\n","import script from \"./SyllabusRequirementsTable.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SyllabusRequirementsTable.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, unref as _unref, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, vModelCheckbox as _vModelCheckbox, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"bg-white rounded-lg max-w-4xl mx-auto\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"space-y-6\"\n}\nconst _hoisted_3 = { class: \"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 p-4 border rounded-md\" }\nconst _hoisted_4 = { class: \"md:col-span-2\" }\nconst _hoisted_5 = { class: \"grid grid-cols-1 md:grid-cols-4 gap-x-6 gap-y-4 p-4 border rounded-md\" }\nconst _hoisted_6 = [\"value\"]\nconst _hoisted_7 = { class: \"md:col-span-4\" }\nconst _hoisted_8 = [\"value\"]\nconst _hoisted_9 = { class: \"md:col-span-4 flex items-center\" }\nconst _hoisted_10 = { class: \"flex items-center space-x-3 cursor-pointer\" }\nconst _hoisted_11 = { class: \"mt-6 flex justify-end space-x-3\" }\n\nimport {\n  ref,\n  watch,\n  computed,\n  type PropType,\n} from \"vue\";\nimport { type Requirement, RequirementType } from \"@/types/syllabiTypes\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'RequirementItem',\n  props: {\n  requirement: {\n    type: Object as PropType<Requirement>,\n    required: true,\n  },\n},\n  emits: [\"update:requirement\", \"cancel\"],\n  setup(__props, { emit: __emit }) {\n\nconst props = __props;\n\nconst emit = __emit;\n\nconst editableRequirement = ref<Requirement>({ ...props.requirement });\n\nconst prerequisitesString = computed(() => {\n  return editableRequirement.value.prerequisites?.join(\", \") || \"\";\n});\n\nconst updatePrerequisites = (value: string) => {\n  editableRequirement.value.prerequisites = value\n    .split(\",\")\n    .map((s) => s.trim())\n    .filter(Boolean);\n};\n\nwatch(\n  () => props.requirement,\n  (newRequirement) => {\n    editableRequirement.value = {\n      ...newRequirement,\n      isDefaultWaived: !!newRequirement.isDefaultWaived,\n    };\n  },\n  { deep: true, immediate: true }\n);\n\nconst save = () => {\n  emit(\"update:requirement\", editableRequirement.value);\n};\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _cache[19] || (_cache[19] = _createElementVNode(\"h4\", { class: \"text-xl font-semibold mb-4 text-gray-800\" }, \"Edit Requirement\", -1)),\n    (editableRequirement.value)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n          _createElementVNode(\"div\", _hoisted_3, [\n            _createElementVNode(\"div\", null, [\n              _cache[10] || (_cache[10] = _createElementVNode(\"label\", {\n                for: \"displayName\",\n                class: \"block text-sm font-medium text-gray-700\"\n              }, \"Display Name\", -1)),\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"text\",\n                id: \"displayName\",\n                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((editableRequirement.value.displayName) = $event)),\n                class: \"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-1.5\"\n              }, null, 512), [\n                [_vModelText, editableRequirement.value.displayName]\n              ])\n            ]),\n            _createElementVNode(\"div\", null, [\n              _cache[11] || (_cache[11] = _createElementVNode(\"label\", {\n                for: \"name\",\n                class: \"block text-sm font-medium text-gray-700\"\n              }, \"Unique Name / ID\", -1)),\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"text\",\n                id: \"name\",\n                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((editableRequirement.value.name) = $event)),\n                required: \"\",\n                class: \"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-1.5\"\n              }, null, 512), [\n                [_vModelText, editableRequirement.value.name]\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_4, [\n              _cache[12] || (_cache[12] = _createElementVNode(\"label\", {\n                for: \"description\",\n                class: \"block text-sm font-medium text-gray-700\"\n              }, \"Description\", -1)),\n              _withDirectives(_createElementVNode(\"textarea\", {\n                id: \"description\",\n                \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((editableRequirement.value.description) = $event)),\n                rows: \"2\",\n                class: \"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-1.5\"\n              }, null, 512), [\n                [_vModelText, editableRequirement.value.description]\n              ])\n            ])\n          ]),\n          _createElementVNode(\"div\", _hoisted_5, [\n            _createElementVNode(\"div\", null, [\n              _cache[13] || (_cache[13] = _createElementVNode(\"label\", {\n                for: \"type\",\n                class: \"block text-sm font-medium text-gray-700\"\n              }, \"Type\", -1)),\n              _withDirectives(_createElementVNode(\"select\", {\n                id: \"type\",\n                \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((editableRequirement.value.type) = $event)),\n                class: \"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-1.5\"\n              }, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(RequirementType), (type) => {\n                  return (_openBlock(), _createElementBlock(\"option\", {\n                    key: type,\n                    value: type\n                  }, _toDisplayString(type), 9, _hoisted_6))\n                }), 128))\n              ], 512), [\n                [_vModelSelect, editableRequirement.value.type]\n              ])\n            ]),\n            _createElementVNode(\"div\", null, [\n              _cache[14] || (_cache[14] = _createElementVNode(\"label\", {\n                for: \"rawSharpEventSubtype\",\n                class: \"block text-sm font-medium text-gray-700\"\n              }, \"SHARP SubType\", -1)),\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"text\",\n                id: \"rawSharpEventSubtype\",\n                \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((editableRequirement.value.rawSharpEventSubtype) = $event)),\n                class: \"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-1.5\"\n              }, null, 512), [\n                [_vModelText, editableRequirement.value.rawSharpEventSubtype]\n              ])\n            ]),\n            _createElementVNode(\"div\", null, [\n              _cache[15] || (_cache[15] = _createElementVNode(\"label\", {\n                for: \"level\",\n                class: \"block text-sm font-medium text-gray-700\"\n              }, \"Level\", -1)),\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"number\",\n                id: \"level\",\n                \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((editableRequirement.value.level) = $event)),\n                class: \"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-1.5\"\n              }, null, 512), [\n                [\n                  _vModelText,\n                  editableRequirement.value.level,\n                  void 0,\n                  { number: true }\n                ]\n              ])\n            ]),\n            _createElementVNode(\"div\", null, [\n              _cache[16] || (_cache[16] = _createElementVNode(\"label\", {\n                for: \"difficulty\",\n                class: \"block text-sm font-medium text-gray-700\"\n              }, \"Difficulty\", -1)),\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"number\",\n                id: \"difficulty\",\n                \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((editableRequirement.value.difficulty) = $event)),\n                placeholder: \"Default: 1\",\n                class: \"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-1.5\"\n              }, null, 512), [\n                [\n                  _vModelText,\n                  editableRequirement.value.difficulty,\n                  void 0,\n                  { number: true }\n                ]\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_7, [\n              _cache[17] || (_cache[17] = _createElementVNode(\"label\", {\n                for: \"prerequisites\",\n                class: \"block text-sm font-medium text-gray-700\"\n              }, \"Prerequisites\", -1)),\n              _createElementVNode(\"input\", {\n                type: \"text\",\n                id: \"prerequisites\",\n                value: prerequisitesString.value,\n                onInput: _cache[7] || (_cache[7] = ($event: any) => (\n              updatePrerequisites(($event.target as HTMLInputElement).value)\n            )),\n                placeholder: \"Enter req IDs, comma-separated\",\n                class: \"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-1.5\"\n              }, null, 40, _hoisted_8)\n            ]),\n            _createElementVNode(\"div\", _hoisted_9, [\n              _createElementVNode(\"label\", _hoisted_10, [\n                _withDirectives(_createElementVNode(\"input\", {\n                  type: \"checkbox\",\n                  \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event: any) => ((editableRequirement.value.isDefaultWaived) = $event)),\n                  class: \"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600\"\n                }, null, 512), [\n                  [_vModelCheckbox, editableRequirement.value.isDefaultWaived]\n                ]),\n                _cache[18] || (_cache[18] = _createElementVNode(\"span\", { class: \"text-sm font-medium text-gray-700\" }, \"Waived by Default\", -1))\n              ])\n            ])\n          ]),\n          _createElementVNode(\"div\", _hoisted_11, [\n            _createElementVNode(\"button\", {\n              type: \"button\",\n              onClick: _cache[9] || (_cache[9] = ($event: any) => (_ctx.$emit('cancel'))),\n              class: \"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500\"\n            }, \" Cancel \"),\n            _createElementVNode(\"button\", {\n              type: \"button\",\n              onClick: save,\n              class: \"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500\"\n            }, \" Save Changes \")\n          ])\n        ]))\n      : _createCommentVNode(\"\", true)\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"bg-white rounded-lg max-w-4xl mx-auto\">\n    <h4 class=\"text-xl font-semibold mb-4 text-gray-800\">Edit Requirement</h4>\n    <div v-if=\"editableRequirement\" class=\"space-y-6\">\n      <div\n        class=\"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 p-4 border rounded-md\"\n      >\n        <div>\n          <label\n            for=\"displayName\"\n            class=\"block text-sm font-medium text-gray-700\"\n            >Display Name</label\n          >\n          <input\n            type=\"text\"\n            id=\"displayName\"\n            v-model=\"editableRequirement.displayName\"\n            class=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-1.5\"\n          />\n        </div>\n        <div>\n          <label for=\"name\" class=\"block text-sm font-medium text-gray-700\"\n            >Unique Name / ID</label\n          >\n          <input\n            type=\"text\"\n            id=\"name\"\n            v-model=\"editableRequirement.name\"\n            required\n            class=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-1.5\"\n          />\n        </div>\n        <div class=\"md:col-span-2\">\n          <label\n            for=\"description\"\n            class=\"block text-sm font-medium text-gray-700\"\n            >Description</label\n          >\n          <textarea\n            id=\"description\"\n            v-model=\"editableRequirement.description\"\n            rows=\"2\"\n            class=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-1.5\"\n          ></textarea>\n        </div>\n      </div>\n\n      <div\n        class=\"grid grid-cols-1 md:grid-cols-4 gap-x-6 gap-y-4 p-4 border rounded-md\"\n      >\n        <div>\n          <label for=\"type\" class=\"block text-sm font-medium text-gray-700\"\n            >Type</label\n          >\n          <select\n            id=\"type\"\n            v-model=\"editableRequirement.type\"\n            class=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-1.5\"\n          >\n            <option v-for=\"type in RequirementType\" :key=\"type\" :value=\"type\">\n              {{ type }}\n            </option>\n          </select>\n        </div>\n        <div>\n          <label\n            for=\"rawSharpEventSubtype\"\n            class=\"block text-sm font-medium text-gray-700\"\n            >SHARP SubType</label\n          >\n          <input\n            type=\"text\"\n            id=\"rawSharpEventSubtype\"\n            v-model=\"editableRequirement.rawSharpEventSubtype\"\n            class=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-1.5\"\n          />\n        </div>\n        <div>\n          <label for=\"level\" class=\"block text-sm font-medium text-gray-700\"\n            >Level</label\n          >\n          <input\n            type=\"number\"\n            id=\"level\"\n            v-model.number=\"editableRequirement.level\"\n            class=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-1.5\"\n          />\n        </div>\n        <div>\n          <label\n            for=\"difficulty\"\n            class=\"block text-sm font-medium text-gray-700\"\n            >Difficulty</label\n          >\n          <input\n            type=\"number\"\n            id=\"difficulty\"\n            v-model.number=\"editableRequirement.difficulty\"\n            placeholder=\"Default: 1\"\n            class=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-1.5\"\n          />\n        </div>\n        <div class=\"md:col-span-4\">\n          <label\n            for=\"prerequisites\"\n            class=\"block text-sm font-medium text-gray-700\"\n            >Prerequisites</label\n          >\n          <input\n            type=\"text\"\n            id=\"prerequisites\"\n            :value=\"prerequisitesString\"\n            @input=\"\n              updatePrerequisites(($event.target as HTMLInputElement).value)\n            \"\n            placeholder=\"Enter req IDs, comma-separated\"\n            class=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-1.5\"\n          />\n        </div>\n        <div class=\"md:col-span-4 flex items-center\">\n          <label class=\"flex items-center space-x-3 cursor-pointer\">\n            <input\n              type=\"checkbox\"\n              v-model=\"editableRequirement.isDefaultWaived\"\n              class=\"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600\"\n            />\n            <span class=\"text-sm font-medium text-gray-700\"\n              >Waived by Default</span\n            >\n          </label>\n        </div>\n      </div>\n\n      <div class=\"mt-6 flex justify-end space-x-3\">\n        <button\n          type=\"button\"\n          @click=\"$emit('cancel')\"\n          class=\"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500\"\n        >\n          Cancel\n        </button>\n        <button\n          type=\"button\"\n          @click=\"save\"\n          class=\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500\"\n        >\n          Save Changes\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  ref,\n  watch,\n  computed,\n  type PropType,\n  defineProps,\n  defineEmits,\n} from \"vue\";\nimport { type Requirement, RequirementType } from \"@/types/syllabiTypes\";\n\nconst props = defineProps({\n  requirement: {\n    type: Object as PropType<Requirement>,\n    required: true,\n  },\n});\n\nconst emit = defineEmits<{\n  (e: \"update:requirement\", updatedRequirement: Requirement): void;\n  (e: \"cancel\"): void;\n}>();\n\nconst editableRequirement = ref<Requirement>({ ...props.requirement });\n\nconst prerequisitesString = computed(() => {\n  return editableRequirement.value.prerequisites?.join(\", \") || \"\";\n});\n\nconst updatePrerequisites = (value: string) => {\n  editableRequirement.value.prerequisites = value\n    .split(\",\")\n    .map((s) => s.trim())\n    .filter(Boolean);\n};\n\nwatch(\n  () => props.requirement,\n  (newRequirement) => {\n    editableRequirement.value = {\n      ...newRequirement,\n      isDefaultWaived: !!newRequirement.isDefaultWaived,\n    };\n  },\n  { deep: true, immediate: true }\n);\n\nconst save = () => {\n  emit(\"update:requirement\", editableRequirement.value);\n};\n</script>\n","import script from \"./RequirementItem.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./RequirementItem.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, unref as _unref, createVNode as _createVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, vModelSelect as _vModelSelect, withDirectives as _withDirectives, createBlock as _createBlock, Transition as _Transition } from \"vue\"\n\nconst _hoisted_1 = { class: \"flex flex-col h-full bg-gray-50 p-4 sm:p-6 lg:p-8\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"mb-6 pb-4 border-b border-gray-200\"\n}\nconst _hoisted_3 = { class: \"flex items-center justify-between\" }\nconst _hoisted_4 = { class: \"text-2xl font-bold text-gray-900\" }\nconst _hoisted_5 = { class: \"mt-1 text-sm text-gray-500\" }\nconst _hoisted_6 = {\n  key: 1,\n  class: \"flex flex-grow overflow-hidden bg-white rounded-lg shadow\"\n}\nconst _hoisted_7 = { class: \"w-64 flex-shrink-0 border-r border-gray-200 p-6\" }\nconst _hoisted_8 = { class: \"space-y-6\" }\nconst _hoisted_9 = [\"value\"]\nconst _hoisted_10 = [\"value\"]\nconst _hoisted_11 = [\"value\"]\nconst _hoisted_12 = { class: \"border-t border-gray-200 pt-6\" }\nconst _hoisted_13 = { class: \"space-y-2\" }\nconst _hoisted_14 = [\"disabled\"]\nconst _hoisted_15 = [\"disabled\"]\nconst _hoisted_16 = { class: \"flex-1 p-6 overflow-y-auto\" }\nconst _hoisted_17 = { key: \"table\" }\nconst _hoisted_18 = {\n  key: 2,\n  class: \"flex items-center justify-center h-full text-gray-500\"\n}\n\nimport { ref, onMounted, computed } from \"vue\";\nimport { useRoute } from \"vue-router\";\nimport { useSyllabiStore } from \"@/stores/syllabiStore\";\nimport {\n  type Syllabus,\n  type Requirement,\n  RequirementType,\n} from \"@/types/syllabiTypes\";\nimport { getUniqueValues } from \"@/utils/arrayUtils\";\nimport SyllabusRequirementsTable from \"@/components/specific/SyllabusManager/SyllabusRequirementsTable.vue\";\nimport RequirementItem from \"@/components/specific/SyllabusManager/RequirementItem.vue\";\nimport { ArrowLeftIcon } from \"@heroicons/vue/24/solid\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'SyllabusEditView',\n  setup(__props) {\n\nconst route = useRoute();\nconst syllabiStore = useSyllabiStore();\n\nconst syllabus = ref<Syllabus | null>(null);\nconst selectedLevel = ref<string | null>(null);\nconst selectedType = ref<RequirementType | null>(null);\nconst selectedSubType = ref<string | null>(null);\nconst editingRequirement = ref<Requirement | null>(null);\n\nconst availableLevels = computed(() => {\n  if (!syllabus.value) return [];\n  return getUniqueValues(\n    syllabus.value.requirements.map((r) => r.level.toString())\n  ).sort((a, b) => a.localeCompare(b, undefined, { numeric: true }));\n});\n\nconst availableTypes = computed(() => {\n  if (!syllabus.value) return [];\n  return getUniqueValues(syllabus.value.requirements.map((r) => r.type)).sort();\n});\n\nconst availableSubTypes = computed(() => {\n  if (!syllabus.value) return [];\n  const subTypes = syllabus.value.requirements\n    .map((r) => r.rawSharpEventSubtype)\n    .filter((subType): subType is string => !!subType);\n  return getUniqueValues(subTypes).sort();\n});\n\nconst filteredRequirements = computed(() => {\n  if (!syllabus.value) return [];\n  return syllabus.value.requirements.filter((req) => {\n    const levelMatch = selectedLevel.value\n      ? req.level.toString() === selectedLevel.value\n      : true;\n    const typeMatch = selectedType.value\n      ? req.type === selectedType.value\n      : true;\n    const subTypeMatch = selectedSubType.value\n      ? req.rawSharpEventSubtype === selectedSubType.value\n      : true;\n    return levelMatch && typeMatch && subTypeMatch;\n  });\n});\n\nonMounted(() => {\n  const syllabusId = route.params.id as string;\n  const foundSyllabus = syllabiStore.getSyllabusById(syllabusId);\n  if (foundSyllabus) {\n    syllabus.value = JSON.parse(JSON.stringify(foundSyllabus));\n    if (syllabus.value && syllabus.value.baseLevel) {\n      selectedLevel.value = syllabus.value.baseLevel.toString();\n    }\n  } else {\n    console.error(\n      `Syllabus with ID \"${syllabusId}\" was not found in the store.`\n    );\n  }\n});\n\nconst waiveAllFiltered = () => {\n  if (!syllabus.value) return;\n  const visibleIds = new Set(filteredRequirements.value.map((r) => r.id));\n  const updatedRequirements = syllabus.value.requirements.map((req) => {\n    if (visibleIds.has(req.id)) {\n      return { ...req, isDefaultWaived: true };\n    }\n    return req;\n  });\n  syllabus.value.requirements = updatedRequirements;\n  syllabiStore.updateSyllabus(syllabus.value.id, syllabus.value);\n};\n\n// NEW: Function to unwaive all filtered requirements\nconst unwaiveAllFiltered = () => {\n  if (!syllabus.value) return;\n  const visibleIds = new Set(filteredRequirements.value.map((r) => r.id));\n  const updatedRequirements = syllabus.value.requirements.map((req) => {\n    if (visibleIds.has(req.id)) {\n      // Set isDefaultWaived to false for visible items\n      return { ...req, isDefaultWaived: false };\n    }\n    return req;\n  });\n  syllabus.value.requirements = updatedRequirements;\n  syllabiStore.updateSyllabus(syllabus.value.id, syllabus.value);\n};\n\nfunction handleEditRequirement(requirement: Requirement) {\n  editingRequirement.value = { ...requirement };\n}\nfunction cancelEditRequirement() {\n  editingRequirement.value = null;\n}\nfunction saveRequirement(updatedRequirement: Requirement) {\n  if (!syllabus.value) return;\n  const index = syllabus.value.requirements.findIndex(\n    (r) => r.id === updatedRequirement.id\n  );\n  if (index !== -1) {\n    syllabus.value.requirements[index] = updatedRequirement;\n    syllabiStore.updateSyllabus(syllabus.value.id, syllabus.value);\n  }\n  editingRequirement.value = null;\n}\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_router_link = _resolveComponent(\"router-link\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (syllabus.value)\n      ? (_openBlock(), _createElementBlock(\"header\", _hoisted_2, [\n          _createElementVNode(\"div\", _hoisted_3, [\n            _createElementVNode(\"div\", null, [\n              _createElementVNode(\"h1\", _hoisted_4, _toDisplayString(syllabus.value.displayName), 1),\n              _createElementVNode(\"p\", _hoisted_5, \" Editing \" + _toDisplayString(syllabus.value.position) + \" Syllabus (\" + _toDisplayString(syllabus.value.year) + \") \", 1)\n            ]),\n            _createVNode(_component_router_link, {\n              to: { name: 'SyllabusManagement' },\n              class: \"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500\"\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_unref(ArrowLeftIcon), { class: \"h-5 w-5 mr-2\" }),\n                _cache[3] || (_cache[3] = _createTextVNode(\" Back to Management \"))\n              ]),\n              _: 1,\n              __: [3]\n            })\n          ])\n        ]))\n      : _createCommentVNode(\"\", true),\n    (syllabus.value)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n          _createElementVNode(\"aside\", _hoisted_7, [\n            _cache[11] || (_cache[11] = _createElementVNode(\"h3\", { class: \"text-lg font-semibold text-gray-800 mb-4\" }, \"Filters\", -1)),\n            _createElementVNode(\"div\", _hoisted_8, [\n              _createElementVNode(\"div\", null, [\n                _cache[5] || (_cache[5] = _createElementVNode(\"label\", {\n                  for: \"level-filter\",\n                  class: \"block text-sm font-medium text-gray-700\"\n                }, \"Level\", -1)),\n                _withDirectives(_createElementVNode(\"select\", {\n                  id: \"level-filter\",\n                  \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((selectedLevel).value = $event)),\n                  class: \"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md\"\n                }, [\n                  _cache[4] || (_cache[4] = _createElementVNode(\"option\", { value: null }, \"All Levels\", -1)),\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(availableLevels.value, (level) => {\n                    return (_openBlock(), _createElementBlock(\"option\", {\n                      key: level,\n                      value: level\n                    }, _toDisplayString(level), 9, _hoisted_9))\n                  }), 128))\n                ], 512), [\n                  [_vModelSelect, selectedLevel.value]\n                ])\n              ]),\n              _createElementVNode(\"div\", null, [\n                _cache[7] || (_cache[7] = _createElementVNode(\"label\", {\n                  for: \"type-filter\",\n                  class: \"block text-sm font-medium text-gray-700\"\n                }, \"Type\", -1)),\n                _withDirectives(_createElementVNode(\"select\", {\n                  id: \"type-filter\",\n                  \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((selectedType).value = $event)),\n                  class: \"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md\"\n                }, [\n                  _cache[6] || (_cache[6] = _createElementVNode(\"option\", { value: null }, \"All Types\", -1)),\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(availableTypes.value, (type) => {\n                    return (_openBlock(), _createElementBlock(\"option\", {\n                      key: type,\n                      value: type\n                    }, _toDisplayString(type), 9, _hoisted_10))\n                  }), 128))\n                ], 512), [\n                  [_vModelSelect, selectedType.value]\n                ])\n              ]),\n              _createElementVNode(\"div\", null, [\n                _cache[9] || (_cache[9] = _createElementVNode(\"label\", {\n                  for: \"subtype-filter\",\n                  class: \"block text-sm font-medium text-gray-700\"\n                }, \"SubType\", -1)),\n                _withDirectives(_createElementVNode(\"select\", {\n                  id: \"subtype-filter\",\n                  \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((selectedSubType).value = $event)),\n                  class: \"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md\"\n                }, [\n                  _cache[8] || (_cache[8] = _createElementVNode(\"option\", { value: null }, \"All SubTypes\", -1)),\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(availableSubTypes.value, (subType) => {\n                    return (_openBlock(), _createElementBlock(\"option\", {\n                      key: subType,\n                      value: subType\n                    }, _toDisplayString(subType), 9, _hoisted_11))\n                  }), 128))\n                ], 512), [\n                  [_vModelSelect, selectedSubType.value]\n                ])\n              ]),\n              _createElementVNode(\"div\", _hoisted_12, [\n                _cache[10] || (_cache[10] = _createElementVNode(\"h3\", { class: \"text-lg font-semibold text-gray-800 mb-4\" }, \"Actions\", -1)),\n                _createElementVNode(\"div\", _hoisted_13, [\n                  _createElementVNode(\"button\", {\n                    onClick: waiveAllFiltered,\n                    class: \"w-full inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-yellow-600 hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 disabled:bg-gray-400 disabled:cursor-not-allowed\",\n                    disabled: filteredRequirements.value.length === 0,\n                    title: \"Mark all requirements currently visible in the table as waived\"\n                  }, \" Waive All Displayed (\" + _toDisplayString(filteredRequirements.value.length) + \") \", 9, _hoisted_14),\n                  _createElementVNode(\"button\", {\n                    onClick: unwaiveAllFiltered,\n                    class: \"w-full inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:bg-gray-400 disabled:cursor-not-allowed\",\n                    disabled: filteredRequirements.value.length === 0,\n                    title: \"Mark all requirements currently visible in the table as required\"\n                  }, \" Unwaive All Displayed (\" + _toDisplayString(filteredRequirements.value.length) + \") \", 9, _hoisted_15)\n                ])\n              ])\n            ])\n          ]),\n          _createElementVNode(\"main\", _hoisted_16, [\n            _createVNode(_Transition, {\n              name: \"fade\",\n              mode: \"out-in\"\n            }, {\n              default: _withCtx(() => [\n                (!editingRequirement.value)\n                  ? (_openBlock(), _createElementBlock(\"div\", _hoisted_17, [\n                      _createVNode(SyllabusRequirementsTable, {\n                        requirements: filteredRequirements.value,\n                        onEditRequirement: handleEditRequirement\n                      }, null, 8, [\"requirements\"])\n                    ]))\n                  : (_openBlock(), _createBlock(RequirementItem, {\n                      requirement: editingRequirement.value,\n                      \"onUpdate:requirement\": saveRequirement,\n                      onCancel: cancelEditRequirement,\n                      key: editingRequirement.value.id\n                    }, null, 8, [\"requirement\"]))\n              ]),\n              _: 1\n            })\n          ])\n        ]))\n      : (_openBlock(), _createElementBlock(\"div\", _hoisted_18, _cache[12] || (_cache[12] = [\n          _createElementVNode(\"p\", null, \"Loading syllabus...\", -1)\n        ])))\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"flex flex-col h-full bg-gray-50 p-4 sm:p-6 lg:p-8\">\n    <header v-if=\"syllabus\" class=\"mb-6 pb-4 border-b border-gray-200\">\n      <div class=\"flex items-center justify-between\">\n        <div>\n          <h1 class=\"text-2xl font-bold text-gray-900\">\n            {{ syllabus.displayName }}\n          </h1>\n          <p class=\"mt-1 text-sm text-gray-500\">\n            Editing {{ syllabus.position }} Syllabus ({{ syllabus.year }})\n          </p>\n        </div>\n        <router-link\n          :to=\"{ name: 'SyllabusManagement' }\"\n          class=\"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500\"\n        >\n          <ArrowLeftIcon class=\"h-5 w-5 mr-2\" />\n          Back to Management\n        </router-link>\n      </div>\n    </header>\n\n    <div\n      v-if=\"syllabus\"\n      class=\"flex flex-grow overflow-hidden bg-white rounded-lg shadow\"\n    >\n      <aside class=\"w-64 flex-shrink-0 border-r border-gray-200 p-6\">\n        <h3 class=\"text-lg font-semibold text-gray-800 mb-4\">Filters</h3>\n        <div class=\"space-y-6\">\n          <div>\n            <label\n              for=\"level-filter\"\n              class=\"block text-sm font-medium text-gray-700\"\n              >Level</label\n            >\n            <select\n              id=\"level-filter\"\n              v-model=\"selectedLevel\"\n              class=\"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md\"\n            >\n              <option :value=\"null\">All Levels</option>\n              <option\n                v-for=\"level in availableLevels\"\n                :key=\"level\"\n                :value=\"level\"\n              >\n                {{ level }}\n              </option>\n            </select>\n          </div>\n          <div>\n            <label\n              for=\"type-filter\"\n              class=\"block text-sm font-medium text-gray-700\"\n              >Type</label\n            >\n            <select\n              id=\"type-filter\"\n              v-model=\"selectedType\"\n              class=\"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md\"\n            >\n              <option :value=\"null\">All Types</option>\n              <option v-for=\"type in availableTypes\" :key=\"type\" :value=\"type\">\n                {{ type }}\n              </option>\n            </select>\n          </div>\n          <div>\n            <label\n              for=\"subtype-filter\"\n              class=\"block text-sm font-medium text-gray-700\"\n              >SubType</label\n            >\n            <select\n              id=\"subtype-filter\"\n              v-model=\"selectedSubType\"\n              class=\"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md\"\n            >\n              <option :value=\"null\">All SubTypes</option>\n              <option\n                v-for=\"subType in availableSubTypes\"\n                :key=\"subType\"\n                :value=\"subType\"\n              >\n                {{ subType }}\n              </option>\n            </select>\n          </div>\n\n          <div class=\"border-t border-gray-200 pt-6\">\n            <h3 class=\"text-lg font-semibold text-gray-800 mb-4\">Actions</h3>\n            <div class=\"space-y-2\">\n              <button\n                @click=\"waiveAllFiltered\"\n                class=\"w-full inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-yellow-600 hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 disabled:bg-gray-400 disabled:cursor-not-allowed\"\n                :disabled=\"filteredRequirements.length === 0\"\n                title=\"Mark all requirements currently visible in the table as waived\"\n              >\n                Waive All Displayed ({{ filteredRequirements.length }})\n              </button>\n              <button\n                @click=\"unwaiveAllFiltered\"\n                class=\"w-full inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:bg-gray-400 disabled:cursor-not-allowed\"\n                :disabled=\"filteredRequirements.length === 0\"\n                title=\"Mark all requirements currently visible in the table as required\"\n              >\n                Unwaive All Displayed ({{ filteredRequirements.length }})\n              </button>\n            </div>\n          </div>\n        </div>\n      </aside>\n\n      <main class=\"flex-1 p-6 overflow-y-auto\">\n        <Transition name=\"fade\" mode=\"out-in\">\n          <div v-if=\"!editingRequirement\" key=\"table\">\n            <SyllabusRequirementsTable\n              :requirements=\"filteredRequirements\"\n              @edit-requirement=\"handleEditRequirement\"\n            />\n          </div>\n          <RequirementItem\n            v-else\n            :requirement=\"editingRequirement\"\n            @update:requirement=\"saveRequirement\"\n            @cancel=\"cancelEditRequirement\"\n            :key=\"editingRequirement.id\"\n          />\n        </Transition>\n      </main>\n    </div>\n\n    <div v-else class=\"flex items-center justify-center h-full text-gray-500\">\n      <p>Loading syllabus...</p>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted, computed } from \"vue\";\nimport { useRoute } from \"vue-router\";\nimport { useSyllabiStore } from \"@/stores/syllabiStore\";\nimport {\n  type Syllabus,\n  type Requirement,\n  RequirementType,\n} from \"@/types/syllabiTypes\";\nimport { getUniqueValues } from \"@/utils/arrayUtils\";\nimport SyllabusRequirementsTable from \"@/components/specific/SyllabusManager/SyllabusRequirementsTable.vue\";\nimport RequirementItem from \"@/components/specific/SyllabusManager/RequirementItem.vue\";\nimport { ArrowLeftIcon } from \"@heroicons/vue/24/solid\";\n\nconst route = useRoute();\nconst syllabiStore = useSyllabiStore();\n\nconst syllabus = ref<Syllabus | null>(null);\nconst selectedLevel = ref<string | null>(null);\nconst selectedType = ref<RequirementType | null>(null);\nconst selectedSubType = ref<string | null>(null);\nconst editingRequirement = ref<Requirement | null>(null);\n\nconst availableLevels = computed(() => {\n  if (!syllabus.value) return [];\n  return getUniqueValues(\n    syllabus.value.requirements.map((r) => r.level.toString())\n  ).sort((a, b) => a.localeCompare(b, undefined, { numeric: true }));\n});\n\nconst availableTypes = computed(() => {\n  if (!syllabus.value) return [];\n  return getUniqueValues(syllabus.value.requirements.map((r) => r.type)).sort();\n});\n\nconst availableSubTypes = computed(() => {\n  if (!syllabus.value) return [];\n  const subTypes = syllabus.value.requirements\n    .map((r) => r.rawSharpEventSubtype)\n    .filter((subType): subType is string => !!subType);\n  return getUniqueValues(subTypes).sort();\n});\n\nconst filteredRequirements = computed(() => {\n  if (!syllabus.value) return [];\n  return syllabus.value.requirements.filter((req) => {\n    const levelMatch = selectedLevel.value\n      ? req.level.toString() === selectedLevel.value\n      : true;\n    const typeMatch = selectedType.value\n      ? req.type === selectedType.value\n      : true;\n    const subTypeMatch = selectedSubType.value\n      ? req.rawSharpEventSubtype === selectedSubType.value\n      : true;\n    return levelMatch && typeMatch && subTypeMatch;\n  });\n});\n\nonMounted(() => {\n  const syllabusId = route.params.id as string;\n  const foundSyllabus = syllabiStore.getSyllabusById(syllabusId);\n  if (foundSyllabus) {\n    syllabus.value = JSON.parse(JSON.stringify(foundSyllabus));\n    if (syllabus.value && syllabus.value.baseLevel) {\n      selectedLevel.value = syllabus.value.baseLevel.toString();\n    }\n  } else {\n    console.error(\n      `Syllabus with ID \"${syllabusId}\" was not found in the store.`\n    );\n  }\n});\n\nconst waiveAllFiltered = () => {\n  if (!syllabus.value) return;\n  const visibleIds = new Set(filteredRequirements.value.map((r) => r.id));\n  const updatedRequirements = syllabus.value.requirements.map((req) => {\n    if (visibleIds.has(req.id)) {\n      return { ...req, isDefaultWaived: true };\n    }\n    return req;\n  });\n  syllabus.value.requirements = updatedRequirements;\n  syllabiStore.updateSyllabus(syllabus.value.id, syllabus.value);\n};\n\n// NEW: Function to unwaive all filtered requirements\nconst unwaiveAllFiltered = () => {\n  if (!syllabus.value) return;\n  const visibleIds = new Set(filteredRequirements.value.map((r) => r.id));\n  const updatedRequirements = syllabus.value.requirements.map((req) => {\n    if (visibleIds.has(req.id)) {\n      // Set isDefaultWaived to false for visible items\n      return { ...req, isDefaultWaived: false };\n    }\n    return req;\n  });\n  syllabus.value.requirements = updatedRequirements;\n  syllabiStore.updateSyllabus(syllabus.value.id, syllabus.value);\n};\n\nfunction handleEditRequirement(requirement: Requirement) {\n  editingRequirement.value = { ...requirement };\n}\nfunction cancelEditRequirement() {\n  editingRequirement.value = null;\n}\nfunction saveRequirement(updatedRequirement: Requirement) {\n  if (!syllabus.value) return;\n  const index = syllabus.value.requirements.findIndex(\n    (r) => r.id === updatedRequirement.id\n  );\n  if (index !== -1) {\n    syllabus.value.requirements[index] = updatedRequirement;\n    syllabiStore.updateSyllabus(syllabus.value.id, syllabus.value);\n  }\n  editingRequirement.value = null;\n}\n</script>\n\n<style scoped>\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.2s ease;\n}\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n</style>\n","import script from \"./SyllabusEditView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SyllabusEditView.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./SyllabusEditView.vue?vue&type=style&index=0&id=19a1eeb4&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-19a1eeb4\"]])\n\nexport default __exports__","// src/utils/colorUtils.ts\nimport tinycolor from \"tinycolor2\";\n\n/**\n * Calculates a darker shade for a hover effect.\n * @param color - The base color in hex format.\n * @returns A new hex color string for the hover state.\n */\nexport function calculateHoverColor(color: string): string {\n  return tinycolor(color).darken(10).toHexString();\n}\n\n/**\n * Calculates the best foreground color (black or white) for a given background color\n * to meet accessibility contrast standards.\n * @param color - The background color in hex format.\n * @returns '#ffffff' (white) or '#000000' (black).\n */\nexport function calculateForegroundColor(color: string): string {\n  return tinycolor.isReadable(color, \"#000\", { level: \"AA\", size: \"small\" })\n    ? \"#000000\"\n    : \"#ffffff\";\n}\n","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, vModelCheckbox as _vModelCheckbox, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, unref as _unref, normalizeStyle as _normalizeStyle, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"p-4 sm:p-6 lg:p-8\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"mt-8 space-y-10\"\n}\nconst _hoisted_3 = { class: \"grid grid-cols-1 gap-x-8 gap-y-8 md:grid-cols-3 bg-white p-6 rounded-lg shadow-sm\" }\nconst _hoisted_4 = { class: \"md:col-span-2 space-y-6\" }\nconst _hoisted_5 = { class: \"relative flex items-start\" }\nconst _hoisted_6 = { class: \"flex h-6 items-center\" }\nconst _hoisted_7 = { class: \"grid grid-cols-1 gap-x-8 gap-y-8 md:grid-cols-3 bg-white p-6 rounded-lg shadow-sm\" }\nconst _hoisted_8 = { class: \"md:col-span-2 space-y-8\" }\nconst _hoisted_9 = { class: \"font-medium text-secondary uppercase\" }\nconst _hoisted_10 = { class: \"space-y-4 pl-4 border-l-2 border-secondary/20\" }\nconst _hoisted_11 = [\"for\"]\nconst _hoisted_12 = { class: \"sm:col-span-1\" }\nconst _hoisted_13 = [\"for\"]\nconst _hoisted_14 = [\"id\", \"value\", \"onInput\"]\nconst _hoisted_15 = { class: \"sm:col-span-1\" }\nconst _hoisted_16 = [\"for\"]\nconst _hoisted_17 = [\"id\", \"value\", \"onInput\"]\nconst _hoisted_18 = { class: \"grid grid-cols-1 gap-x-8 gap-y-8 md:grid-cols-3 bg-white p-6 rounded-lg shadow-sm\" }\nconst _hoisted_19 = { class: \"grid grid-cols-1 gap-6 md:col-span-2 sm:grid-cols-2\" }\nconst _hoisted_20 = [\"for\"]\nconst _hoisted_21 = { class: \"mt-1 flex items-center gap-x-3\" }\nconst _hoisted_22 = [\"id\", \"value\", \"onInput\"]\nconst _hoisted_23 = { class: \"grid grid-cols-1 gap-x-8 gap-y-8 md:grid-cols-3 bg-white p-6 rounded-lg shadow-sm\" }\nconst _hoisted_24 = { class: \"md:col-span-2 space-y-8\" }\nconst _hoisted_25 = { class: \"grid grid-cols-1 gap-x-6 gap-y-4 sm:grid-cols-6 mt-2\" }\nconst _hoisted_26 = [\"for\"]\nconst _hoisted_27 = [\"id\", \"onUpdate:modelValue\"]\nconst _hoisted_28 = { class: \"mt-2\" }\nconst _hoisted_29 = {\n  key: 1,\n  class: \"text-center mt-8\"\n}\n\nimport { ref, onMounted } from \"vue\";\nimport { useAppConfigStore } from \"@/stores/appConfigStore\";\nimport { useUiStore } from \"@/stores/uiStore\";\n// The existing fileHandlerService import can be removed if not used elsewhere in this component\n// import { fileHandlerService } from \"@/core/fileHandlerService\";\nimport type { AppConfig, ColorThemeValue } from \"@/types/appConfigTypes\";\nimport { defaultConfig } from \"@/config/appConfigDefaults\";\nimport { deepClone } from \"@/utils/dataUtils\";\n// Import the new color utilities\nimport {\n  calculateHoverColor,\n  calculateForegroundColor,\n} from \"@/utils/colorUtils\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'AppSettingsView',\n  setup(__props) {\n\nconst appConfigStore = useAppConfigStore();\nconst uiStore = useUiStore();\nconst editableConfig = ref<AppConfig | null>(null);\n\n/**\n * ADD THIS FUNCTION:\n * Updates a theme color object based on a new base color.\n */\nfunction updateThemeColor(\n  key: \"primary\" | \"secondary\" | \"accent\",\n  newColor: string\n) {\n  if (editableConfig.value) {\n    const colorTheme = editableConfig.value.colorScheme[key] as ColorThemeValue;\n    colorTheme.DEFAULT = newColor;\n    colorTheme.hover = calculateHoverColor(newColor);\n    colorTheme.foreground = calculateForegroundColor(newColor);\n  }\n}\n\n// onMounted and saveChanges from the junior dev's code are mostly fine.\n// We just need to make sure the saveChanges function calls updateConfig, which it does.\nonMounted(() => {\n  // This logic is complex; let's keep it as is, it correctly creates a deep clone.\n  const configCopy = deepClone(appConfigStore.config) as AppConfig;\n  for (const key in defaultConfig) {\n    if (configCopy[key] === undefined) {\n      configCopy[key] = defaultConfig[key];\n    }\n  }\n  if (!configCopy.trainingDepartment) {\n    configCopy.trainingDepartment = deepClone(defaultConfig.trainingDepartment);\n  }\n  editableConfig.value = configCopy;\n});\n\nconst saveChanges = () => {\n  if (editableConfig.value) {\n    appConfigStore.updateConfig(editableConfig.value);\n    appConfigStore.downloadCurrentConfig();\n    uiStore.addNotification({\n      message: \"Configuration saved and downloaded as 'user_app_config.js'.\",\n      type: \"success\",\n    });\n  }\n};\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", { class: \"sm:flex sm:items-center sm:justify-between\" }, [\n      _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"sm:flex-auto\" }, [\n        _createElementVNode(\"h1\", { class: \"text-2xl font-bold text-primary\" }, \"Application Settings\"),\n        _createElementVNode(\"p\", { class: \"mt-2 text-sm text-secondary\" }, \" Manage global settings, department info, API keys, and track deadlines. \")\n      ], -1)),\n      _createElementVNode(\"div\", { class: \"mt-4 sm:mt-0 sm:ml-16 sm:flex-none\" }, [\n        _createElementVNode(\"button\", {\n          onClick: saveChanges,\n          type: \"button\",\n          class: \"inline-flex items-center justify-center rounded-md border border-transparent bg-action px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-action/90 focus:outline-none focus:ring-2 focus:ring-action focus:ring-offset-2 sm:w-auto\"\n        }, \" Save and Download \")\n      ])\n    ]),\n    (editableConfig.value)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n          _createElementVNode(\"div\", _hoisted_3, [\n            _cache[6] || (_cache[6] = _createElementVNode(\"div\", null, [\n              _createElementVNode(\"h2\", { class: \"text-base font-semibold leading-7 text-secondary\" }, \" General \"),\n              _createElementVNode(\"p\", { class: \"mt-1 text-sm leading-6 text-secondary/80\" }, \" High-level application settings. \")\n            ], -1)),\n            _createElementVNode(\"div\", _hoisted_4, [\n              _createElementVNode(\"div\", null, [\n                _cache[4] || (_cache[4] = _createElementVNode(\"label\", {\n                  for: \"primary-user\",\n                  class: \"block text-sm font-medium text-secondary\"\n                }, \"Training Officer\", -1)),\n                _withDirectives(_createElementVNode(\"input\", {\n                  type: \"text\",\n                  \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((editableConfig.value.trainingDepartment.departmentHead) = $event)),\n                  id: \"primary-user\",\n                  class: \"mt-1 block w-full max-w-xs shadow-sm sm:text-sm border-secondary/30 rounded-md px-3 py-1.5\"\n                }, null, 512), [\n                  [_vModelText, editableConfig.value.trainingDepartment.departmentHead]\n                ])\n              ]),\n              _createElementVNode(\"fieldset\", null, [\n                _createElementVNode(\"div\", _hoisted_5, [\n                  _createElementVNode(\"div\", _hoisted_6, [\n                    _withDirectives(_createElementVNode(\"input\", {\n                      id: \"round-dates\",\n                      type: \"checkbox\",\n                      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((editableConfig.value.useRoundedTrainingStartDate) = $event)),\n                      class: \"h-4 w-4 rounded border-secondary/30 text-primary focus:ring-primary\"\n                    }, null, 512), [\n                      [_vModelCheckbox, editableConfig.value.useRoundedTrainingStartDate]\n                    ])\n                  ]),\n                  _cache[5] || (_cache[5] = _createElementVNode(\"div\", { class: \"ml-3 text-sm leading-6\" }, [\n                    _createElementVNode(\"label\", {\n                      for: \"round-dates\",\n                      class: \"font-medium text-secondary\"\n                    }, \"Use Rounded Training Start Dates\"),\n                    _createElementVNode(\"p\", { class: \"text-secondary/80\" }, \" If checked, start dates after the 15th will round to the 1st of the next month. \")\n                  ], -1))\n                ])\n              ])\n            ])\n          ]),\n          _createElementVNode(\"div\", _hoisted_7, [\n            _cache[7] || (_cache[7] = _createElementVNode(\"div\", null, [\n              _createElementVNode(\"h2\", { class: \"text-base font-semibold leading-7 text-secondary\" }, \" Track Deadlines \"),\n              _createElementVNode(\"p\", { class: \"mt-1 text-sm leading-6 text-secondary/80\" }, \" Define target and deadline months for each qualification level by position. \")\n            ], -1)),\n            _createElementVNode(\"div\", _hoisted_8, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(editableConfig.value.positionSettings, (positionSetting, positionKey) => {\n                return (_openBlock(), _createElementBlock(\"div\", {\n                  key: positionKey,\n                  class: \"space-y-4\"\n                }, [\n                  _createElementVNode(\"h3\", _hoisted_9, _toDisplayString(positionKey), 1),\n                  _createElementVNode(\"div\", _hoisted_10, [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(positionSetting.deadlines, (deadline, level) => {\n                      return (_openBlock(), _createElementBlock(\"div\", {\n                        key: level,\n                        class: \"grid grid-cols-1 sm:grid-cols-3 items-center gap-4\"\n                      }, [\n                        _createElementVNode(\"label\", {\n                          class: \"text-sm font-medium text-secondary/90\",\n                          for: `target-${positionKey}-${level}`\n                        }, \"Level \" + _toDisplayString(level), 9, _hoisted_11),\n                        _createElementVNode(\"div\", _hoisted_12, [\n                          _createElementVNode(\"label\", {\n                            for: `target-${positionKey}-${level}`,\n                            class: \"block text-xs font-medium text-secondary/70\"\n                          }, \"Target Months\", 8, _hoisted_13),\n                          _createElementVNode(\"input\", {\n                            type: \"number\",\n                            min: \"0\",\n                            id: `target-${positionKey}-${level}`,\n                            value: deadline.targetMonths,\n                            onInput: ($event: any) => (\n                      _unref(appConfigStore).updateCurveDeadlineSetting(\n                        positionKey as string,\n                        parseInt(level),\n                        {\n                          targetMonths: parseInt(\n                            ($event.target as HTMLInputElement).value\n                          ),\n                        }\n                      )\n                    ),\n                            class: \"mt-1 block w-full rounded-md border-secondary/30 shadow-sm sm:text-sm px-3 py-1.5\"\n                          }, null, 40, _hoisted_14)\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_15, [\n                          _createElementVNode(\"label\", {\n                            for: `deadline-${positionKey}-${level}`,\n                            class: \"block text-xs font-medium text-secondary/70\"\n                          }, \"Deadline Months\", 8, _hoisted_16),\n                          _createElementVNode(\"input\", {\n                            type: \"number\",\n                            min: \"0\",\n                            id: `deadline-${positionKey}-${level}`,\n                            value: deadline.deadlineMonths,\n                            onInput: ($event: any) => (\n                      _unref(appConfigStore).updateCurveDeadlineSetting(\n                        positionKey as string,\n                        parseInt(level),\n                        {\n                          deadlineMonths: parseInt(\n                            ($event.target as HTMLInputElement).value\n                          ),\n                        }\n                      )\n                    ),\n                            class: \"mt-1 block w-full rounded-md border-secondary/30 shadow-sm sm:text-sm px-3 py-1.5\"\n                          }, null, 40, _hoisted_17)\n                        ])\n                      ]))\n                    }), 128))\n                  ])\n                ]))\n              }), 128))\n            ])\n          ]),\n          _createElementVNode(\"div\", _hoisted_18, [\n            _cache[8] || (_cache[8] = _createElementVNode(\"div\", null, [\n              _createElementVNode(\"h2\", { class: \"text-base font-semibold leading-7 text-secondary\" }, \" Color Scheme \"),\n              _createElementVNode(\"p\", { class: \"mt-1 text-sm leading-6 text-secondary/80\" }, \" Select the base colors for the application theme. Hover and text colors will be generated automatically. \")\n            ], -1)),\n            _createElementVNode(\"div\", _hoisted_19, [\n              (_openBlock(), _createElementBlock(_Fragment, null, _renderList((['primary', 'secondary', 'accent'] as const), (key) => {\n                return _createElementVNode(\"div\", {\n                  key: key,\n                  class: \"flex flex-col\"\n                }, [\n                  _createElementVNode(\"label\", {\n                    for: key,\n                    class: \"block text-sm font-medium capitalize text-secondary\"\n                  }, _toDisplayString(key), 9, _hoisted_20),\n                  _createElementVNode(\"div\", _hoisted_21, [\n                    _createElementVNode(\"input\", {\n                      type: \"color\",\n                      id: key,\n                      value: editableConfig.value.colorScheme[key].DEFAULT,\n                      onInput: ($event: any) => (\n                  updateThemeColor(\n                    key,\n                    ($event.target as HTMLInputElement).value\n                  )\n                ),\n                      class: \"h-10 w-20 rounded-md border-secondary/30 cursor-pointer\"\n                    }, null, 40, _hoisted_22),\n                    _createElementVNode(\"span\", {\n                      class: \"px-3 py-1.5 rounded-md text-sm\",\n                      style: _normalizeStyle({\n                  backgroundColor: editableConfig.value.colorScheme[key].DEFAULT,\n                  color: editableConfig.value.colorScheme[key].foreground,\n                })\n                    }, \"Aa\", 4)\n                  ])\n                ])\n              }), 64))\n            ])\n          ]),\n          _createElementVNode(\"div\", _hoisted_23, [\n            _cache[12] || (_cache[12] = _createElementVNode(\"div\", null, [\n              _createElementVNode(\"h2\", { class: \"text-base font-semibold leading-7 text-secondary\" }, \" Department & API \"),\n              _createElementVNode(\"p\", { class: \"mt-1 text-sm leading-6 text-secondary/80\" }, \" Info for report headers and AI integration. \")\n            ], -1)),\n            _createElementVNode(\"div\", _hoisted_24, [\n              _createElementVNode(\"div\", null, [\n                _cache[9] || (_cache[9] = _createElementVNode(\"h3\", { class: \"font-medium text-secondary\" }, \"Training Department Info\", -1)),\n                _createElementVNode(\"div\", _hoisted_25, [\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(Object.keys(editableConfig.value.trainingDepartment), (key) => {\n                    return (_openBlock(), _createElementBlock(\"div\", {\n                      key: key,\n                      class: \"sm:col-span-3\"\n                    }, [\n                      _createElementVNode(\"label\", {\n                        for: key,\n                        class: \"block text-sm font-medium capitalize text-secondary\"\n                      }, _toDisplayString(key.replace(/([A-Z])/g, \" $1\").trim()), 9, _hoisted_26),\n                      _withDirectives(_createElementVNode(\"input\", {\n                        type: \"text\",\n                        id: key,\n                        \"onUpdate:modelValue\": ($event: any) => ((editableConfig.value.trainingDepartment[key] as string) = $event),\n                        class: \"mt-1 block w-full rounded-md border-secondary/30 shadow-sm focus:border-primary focus:ring-primary sm:text-sm px-3 py-1.5\"\n                      }, null, 8, _hoisted_27), [\n                        [_vModelText, editableConfig.value.trainingDepartment[key] as string]\n                      ])\n                    ]))\n                  }), 128))\n                ])\n              ]),\n              _createElementVNode(\"div\", null, [\n                _cache[11] || (_cache[11] = _createElementVNode(\"h3\", { class: \"font-medium text-secondary\" }, \"API Keys\", -1)),\n                _createElementVNode(\"div\", _hoisted_28, [\n                  _cache[10] || (_cache[10] = _createElementVNode(\"label\", {\n                    for: \"gemini-api-key\",\n                    class: \"block text-sm font-medium text-secondary\"\n                  }, \"Gemini API Key\", -1)),\n                  _withDirectives(_createElementVNode(\"input\", {\n                    type: \"password\",\n                    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((editableConfig.value.geminiApiKey) = $event)),\n                    id: \"gemini-api-key\",\n                    class: \"mt-1 block w-full rounded-md border-secondary/30 shadow-sm focus:border-primary focus:ring-primary sm:text-sm px-3 py-1.5\",\n                    placeholder: \"Enter your Gemini API key\"\n                  }, null, 512), [\n                    [_vModelText, editableConfig.value.geminiApiKey]\n                  ])\n                ])\n              ])\n            ])\n          ])\n        ]))\n      : (_openBlock(), _createElementBlock(\"div\", _hoisted_29, _cache[13] || (_cache[13] = [\n          _createElementVNode(\"p\", null, \"Loading configuration...\", -1)\n        ])))\n  ]))\n}\n}\n\n})","<!-- eslint-disable vue/valid-v-model -->\n<template>\n  <div class=\"p-4 sm:p-6 lg:p-8\">\n    <div class=\"sm:flex sm:items-center sm:justify-between\">\n      <div class=\"sm:flex-auto\">\n        <h1 class=\"text-2xl font-bold text-primary\">Application Settings</h1>\n        <p class=\"mt-2 text-sm text-secondary\">\n          Manage global settings, department info, API keys, and track\n          deadlines.\n        </p>\n      </div>\n      <div class=\"mt-4 sm:mt-0 sm:ml-16 sm:flex-none\">\n        <button\n          @click=\"saveChanges\"\n          type=\"button\"\n          class=\"inline-flex items-center justify-center rounded-md border border-transparent bg-action px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-action/90 focus:outline-none focus:ring-2 focus:ring-action focus:ring-offset-2 sm:w-auto\"\n        >\n          Save and Download\n        </button>\n      </div>\n    </div>\n\n    <div v-if=\"editableConfig\" class=\"mt-8 space-y-10\">\n      <div\n        class=\"grid grid-cols-1 gap-x-8 gap-y-8 md:grid-cols-3 bg-white p-6 rounded-lg shadow-sm\"\n      >\n        <div>\n          <h2 class=\"text-base font-semibold leading-7 text-secondary\">\n            General\n          </h2>\n          <p class=\"mt-1 text-sm leading-6 text-secondary/80\">\n            High-level application settings.\n          </p>\n        </div>\n        <div class=\"md:col-span-2 space-y-6\">\n          <div>\n            <label\n              for=\"primary-user\"\n              class=\"block text-sm font-medium text-secondary\"\n              >Training Officer</label\n            >\n            <input\n              type=\"text\"\n              v-model=\"editableConfig.trainingDepartment.departmentHead\"\n              id=\"primary-user\"\n              class=\"mt-1 block w-full max-w-xs shadow-sm sm:text-sm border-secondary/30 rounded-md px-3 py-1.5\"\n            />\n          </div>\n          <fieldset>\n            <div class=\"relative flex items-start\">\n              <div class=\"flex h-6 items-center\">\n                <input\n                  id=\"round-dates\"\n                  type=\"checkbox\"\n                  v-model=\"editableConfig.useRoundedTrainingStartDate\"\n                  class=\"h-4 w-4 rounded border-secondary/30 text-primary focus:ring-primary\"\n                />\n              </div>\n              <div class=\"ml-3 text-sm leading-6\">\n                <label for=\"round-dates\" class=\"font-medium text-secondary\"\n                  >Use Rounded Training Start Dates</label\n                >\n                <p class=\"text-secondary/80\">\n                  If checked, start dates after the 15th will round to the 1st\n                  of the next month.\n                </p>\n              </div>\n            </div>\n          </fieldset>\n        </div>\n      </div>\n      <div\n        class=\"grid grid-cols-1 gap-x-8 gap-y-8 md:grid-cols-3 bg-white p-6 rounded-lg shadow-sm\"\n      >\n        <div>\n          <h2 class=\"text-base font-semibold leading-7 text-secondary\">\n            Track Deadlines\n          </h2>\n          <p class=\"mt-1 text-sm leading-6 text-secondary/80\">\n            Define target and deadline months for each qualification level by\n            position.\n          </p>\n        </div>\n        <div class=\"md:col-span-2 space-y-8\">\n          <div\n            v-for=\"(\n              positionSetting, positionKey\n            ) in editableConfig.positionSettings\"\n            :key=\"positionKey\"\n            class=\"space-y-4\"\n          >\n            <h3 class=\"font-medium text-secondary uppercase\">\n              {{ positionKey }}\n            </h3>\n            <div class=\"space-y-4 pl-4 border-l-2 border-secondary/20\">\n              <div\n                v-for=\"(deadline, level) in positionSetting.deadlines\"\n                :key=\"level\"\n                class=\"grid grid-cols-1 sm:grid-cols-3 items-center gap-4\"\n              >\n                <label\n                  class=\"text-sm font-medium text-secondary/90\"\n                  :for=\"`target-${positionKey}-${level}`\"\n                  >Level {{ level }}</label\n                >\n                <div class=\"sm:col-span-1\">\n                  <label\n                    :for=\"`target-${positionKey}-${level}`\"\n                    class=\"block text-xs font-medium text-secondary/70\"\n                    >Target Months</label\n                  >\n                  <input\n                    type=\"number\"\n                    min=\"0\"\n                    :id=\"`target-${positionKey}-${level}`\"\n                    :value=\"deadline.targetMonths\"\n                    @input=\"\n                      appConfigStore.updateCurveDeadlineSetting(\n                        positionKey as string,\n                        parseInt(level),\n                        {\n                          targetMonths: parseInt(\n                            ($event.target as HTMLInputElement).value\n                          ),\n                        }\n                      )\n                    \"\n                    class=\"mt-1 block w-full rounded-md border-secondary/30 shadow-sm sm:text-sm px-3 py-1.5\"\n                  />\n                </div>\n                <div class=\"sm:col-span-1\">\n                  <label\n                    :for=\"`deadline-${positionKey}-${level}`\"\n                    class=\"block text-xs font-medium text-secondary/70\"\n                    >Deadline Months</label\n                  >\n                  <input\n                    type=\"number\"\n                    min=\"0\"\n                    :id=\"`deadline-${positionKey}-${level}`\"\n                    :value=\"deadline.deadlineMonths\"\n                    @input=\"\n                      appConfigStore.updateCurveDeadlineSetting(\n                        positionKey as string,\n                        parseInt(level),\n                        {\n                          deadlineMonths: parseInt(\n                            ($event.target as HTMLInputElement).value\n                          ),\n                        }\n                      )\n                    \"\n                    class=\"mt-1 block w-full rounded-md border-secondary/30 shadow-sm sm:text-sm px-3 py-1.5\"\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div\n        class=\"grid grid-cols-1 gap-x-8 gap-y-8 md:grid-cols-3 bg-white p-6 rounded-lg shadow-sm\"\n      >\n        <div>\n          <h2 class=\"text-base font-semibold leading-7 text-secondary\">\n            Color Scheme\n          </h2>\n          <p class=\"mt-1 text-sm leading-6 text-secondary/80\">\n            Select the base colors for the application theme. Hover and text\n            colors will be generated automatically.\n          </p>\n        </div>\n        <div class=\"grid grid-cols-1 gap-6 md:col-span-2 sm:grid-cols-2\">\n          <div\n            v-for=\"key in (['primary', 'secondary', 'accent'] as const)\"\n            :key=\"key\"\n            class=\"flex flex-col\"\n          >\n            <label\n              :for=\"key\"\n              class=\"block text-sm font-medium capitalize text-secondary\"\n              >{{ key }}</label\n            >\n            <div class=\"mt-1 flex items-center gap-x-3\">\n              <input\n                type=\"color\"\n                :id=\"key\"\n                :value=\"editableConfig.colorScheme[key].DEFAULT\"\n                @input=\"\n                  updateThemeColor(\n                    key,\n                    ($event.target as HTMLInputElement).value\n                  )\n                \"\n                class=\"h-10 w-20 rounded-md border-secondary/30 cursor-pointer\"\n              />\n              <span\n                class=\"px-3 py-1.5 rounded-md text-sm\"\n                :style=\"{\n                  backgroundColor: editableConfig.colorScheme[key].DEFAULT,\n                  color: editableConfig.colorScheme[key].foreground,\n                }\"\n                >Aa</span\n              >\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div\n        class=\"grid grid-cols-1 gap-x-8 gap-y-8 md:grid-cols-3 bg-white p-6 rounded-lg shadow-sm\"\n      >\n        <div>\n          <h2 class=\"text-base font-semibold leading-7 text-secondary\">\n            Department & API\n          </h2>\n          <p class=\"mt-1 text-sm leading-6 text-secondary/80\">\n            Info for report headers and AI integration.\n          </p>\n        </div>\n        <div class=\"md:col-span-2 space-y-8\">\n          <div>\n            <h3 class=\"font-medium text-secondary\">Training Department Info</h3>\n            <div class=\"grid grid-cols-1 gap-x-6 gap-y-4 sm:grid-cols-6 mt-2\">\n              <div\n                v-for=\"key in Object.keys(editableConfig.trainingDepartment)\"\n                :key=\"key\"\n                class=\"sm:col-span-3\"\n              >\n                <label\n                  :for=\"key\"\n                  class=\"block text-sm font-medium capitalize text-secondary\"\n                  >{{ key.replace(/([A-Z])/g, \" $1\").trim() }}</label\n                >\n                <input\n                  type=\"text\"\n                  :id=\"key\"\n                  v-model=\"editableConfig.trainingDepartment[key] as string\"\n                  class=\"mt-1 block w-full rounded-md border-secondary/30 shadow-sm focus:border-primary focus:ring-primary sm:text-sm px-3 py-1.5\"\n                />\n              </div>\n            </div>\n          </div>\n          <div>\n            <h3 class=\"font-medium text-secondary\">API Keys</h3>\n            <div class=\"mt-2\">\n              <label\n                for=\"gemini-api-key\"\n                class=\"block text-sm font-medium text-secondary\"\n                >Gemini API Key</label\n              >\n              <input\n                type=\"password\"\n                v-model=\"editableConfig.geminiApiKey\"\n                id=\"gemini-api-key\"\n                class=\"mt-1 block w-full rounded-md border-secondary/30 shadow-sm focus:border-primary focus:ring-primary sm:text-sm px-3 py-1.5\"\n                placeholder=\"Enter your Gemini API key\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div v-else class=\"text-center mt-8\">\n      <p>Loading configuration...</p>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted } from \"vue\";\nimport { useAppConfigStore } from \"@/stores/appConfigStore\";\nimport { useUiStore } from \"@/stores/uiStore\";\n// The existing fileHandlerService import can be removed if not used elsewhere in this component\n// import { fileHandlerService } from \"@/core/fileHandlerService\";\nimport type { AppConfig, ColorThemeValue } from \"@/types/appConfigTypes\";\nimport { defaultConfig } from \"@/config/appConfigDefaults\";\nimport { deepClone } from \"@/utils/dataUtils\";\n// Import the new color utilities\nimport {\n  calculateHoverColor,\n  calculateForegroundColor,\n} from \"@/utils/colorUtils\";\n\nconst appConfigStore = useAppConfigStore();\nconst uiStore = useUiStore();\nconst editableConfig = ref<AppConfig | null>(null);\n\n/**\n * ADD THIS FUNCTION:\n * Updates a theme color object based on a new base color.\n */\nfunction updateThemeColor(\n  key: \"primary\" | \"secondary\" | \"accent\",\n  newColor: string\n) {\n  if (editableConfig.value) {\n    const colorTheme = editableConfig.value.colorScheme[key] as ColorThemeValue;\n    colorTheme.DEFAULT = newColor;\n    colorTheme.hover = calculateHoverColor(newColor);\n    colorTheme.foreground = calculateForegroundColor(newColor);\n  }\n}\n\n// onMounted and saveChanges from the junior dev's code are mostly fine.\n// We just need to make sure the saveChanges function calls updateConfig, which it does.\nonMounted(() => {\n  // This logic is complex; let's keep it as is, it correctly creates a deep clone.\n  const configCopy = deepClone(appConfigStore.config) as AppConfig;\n  for (const key in defaultConfig) {\n    if (configCopy[key] === undefined) {\n      configCopy[key] = defaultConfig[key];\n    }\n  }\n  if (!configCopy.trainingDepartment) {\n    configCopy.trainingDepartment = deepClone(defaultConfig.trainingDepartment);\n  }\n  editableConfig.value = configCopy;\n});\n\nconst saveChanges = () => {\n  if (editableConfig.value) {\n    appConfigStore.updateConfig(editableConfig.value);\n    appConfigStore.downloadCurrentConfig();\n    uiStore.addNotification({\n      message: \"Configuration saved and downloaded as 'user_app_config.js'.\",\n      type: \"success\",\n    });\n  }\n};\n</script>\n","import script from \"./AppSettingsView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./AppSettingsView.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"overflow-x-auto\" }\nconst _hoisted_2 = { class: \"min-w-full divide-y divide-gray-200\" }\nconst _hoisted_3 = { class: \"bg-white divide-y divide-gray-200\" }\nconst _hoisted_4 = { class: \"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\" }\nconst _hoisted_5 = { class: \"px-6 py-4 whitespace-nowrap text-sm text-gray-500\" }\nconst _hoisted_6 = { class: \"px-6 py-4 whitespace-nowrap text-sm text-gray-500\" }\nconst _hoisted_7 = { class: \"px-6 py-4 whitespace-nowrap text-sm text-gray-500\" }\n\nimport { type PropType } from \"vue\";\nimport type { Upgrader } from \"@/types/personnelTypes\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'PersonnelTable',\n  props: {\n  personnel: {\n    type: Array as PropType<Upgrader[]>,\n    required: true,\n  },\n},\n  setup(__props) {\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_router_link = _resolveComponent(\"router-link\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"table\", _hoisted_2, [\n      _cache[0] || (_cache[0] = _createElementVNode(\"thead\", { class: \"bg-gray-50\" }, [\n        _createElementVNode(\"tr\", null, [\n          _createElementVNode(\"th\", {\n            scope: \"col\",\n            class: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\n          }, \" Name \"),\n          _createElementVNode(\"th\", {\n            scope: \"col\",\n            class: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\n          }, \" Rank \"),\n          _createElementVNode(\"th\", {\n            scope: \"col\",\n            class: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\n          }, \" Position \"),\n          _createElementVNode(\"th\", {\n            scope: \"col\",\n            class: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\n          }, \" Start Date \")\n        ])\n      ], -1)),\n      _createElementVNode(\"tbody\", _hoisted_3, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.personnel, (upgrader) => {\n          return (_openBlock(), _createElementBlock(\"tr\", {\n            key: upgrader.id\n          }, [\n            _createElementVNode(\"td\", _hoisted_4, [\n              _createVNode(_component_router_link, {\n                to: { name: 'StudentDetail', params: { id: upgrader.id } },\n                class: \"text-indigo-600 hover:text-indigo-900 hover:underline\"\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(_toDisplayString(upgrader.displayName), 1)\n                ]),\n                _: 2\n              }, 1032, [\"to\"])\n            ]),\n            _createElementVNode(\"td\", _hoisted_5, _toDisplayString(upgrader.rank), 1),\n            _createElementVNode(\"td\", _hoisted_6, _toDisplayString(upgrader.assignedPosition), 1),\n            _createElementVNode(\"td\", _hoisted_7, _toDisplayString(new Date(upgrader.startDate).toLocaleDateString()), 1)\n          ]))\n        }), 128))\n      ])\n    ])\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"overflow-x-auto\">\n    <table class=\"min-w-full divide-y divide-gray-200\">\n      <thead class=\"bg-gray-50\">\n        <tr>\n          <th\n            scope=\"col\"\n            class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\n          >\n            Name\n          </th>\n          <th\n            scope=\"col\"\n            class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\n          >\n            Rank\n          </th>\n          <th\n            scope=\"col\"\n            class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\n          >\n            Position\n          </th>\n          <th\n            scope=\"col\"\n            class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\n          >\n            Start Date\n          </th>\n        </tr>\n      </thead>\n      <tbody class=\"bg-white divide-y divide-gray-200\">\n        <tr v-for=\"upgrader in personnel\" :key=\"upgrader.id\">\n          <td\n            class=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\"\n          >\n            <router-link\n              :to=\"{ name: 'StudentDetail', params: { id: upgrader.id } }\"\n              class=\"text-indigo-600 hover:text-indigo-900 hover:underline\"\n            >\n              {{ upgrader.displayName }}\n            </router-link>\n          </td>\n          <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n            {{ upgrader.rank }}\n          </td>\n          <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n            {{ upgrader.assignedPosition }}\n          </td>\n          <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n            {{ new Date(upgrader.startDate).toLocaleDateString() }}\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { defineProps, type PropType } from \"vue\";\nimport type { Upgrader } from \"@/types/personnelTypes\";\n\ndefineProps({\n  personnel: {\n    type: Array as PropType<Upgrader[]>,\n    required: true,\n  },\n});\n</script>\n","import script from \"./PersonnelTable.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PersonnelTable.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, unref as _unref, createVNode as _createVNode, withModifiers as _withModifiers, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"p-4 sm:p-6 lg:p-8 bg-gray-50 min-h-full\" }\nconst _hoisted_2 = { class: \"border-b border-gray-200 pb-5\" }\nconst _hoisted_3 = { class: \"sm:flex sm:items-baseline sm:justify-between\" }\nconst _hoisted_4 = { class: \"mt-4 flex items-center justify-start sm:mt-0 sm:ml-4\" }\nconst _hoisted_5 = [\"disabled\"]\nconst _hoisted_6 = { class: \"mt-8 grid grid-cols-1 gap-12 lg:grid-cols-3\" }\nconst _hoisted_7 = { class: \"lg:col-span-1\" }\nconst _hoisted_8 = { class: \"space-y-2\" }\nconst _hoisted_9 = {\n  key: 0,\n  class: \"mt-4\"\n}\nconst _hoisted_10 = { class: \"lg:col-span-2\" }\nconst _hoisted_11 = { class: \"text-lg font-medium text-gray-900\" }\nconst _hoisted_12 = { class: \"mt-1 text-sm text-gray-500\" }\nconst _hoisted_13 = { class: \"mt-4 flow-root\" }\nconst _hoisted_14 = { class: \"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8\" }\nconst _hoisted_15 = { class: \"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8\" }\nconst _hoisted_16 = {\n  key: 0,\n  class: \"text-center py-10 px-4 rounded-lg bg-yellow-50 border border-yellow-200\"\n}\n\nimport { ref, computed } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { usePersonnelStore } from \"@/stores/personnelStore\";\nimport { useUiStore } from \"@/stores/uiStore\";\nimport {\n  processPersonnelFile,\n  downloadPersonnelTemplate,\n  downloadPersonnelData,\n} from \"@/core/excelProcessorServices/personnelProcessorService\";\nimport PersonnelTable from \"@/components/specific/PersonnelManager/PersonnelTable.vue\";\nimport type { Upgrader } from \"@/types/personnelTypes\";\nimport {\n  UsersIcon,\n  ArrowDownTrayIcon,\n  DocumentArrowDownIcon,\n  ExclamationTriangleIcon,\n} from \"@heroicons/vue/24/outline\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'PersonnelUploadView',\n  setup(__props) {\n\nconst router = useRouter();\nconst personnelStore = usePersonnelStore();\nconst uiStore = useUiStore();\n\nconst isPersonnelLoaded = computed(() => personnelStore.isDataLoaded);\nconst newlyLoadedPersonnel = ref<Upgrader[]>([]);\nconst uploadAttempted = ref(false);\n\nconst tableData = computed(\n  () =>\n    (uploadAttempted.value\n      ? newlyLoadedPersonnel.value\n      : personnelStore.allPersonnel) || []\n);\n\nconst fileInput = ref<HTMLInputElement | null>(null);\nconst isDragOver = ref(false);\n\nconst triggerFileInput = () => {\n  fileInput.value?.click();\n};\n\nconst handleFileDrop = (event: DragEvent) => {\n  isDragOver.value = false;\n  const files = event.dataTransfer?.files;\n  if (files && files.length > 0) processFile(files[0]);\n};\n\nconst handleFileInput = (event: Event) => {\n  const target = event.target as HTMLInputElement;\n  const files = target.files;\n  if (files && files.length > 0) processFile(files[0]);\n};\n\nconst processFile = async (file: File) => {\n  if (!file) return;\n  uploadAttempted.value = true;\n  uiStore.setGlobalLoading(true);\n  try {\n    const processedData = await processPersonnelFile(file);\n    newlyLoadedPersonnel.value = processedData;\n\n    if (processedData.length > 0) {\n      uiStore.addNotification({\n        message: `${processedData.length} records loaded for preview.`,\n        type: \"info\",\n      });\n    } else {\n      uiStore.addNotification({\n        message: \"No valid records found in file. Check column headers.\",\n        type: \"warn\",\n        duration: 8000,\n      });\n    }\n  } catch (error: any) {\n    uiStore.addNotification({\n      message: `Error processing file: ${error.message}`,\n      type: \"error\",\n    });\n    newlyLoadedPersonnel.value = [];\n  } finally {\n    uiStore.setGlobalLoading(false);\n    if (fileInput.value) fileInput.value.value = \"\";\n  }\n};\n\nconst handleDownloadTemplate = () => {\n  downloadPersonnelTemplate();\n};\n\nconst handleDownloadData = () => {\n  if (personnelStore.allPersonnel.length > 0) {\n    downloadPersonnelData(personnelStore.allPersonnel);\n  } else {\n    uiStore.addNotification({\n      message: \"No personnel data loaded to download.\",\n      type: \"warn\",\n    });\n  }\n};\n\nconst confirmLoad = () => {\n  if (newlyLoadedPersonnel.value.length > 0) {\n    personnelStore.setPersonnel(newlyLoadedPersonnel.value);\n    uiStore.addNotification({\n      message: \"Personnel roster has been updated.\",\n      type: \"success\",\n    });\n    newlyLoadedPersonnel.value = [];\n    uploadAttempted.value = false;\n    router.push({ name: \"Dashboard\" });\n  }\n};\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _cache[4] || (_cache[4] = _createElementVNode(\"div\", null, [\n          _createElementVNode(\"h1\", { class: \"text-2xl font-bold tracking-tight text-gray-900\" }, \" Personnel Roster \"),\n          _createElementVNode(\"p\", { class: \"mt-2 text-sm text-gray-500\" }, \" Upload, view, and manage your squadron's personnel data. \")\n        ], -1)),\n        _createElementVNode(\"div\", _hoisted_4, [\n          _createElementVNode(\"button\", {\n            onClick: handleDownloadTemplate,\n            type: \"button\",\n            class: \"ml-3 inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50\"\n          }, [\n            _createVNode(_unref(ArrowDownTrayIcon), { class: \"-ml-0.5 mr-1.5 h-5 w-5 text-gray-400\" }),\n            _cache[2] || (_cache[2] = _createElementVNode(\"span\", null, \"Download Template\", -1))\n          ]),\n          _createElementVNode(\"button\", {\n            onClick: handleDownloadData,\n            type: \"button\",\n            disabled: !isPersonnelLoaded.value,\n            class: \"ml-3 inline-flex items-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:bg-gray-400\"\n          }, [\n            _createVNode(_unref(DocumentArrowDownIcon), { class: \"-ml-0.5 mr-1.5 h-5 w-5\" }),\n            _cache[3] || (_cache[3] = _createElementVNode(\"span\", null, \"Download Current Roster\", -1))\n          ], 8, _hoisted_5)\n        ])\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_6, [\n      _createElementVNode(\"div\", _hoisted_7, [\n        _cache[6] || (_cache[6] = _createElementVNode(\"h2\", { class: \"text-lg font-medium text-gray-900\" }, \"Upload Roster File\", -1)),\n        _cache[7] || (_cache[7] = _createElementVNode(\"p\", { class: \"mt-1 text-sm text-gray-500\" }, \" Upload an Excel file with your personnel data. Use the template for the correct format. \", -1)),\n        _createElementVNode(\"div\", {\n          class: _normalizeClass([\"mt-4 relative border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-indigo-500 transition-colors\", { 'bg-indigo-50 border-indigo-500': isDragOver.value }]),\n          onDragover: _cache[0] || (_cache[0] = _withModifiers(($event: any) => (isDragOver.value = true), [\"prevent\"])),\n          onDragleave: _cache[1] || (_cache[1] = _withModifiers(($event: any) => (isDragOver.value = false), [\"prevent\"])),\n          onDrop: _withModifiers(handleFileDrop, [\"prevent\"]),\n          onClick: triggerFileInput\n        }, [\n          _createElementVNode(\"input\", {\n            ref_key: \"fileInput\",\n            ref: fileInput,\n            type: \"file\",\n            class: \"hidden\",\n            accept: \".xlsx, .xls\",\n            onChange: handleFileInput\n          }, null, 544),\n          _createElementVNode(\"div\", _hoisted_8, [\n            _createVNode(_unref(UsersIcon), { class: \"mx-auto h-12 w-12 text-gray-400\" }),\n            _cache[5] || (_cache[5] = _createElementVNode(\"p\", { class: \"text-gray-500\" }, \"Drag & drop file, or click to browse.\", -1))\n          ])\n        ], 34),\n        (newlyLoadedPersonnel.value.length > 0)\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [\n              _createElementVNode(\"button\", {\n                onClick: confirmLoad,\n                type: \"button\",\n                class: \"w-full inline-flex items-center justify-center rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500\"\n              }, \" Confirm and Save \" + _toDisplayString(newlyLoadedPersonnel.value.length) + \" Records \", 1)\n            ]))\n          : _createCommentVNode(\"\", true)\n      ]),\n      _createElementVNode(\"div\", _hoisted_10, [\n        _createElementVNode(\"h2\", _hoisted_11, _toDisplayString(uploadAttempted.value ? \"Upload Preview\" : \"Current Roster\"), 1),\n        _createElementVNode(\"p\", _hoisted_12, _toDisplayString(uploadAttempted.value\n              ? 'Review the data below. Click \"Confirm and Save\" to replace the current roster.'\n              : \"This is the personnel data currently loaded in the application.\"), 1),\n        _createElementVNode(\"div\", _hoisted_13, [\n          _createElementVNode(\"div\", _hoisted_14, [\n            _createElementVNode(\"div\", _hoisted_15, [\n              (uploadAttempted.value && tableData.value.length === 0)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, [\n                    _createVNode(_unref(ExclamationTriangleIcon), { class: \"mx-auto h-12 w-12 text-yellow-400\" }),\n                    _cache[8] || (_cache[8] = _createElementVNode(\"h3\", { class: \"mt-2 text-sm font-semibold text-yellow-800\" }, \" No Valid Records Found \", -1)),\n                    _cache[9] || (_cache[9] = _createElementVNode(\"p\", { class: \"mt-1 text-sm text-yellow-700\" }, \" The file was processed, but no valid personnel records were found. Please ensure the column headers in your file exactly match the provided template. \", -1)),\n                    _createElementVNode(\"div\", { class: \"mt-4\" }, [\n                      _createElementVNode(\"button\", {\n                        onClick: handleDownloadTemplate,\n                        type: \"button\",\n                        class: \"text-sm font-medium text-yellow-800 hover:text-yellow-700 underline\"\n                      }, \" Download Template \")\n                    ])\n                  ]))\n                : (_openBlock(), _createBlock(PersonnelTable, {\n                    key: 1,\n                    personnel: tableData.value\n                  }, null, 8, [\"personnel\"]))\n            ])\n          ])\n        ])\n      ])\n    ])\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"p-4 sm:p-6 lg:p-8 bg-gray-50 min-h-full\">\n    <div class=\"border-b border-gray-200 pb-5\">\n      <div class=\"sm:flex sm:items-baseline sm:justify-between\">\n        <div>\n          <h1 class=\"text-2xl font-bold tracking-tight text-gray-900\">\n            Personnel Roster\n          </h1>\n          <p class=\"mt-2 text-sm text-gray-500\">\n            Upload, view, and manage your squadron's personnel data.\n          </p>\n        </div>\n        <div class=\"mt-4 flex items-center justify-start sm:mt-0 sm:ml-4\">\n          <button\n            @click=\"handleDownloadTemplate\"\n            type=\"button\"\n            class=\"ml-3 inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50\"\n          >\n            <ArrowDownTrayIcon class=\"-ml-0.5 mr-1.5 h-5 w-5 text-gray-400\" />\n            <span>Download Template</span>\n          </button>\n          <button\n            @click=\"handleDownloadData\"\n            type=\"button\"\n            :disabled=\"!isPersonnelLoaded\"\n            class=\"ml-3 inline-flex items-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:bg-gray-400\"\n          >\n            <DocumentArrowDownIcon class=\"-ml-0.5 mr-1.5 h-5 w-5\" />\n            <span>Download Current Roster</span>\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"mt-8 grid grid-cols-1 gap-12 lg:grid-cols-3\">\n      <div class=\"lg:col-span-1\">\n        <h2 class=\"text-lg font-medium text-gray-900\">Upload Roster File</h2>\n        <p class=\"mt-1 text-sm text-gray-500\">\n          Upload an Excel file with your personnel data. Use the template for\n          the correct format.\n        </p>\n        <div\n          class=\"mt-4 relative border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-indigo-500 transition-colors\"\n          :class=\"{ 'bg-indigo-50 border-indigo-500': isDragOver }\"\n          @dragover.prevent=\"isDragOver = true\"\n          @dragleave.prevent=\"isDragOver = false\"\n          @drop.prevent=\"handleFileDrop\"\n          @click=\"triggerFileInput\"\n        >\n          <input\n            ref=\"fileInput\"\n            type=\"file\"\n            class=\"hidden\"\n            accept=\".xlsx, .xls\"\n            @change=\"handleFileInput\"\n          />\n          <div class=\"space-y-2\">\n            <UsersIcon class=\"mx-auto h-12 w-12 text-gray-400\" />\n            <p class=\"text-gray-500\">Drag & drop file, or click to browse.</p>\n          </div>\n        </div>\n        <div v-if=\"newlyLoadedPersonnel.length > 0\" class=\"mt-4\">\n          <button\n            @click=\"confirmLoad\"\n            type=\"button\"\n            class=\"w-full inline-flex items-center justify-center rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500\"\n          >\n            Confirm and Save {{ newlyLoadedPersonnel.length }} Records\n          </button>\n        </div>\n      </div>\n\n      <div class=\"lg:col-span-2\">\n        <h2 class=\"text-lg font-medium text-gray-900\">\n          {{ uploadAttempted ? \"Upload Preview\" : \"Current Roster\" }}\n        </h2>\n        <p class=\"mt-1 text-sm text-gray-500\">\n          {{\n            uploadAttempted\n              ? 'Review the data below. Click \"Confirm and Save\" to replace the current roster.'\n              : \"This is the personnel data currently loaded in the application.\"\n          }}\n        </p>\n        <div class=\"mt-4 flow-root\">\n          <div class=\"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8\">\n            <div\n              class=\"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8\"\n            >\n              <div\n                v-if=\"uploadAttempted && tableData.length === 0\"\n                class=\"text-center py-10 px-4 rounded-lg bg-yellow-50 border border-yellow-200\"\n              >\n                <ExclamationTriangleIcon\n                  class=\"mx-auto h-12 w-12 text-yellow-400\"\n                />\n                <h3 class=\"mt-2 text-sm font-semibold text-yellow-800\">\n                  No Valid Records Found\n                </h3>\n                <p class=\"mt-1 text-sm text-yellow-700\">\n                  The file was processed, but no valid personnel records were\n                  found. Please ensure the column headers in your file exactly\n                  match the provided template.\n                </p>\n                <div class=\"mt-4\">\n                  <button\n                    @click=\"handleDownloadTemplate\"\n                    type=\"button\"\n                    class=\"text-sm font-medium text-yellow-800 hover:text-yellow-700 underline\"\n                  >\n                    Download Template\n                  </button>\n                </div>\n              </div>\n              <PersonnelTable v-else :personnel=\"tableData\" />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { usePersonnelStore } from \"@/stores/personnelStore\";\nimport { useUiStore } from \"@/stores/uiStore\";\nimport {\n  processPersonnelFile,\n  downloadPersonnelTemplate,\n  downloadPersonnelData,\n} from \"@/core/excelProcessorServices/personnelProcessorService\";\nimport PersonnelTable from \"@/components/specific/PersonnelManager/PersonnelTable.vue\";\nimport type { Upgrader } from \"@/types/personnelTypes\";\nimport {\n  UsersIcon,\n  ArrowDownTrayIcon,\n  DocumentArrowDownIcon,\n  ExclamationTriangleIcon,\n} from \"@heroicons/vue/24/outline\";\n\nconst router = useRouter();\nconst personnelStore = usePersonnelStore();\nconst uiStore = useUiStore();\n\nconst isPersonnelLoaded = computed(() => personnelStore.isDataLoaded);\nconst newlyLoadedPersonnel = ref<Upgrader[]>([]);\nconst uploadAttempted = ref(false);\n\nconst tableData = computed(\n  () =>\n    (uploadAttempted.value\n      ? newlyLoadedPersonnel.value\n      : personnelStore.allPersonnel) || []\n);\n\nconst fileInput = ref<HTMLInputElement | null>(null);\nconst isDragOver = ref(false);\n\nconst triggerFileInput = () => {\n  fileInput.value?.click();\n};\n\nconst handleFileDrop = (event: DragEvent) => {\n  isDragOver.value = false;\n  const files = event.dataTransfer?.files;\n  if (files && files.length > 0) processFile(files[0]);\n};\n\nconst handleFileInput = (event: Event) => {\n  const target = event.target as HTMLInputElement;\n  const files = target.files;\n  if (files && files.length > 0) processFile(files[0]);\n};\n\nconst processFile = async (file: File) => {\n  if (!file) return;\n  uploadAttempted.value = true;\n  uiStore.setGlobalLoading(true);\n  try {\n    const processedData = await processPersonnelFile(file);\n    newlyLoadedPersonnel.value = processedData;\n\n    if (processedData.length > 0) {\n      uiStore.addNotification({\n        message: `${processedData.length} records loaded for preview.`,\n        type: \"info\",\n      });\n    } else {\n      uiStore.addNotification({\n        message: \"No valid records found in file. Check column headers.\",\n        type: \"warn\",\n        duration: 8000,\n      });\n    }\n  } catch (error: any) {\n    uiStore.addNotification({\n      message: `Error processing file: ${error.message}`,\n      type: \"error\",\n    });\n    newlyLoadedPersonnel.value = [];\n  } finally {\n    uiStore.setGlobalLoading(false);\n    if (fileInput.value) fileInput.value.value = \"\";\n  }\n};\n\nconst handleDownloadTemplate = () => {\n  downloadPersonnelTemplate();\n};\n\nconst handleDownloadData = () => {\n  if (personnelStore.allPersonnel.length > 0) {\n    downloadPersonnelData(personnelStore.allPersonnel);\n  } else {\n    uiStore.addNotification({\n      message: \"No personnel data loaded to download.\",\n      type: \"warn\",\n    });\n  }\n};\n\nconst confirmLoad = () => {\n  if (newlyLoadedPersonnel.value.length > 0) {\n    personnelStore.setPersonnel(newlyLoadedPersonnel.value);\n    uiStore.addNotification({\n      message: \"Personnel roster has been updated.\",\n      type: \"success\",\n    });\n    newlyLoadedPersonnel.value = [];\n    uploadAttempted.value = false;\n    router.push({ name: \"Dashboard\" });\n  }\n};\n</script>\n","import script from \"./PersonnelUploadView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PersonnelUploadView.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, unref as _unref, createVNode as _createVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, withModifiers as _withModifiers, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"p-4 sm:p-6 lg:p-8 bg-gray-50 min-h-full\" }\nconst _hoisted_2 = { class: \"border-b border-gray-200 pb-5\" }\nconst _hoisted_3 = { class: \"sm:flex sm:items-baseline sm:justify-between\" }\nconst _hoisted_4 = { class: \"mt-4 flex items-center justify-start sm:mt-0 sm:ml-4\" }\nconst _hoisted_5 = { class: \"mt-8 grid grid-cols-1 gap-12 lg:grid-cols-2\" }\nconst _hoisted_6 = { class: \"lg:col-span-1 space-y-6\" }\nconst _hoisted_7 = { class: \"space-y-2\" }\nconst _hoisted_8 = [\"disabled\"]\nconst _hoisted_9 = { class: \"lg:col-span-1\" }\nconst _hoisted_10 = { class: \"mt-4 flow-root\" }\nconst _hoisted_11 = {\n  key: 0,\n  role: \"list\",\n  class: \"divide-y divide-gray-200 border-t border-b border-gray-200\"\n}\nconst _hoisted_12 = { class: \"flex-1 min-w-0\" }\nconst _hoisted_13 = { class: \"text-sm font-medium text-gray-900 truncate\" }\nconst _hoisted_14 = { class: \"text-sm text-gray-500\" }\nconst _hoisted_15 = [\"onClick\"]\nconst _hoisted_16 = {\n  key: 1,\n  class: \"text-center py-10 px-4 rounded-lg bg-white border border-gray-200\"\n}\nconst _hoisted_17 = {\n  key: 0,\n  class: \"mt-6 p-4 rounded-lg bg-green-50 border border-green-200\"\n}\nconst _hoisted_18 = { class: \"mt-2 text-sm text-green-700\" }\nconst _hoisted_19 = { class: \"font-bold\" }\n\nimport { ref, reactive } from \"vue\";\nimport { useUiStore } from \"@/stores/uiStore\";\nimport { useProgressStore } from \"@/stores/progressStore\";\nimport {\n  ArrowLeftIcon,\n  DocumentArrowUpIcon,\n  DocumentIcon,\n  XMarkIcon,\n} from \"@heroicons/vue/24/outline\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'TrainingUploadView',\n  setup(__props) {\n\nconst uiStore = useUiStore();\nconst progressStore = useProgressStore();\n\nconst stagedFiles = ref<File[]>([]);\nconst results = reactive({ completionsFound: 0 });\n\nconst fileInput = ref<HTMLInputElement | null>(null);\nconst isDragOver = ref(false);\n\nconst triggerFileInput = () => {\n  fileInput.value?.click();\n};\n\nconst handleFileDrop = (event: DragEvent) => {\n  isDragOver.value = false;\n  const files = event.dataTransfer?.files;\n  if (files) addFilesToStage(Array.from(files));\n};\n\nconst handleFileInput = (event: Event) => {\n  const target = event.target as HTMLInputElement;\n  const files = target.files;\n  if (files) addFilesToStage(Array.from(files));\n  if (fileInput.value) fileInput.value.value = \"\";\n};\n\nconst addFilesToStage = (files: File[]) => {\n  const validFiles = files.filter((file) => /\\.(xlsx|xls)$/i.test(file.name));\n  stagedFiles.value.push(...validFiles);\n};\n\nconst removeFile = (indexToRemove: number) => {\n  stagedFiles.value.splice(indexToRemove, 1);\n};\n\nconst processStagedFiles = async () => {\n  if (stagedFiles.value.length === 0) return;\n  uiStore.setGlobalLoading(true);\n  results.completionsFound = 0;\n\n  const res = await progressStore.processAndMergeMultipleFiles(\n    stagedFiles.value\n  );\n  results.completionsFound = res.completionsFound;\n\n  if (res.completionsFound > 0) {\n    uiStore.addNotification({\n      message: \"Training data successfully merged.\",\n      type: \"success\",\n    });\n  } else {\n    uiStore.addNotification({\n      message:\n        \"No new training completions were found in the provided file(s).\",\n      type: \"warn\",\n    });\n  }\n\n  stagedFiles.value = []; // Clear the staging area\n  uiStore.setGlobalLoading(false);\n};\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_router_link = _resolveComponent(\"router-link\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _cache[3] || (_cache[3] = _createElementVNode(\"div\", null, [\n          _createElementVNode(\"h1\", { class: \"text-2xl font-bold tracking-tight text-gray-900\" }, \" Load Training Data \"),\n          _createElementVNode(\"p\", { class: \"mt-2 text-sm text-gray-500\" }, \" Upload one or more SHARP Syllabus Export files to merge training completions. \")\n        ], -1)),\n        _createElementVNode(\"div\", _hoisted_4, [\n          _createVNode(_component_router_link, {\n            to: { name: 'Dashboard' },\n            class: \"inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50\"\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_unref(ArrowLeftIcon), { class: \"-ml-0.5 mr-1.5 h-5 w-5 text-gray-400\" }),\n              _cache[2] || (_cache[2] = _createElementVNode(\"span\", null, \"Back to Dashboard\", -1))\n            ]),\n            _: 1,\n            __: [2]\n          })\n        ])\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_5, [\n      _createElementVNode(\"div\", _hoisted_6, [\n        _createElementVNode(\"div\", null, [\n          _cache[5] || (_cache[5] = _createElementVNode(\"h2\", { class: \"text-lg font-medium text-gray-900\" }, \"1. Stage Files\", -1)),\n          _cache[6] || (_cache[6] = _createElementVNode(\"p\", { class: \"mt-1 text-sm text-gray-500\" }, \" Drag files into the box below or click to browse. You can add multiple files. \", -1)),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"mt-4 relative border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-indigo-500 transition-colors\", { 'bg-indigo-50 border-indigo-500': isDragOver.value }]),\n            onDragover: _cache[0] || (_cache[0] = _withModifiers(($event: any) => (isDragOver.value = true), [\"prevent\"])),\n            onDragleave: _cache[1] || (_cache[1] = _withModifiers(($event: any) => (isDragOver.value = false), [\"prevent\"])),\n            onDrop: _withModifiers(handleFileDrop, [\"prevent\"]),\n            onClick: triggerFileInput\n          }, [\n            _createElementVNode(\"input\", {\n              ref_key: \"fileInput\",\n              ref: fileInput,\n              type: \"file\",\n              class: \"hidden\",\n              accept: \".xlsx, .xls\",\n              onChange: handleFileInput,\n              multiple: \"\"\n            }, null, 544),\n            _createElementVNode(\"div\", _hoisted_7, [\n              _createVNode(_unref(DocumentArrowUpIcon), { class: \"mx-auto h-12 w-12 text-gray-400\" }),\n              _cache[4] || (_cache[4] = _createElementVNode(\"p\", { class: \"text-gray-500\" }, \" Drag & drop files, or click to browse. \", -1))\n            ])\n          ], 34)\n        ]),\n        _createElementVNode(\"div\", null, [\n          _cache[7] || (_cache[7] = _createElementVNode(\"h2\", { class: \"text-lg font-medium text-gray-900\" }, \"2. Process Files\", -1)),\n          _cache[8] || (_cache[8] = _createElementVNode(\"p\", { class: \"mt-1 text-sm text-gray-500\" }, \" Review your staged files, then click below to process them all. \", -1)),\n          _createElementVNode(\"button\", {\n            onClick: processStagedFiles,\n            type: \"button\",\n            disabled: stagedFiles.value.length === 0,\n            class: \"mt-4 w-full inline-flex items-center justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 disabled:bg-gray-400\"\n          }, \" Process \" + _toDisplayString(stagedFiles.value.length) + \" Staged Files \", 9, _hoisted_8)\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_9, [\n        _cache[14] || (_cache[14] = _createElementVNode(\"h2\", { class: \"text-lg font-medium text-gray-900\" }, \"Staging Area\", -1)),\n        _createElementVNode(\"div\", _hoisted_10, [\n          (stagedFiles.value.length > 0)\n            ? (_openBlock(), _createElementBlock(\"ul\", _hoisted_11, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(stagedFiles.value, (file, index) => {\n                  return (_openBlock(), _createElementBlock(\"li\", {\n                    key: file.name + index,\n                    class: \"flex items-center space-x-4 p-3 bg-white\"\n                  }, [\n                    _createVNode(_unref(DocumentIcon), { class: \"h-6 w-6 flex-shrink-0 text-gray-400\" }),\n                    _createElementVNode(\"div\", _hoisted_12, [\n                      _createElementVNode(\"p\", _hoisted_13, _toDisplayString(file.name), 1),\n                      _createElementVNode(\"p\", _hoisted_14, _toDisplayString((file.size / 1024).toFixed(2)) + \" KB \", 1)\n                    ]),\n                    _createElementVNode(\"button\", {\n                      onClick: ($event: any) => (removeFile(index)),\n                      type: \"button\",\n                      class: \"p-1 rounded-full hover:bg-gray-100\"\n                    }, [\n                      _createVNode(_unref(XMarkIcon), { class: \"h-5 w-5 text-gray-500\" })\n                    ], 8, _hoisted_15)\n                  ]))\n                }), 128))\n              ]))\n            : (_openBlock(), _createElementBlock(\"div\", _hoisted_16, _cache[9] || (_cache[9] = [\n                _createElementVNode(\"p\", { class: \"text-sm text-gray-500\" }, \"No files staged for processing.\", -1)\n              ])))\n        ]),\n        (results.completionsFound > 0)\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_17, [\n              _cache[12] || (_cache[12] = _createElementVNode(\"h3\", { class: \"text-base font-medium text-green-800\" }, \" Batch Processing Complete \", -1)),\n              _createElementVNode(\"p\", _hoisted_18, [\n                _cache[10] || (_cache[10] = _createTextVNode(\" Successfully merged \")),\n                _createElementVNode(\"span\", _hoisted_19, _toDisplayString(results.completionsFound), 1),\n                _cache[11] || (_cache[11] = _createTextVNode(\" total training completions from the processed files. \"))\n              ]),\n              _cache[13] || (_cache[13] = _createElementVNode(\"p\", { class: \"text-sm text-green-700 mt-1\" }, \" You can now view the updated reports. \", -1))\n            ]))\n          : _createCommentVNode(\"\", true)\n      ])\n    ])\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"p-4 sm:p-6 lg:p-8 bg-gray-50 min-h-full\">\n    <div class=\"border-b border-gray-200 pb-5\">\n      <div class=\"sm:flex sm:items-baseline sm:justify-between\">\n        <div>\n          <h1 class=\"text-2xl font-bold tracking-tight text-gray-900\">\n            Load Training Data\n          </h1>\n          <p class=\"mt-2 text-sm text-gray-500\">\n            Upload one or more SHARP Syllabus Export files to merge training\n            completions.\n          </p>\n        </div>\n        <div class=\"mt-4 flex items-center justify-start sm:mt-0 sm:ml-4\">\n          <router-link\n            :to=\"{ name: 'Dashboard' }\"\n            class=\"inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50\"\n          >\n            <ArrowLeftIcon class=\"-ml-0.5 mr-1.5 h-5 w-5 text-gray-400\" />\n            <span>Back to Dashboard</span>\n          </router-link>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"mt-8 grid grid-cols-1 gap-12 lg:grid-cols-2\">\n      <div class=\"lg:col-span-1 space-y-6\">\n        <div>\n          <h2 class=\"text-lg font-medium text-gray-900\">1. Stage Files</h2>\n          <p class=\"mt-1 text-sm text-gray-500\">\n            Drag files into the box below or click to browse. You can add\n            multiple files.\n          </p>\n          <div\n            class=\"mt-4 relative border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-indigo-500 transition-colors\"\n            :class=\"{ 'bg-indigo-50 border-indigo-500': isDragOver }\"\n            @dragover.prevent=\"isDragOver = true\"\n            @dragleave.prevent=\"isDragOver = false\"\n            @drop.prevent=\"handleFileDrop\"\n            @click=\"triggerFileInput\"\n          >\n            <input\n              ref=\"fileInput\"\n              type=\"file\"\n              class=\"hidden\"\n              accept=\".xlsx, .xls\"\n              @change=\"handleFileInput\"\n              multiple\n            />\n            <div class=\"space-y-2\">\n              <DocumentArrowUpIcon class=\"mx-auto h-12 w-12 text-gray-400\" />\n              <p class=\"text-gray-500\">\n                Drag & drop files, or click to browse.\n              </p>\n            </div>\n          </div>\n        </div>\n        <div>\n          <h2 class=\"text-lg font-medium text-gray-900\">2. Process Files</h2>\n          <p class=\"mt-1 text-sm text-gray-500\">\n            Review your staged files, then click below to process them all.\n          </p>\n          <button\n            @click=\"processStagedFiles\"\n            type=\"button\"\n            :disabled=\"stagedFiles.length === 0\"\n            class=\"mt-4 w-full inline-flex items-center justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 disabled:bg-gray-400\"\n          >\n            Process {{ stagedFiles.length }} Staged Files\n          </button>\n        </div>\n      </div>\n\n      <div class=\"lg:col-span-1\">\n        <h2 class=\"text-lg font-medium text-gray-900\">Staging Area</h2>\n        <div class=\"mt-4 flow-root\">\n          <ul\n            v-if=\"stagedFiles.length > 0\"\n            role=\"list\"\n            class=\"divide-y divide-gray-200 border-t border-b border-gray-200\"\n          >\n            <li\n              v-for=\"(file, index) in stagedFiles\"\n              :key=\"file.name + index\"\n              class=\"flex items-center space-x-4 p-3 bg-white\"\n            >\n              <DocumentIcon class=\"h-6 w-6 flex-shrink-0 text-gray-400\" />\n              <div class=\"flex-1 min-w-0\">\n                <p class=\"text-sm font-medium text-gray-900 truncate\">\n                  {{ file.name }}\n                </p>\n                <p class=\"text-sm text-gray-500\">\n                  {{ (file.size / 1024).toFixed(2) }} KB\n                </p>\n              </div>\n              <button\n                @click=\"removeFile(index)\"\n                type=\"button\"\n                class=\"p-1 rounded-full hover:bg-gray-100\"\n              >\n                <XMarkIcon class=\"h-5 w-5 text-gray-500\" />\n              </button>\n            </li>\n          </ul>\n          <div\n            v-else\n            class=\"text-center py-10 px-4 rounded-lg bg-white border border-gray-200\"\n          >\n            <p class=\"text-sm text-gray-500\">No files staged for processing.</p>\n          </div>\n        </div>\n\n        <div\n          v-if=\"results.completionsFound > 0\"\n          class=\"mt-6 p-4 rounded-lg bg-green-50 border border-green-200\"\n        >\n          <h3 class=\"text-base font-medium text-green-800\">\n            Batch Processing Complete\n          </h3>\n          <p class=\"mt-2 text-sm text-green-700\">\n            Successfully merged\n            <span class=\"font-bold\">{{ results.completionsFound }}</span> total\n            training completions from the processed files.\n          </p>\n          <p class=\"text-sm text-green-700 mt-1\">\n            You can now view the updated reports.\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, reactive } from \"vue\";\nimport { useUiStore } from \"@/stores/uiStore\";\nimport { useProgressStore } from \"@/stores/progressStore\";\nimport {\n  ArrowLeftIcon,\n  DocumentArrowUpIcon,\n  DocumentIcon,\n  XMarkIcon,\n} from \"@heroicons/vue/24/outline\";\n\nconst uiStore = useUiStore();\nconst progressStore = useProgressStore();\n\nconst stagedFiles = ref<File[]>([]);\nconst results = reactive({ completionsFound: 0 });\n\nconst fileInput = ref<HTMLInputElement | null>(null);\nconst isDragOver = ref(false);\n\nconst triggerFileInput = () => {\n  fileInput.value?.click();\n};\n\nconst handleFileDrop = (event: DragEvent) => {\n  isDragOver.value = false;\n  const files = event.dataTransfer?.files;\n  if (files) addFilesToStage(Array.from(files));\n};\n\nconst handleFileInput = (event: Event) => {\n  const target = event.target as HTMLInputElement;\n  const files = target.files;\n  if (files) addFilesToStage(Array.from(files));\n  if (fileInput.value) fileInput.value.value = \"\";\n};\n\nconst addFilesToStage = (files: File[]) => {\n  const validFiles = files.filter((file) => /\\.(xlsx|xls)$/i.test(file.name));\n  stagedFiles.value.push(...validFiles);\n};\n\nconst removeFile = (indexToRemove: number) => {\n  stagedFiles.value.splice(indexToRemove, 1);\n};\n\nconst processStagedFiles = async () => {\n  if (stagedFiles.value.length === 0) return;\n  uiStore.setGlobalLoading(true);\n  results.completionsFound = 0;\n\n  const res = await progressStore.processAndMergeMultipleFiles(\n    stagedFiles.value\n  );\n  results.completionsFound = res.completionsFound;\n\n  if (res.completionsFound > 0) {\n    uiStore.addNotification({\n      message: \"Training data successfully merged.\",\n      type: \"success\",\n    });\n  } else {\n    uiStore.addNotification({\n      message:\n        \"No new training completions were found in the provided file(s).\",\n      type: \"warn\",\n    });\n  }\n\n  stagedFiles.value = []; // Clear the staging area\n  uiStore.setGlobalLoading(false);\n};\n</script>\n","import script from \"./TrainingUploadView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TrainingUploadView.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, unref as _unref, normalizeClass as _normalizeClass, createVNode as _createVNode, renderSlot as _renderSlot, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, Transition as _Transition, withCtx as _withCtx } from \"vue\"\n\nconst _hoisted_1 = { class: \"py-5 border-b border-gray-200\" }\nconst _hoisted_2 = { class: \"text-base font-medium text-gray-900\" }\nconst _hoisted_3 = { class: \"ml-6 flex h-7 items-center\" }\nconst _hoisted_4 = {\n  key: 0,\n  class: \"mt-4 pr-12\"\n}\nconst _hoisted_5 = { class: \"text-base text-gray-600\" }\n\nimport { ref } from \"vue\";\nimport { ChevronDownIcon } from \"@heroicons/vue/24/outline\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'AccordionItem',\n  props: {\n  question: {\n    type: String,\n    required: true,\n  },\n},\n  setup(__props) {\n\n\n\nconst isOpen = ref(false);\n\nconst toggle = () => {\n  isOpen.value = !isOpen.value;\n};\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"dt\", null, [\n      _createElementVNode(\"button\", {\n        onClick: toggle,\n        type: \"button\",\n        class: \"flex w-full items-start justify-between text-left text-gray-400\"\n      }, [\n        _createElementVNode(\"span\", _hoisted_2, _toDisplayString(__props.question), 1),\n        _createElementVNode(\"span\", _hoisted_3, [\n          _createVNode(_unref(ChevronDownIcon), {\n            class: _normalizeClass([\n              isOpen.value ? '-rotate-180' : 'rotate-0',\n              'h-6 w-6 transform transition-transform',\n            ])\n          }, null, 8, [\"class\"])\n        ])\n      ])\n    ]),\n    _createVNode(_Transition, {\n      \"enter-active-class\": \"transition ease-out duration-200\",\n      \"enter-from-class\": \"opacity-0 -translate-y-1\",\n      \"enter-to-class\": \"opacity-100 translate-y-0\",\n      \"leave-active-class\": \"transition ease-in duration-150\",\n      \"leave-from-class\": \"opacity-100 translate-y-0\",\n      \"leave-to-class\": \"opacity-0 -translate-y-1\"\n    }, {\n      default: _withCtx(() => [\n        (isOpen.value)\n          ? (_openBlock(), _createElementBlock(\"dd\", _hoisted_4, [\n              _createElementVNode(\"p\", _hoisted_5, [\n                _renderSlot(_ctx.$slots, \"default\")\n              ])\n            ]))\n          : _createCommentVNode(\"\", true)\n      ]),\n      _: 3\n    })\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"py-5 border-b border-gray-200\">\n    <dt>\n      <button\n        @click=\"toggle\"\n        type=\"button\"\n        class=\"flex w-full items-start justify-between text-left text-gray-400\"\n      >\n        <span class=\"text-base font-medium text-gray-900\">{{ question }}</span>\n        <span class=\"ml-6 flex h-7 items-center\">\n          <ChevronDownIcon\n            :class=\"[\n              isOpen ? '-rotate-180' : 'rotate-0',\n              'h-6 w-6 transform transition-transform',\n            ]\"\n          />\n        </span>\n      </button>\n    </dt>\n    <transition\n      enter-active-class=\"transition ease-out duration-200\"\n      enter-from-class=\"opacity-0 -translate-y-1\"\n      enter-to-class=\"opacity-100 translate-y-0\"\n      leave-active-class=\"transition ease-in duration-150\"\n      leave-from-class=\"opacity-100 translate-y-0\"\n      leave-to-class=\"opacity-0 -translate-y-1\"\n    >\n      <dd v-if=\"isOpen\" class=\"mt-4 pr-12\">\n        <p class=\"text-base text-gray-600\">\n          <slot />\n        </p>\n      </dd>\n    </transition>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, defineProps } from \"vue\";\nimport { ChevronDownIcon } from \"@heroicons/vue/24/outline\";\n\ndefineProps({\n  question: {\n    type: String,\n    required: true,\n  },\n});\n\nconst isOpen = ref(false);\n\nconst toggle = () => {\n  isOpen.value = !isOpen.value;\n};\n</script>\n","import script from \"./AccordionItem.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./AccordionItem.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, createVNode as _createVNode, unref as _unref, resolveComponent as _resolveComponent, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"bg-gray-50\" }\nconst _hoisted_2 = { class: \"mx-auto max-w-7xl py-12 px-4 sm:py-16 sm:px-6 lg:px-8\" }\nconst _hoisted_3 = { class: \"mx-auto max-w-3xl\" }\nconst _hoisted_4 = { class: \"mt-12 space-y-6\" }\nconst _hoisted_5 = { class: \"mt-4\" }\nconst _hoisted_6 = { class: \"list-decimal list-inside mt-2 space-y-2 text-gray-600\" }\n\nimport AccordionItem from \"@/components/ui/AccordionItem.vue\";\nimport { downloadPersonnelTemplate } from \"@/core/excelProcessorServices/personnelProcessorService\";\nimport { ArrowDownTrayIcon } from \"@heroicons/vue/20/solid\";\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'HelpView',\n  setup(__props) {\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_router_link = _resolveComponent(\"router-link\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _cache[19] || (_cache[19] = _createElementVNode(\"div\", { class: \"text-center\" }, [\n          _createElementVNode(\"h2\", { class: \"text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl\" }, \" Help & Documentation \"),\n          _createElementVNode(\"p\", { class: \"mt-4 text-lg text-gray-500\" }, \" Answers to common questions about using UPSHOT. If you can't find what you're looking for, check the project's README file. \")\n        ], -1)),\n        _createElementVNode(\"dl\", _hoisted_4, [\n          _createVNode(AccordionItem, { question: \"What is the main workflow?\" }, {\n            default: _withCtx(() => _cache[1] || (_cache[1] = [\n              _createTextVNode(\" The application follows a simple 3-step process: \"),\n              _createElementVNode(\"br\", null, null, -1),\n              _createTextVNode(\"1. **Load Personnel:** Import your squadron roster. \"),\n              _createElementVNode(\"br\", null, null, -1),\n              _createTextVNode(\"2. **Load Training Data:** Import one or more SHARP training exports. \"),\n              _createElementVNode(\"br\", null, null, -1),\n              _createTextVNode(\"3. **Analyze & Report:** View individual and track-level reports. \")\n            ])),\n            _: 1,\n            __: [1]\n          }),\n          _createVNode(AccordionItem, { question: \"What is the correct format for the Personnel file?\" }, {\n            default: _withCtx(() => [\n              _cache[3] || (_cache[3] = _createTextVNode(\" The personnel file must be an Excel file (`.xlsx` or `.xls`) with a header row containing at least 'Full Name' and 'Position'. Other columns like 'Crew', 'Seat', and 'Notes' are optional but recommended. \")),\n              _createElementVNode(\"div\", _hoisted_5, [\n                _createElementVNode(\"button\", {\n                  onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_unref(downloadPersonnelTemplate) && _unref(downloadPersonnelTemplate)(...args))),\n                  type: \"button\",\n                  class: \"inline-flex items-center gap-x-2 rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600\"\n                }, [\n                  _createVNode(_unref(ArrowDownTrayIcon), { class: \"-ml-0.5 h-5 w-5\" }),\n                  _cache[2] || (_cache[2] = _createTextVNode(\" Download Personnel Template \"))\n                ])\n              ])\n            ]),\n            _: 1,\n            __: [3]\n          }),\n          _createVNode(AccordionItem, { question: \"Where do I get the training data file?\" }, {\n            default: _withCtx(() => _cache[4] || (_cache[4] = [\n              _createTextVNode(\" The training data must be a **Syllabus Export** from SHARP (Sierra Hotel Aviation Readiness Program). Navigate to the syllabus section in SHARP and look for an export option that generates an Excel file with multiple sheets, including \\\"Syllabus Events\\\" and \\\"Default\\\". \")\n            ])),\n            _: 1,\n            __: [4]\n          }),\n          _createVNode(AccordionItem, { question: \"How do I save changes to a Syllabus or App Configuration?\" }, {\n            default: _withCtx(() => _cache[5] || (_cache[5] = [\n              _createElementVNode(\"p\", { class: \"text-gray-700\" }, \" This application runs entirely in your browser and does not have a backend server to store data. All changes are saved by downloading a file that you must then place in the application's directory. \", -1),\n              _createElementVNode(\"br\", null, null, -1),\n              _createElementVNode(\"p\", { class: \"text-gray-700\" }, [\n                _createTextVNode(\" When you modify settings in the \"),\n                _createElementVNode(\"strong\", null, \"Application Settings\"),\n                _createTextVNode(\" or \"),\n                _createElementVNode(\"strong\", null, \"Syllabus Manager\"),\n                _createTextVNode(\" pages and click a \\\"Save\\\" or \\\"Download\\\" button, your browser will download a file. \")\n              ], -1),\n              _createElementVNode(\"ul\", { class: \"list-disc list-inside mt-2 space-y-1 text-gray-600\" }, [\n                _createElementVNode(\"li\", null, [\n                  _createTextVNode(\" For app settings, this will be \"),\n                  _createElementVNode(\"code\", null, \"user_config.js\"),\n                  _createTextVNode(\". \")\n                ]),\n                _createElementVNode(\"li\", null, [\n                  _createTextVNode(\" For a syllabus, this will be a JSON file like \"),\n                  _createElementVNode(\"code\", null, \"PILOT.json\"),\n                  _createTextVNode(\". \")\n                ])\n              ], -1),\n              _createElementVNode(\"br\", null, null, -1),\n              _createElementVNode(\"p\", { class: \"text-gray-700\" }, [\n                _createTextVNode(\" For the application to load your changes automatically next time, you must move the downloaded \"),\n                _createElementVNode(\"code\", null, \"user_config.js\"),\n                _createTextVNode(\" file into the \"),\n                _createElementVNode(\"code\", null, \"/config\"),\n                _createTextVNode(\" folder located next to the main \"),\n                _createElementVNode(\"code\", null, \"index.html\"),\n                _createTextVNode(\" file. For syllabi, you can upload the downloaded JSON file directly in the Syllabus Manager. \")\n              ], -1)\n            ])),\n            _: 1,\n            __: [5]\n          }),\n          _createVNode(AccordionItem, { question: \"How do I set up AI-powered features (Gemini API)?\" }, {\n            default: _withCtx(() => [\n              _cache[12] || (_cache[12] = _createElementVNode(\"p\", { class: \"text-gray-700\" }, \" To enable AI-powered reporting, you need to provide your own Google Gemini API key. \", -1)),\n              _cache[13] || (_cache[13] = _createElementVNode(\"br\", null, null, -1)),\n              _cache[14] || (_cache[14] = _createElementVNode(\"h4\", { class: \"font-semibold text-gray-800\" }, \" Step 1: Create Your API Key \", -1)),\n              _cache[15] || (_cache[15] = _createElementVNode(\"ol\", { class: \"list-decimal list-inside mt-2 space-y-2 text-gray-600\" }, [\n                _createElementVNode(\"li\", null, [\n                  _createTextVNode(\" Navigate to the \"),\n                  _createElementVNode(\"a\", {\n                    href: \"https://aistudio.google.com/app/apikey\",\n                    target: \"_blank\",\n                    class: \"text-indigo-600 hover:underline\"\n                  }, \"Google AI Studio\"),\n                  _createTextVNode(\". \")\n                ]),\n                _createElementVNode(\"li\", null, \"Sign in and click \\\"Create API key\\\" to generate your key.\"),\n                _createElementVNode(\"li\", null, \"Copy the generated key to your clipboard.\")\n              ], -1)),\n              _cache[16] || (_cache[16] = _createElementVNode(\"br\", null, null, -1)),\n              _cache[17] || (_cache[17] = _createElementVNode(\"h4\", { class: \"font-semibold text-gray-800\" }, \" Step 2: Save the Key in UPSHOT \", -1)),\n              _createElementVNode(\"ol\", _hoisted_6, [\n                _createElementVNode(\"li\", null, [\n                  _cache[7] || (_cache[7] = _createTextVNode(\" Go to the \")),\n                  _createVNode(_component_router_link, {\n                    to: \"/settings/app\",\n                    class: \"text-indigo-600 hover:underline\"\n                  }, {\n                    default: _withCtx(() => _cache[6] || (_cache[6] = [\n                      _createTextVNode(\"Application Settings\")\n                    ])),\n                    _: 1,\n                    __: [6]\n                  }),\n                  _cache[8] || (_cache[8] = _createTextVNode(\" page. \"))\n                ]),\n                _cache[9] || (_cache[9] = _createElementVNode(\"li\", null, \"Paste your key into the \\\"Gemini API Key\\\" field.\", -1)),\n                _cache[10] || (_cache[10] = _createElementVNode(\"li\", null, [\n                  _createTextVNode(\" Click the \\\"Save and Download\\\" button. This downloads the \"),\n                  _createElementVNode(\"code\", null, \"user_config.js\"),\n                  _createTextVNode(\" file with your key included. \")\n                ], -1)),\n                _cache[11] || (_cache[11] = _createElementVNode(\"li\", null, [\n                  _createTextVNode(\" Place this file into the \"),\n                  _createElementVNode(\"code\", null, \"/config\"),\n                  _createTextVNode(\" folder as described in the section above. \")\n                ], -1))\n              ])\n            ]),\n            _: 1,\n            __: [12,13,14,15,16,17]\n          }),\n          _createVNode(AccordionItem, { question: \"Why are some requirements waived by default?\" }, {\n            default: _withCtx(() => _cache[18] || (_cache[18] = [\n              _createTextVNode(\" Some training items, particularly `ICW` (Interactive Courseware) events from SHARP, are often used for computer-based training that is tracked separately. They are automatically marked as \\\"waived\\\" during the syllabus import to prevent them from showing up as overdue. You can change this for any requirement in the Syllabus Edit page. \")\n            ])),\n            _: 1,\n            __: [18]\n          })\n        ])\n      ])\n    ])\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"bg-gray-50\">\n    <div class=\"mx-auto max-w-7xl py-12 px-4 sm:py-16 sm:px-6 lg:px-8\">\n      <div class=\"mx-auto max-w-3xl\">\n        <div class=\"text-center\">\n          <h2\n            class=\"text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl\"\n          >\n            Help & Documentation\n          </h2>\n          <p class=\"mt-4 text-lg text-gray-500\">\n            Answers to common questions about using UPSHOT. If you can't find\n            what you're looking for, check the project's README file.\n          </p>\n        </div>\n\n        <dl class=\"mt-12 space-y-6\">\n          <AccordionItem question=\"What is the main workflow?\">\n            The application follows a simple 3-step process:\n            <br />1. **Load Personnel:** Import your squadron roster. <br />2.\n            **Load Training Data:** Import one or more SHARP training exports.\n            <br />3. **Analyze & Report:** View individual and track-level\n            reports.\n          </AccordionItem>\n\n          <AccordionItem\n            question=\"What is the correct format for the Personnel file?\"\n          >\n            The personnel file must be an Excel file (`.xlsx` or `.xls`) with a\n            header row containing at least 'Full Name' and 'Position'. Other\n            columns like 'Crew', 'Seat', and 'Notes' are optional but\n            recommended.\n            <div class=\"mt-4\">\n              <button\n                @click=\"downloadPersonnelTemplate\"\n                type=\"button\"\n                class=\"inline-flex items-center gap-x-2 rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600\"\n              >\n                <ArrowDownTrayIcon class=\"-ml-0.5 h-5 w-5\" />\n                Download Personnel Template\n              </button>\n            </div>\n          </AccordionItem>\n\n          <AccordionItem question=\"Where do I get the training data file?\">\n            The training data must be a **Syllabus Export** from SHARP (Sierra\n            Hotel Aviation Readiness Program). Navigate to the syllabus section\n            in SHARP and look for an export option that generates an Excel file\n            with multiple sheets, including \"Syllabus Events\" and \"Default\".\n          </AccordionItem>\n\n          <AccordionItem\n            question=\"How do I save changes to a Syllabus or App Configuration?\"\n          >\n            <p class=\"text-gray-700\">\n              This application runs entirely in your browser and does not have a\n              backend server to store data. All changes are saved by downloading\n              a file that you must then place in the application's directory.\n            </p>\n            <br />\n            <p class=\"text-gray-700\">\n              When you modify settings in the\n              <strong>Application Settings</strong> or\n              <strong>Syllabus Manager</strong> pages and click a \"Save\" or\n              \"Download\" button, your browser will download a file.\n            </p>\n            <ul class=\"list-disc list-inside mt-2 space-y-1 text-gray-600\">\n              <li>\n                For app settings, this will be <code>user_config.js</code>.\n              </li>\n              <li>\n                For a syllabus, this will be a JSON file like\n                <code>PILOT.json</code>.\n              </li>\n            </ul>\n            <br />\n            <p class=\"text-gray-700\">\n              For the application to load your changes automatically next time,\n              you must move the downloaded <code>user_config.js</code> file into\n              the <code>/config</code> folder located next to the main\n              <code>index.html</code> file. For syllabi, you can upload the\n              downloaded JSON file directly in the Syllabus Manager.\n            </p>\n          </AccordionItem>\n\n          <AccordionItem\n            question=\"How do I set up AI-powered features (Gemini API)?\"\n          >\n            <p class=\"text-gray-700\">\n              To enable AI-powered reporting, you need to provide your own\n              Google Gemini API key.\n            </p>\n            <br />\n            <h4 class=\"font-semibold text-gray-800\">\n              Step 1: Create Your API Key\n            </h4>\n            <ol class=\"list-decimal list-inside mt-2 space-y-2 text-gray-600\">\n              <li>\n                Navigate to the\n                <a\n                  href=\"https://aistudio.google.com/app/apikey\"\n                  target=\"_blank\"\n                  class=\"text-indigo-600 hover:underline\"\n                  >Google AI Studio</a\n                >.\n              </li>\n              <li>Sign in and click \"Create API key\" to generate your key.</li>\n              <li>Copy the generated key to your clipboard.</li>\n            </ol>\n            <br />\n            <h4 class=\"font-semibold text-gray-800\">\n              Step 2: Save the Key in UPSHOT\n            </h4>\n            <ol class=\"list-decimal list-inside mt-2 space-y-2 text-gray-600\">\n              <li>\n                Go to the\n                <router-link\n                  to=\"/settings/app\"\n                  class=\"text-indigo-600 hover:underline\"\n                  >Application Settings</router-link\n                >\n                page.\n              </li>\n              <li>Paste your key into the \"Gemini API Key\" field.</li>\n              <li>\n                Click the \"Save and Download\" button. This downloads the\n                <code>user_config.js</code> file with your key included.\n              </li>\n              <li>\n                Place this file into the <code>/config</code> folder as\n                described in the section above.\n              </li>\n            </ol>\n          </AccordionItem>\n\n          <AccordionItem\n            question=\"Why are some requirements waived by default?\"\n          >\n            Some training items, particularly `ICW` (Interactive Courseware)\n            events from SHARP, are often used for computer-based training that\n            is tracked separately. They are automatically marked as \"waived\"\n            during the syllabus import to prevent them from showing up as\n            overdue. You can change this for any requirement in the Syllabus\n            Edit page.\n          </AccordionItem>\n        </dl>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport AccordionItem from \"@/components/ui/AccordionItem.vue\";\nimport { downloadPersonnelTemplate } from \"@/core/excelProcessorServices/personnelProcessorService\";\nimport { ArrowDownTrayIcon } from \"@heroicons/vue/20/solid\";\n</script>\n","import script from \"./HelpView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./HelpView.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, unref as _unref, createVNode as _createVNode, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createCommentVNode as _createCommentVNode, withCtx as _withCtx } from \"vue\"\n\nconst _hoisted_1 = { class: \"flex flex-col h-full bg-gray-100\" }\nconst _hoisted_2 = { class: \"flex-shrink-0 bg-white border-b border-gray-200 p-4 sm:p-6\" }\nconst _hoisted_3 = { class: \"flex items-center justify-between\" }\nconst _hoisted_4 = { class: \"flex-grow overflow-hidden\" }\nconst _hoisted_5 = { class: \"pr-4 text-gray-500\" }\nconst _hoisted_6 = { class: \"flex-1 whitespace-pre-wrap text-gray-200\" }\nconst _hoisted_7 = {\n  key: 0,\n  class: \"text-gray-500\"\n}\nconst _hoisted_8 = { class: \"text-center\" }\nconst _hoisted_9 = { class: \"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-blue-100\" }\nconst _hoisted_10 = { class: \"flex justify-end\" }\n\nimport { ref, onMounted, onBeforeUnmount, nextTick, watch } from \"vue\";\nimport { loggingService } from \"@/utils/loggingService\";\nimport BaseModal from \"@/components/ui/BaseModal.vue\";\nimport {\n  ArrowDownTrayIcon,\n  InformationCircleIcon,\n} from \"@heroicons/vue/20/solid\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'LogsView',\n  setup(__props) {\n\nconst logs = ref(loggingService.getLogs());\nconst isModalOpen = ref(false);\nconst logContainer = ref<HTMLElement | null>(null);\nlet logUpdateInterval: number;\n\nconst handleDownload = () => {\n  loggingService.exportLogs();\n  isModalOpen.value = true;\n};\n\nconst formatTimestamp = (isoString: string) => {\n  return new Date(isoString).toLocaleTimeString();\n};\n\nconst logLevelColor = (level: string) => {\n  switch (level) {\n    case \"ERROR\":\n      return \"text-red-400\";\n    case \"WARN\":\n      return \"text-yellow-400\";\n    case \"INFO\":\n      return \"text-blue-400\";\n    case \"DEBUG\":\n      return \"text-green-400\";\n    default:\n      return \"text-gray-400\";\n  }\n};\n\nconst scrollToBottom = () => {\n  nextTick(() => {\n    if (logContainer.value) {\n      logContainer.value.scrollTop = logContainer.value.scrollHeight;\n    }\n  });\n};\n\nonMounted(() => {\n  // Periodically refresh logs from the service in case new ones are added\n  logUpdateInterval = window.setInterval(() => {\n    logs.value = loggingService.getLogs();\n  }, 2000); // Refresh every 2 seconds\n  scrollToBottom();\n});\n\nonBeforeUnmount(() => {\n  clearInterval(logUpdateInterval);\n});\n\n// Watch for changes in the logs array to auto-scroll\nwatch(\n  logs,\n  () => {\n    scrollToBottom();\n  },\n  { deep: true }\n);\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"header\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _cache[3] || (_cache[3] = _createElementVNode(\"div\", null, [\n          _createElementVNode(\"h1\", { class: \"text-2xl font-bold text-gray-900\" }, \"Session Logs\"),\n          _createElementVNode(\"p\", { class: \"mt-1 text-sm text-gray-500\" }, \" A real-time record of application events. Useful for debugging. \")\n        ], -1)),\n        _createElementVNode(\"button\", {\n          onClick: handleDownload,\n          type: \"button\",\n          class: \"inline-flex items-center gap-x-2 rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600\"\n        }, [\n          _createVNode(_unref(ArrowDownTrayIcon), { class: \"-ml-0.5 h-5 w-5\" }),\n          _cache[2] || (_cache[2] = _createTextVNode(\" Download Logs \"))\n        ])\n      ])\n    ]),\n    _createElementVNode(\"main\", _hoisted_4, [\n      _createElementVNode(\"div\", {\n        ref_key: \"logContainer\",\n        ref: logContainer,\n        class: \"h-full overflow-y-auto bg-gray-900 p-4 font-mono text-sm\"\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(logs.value, (log, index) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: index,\n            class: \"flex items-start\"\n          }, [\n            _createElementVNode(\"span\", _hoisted_5, _toDisplayString(formatTimestamp(log.timestamp)), 1),\n            _createElementVNode(\"span\", {\n              class: _normalizeClass([\"pr-2 font-bold\", logLevelColor(log.level)])\n            }, \"[\" + _toDisplayString(log.level) + \"]\", 3),\n            _createElementVNode(\"p\", _hoisted_6, _toDisplayString(log.message), 1)\n          ]))\n        }), 128)),\n        (logs.value.length === 0)\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, \" No log entries for this session yet. \"))\n          : _createCommentVNode(\"\", true)\n      ], 512)\n    ]),\n    _createVNode(BaseModal, {\n      \"is-open\": isModalOpen.value,\n      title: \"Log File Downloaded\",\n      onClose: _cache[1] || (_cache[1] = ($event: any) => (isModalOpen.value = false))\n    }, {\n      body: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_8, [\n          _createElementVNode(\"div\", _hoisted_9, [\n            _createVNode(_unref(InformationCircleIcon), { class: \"h-6 w-6 text-blue-600\" })\n          ]),\n          _cache[4] || (_cache[4] = _createElementVNode(\"div\", { class: \"mt-3\" }, [\n            _createElementVNode(\"p\", { class: \"text-base text-gray-600\" }, [\n              _createTextVNode(\" Your log file \"),\n              _createElementVNode(\"code\", { class: \"text-sm bg-gray-200 p-1 rounded\" }, \"UPSHOT_Debug_Report_...txt\"),\n              _createTextVNode(\" has been saved to your downloads folder. \")\n            ])\n          ], -1))\n        ]),\n        _cache[5] || (_cache[5] = _createElementVNode(\"div\", { class: \"mt-4 text-left border-t pt-4\" }, [\n          _createElementVNode(\"h4\", { class: \"font-medium text-gray-800\" }, \"Submission Instructions:\"),\n          _createElementVNode(\"p\", { class: \"mt-2 text-sm text-gray-600\" }, \" To help us resolve your issue, please attach the downloaded log file in an email to our support team or post it in the appropriate support channel. \"),\n          _createElementVNode(\"div\", { class: \"mt-3 p-2 bg-gray-100 rounded\" }, [\n            _createElementVNode(\"span\", { class: \"font-semibold\" }, \"Email:\"),\n            _createElementVNode(\"a\", {\n              href: \"mailto:support@example.com\",\n              class: \"text-indigo-600 hover:underline\"\n            }, \" support@example.com\")\n          ])\n        ], -1))\n      ]),\n      footer: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_10, [\n          _createElementVNode(\"button\", {\n            onClick: _cache[0] || (_cache[0] = ($event: any) => (isModalOpen.value = false)),\n            class: \"px-4 py-2 border rounded-md text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700\"\n          }, \" OK \")\n        ])\n      ]),\n      _: 1\n    }, 8, [\"is-open\"])\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"flex flex-col h-full bg-gray-100\">\n    <header class=\"flex-shrink-0 bg-white border-b border-gray-200 p-4 sm:p-6\">\n      <div class=\"flex items-center justify-between\">\n        <div>\n          <h1 class=\"text-2xl font-bold text-gray-900\">Session Logs</h1>\n          <p class=\"mt-1 text-sm text-gray-500\">\n            A real-time record of application events. Useful for debugging.\n          </p>\n        </div>\n        <button\n          @click=\"handleDownload\"\n          type=\"button\"\n          class=\"inline-flex items-center gap-x-2 rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600\"\n        >\n          <ArrowDownTrayIcon class=\"-ml-0.5 h-5 w-5\" />\n          Download Logs\n        </button>\n      </div>\n    </header>\n\n    <main class=\"flex-grow overflow-hidden\">\n      <div\n        ref=\"logContainer\"\n        class=\"h-full overflow-y-auto bg-gray-900 p-4 font-mono text-sm\"\n      >\n        <div v-for=\"(log, index) in logs\" :key=\"index\" class=\"flex items-start\">\n          <span class=\"pr-4 text-gray-500\">{{\n            formatTimestamp(log.timestamp)\n          }}</span>\n          <span class=\"pr-2 font-bold\" :class=\"logLevelColor(log.level)\"\n            >[{{ log.level }}]</span\n          >\n          <p class=\"flex-1 whitespace-pre-wrap text-gray-200\">\n            {{ log.message }}\n          </p>\n        </div>\n        <div v-if=\"logs.length === 0\" class=\"text-gray-500\">\n          No log entries for this session yet.\n        </div>\n      </div>\n    </main>\n\n    <BaseModal\n      :is-open=\"isModalOpen\"\n      title=\"Log File Downloaded\"\n      @close=\"isModalOpen = false\"\n    >\n      <template #body>\n        <div class=\"text-center\">\n          <div\n            class=\"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-blue-100\"\n          >\n            <InformationCircleIcon class=\"h-6 w-6 text-blue-600\" />\n          </div>\n          <div class=\"mt-3\">\n            <p class=\"text-base text-gray-600\">\n              Your log file\n              <code class=\"text-sm bg-gray-200 p-1 rounded\"\n                >UPSHOT_Debug_Report_...txt</code\n              >\n              has been saved to your downloads folder.\n            </p>\n          </div>\n        </div>\n        <div class=\"mt-4 text-left border-t pt-4\">\n          <h4 class=\"font-medium text-gray-800\">Submission Instructions:</h4>\n          <p class=\"mt-2 text-sm text-gray-600\">\n            To help us resolve your issue, please attach the downloaded log file\n            in an email to our support team or post it in the appropriate\n            support channel.\n          </p>\n          <div class=\"mt-3 p-2 bg-gray-100 rounded\">\n            <span class=\"font-semibold\">Email:</span>\n            <a\n              href=\"mailto:support@example.com\"\n              class=\"text-indigo-600 hover:underline\"\n            >\n              support@example.com</a\n            >\n          </div>\n        </div>\n      </template>\n      <template #footer>\n        <div class=\"flex justify-end\">\n          <button\n            @click=\"isModalOpen = false\"\n            class=\"px-4 py-2 border rounded-md text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700\"\n          >\n            OK\n          </button>\n        </div>\n      </template>\n    </BaseModal>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted, onBeforeUnmount, nextTick, watch } from \"vue\";\nimport { loggingService } from \"@/utils/loggingService\";\nimport BaseModal from \"@/components/ui/BaseModal.vue\";\nimport {\n  ArrowDownTrayIcon,\n  InformationCircleIcon,\n} from \"@heroicons/vue/20/solid\";\n\nconst logs = ref(loggingService.getLogs());\nconst isModalOpen = ref(false);\nconst logContainer = ref<HTMLElement | null>(null);\nlet logUpdateInterval: number;\n\nconst handleDownload = () => {\n  loggingService.exportLogs();\n  isModalOpen.value = true;\n};\n\nconst formatTimestamp = (isoString: string) => {\n  return new Date(isoString).toLocaleTimeString();\n};\n\nconst logLevelColor = (level: string) => {\n  switch (level) {\n    case \"ERROR\":\n      return \"text-red-400\";\n    case \"WARN\":\n      return \"text-yellow-400\";\n    case \"INFO\":\n      return \"text-blue-400\";\n    case \"DEBUG\":\n      return \"text-green-400\";\n    default:\n      return \"text-gray-400\";\n  }\n};\n\nconst scrollToBottom = () => {\n  nextTick(() => {\n    if (logContainer.value) {\n      logContainer.value.scrollTop = logContainer.value.scrollHeight;\n    }\n  });\n};\n\nonMounted(() => {\n  // Periodically refresh logs from the service in case new ones are added\n  logUpdateInterval = window.setInterval(() => {\n    logs.value = loggingService.getLogs();\n  }, 2000); // Refresh every 2 seconds\n  scrollToBottom();\n});\n\nonBeforeUnmount(() => {\n  clearInterval(logUpdateInterval);\n});\n\n// Watch for changes in the logs array to auto-scroll\nwatch(\n  logs,\n  () => {\n    scrollToBottom();\n  },\n  { deep: true }\n);\n</script>\n","import script from \"./LogsView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./LogsView.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","// src/router/index.ts\n\nimport {\n  createRouter,\n  createWebHashHistory,\n  createWebHistory,\n} from \"vue-router\";\nimport DashboardView from \"../views/DashboardView.vue\";\n\n// Report Views\nimport ReportsView from \"../views/ReportsView.vue\";\nimport IndividualReportListView from \"../views/IndividualReportListView.vue\";\nimport TrackReportView from \"../views/TrackReportView.vue\";\nimport MonthlyReportView from \"../views/MonthlyReportView.vue\";\nimport LlmReportView from \"../views/LlmReportView.vue\";\nimport StudentDetailView from \"../views/StudentDetailView.vue\";\n\n// Settings & Syllabus Views\nimport SettingsSyllabiView from \"../views/SettingsSyllabiView.vue\"; // Renamed from SettingsSyllabiView\nimport SyllabusManagementView from \"../views/SyllabusManagementView.vue\";\nimport SyllabusUploadView from \"../views/SyllabusUploadView.vue\";\nimport SyllabusUploadConfirmation from \"../components/specific/SyllabusManager/SyllabusUploadConfirmation.vue\";\nimport SyllabusEditView from \"../views/SyllabusEditView.vue\";\nimport AppSettingsView from \"../views/AppSettingsView.vue\";\n// Other Main Views\nimport PersonnelUploadView from \"../views/PersonnelUploadView.vue\";\nimport TrainingUploadView from \"../views/TrainingUploadView.vue\";\nimport HelpView from \"../views/HelpView.vue\";\nimport LogsView from \"../views/LogsView.vue\";\n\nconst routes = [\n  { path: \"/\", name: \"Dashboard\", component: DashboardView },\n  {\n    path: \"/personnel-upload\",\n    name: \"PersonnelUpload\",\n    component: PersonnelUploadView,\n  },\n  {\n    path: \"/training-upload\",\n    name: \"TrainingUpload\",\n    component: TrainingUploadView,\n  },\n\n  // Report Routes\n  { path: \"/reports\", name: \"Reports\", component: ReportsView },\n  {\n    path: \"/reports/individual\",\n    name: \"IndividualReportList\",\n    component: IndividualReportListView,\n  },\n  { path: \"/reports/track\", name: \"TrackReport\", component: TrackReportView },\n  {\n    path: \"/reports/monthly\",\n    name: \"MonthlyReport\",\n    component: MonthlyReportView,\n  },\n  { path: \"/reports/llm\", name: \"LlmReport\", component: LlmReportView },\n  {\n    path: \"/student/:id\",\n    name: \"StudentDetail\",\n    component: StudentDetailView,\n    props: true,\n  },\n\n  // Settings & Syllabus Routes\n  { path: \"/settings\", name: \"Settings\", component: SettingsSyllabiView },\n  {\n    path: \"/syllabi\",\n    name: \"SyllabusManagement\",\n    component: SyllabusManagementView,\n  },\n  {\n    path: \"/settings/app\",\n    name: \"App Config\",\n    component: AppSettingsView,\n  },\n  {\n    path: \"/syllabi/confirm\",\n    name: \"SyllabusConfirm\",\n    component: SyllabusUploadConfirmation,\n  },\n  {\n    path: \"/syllabi/edit/:id\",\n    name: \"SyllabusEdit\",\n    component: SyllabusEditView,\n    props: true,\n  },\n\n  { path: \"/help\", name: \"Help\", component: HelpView },\n  { path: \"/logs\", name: \"Logs\", component: LogsView },\n  {\n    path: \"/:pathMatch(.*)*\",\n    redirect: \"/\",\n  },\n];\n\nconst router = createRouter({\n  history: createWebHashHistory(),\n  routes,\n});\n\nexport default router;\n","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, unref as _unref, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveDynamicComponent as _resolveDynamicComponent, normalizeClass as _normalizeClass, createBlock as _createBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent } from \"vue\"\n\nconst _hoisted_1 = { class: \"fixed inset-0 flex\" }\nconst _hoisted_2 = { class: \"absolute top-0 left-full flex w-16 justify-center pt-5\" }\nconst _hoisted_3 = { class: \"flex grow flex-col gap-y-5 overflow-y-auto bg-white px-6 pb-4\" }\nconst _hoisted_4 = { class: \"flex flex-1 flex-col\" }\nconst _hoisted_5 = {\n  role: \"list\",\n  class: \"flex flex-1 flex-col gap-y-7\"\n}\nconst _hoisted_6 = {\n  role: \"list\",\n  class: \"-mx-2 space-y-1\"\n}\nconst _hoisted_7 = { class: \"hidden lg:fixed lg:inset-y-0 lg:z-50 lg:flex lg:w-72 lg:flex-col\" }\nconst _hoisted_8 = { class: \"flex grow flex-col gap-y-5 overflow-y-auto border-r border-gray-200 bg-white px-6 pb-4\" }\nconst _hoisted_9 = { class: \"flex flex-1 flex-col\" }\nconst _hoisted_10 = {\n  role: \"list\",\n  class: \"flex flex-1 flex-col gap-y-7\"\n}\nconst _hoisted_11 = {\n  role: \"list\",\n  class: \"-mx-2 space-y-1\"\n}\nconst _hoisted_12 = { class: \"lg:pl-72\" }\nconst _hoisted_13 = { class: \"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:hidden\" }\nconst _hoisted_14 = { class: \"flex-1 text-sm font-semibold leading-6 text-gray-900\" }\nconst _hoisted_15 = { class: \"py-10\" }\nconst _hoisted_16 = { class: \"px-4 sm:px-6 lg:px-8\" }\n\nimport { ref } from \"vue\";\nimport { useRoute } from \"vue-router\";\nimport {\n  Dialog,\n  DialogPanel,\n  TransitionChild,\n  TransitionRoot,\n} from \"@headlessui/vue\";\nimport {\n  Bars3Icon,\n  ChartBarIcon,\n  CogIcon,\n  DocumentTextIcon,\n  HomeIcon,\n  QuestionMarkCircleIcon,\n  XMarkIcon,\n} from \"@heroicons/vue/24/outline\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'AppLayout',\n  setup(__props) {\n\nconst navigation = [\n  { name: \"Dashboard\", href: \"/\", icon: HomeIcon },\n  { name: \"Reports\", href: \"/reports\", icon: ChartBarIcon },\n  { name: \"Settings\", href: \"/settings\", icon: CogIcon },\n  { name: \"Help\", href: \"/help\", icon: QuestionMarkCircleIcon },\n  { name: \"Logs\", href: \"/logs\", icon: DocumentTextIcon },\n];\n\nconst sidebarOpen = ref(false);\nconst route = useRoute();\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_router_link = _resolveComponent(\"router-link\")!\n  const _component_router_view = _resolveComponent(\"router-view\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createVNode(_unref(TransitionRoot), {\n      as: \"template\",\n      show: sidebarOpen.value\n    }, {\n      default: _withCtx(() => [\n        _createVNode(_unref(Dialog), {\n          class: \"relative z-50 lg:hidden\",\n          onClose: _cache[1] || (_cache[1] = ($event: any) => (sidebarOpen.value = false))\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_unref(TransitionChild), {\n              as: \"template\",\n              enter: \"transition-opacity ease-linear duration-300\",\n              \"enter-from\": \"opacity-0\",\n              \"enter-to\": \"opacity-100\",\n              leave: \"transition-opacity ease-linear duration-300\",\n              \"leave-from\": \"opacity-100\",\n              \"leave-to\": \"opacity-0\"\n            }, {\n              default: _withCtx(() => _cache[3] || (_cache[3] = [\n                _createElementVNode(\"div\", { class: \"fixed inset-0 bg-gray-900/80\" }, null, -1)\n              ])),\n              _: 1,\n              __: [3]\n            }),\n            _createElementVNode(\"div\", _hoisted_1, [\n              _createVNode(_unref(TransitionChild), {\n                as: \"template\",\n                enter: \"transition ease-in-out duration-300 transform\",\n                \"enter-from\": \"-translate-x-full\",\n                \"enter-to\": \"translate-x-0\",\n                leave: \"transition ease-in-out duration-300 transform\",\n                \"leave-from\": \"translate-x-0\",\n                \"leave-to\": \"-translate-x-full\"\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_unref(DialogPanel), { class: \"relative mr-16 flex w-full max-w-xs flex-1\" }, {\n                    default: _withCtx(() => [\n                      _createVNode(_unref(TransitionChild), {\n                        as: \"template\",\n                        enter: \"ease-in-out duration-300\",\n                        \"enter-from\": \"opacity-0\",\n                        \"enter-to\": \"opacity-100\",\n                        leave: \"ease-in-out duration-300\",\n                        \"leave-from\": \"opacity-100\",\n                        \"leave-to\": \"opacity-0\"\n                      }, {\n                        default: _withCtx(() => [\n                          _createElementVNode(\"div\", _hoisted_2, [\n                            _createElementVNode(\"button\", {\n                              type: \"button\",\n                              class: \"-m-2.5 p-2.5\",\n                              onClick: _cache[0] || (_cache[0] = ($event: any) => (sidebarOpen.value = false))\n                            }, [\n                              _cache[4] || (_cache[4] = _createElementVNode(\"span\", { class: \"sr-only\" }, \"Close sidebar\", -1)),\n                              _createVNode(_unref(XMarkIcon), {\n                                class: \"h-6 w-6 text-white\",\n                                \"aria-hidden\": \"true\"\n                              })\n                            ])\n                          ])\n                        ]),\n                        _: 1\n                      }),\n                      _createElementVNode(\"div\", _hoisted_3, [\n                        _cache[5] || (_cache[5] = _createElementVNode(\"div\", { class: \"flex h-16 shrink-0 items-center\" }, [\n                          _createElementVNode(\"h1\", { class: \"text-2xl font-bold text-indigo-600\" }, \"UPSHOT\")\n                        ], -1)),\n                        _createElementVNode(\"nav\", _hoisted_4, [\n                          _createElementVNode(\"ul\", _hoisted_5, [\n                            _createElementVNode(\"li\", null, [\n                              _createElementVNode(\"ul\", _hoisted_6, [\n                                (_openBlock(), _createElementBlock(_Fragment, null, _renderList(navigation, (item) => {\n                                  return _createElementVNode(\"li\", {\n                                    key: item.name\n                                  }, [\n                                    _createVNode(_component_router_link, {\n                                      to: item.href,\n                                      class: _normalizeClass([\n                              _ctx.$route.name === item.name\n                                ? 'bg-gray-50 text-indigo-600'\n                                : 'text-gray-700 hover:text-indigo-600 hover:bg-gray-50',\n                              'group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold',\n                            ])\n                                    }, {\n                                      default: _withCtx(() => [\n                                        (_openBlock(), _createBlock(_resolveDynamicComponent(item.icon), {\n                                          class: _normalizeClass([\n                                _ctx.$route.name === item.name\n                                  ? 'text-indigo-600'\n                                  : 'text-gray-400 group-hover:text-indigo-600',\n                                'h-6 w-6 shrink-0',\n                              ]),\n                                          \"aria-hidden\": \"true\"\n                                        }, null, 8, [\"class\"])),\n                                        _createTextVNode(\" \" + _toDisplayString(item.name), 1)\n                                      ]),\n                                      _: 2\n                                    }, 1032, [\"to\", \"class\"])\n                                  ])\n                                }), 64))\n                              ])\n                            ])\n                          ])\n                        ])\n                      ])\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              })\n            ])\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }, 8, [\"show\"]),\n    _createElementVNode(\"div\", _hoisted_7, [\n      _createElementVNode(\"div\", _hoisted_8, [\n        _cache[6] || (_cache[6] = _createElementVNode(\"div\", { class: \"flex h-16 shrink-0 items-center\" }, [\n          _createElementVNode(\"h1\", { class: \"text-2xl font-bold text-indigo-600\" }, \"UPSHOT\")\n        ], -1)),\n        _createElementVNode(\"nav\", _hoisted_9, [\n          _createElementVNode(\"ul\", _hoisted_10, [\n            _createElementVNode(\"li\", null, [\n              _createElementVNode(\"ul\", _hoisted_11, [\n                (_openBlock(), _createElementBlock(_Fragment, null, _renderList(navigation, (item) => {\n                  return _createElementVNode(\"li\", {\n                    key: item.name\n                  }, [\n                    _createVNode(_component_router_link, {\n                      to: item.href,\n                      class: _normalizeClass([\n                      _ctx.$route.name === item.name\n                        ? 'bg-gray-50 text-indigo-600'\n                        : 'text-gray-700 hover:text-indigo-600 hover:bg-gray-50',\n                      'group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold',\n                    ])\n                    }, {\n                      default: _withCtx(() => [\n                        (_openBlock(), _createBlock(_resolveDynamicComponent(item.icon), {\n                          class: _normalizeClass([\n                        _ctx.$route.name === item.name\n                          ? 'text-indigo-600'\n                          : 'text-gray-400 group-hover:text-indigo-600',\n                        'h-6 w-6 shrink-0',\n                      ]),\n                          \"aria-hidden\": \"true\"\n                        }, null, 8, [\"class\"])),\n                        _createTextVNode(\" \" + _toDisplayString(item.name), 1)\n                      ]),\n                      _: 2\n                    }, 1032, [\"to\", \"class\"])\n                  ])\n                }), 64))\n              ])\n            ])\n          ])\n        ])\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_12, [\n      _createElementVNode(\"div\", _hoisted_13, [\n        _createElementVNode(\"button\", {\n          type: \"button\",\n          class: \"-m-2.5 p-2.5 text-gray-700 lg:hidden\",\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (sidebarOpen.value = true))\n        }, [\n          _cache[7] || (_cache[7] = _createElementVNode(\"span\", { class: \"sr-only\" }, \"Open sidebar\", -1)),\n          _createVNode(_unref(Bars3Icon), {\n            class: \"h-6 w-6\",\n            \"aria-hidden\": \"true\"\n          })\n        ]),\n        _createElementVNode(\"div\", _hoisted_14, _toDisplayString(_ctx.$route.name), 1)\n      ]),\n      _createElementVNode(\"main\", _hoisted_15, [\n        _createElementVNode(\"div\", _hoisted_16, [\n          _createVNode(_component_router_view)\n        ])\n      ])\n    ])\n  ]))\n}\n}\n\n})","<!-- src/components/layout/AppLayout.vue -->\n<template>\n  <div>\n    <!-- Mobile sidebar -->\n    <TransitionRoot as=\"template\" :show=\"sidebarOpen\">\n      <Dialog class=\"relative z-50 lg:hidden\" @close=\"sidebarOpen = false\">\n        <TransitionChild\n          as=\"template\"\n          enter=\"transition-opacity ease-linear duration-300\"\n          enter-from=\"opacity-0\"\n          enter-to=\"opacity-100\"\n          leave=\"transition-opacity ease-linear duration-300\"\n          leave-from=\"opacity-100\"\n          leave-to=\"opacity-0\"\n        >\n          <div class=\"fixed inset-0 bg-gray-900/80\" />\n        </TransitionChild>\n\n        <div class=\"fixed inset-0 flex\">\n          <TransitionChild\n            as=\"template\"\n            enter=\"transition ease-in-out duration-300 transform\"\n            enter-from=\"-translate-x-full\"\n            enter-to=\"translate-x-0\"\n            leave=\"transition ease-in-out duration-300 transform\"\n            leave-from=\"translate-x-0\"\n            leave-to=\"-translate-x-full\"\n          >\n            <DialogPanel class=\"relative mr-16 flex w-full max-w-xs flex-1\">\n              <TransitionChild\n                as=\"template\"\n                enter=\"ease-in-out duration-300\"\n                enter-from=\"opacity-0\"\n                enter-to=\"opacity-100\"\n                leave=\"ease-in-out duration-300\"\n                leave-from=\"opacity-100\"\n                leave-to=\"opacity-0\"\n              >\n                <div\n                  class=\"absolute top-0 left-full flex w-16 justify-center pt-5\"\n                >\n                  <button\n                    type=\"button\"\n                    class=\"-m-2.5 p-2.5\"\n                    @click=\"sidebarOpen = false\"\n                  >\n                    <span class=\"sr-only\">Close sidebar</span>\n                    <XMarkIcon class=\"h-6 w-6 text-white\" aria-hidden=\"true\" />\n                  </button>\n                </div>\n              </TransitionChild>\n\n              <!-- Sidebar component -->\n              <div\n                class=\"flex grow flex-col gap-y-5 overflow-y-auto bg-white px-6 pb-4\"\n              >\n                <div class=\"flex h-16 shrink-0 items-center\">\n                  <h1 class=\"text-2xl font-bold text-indigo-600\">UPSHOT</h1>\n                </div>\n                <nav class=\"flex flex-1 flex-col\">\n                  <ul role=\"list\" class=\"flex flex-1 flex-col gap-y-7\">\n                    <li>\n                      <ul role=\"list\" class=\"-mx-2 space-y-1\">\n                        <li v-for=\"item in navigation\" :key=\"item.name\">\n                          <router-link\n                            :to=\"item.href\"\n                            :class=\"[\n                              $route.name === item.name\n                                ? 'bg-gray-50 text-indigo-600'\n                                : 'text-gray-700 hover:text-indigo-600 hover:bg-gray-50',\n                              'group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold',\n                            ]\"\n                          >\n                            <component\n                              :is=\"item.icon\"\n                              :class=\"[\n                                $route.name === item.name\n                                  ? 'text-indigo-600'\n                                  : 'text-gray-400 group-hover:text-indigo-600',\n                                'h-6 w-6 shrink-0',\n                              ]\"\n                              aria-hidden=\"true\"\n                            />\n                            {{ item.name }}\n                          </router-link>\n                        </li>\n                      </ul>\n                    </li>\n                  </ul>\n                </nav>\n              </div>\n            </DialogPanel>\n          </TransitionChild>\n        </div>\n      </Dialog>\n    </TransitionRoot>\n\n    <!-- Static sidebar for desktop -->\n    <div\n      class=\"hidden lg:fixed lg:inset-y-0 lg:z-50 lg:flex lg:w-72 lg:flex-col\"\n    >\n      <div\n        class=\"flex grow flex-col gap-y-5 overflow-y-auto border-r border-gray-200 bg-white px-6 pb-4\"\n      >\n        <div class=\"flex h-16 shrink-0 items-center\">\n          <h1 class=\"text-2xl font-bold text-indigo-600\">UPSHOT</h1>\n        </div>\n        <nav class=\"flex flex-1 flex-col\">\n          <ul role=\"list\" class=\"flex flex-1 flex-col gap-y-7\">\n            <li>\n              <ul role=\"list\" class=\"-mx-2 space-y-1\">\n                <li v-for=\"item in navigation\" :key=\"item.name\">\n                  <router-link\n                    :to=\"item.href\"\n                    :class=\"[\n                      $route.name === item.name\n                        ? 'bg-gray-50 text-indigo-600'\n                        : 'text-gray-700 hover:text-indigo-600 hover:bg-gray-50',\n                      'group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold',\n                    ]\"\n                  >\n                    <component\n                      :is=\"item.icon\"\n                      :class=\"[\n                        $route.name === item.name\n                          ? 'text-indigo-600'\n                          : 'text-gray-400 group-hover:text-indigo-600',\n                        'h-6 w-6 shrink-0',\n                      ]\"\n                      aria-hidden=\"true\"\n                    />\n                    {{ item.name }}\n                  </router-link>\n                </li>\n              </ul>\n            </li>\n          </ul>\n        </nav>\n      </div>\n    </div>\n\n    <div class=\"lg:pl-72\">\n      <!-- Mobile top bar -->\n      <div\n        class=\"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:hidden\"\n      >\n        <button\n          type=\"button\"\n          class=\"-m-2.5 p-2.5 text-gray-700 lg:hidden\"\n          @click=\"sidebarOpen = true\"\n        >\n          <span class=\"sr-only\">Open sidebar</span>\n          <Bars3Icon class=\"h-6 w-6\" aria-hidden=\"true\" />\n        </button>\n        <div class=\"flex-1 text-sm font-semibold leading-6 text-gray-900\">\n          {{ $route.name }}\n        </div>\n      </div>\n\n      <main class=\"py-10\">\n        <div class=\"px-4 sm:px-6 lg:px-8\">\n          <!-- Main content rendered here -->\n          <router-view />\n        </div>\n      </main>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref } from \"vue\";\nimport { useRoute } from \"vue-router\";\nimport {\n  Dialog,\n  DialogPanel,\n  TransitionChild,\n  TransitionRoot,\n} from \"@headlessui/vue\";\nimport {\n  Bars3Icon,\n  ChartBarIcon,\n  CogIcon,\n  DocumentTextIcon,\n  HomeIcon,\n  QuestionMarkCircleIcon,\n  XMarkIcon,\n} from \"@heroicons/vue/24/outline\";\n\nconst navigation = [\n  { name: \"Dashboard\", href: \"/\", icon: HomeIcon },\n  { name: \"Reports\", href: \"/reports\", icon: ChartBarIcon },\n  { name: \"Settings\", href: \"/settings\", icon: CogIcon },\n  { name: \"Help\", href: \"/help\", icon: QuestionMarkCircleIcon },\n  { name: \"Logs\", href: \"/logs\", icon: DocumentTextIcon },\n];\n\nconst sidebarOpen = ref(false);\nconst route = useRoute();\n</script>\n","import script from \"./AppLayout.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./AppLayout.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass } from \"vue\"\n\nconst _hoisted_1 = { class: \"fixed top-4 right-4 z-50 space-y-2\" }\nconst _hoisted_2 = [\"onClick\"]\n\nimport { useUiStore } from \"../../stores/uiStore\"; //\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'AppNotifications',\n  setup(__props) {\n\nconst uiStore = useUiStore(); //\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(uiStore).notifications, (notification) => {\n      return (_openBlock(), _createElementBlock(\"div\", {\n        key: notification.id,\n        onClick: ($event: any) => (_unref(uiStore).removeNotification(notification.id)),\n        class: _normalizeClass([\"p-4 rounded-md shadow-lg cursor-pointer\", {\n        'bg-blue-500 text-white': notification.type === 'info',\n        'bg-green-500 text-white': notification.type === 'success',\n        'bg-yellow-500 text-black': notification.type === 'warning',\n        'bg-red-500 text-white': notification.type === 'error',\n      }])\n      }, _toDisplayString(notification.message), 11, _hoisted_2))\n    }), 128))\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"fixed top-4 right-4 z-50 space-y-2\">\n    <div\n      v-for=\"notification in uiStore.notifications\"\n      :key=\"notification.id\"\n      @click=\"uiStore.removeNotification(notification.id)\"\n      class=\"p-4 rounded-md shadow-lg cursor-pointer\"\n      :class=\"{\n        'bg-blue-500 text-white': notification.type === 'info',\n        'bg-green-500 text-white': notification.type === 'success',\n        'bg-yellow-500 text-black': notification.type === 'warning',\n        'bg-red-500 text-white': notification.type === 'error',\n      }\"\n    >\n      {{ notification.message }}\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { useUiStore } from \"../../stores/uiStore\"; //\n\nconst uiStore = useUiStore(); //\n</script>\n","import script from \"./AppNotifications.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./AppNotifications.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  id: \"app\",\n  class: \"h-full bg-gray-50\"\n}\n\nimport AppLayout from \"./components/layout/AppLayout.vue\";\nimport AppNotifications from \"./components/ui/AppNotifications.vue\";\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'App',\n  setup(__props) {\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(AppLayout),\n    _createVNode(AppNotifications)\n  ]))\n}\n}\n\n})","<!-- src/App.vue -->\n<template>\n  <div id=\"app\" class=\"h-full bg-gray-50\">\n    <AppLayout />\n    <AppNotifications />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport AppLayout from \"./components/layout/AppLayout.vue\";\nimport AppNotifications from \"./components/ui/AppNotifications.vue\";\n</script>\n\n<style>\n/* Ensuring the app takes up the full height */\nhtml,\nbody,\n#app {\n  height: 100%;\n}\n</style>\n","import script from \"./App.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=487cc2ab&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { createApp, type App as VueApp } from \"vue\";\nimport { createPinia } from \"pinia\";\nimport router from \"./router\";\n\nimport App from \"./App.vue\";\n\n// Import global styles (Tailwind CSS)\nimport \"./assets/css/tailwind.css\";\nimport \"./assets/styles/main.css\";\n\n// Import Logging Service and UI Store (and other stores if needed at init)\nimport { loggingService } from \"./utils/loggingService\";\nimport { useUiStore } from \"./stores/uiStore\";\nimport { useAppConfigStore } from \"./stores/appConfigStore\"; // To initialize/load config early if needed\n\n// --- 1. Initialize Logging Service (as early as possible) ---\nloggingService.init();\nloggingService.logInfo(\"Application booting up...\");\n\n// --- 2. Create Vue Application Instance ---\nconst app = createApp(App);\napp.use(router);\n// --- 3. Create and Use Pinia for State Management ---\nconst pinia = createPinia();\napp.use(pinia);\n\n// Make stores available after Pinia is used by the app, especially if they are used by global handlers\n// It's often cleaner if global error handlers call loggingService directly,\n// and loggingService internally decides if it needs to interact with a store (though it should be careful about dependencies).\n// For now, uiStore will be used directly in the error handlers.\nconst uiStore = useUiStore(); // Initialize after app.use(pinia)\nconst appConfigStore = useAppConfigStore(); // Initialize config store (it loads defaults/user file via its own state setup)\n\nloggingService.logInfo(\n  `App config version loaded: ${appConfigStore.currentConfig.version}`\n);\n\n// --- 4. Global Error Handling ---\n// Vue specific errors\napp.config.errorHandler = (err: unknown, instance: any, info: string) => {\n  const error = err as Error;\n  const componentName =\n    instance?.$options?.name || instance?._?.type?.name || \"UnknownComponent\";\n\n  loggingService.logError(\"Vue Error\", {\n    message: error.message,\n    stack: error.stack,\n    componentName,\n    lifecycleHook: info,\n  });\n\n  uiStore.addNotification({\n    message: `An error occurred in component ${componentName}: ${error.message}`,\n    type: \"error\",\n    duration: 10000, // Show longer for errors\n  });\n\n  // For truly critical errors that should halt the app and show the CriticalErrorDisplay\n  // you might add more specific checks here or let higher-level catches do it.\n  // Example: if (error.message.includes(\"Cannot render app\")) {\n  //   uiStore.setCriticalError(error, \"A critical rendering error occurred.\");\n  // }\n};\n\n// General JavaScript errors (uncaught exceptions)\nwindow.onerror = (message, source, lineno, colno, error) => {\n  loggingService.logError(\"Global window.onerror:\", {\n    message,\n    source,\n    lineno,\n    colno,\n    error: error\n      ? { name: error.name, message: error.message, stack: error.stack }\n      : \"N/A\",\n  });\n  // Decide if this error is critical enough to halt the app\n  // For most unhandled errors, showing a notification is good.\n  // If you determine an error is critical, call uiStore.setCriticalError\n  if (\n    error &&\n    (error.name === \"ChunkLoadError\" ||\n      error.message.includes(\"Failed to fetch dynamically imported module\"))\n  ) {\n    uiStore.setCriticalError(\n      error,\n      \"Failed to load a critical part of the application. Please check your network or try refreshing. If the problem persists, the application files might be corrupted or incomplete.\"\n    );\n  } else {\n    uiStore.addNotification({\n      message: `An unexpected global error occurred: ${message}`,\n      type: \"error\",\n      duration: 10000,\n    });\n  }\n  return true; // Prevents default browser error handling (e.g., printing to console)\n};\n\n// Unhandled promise rejections\nwindow.onunhandledrejection = (event: PromiseRejectionEvent) => {\n  const reason = event.reason as\n    | Error\n    | string\n    | { message?: string; stack?: string };\n  let errorMessage = \"An unknown promise rejection occurred.\";\n  let errorDetails: any = event.reason;\n\n  if (reason instanceof Error) {\n    errorMessage = reason.message;\n    errorDetails = {\n      name: reason.name,\n      message: reason.message,\n      stack: reason.stack,\n    };\n  } else if (typeof reason === \"string\") {\n    errorMessage = reason;\n  } else if (reason && typeof (reason as any).message === \"string\") {\n    errorMessage = (reason as any).message;\n  }\n\n  loggingService.logError(\"Global unhandledrejection:\", errorDetails);\n\n  // Decide if this is critical\n  // For example, if (errorMessage.includes(\"database connection failed\")) {\n  //   uiStore.setCriticalError(event.reason as Error, `A critical promise rejection occurred: ${errorMessage}`);\n  // } else {\n  uiStore.addNotification({\n    message: `Unhandled promise rejection: ${errorMessage}`,\n    type: \"error\",\n    duration: 10000,\n  });\n  // }\n};\n\nloggingService.logInfo(\"Global error handlers configured.\");\n\n// --- 5. Provide Global Properties (like $exportLogs) ---\n// This makes it available in any component's `this` context (Options API)\n// or via `getCurrentInstance` (Composition API).\napp.config.globalProperties.$exportLogs = loggingService.exportLogs;\nloggingService.logInfo(\"Global properties ($exportLogs) added.\");\n\n// --- 6. Mount the Application ---\ntry {\n  app.mount(\"#app\");\n  loggingService.logInfo(\"Application mounted successfully.\");\n} catch (mountError: any) {\n  const error = mountError as Error;\n  loggingService.logError(\"CRITICAL: Application failed to mount!\", {\n    message: error.message,\n    stack: error.stack,\n  });\n  uiStore.setCriticalError(\n    error,\n    \"The application could not start due to a critical error during initialization. Please download the debug report and contact support.\"\n  );\n  // If app.mount fails, Vue might not be able to render anything, including CriticalErrorDisplay.\n  // In such a scenario, you might need a very basic HTML fallback in index.html or direct DOM manipulation here.\n  // For now, we rely on App.vue's template to show CriticalErrorDisplay if the uiStore state is set.\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkupshot_refactor\"] = self[\"webpackChunkupshot_refactor\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(7287); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["APP_VERSION","MAX_LOG_ENTRIES","logEntries","isInitialized","formatDetails","details","Error","name","message","stack","JSON","stringify","e","String","init","console","log","addEntry","level","length","shift","entry","timestamp","Date","toISOString","undefined","push","info","warn","error","debug","getLogs","logInfo","logWarn","logError","errorOrDetails","logDebug","exportLogs","reportContent","forEach","blob","Blob","type","replace","saveAs","DEFAULT_NOTIFICATION_DURATION","useUiStore","state","notifications","isLoading","criticalError","criticalErrorMessage","nextNotificationId","isGlobalLoading","actions","setGlobalLoading","this","addNotification","notification","id","duration","newNotification","setTimeout","removeNotification","index","findIndex","n","splice","setLoading","status","setCriticalError","userMessage","errorDetails","clearCriticalError","excelToJsDate_LocalIntent","excelDate","isNaN","tempDate","year","getUTCFullYear","month","getUTCMonth","day","getUTCDate","UTC","jsDateToExcel","jsDate","excelEpoch","msPerDay","timeDiff","getTime","formatUtcDateToDisplay","utcDate","localDate","toLocaleDateString","addDays","date","days","newDate","valueOf","setUTCDate","daysBetween","date1","date2","utc1","utc2","Math","floor","getTodayUtc","today","getFullYear","getMonth","getDate","PERSONNEL_FILE_HEADERS","async","processPersonnelFile","file","uiStore","personnel","data","arrayBuffer","workbook","worksheet","Sheets","SheetNames","jsonData","sheet_to_json","row","sharpName","position","startDate","upgrader","displayName","rank","assignedPosition","assignedSyllabusYear","targetQualificationLevel","onWaiver","toUpperCase","manuallyUnlockedLevels","rawCompletions","allCompletions","downloadPersonnelData","excelData","map","p","Rank","json_to_sheet","header","book_new","book_append_sheet","excelBuffer","bookType","dataBlob","slice","downloadPersonnelTemplate","RequirementType","SVC_MODULE","findHeaderKey","targetHeader","lowerCaseTarget","toLowerCase","key","trim","mapSubtypeToRequirementType","subtype","upperSubtype","includes","Board","pqsTypes","some","t","PQS","eventTypes","Event","Other","parseMasterSyllabusIdentifier","identifier","trimmedIdentifier","toString","yearMatch","match","positionMatch","baseName","excelSyllabusProcessorService","syllabusSheet","eventsSheet","defaultSheet","syllabusSheetData","range","syllabusInfo","syllabusNameKey","syllabusTitleKey","syllabusIdentifier","parsedInfo","masterSyllabus","baseLevel","requirements","masterSyllabusIdentifier","rawEventsData","blankrows","headerRowIndex","headers","h","dataRows","eventsSheetData","every","cell","rowObject","filter","requirementsMap","Map","firstReqRow","longNameKey","shortNameKey","parentKey","subtypeKey","prereqsKey","requiredKey","shortName","longName","levelMatch","requiredValue","isDefaultWaived","newRequirement","description","rawSharpEventSubtype","prerequisites","split","Boolean","prereqString","parts","eventName","join","set","defaultSheetData","firstDefRow","eventKey","seqKey","requirementIdFromSheet","pop","requirement","find","r","sequence","parseInt","getInitialSyllabi","window","UPSHOT_USER_SYLLABI","Array","isArray","parse","allSyllabi","isDirty","lastLoadedSyllabiSnapshot","pendingSyllabusForConfirmation","getters","getSyllabusById","s","findSyllabus","getRequirementsForSyllabus","syllabus","req","getAvailablePositions","positions","Set","from","sort","getAvailableYearsForPosition","years","a","b","localeCompare","getAvailableLevels","levels","add","numeric","setPendingSyllabus","acceptPendingSyllabus","addSyllabus","markAsDirty","markAsSaved","updateSyllabus","updatedSyllabus","removeSyllabus","importSyllabiFromSharpExport","parsedSyllabi","setSyllabi","downloadSyllabi","fileContent","syllabi","defaultColorScheme","primary","DEFAULT","hover","foreground","secondary","accent","warning","action","caution","defaultTrainingDepartment","squadron","departmentHead","pilotLead","nfoLead","aawLead","ewoLead","pilotDeadlines","targetMonths","deadlineMonths","nfoDeadlines","aawDeadlines","ewoDeadlines","ewoSettings","useDerivedLevels","deadlines","aawSettings","nfoSettings","pilotSettings","defaultConfig","version","positionSettings","PILOT","NFO","AAW","EWO","useRoundedTrainingStartDate","trainingDepartment","colorScheme","deepClone","obj","item","clonedObj","Object","prototype","hasOwnProperty","call","getInitialConfiguration","effectiveConfig","userConfig","UPSHOT_USER_APP_CONFIG","useAppConfigStore","config","currentConfig","getDeadlinesForPositionLevel","getPositionsWithSettings","keys","applyColorScheme","root","document","documentElement","themeValue","entries","variant","color","style","setProperty","updateConfig","partialConfig","updateTrainingDepartmentProperty","value","updateUseRoundedTrainingStartDate","updateCurveDeadlineSetting","positionKey","settings","currentSettings","resetToDefaults","downloadCurrentConfig","configString","arePrerequisitesMet","completedEventNames","c","event","prereqName","has","isRequirementWaived","completionRecord","getRemainingRequirements","waived","completed","calculateDerivedWorkingLevels","appConfig","derivedPqsWorkingLevel","derivedEventsWorkingLevel","levelsToCheck","highestPqsLevelCompleted","isUnlocked","pqsForLevel","allIndividualPqsItemsComplete","actcLevelStatus","actcLevelData","isActcLevelComplete","nextLevelIndex","indexOf","nextLevel","finalWorkingLevel","calculateProgressMetrics","workingLevel","requirementsForLevel","completedPqsDifficulty","reduce","sum","difficulty","totalPqsDifficulty","pqsProgressPercentage","eventsForLevel","completedEventsDifficulty","totalEventsDifficulty","eventsProgressPercentage","_calculateTargetPacing","deltas","completion","targetDate","delta","round","_calculateDeadlinePacing","finalDeadline","totalTimeInDays","elapsedTimeInDays","expectedProgressPercent","min","totalRequirements","expectedCompletions","actualCompletions","completionDelta","completionRatePerDay","calculatePacing","pacingAgainstTargetDays","pacingAgainstDeadlineDays","calculateProjections","COMPLETION_THRESHOLD","calculateVelocity","reqType","completions","timeSpan","totalDifficulty","requirementsOfType","goalMonths","goalDays","pqsVelocity","eventsVelocity","remaining","remainingPqsDifficulty","projectedPqsCompletionDate","remainingEventsDifficulty","projectedEventsCompletionDate","pqsDate","eventsDate","projectedTotalCompletionDate","max","_getReadinessFromPacing","pacingDays","Unknown","BehindSchedule","AtRisk","OnTrack","calculateReadiness","readinessAgainstTarget","Blocked","readinessAgainstDeadline","numericDerivedLevel","ReadyForNextLevel","getPrioritizedRequirements","allRemaining","remainingForLevel","unlockMap","prereq","get","prioritizedList","priorityScore","isAvailable","unlocks","upgraders","scoredUpgraders","u","abs","ReadinessStatus","allPersonnel","personnelMap","isDataLoaded","getPersonnelById","trimmedId","getUpgraderByName","normalizedName","allPersonnelSortedByName","loadPersonnelFromFile","personnelList","setPersonnel","updatePersonnel","updatedUpgrader","addCompletionsToUpgrader","upgraderId","newCompletions","comp","completionDate","mappedCompletions","requirementId","grade","syllabiStore","appConfigStore","detectTrackFromPqsVersion","pqsVersion","processSharpTrainingFile","processedData","detectedTrack","sheets","sheetNames","sheet","raw","dateSheetRows","nameColIndex","dataStartIndex","pqsVersionName","specialColumns","i","actcMatch","studentData","nameFromSharpFile","actcLevelStatuses","j","specialInfo","dateValue","parsedDate","d","instructor","useProgressStore","pendingSharpData","lastMergedUpgraderIds","loadAndProcessSharpFile","sharpFile","size","confirmAndMergeSharpData","processAndMergeMultipleFiles","files","personnelStore","totalCompletions","updatedIds","studentName","person","completionsFound","personnelUpdated","cancelSharpDataMerge","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","__name","setup","__props","progressStore","isPersonnelLoaded","isTrainingDataMerged","isAllDataLoaded","progressPercentage","_ctx","_cache","_component_router_link","to","default","_","__","args","__exports__","register","ReadinessDonutChart","components","Doughnut","props","chartData","required","labels","datasets","backgroundColor","backgroundColors","borderWidth","borderColor","chartOptions","responsive","maintainAspectRatio","plugins","legend","options","stats","stat","icon","UsersIcon","bgColor","iconColor","ExclamationTriangleIcon","LockClosedIcon","readinessDataForChart","orderedStatuses","colorMap","counts","watchList","getPacingText","pacing","getPacingClass","readinessStatusColor","classes","reportLinks","href","DocumentChartBarIcon","UserGroupIcon","CalendarDaysIcon","CpuChipIcon","scope","colspan","report","viewBox","progress","Number","circumference","PI","strokeOffset","progressValue","progressColorClass","stroke","fill","cx","cy","transform","chartType","validator","chartCanvas","chartInstance","generateColor","alpha","colors","renderChart","destroy","firstUpgrader","maxMonths","reqsForLevel","totalReqsCount","monthsSinceStart","actualData","monthIndex","monthEndDate","completedCount","label","tension","val","borderDash","pointRadius","ctx","getContext","title","display","text","font","boxWidth","scales","y","x","deep","ref_key","ref","availablePositions","selectedPosition","filteredUpgraders","currentLevel","healthSummary","acc","total","blocked","behind","atRisk","readyForNext","priorityUpgraders","uniqueLevels","l","getUpgradersForLevel","getReadinessClass","printReport","print","xmlns","for","$event","pos","anonymizeData","keyMap","anonymizedPersonnel","pseudonym","anonymizedPerson","deAnonymizeText","deAnonymizedText","realName","regex","RegExp","generateIndividualReport","priorityTasks","summary","projectedCompletionDate","generateLLMReportData","relevantPersonnel","hasData","hasStatus","positionGroups","positionReports","thirtyDaysAgo","positionName","members","sortedMembers","levelA","levelB","upgraderReports","summaryPoints","reportedLevel","completedLevel","toFixed","completedLastMonthCount","reportData","anonymizedUpgraderId","currentPqsWorkingLevel","currentEventsWorkingLevel","overallStatus","reportsByLevel","reports","reportGeneratedDate","generateLlmPromptsFromData","allPrompts","reportsByPosition","positionReport","studentSummaries","flat","trackSummary","prompt","generateMonthlyReport","requirementTypeMap","personnelByTrack","trackSummaries","trackName","eventsCompletedThisMonth","pqsCompletedThisMonth","member","recentCompletions","totalEnrolled","numberBehind","m","reportDate","formatDate","Intl","DateTimeFormat","format","track","API_ENDPOINT","callGeminiApi","apiKey","fullApiEndpoint","response","fetch","method","body","contents","ok","errorBody","json","statusText","responseData","textContent","candidates","content","loadingStatus","prompts","manualResponses","finalReports","showFinalReport","geminiApiKey","buttonText","handleGenerate","newKeyMap","generatedPrompts","trackNames","responseText","processManualResponses","rawResponse","copyToClipboard","navigator","clipboard","writeText","formatReport","reportText","disabled","readonly","rows","reqsForCurrentLevel","totalRequirementCount","lastValidIndex","findLastIndex","v","lastKnownProgress","projectionDate","projectionData","projectionEndMonth","ceil","role","summaryNarrative","pacingText","summaryStats","ScaleIcon","readinessColorClass","ClockIcon","RocketLaunchIcon","ChartPieIcon","handlePrint","task","$router","back","handleDelete","confirm","syllabusExists","isOpen","emits","emit","__emit","modalId","random","substring","slots","hasFooterSlot","footer","closeModal","handleEscKey","addEventListener","removeEventListener","newValue","overflow","modalSizeClass","getUniqueValues","array","distinctLevels","$emit","fileHandlerService","dataStr","downloadAppConfig","configStr","router","isConfirmationModalOpen","pendingSyllabus","fileInput","isDragOver","triggerFileInput","click","handleFileDrop","dataTransfer","processFile","handleFileInput","target","parsedSyllabiArray","newSyllabus","handleAcceptSyllabus","resetFlow","handleEditPendingSyllabus","params","handleEditExistingSyllabus","syllabusId","handleDenySyllabus","handleDownloadSyllabi","accept","SortableIcon","iconClass","sortKey","currentSortKey","ChevronUpDownIcon","sortDirection","ChevronUpIcon","ChevronDownIcon","sortable","sortedRequirements","aValue","bValue","comparison","sortBy","editableRequirement","prerequisitesString","updatePrerequisites","immediate","save","number","placeholder","route","selectedLevel","selectedType","selectedSubType","editingRequirement","availableLevels","availableTypes","availableSubTypes","subTypes","subType","filteredRequirements","typeMatch","subTypeMatch","foundSyllabus","waiveAllFiltered","visibleIds","updatedRequirements","unwaiveAllFiltered","handleEditRequirement","cancelEditRequirement","saveRequirement","updatedRequirement","mode","calculateHoverColor","tinycolor","darken","toHexString","calculateForegroundColor","isReadable","editableConfig","updateThemeColor","newColor","colorTheme","configCopy","saveChanges","positionSetting","deadline","newlyLoadedPersonnel","uploadAttempted","tableData","handleDownloadTemplate","handleDownloadData","confirmLoad","stagedFiles","results","addFilesToStage","validFiles","test","removeFile","indexToRemove","processStagedFiles","res","multiple","question","toggle","logs","isModalOpen","logContainer","logUpdateInterval","handleDownload","formatTimestamp","isoString","toLocaleTimeString","logLevelColor","scrollToBottom","scrollTop","scrollHeight","setInterval","clearInterval","routes","path","component","DashboardView","PersonnelUploadView","TrainingUploadView","ReportsView","IndividualReportListView","TrackReportView","MonthlyReportView","LlmReportView","StudentDetailView","SettingsSyllabiView","SyllabusManagementView","AppSettingsView","SyllabusUploadConfirmation","SyllabusEditView","HelpView","LogsView","redirect","history","navigation","HomeIcon","ChartBarIcon","CogIcon","QuestionMarkCircleIcon","DocumentTextIcon","sidebarOpen","_component_router_view","as","show","enter","leave","$route","app","App","use","errorHandler","err","instance","componentName","$options","lifecycleHook","onerror","source","lineno","colno","onunhandledrejection","reason","errorMessage","globalProperties","$exportLogs","mount","mountError","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","definition","o","defineProperty","enumerable","g","globalThis","Function","prop","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}