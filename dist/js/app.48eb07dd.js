(function(){"use strict";var e={7287:function(e,t,s){var a=s(3751),l=s(810),n=s(5220),r=s(641),o=s(33),i=s(953),d=s(4213);const c="0.1.0-alpha",u=1e3;let p=[],g=!1;function m(e){if(e instanceof Error)return`Error: ${e.name} - ${e.message}\nStack: ${e.stack}`;if("object"===typeof e)try{return JSON.stringify(e,null,2)}catch(t){return"Could not stringify details object."}return String(e)}const v={init:()=>{g||(p=[],console.log(`[LOGGING] Service Initialized. Max entries: ${u}. App Version: ${c}`),g=!0)},addEntry:(e,t,s)=>{p.length>=u&&p.shift();const a={timestamp:(new Date).toISOString(),level:e,message:t,details:void 0!==s?m(s):void 0};switch(p.push(a),e){case"INFO":console.info(`[${a.timestamp}] INFO: ${t}`,s||"");break;case"WARN":console.warn(`[${a.timestamp}] WARN: ${t}`,s||"");break;case"ERROR":console.error(`[${a.timestamp}] ERROR: ${t}`,s||"");break;case"DEBUG":console.debug(`[${a.timestamp}] DEBUG: ${t}`,s||"");break}},getLogs:()=>[...p],logInfo:(e,t)=>{v.addEntry("INFO",e,t)},logWarn:(e,t)=>{v.addEntry("WARN",e,t)},logError:(e,t)=>{v.addEntry("ERROR",e,t)},logDebug:(e,t)=>{v.addEntry("DEBUG",e,t)},exportLogs:()=>{v.logInfo("Log export initiated by user.");let e="UPSHOT Application Debug Report\n";e+="================================\n",p.forEach((t=>{e+=`[${t.timestamp}] [${t.level}] ${t.message}\n`,t.details&&(e+=`  Details: ${t.details}\n`)}));const t=new Blob([e],{type:"text/plain;charset=utf-8"}),s=(new Date).toISOString().replace(/:/g,"-").replace(/\..+/,"");(0,d.saveAs)(t,`UPSHOT_Debug_Report_${s}.txt`)}},f=3e3,y=(0,l.nY)("ui",{state:()=>({notifications:[],isLoading:!1,criticalError:null,criticalErrorMessage:"",nextNotificationId:1,isGlobalLoading:!1}),actions:{setGlobalLoading(e){this.isGlobalLoading=e},addNotification(e){const t=this.nextNotificationId++,s=0===e.duration?0:e.duration||f,a=Object.assign(Object.assign({},e),{id:t,duration:s});this.notifications.push(a),v.logInfo(`UI Notification Added: ID=${t}, Type=${a.type}, Msg="${a.message}", Duration=${s}`),s>0&&setTimeout((()=>{this.removeNotification(t)}),s)},removeNotification(e){const t=this.notifications.findIndex((t=>t.id===e));-1!==t&&(this.notifications.splice(t,1),v.logDebug(`UI Notification Removed: ID ${e}`))},setLoading(e){this.isLoading!==e&&(this.isLoading=e,v.logDebug(`UI Loading State Changed: ${e}`))},setCriticalError(e,t){this.criticalError=e,this.criticalErrorMessage=t,this.isLoading=!1,v.logError("CRITICAL UI ERROR SET:",{userMessage:t,errorDetails:e})},clearCriticalError(){this.criticalError&&v.logInfo("Critical UI error cleared."),this.criticalError=null,this.criticalErrorMessage=""}}});var h=s(3959);function b(e){if(isNaN(e)||e<=0)return null;const t=new Date(864e5*(e-25569)),s=t.getUTCFullYear(),a=t.getUTCMonth(),l=t.getUTCDate();return new Date(Date.UTC(s,a,l))}function x(e){const t=new Date(Date.UTC(1899,11,30)),s=864e5,a=e.getTime()-t.getTime();return a/s}function k(e){if(!e||isNaN(e.getTime()))return"N/A";const t=e.getUTCFullYear(),s=e.getUTCMonth(),a=e.getUTCDate(),l=new Date(t,s,a);return l.toLocaleDateString(void 0,{year:"numeric",month:"2-digit",day:"2-digit"})}function L(e,t){const s=new Date(e.valueOf());return s.setUTCDate(s.getUTCDate()+t),s}function w(e,t){const s=864e5,a=Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),l=Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate());return Math.floor((l-a)/s)}function S(){const e=new Date;return new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()))}const C=["Rank","Display Name","SHARP Name","Start Date","Assigned Position","Assigned Syllabus Year","Target Qualification Level","On Waiver"];async function E(e){const t=y(),s=[];try{const t=await e.arrayBuffer(),a=h.LF(t),l=a.Sheets[a.SheetNames[0]],n=h.Wp.sheet_to_json(l);for(const e of n){const t=e["SHARP Name"],a=e["Assigned Position"];if(!t||!e["Display Name"]||!e["Start Date"]||!a)continue;const l=b(e["Start Date"]);if(!l)continue;const n={id:`${t}-${a}`,name:t,displayName:e["Display Name"],rank:e["Rank"],startDate:l,assignedPosition:a,assignedSyllabusYear:String(e["Assigned Syllabus Year"]||(new Date).getFullYear()),targetQualificationLevel:e["Target Qualification Level"]||200,onWaiver:"TRUE"===String(e["On Waiver"]).toUpperCase(),manuallyUnlockedLevels:[],rawCompletions:[],allCompletions:[]};s.push(n)}}catch(a){console.error("Error processing Personnel file:",a),t.addNotification({message:"Failed to process Personnel file.",type:"error"})}return s}function A(e){const t=e.map((e=>({Rank:e.rank,"Display Name":e.displayName,"SHARP Name":e.name,"Start Date":x(e.startDate),"Assigned Position":e.assignedPosition,"Assigned Syllabus Year":e.assignedSyllabusYear,"Target Qual Level":e.targetQualificationLevel,"On Waiver":e.onWaiver?"TRUE":"FALSE"}))),s=h.Wp.json_to_sheet(t,{header:C}),a=h.Wp.book_new();h.Wp.book_append_sheet(a,s,"Personnel");const l=h.M9(a,{bookType:"xlsx",type:"array"}),n=new Blob([l],{type:"application/octet-stream"});(0,d.saveAs)(n,`Personnel_Data_${(new Date).toISOString().slice(0,10)}.xlsx`)}function D(){const e=h.Wp.json_to_sheet([],{header:C}),t=h.Wp.book_new();h.Wp.book_append_sheet(t,e,"Personnel Roster");const s=h.M9(t,{bookType:"xlsx",type:"array"}),a=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});(0,d.saveAs)(a,"Personnel_Template.xlsx")}var _;(function(e){e["PQS"]="PQS",e["Event"]="Event",e["Board"]="Board",e["Other"]="Other"})(_||(_={}));const P="[SyllabusProcessor]";function R(e,t){const s=t.toLowerCase();for(const a in e)if(a.trim().toLowerCase()===s)return a;return null}function T(e){const t=(null===e||void 0===e?void 0:e.toUpperCase())||"";if(t.includes("BOARD"))return _.Board;const s=["PQS","FUNDAMENTAL","SYSTEM","ICW","POWERPOINT"];if(s.some((e=>t.includes(e))))return _.PQS;const a=["FLIGHT","LAB","WTT","PTT","WST","PST","ACFT GND EVENT"];return a.some((e=>t.includes(e)))?_.Event:_.Other}function I(e){const t=(null===e||void 0===e?void 0:e.trim())||"UNKNOWN";let s=(new Date).getFullYear().toString();const a=t.match(/\b(20\d{2})\b/);a&&(s=a[0]);let l="UNKNOWN";const n=t.match(/\b(PILOT|NFO|EWO|AAW|AAS)\b/i);return n&&(l=n[0].toUpperCase()),{year:s,position:l,baseName:t}}async function N(e){var t,s,a;console.log(`${P} Processing file: ${e.name}`);try{const l=await e.arrayBuffer(),n=h.LF(l,{type:"array"});if(n.SheetNames.length<3)throw new Error(`Expected at least 3 sheets, but the workbook only has ${n.SheetNames.length}.`);const r=n.Sheets["Syllabus and Stages"],o=n.Sheets["Syllabus Events"],i=n.Sheets["Default"];if(!r||!o||!i)throw new Error("One or more required sheets (Syllabus and Stages, Syllabus Events, Default) are missing.");const d=h.Wp.sheet_to_json(r,{range:2}),c=d[0]||{},u=R(c,"Syllabus Name"),p=R(c,"Syllabus Title"),g=c[u]||e.name,m=I(g),f={id:c[u]||e.name,name:c[u]||"Unknown Syllabus",displayName:c[p]||"Unknown Syllabus",position:m.position.toUpperCase(),year:m.year,baseLevel:"200",requirements:[],masterSyllabusIdentifier:null};v.logInfo(`${P} Initialized master syllabus: ${f.name}`);const y=h.Wp.sheet_to_json(o,{header:1,blankrows:!1}),b=1;if(y.length<b+2)throw new Error("'Syllabus Events' sheet is invalid. Headers are expected on Row 2, but the sheet has fewer than 3 rows of data.");const x=y[b].map((e=>e?String(e).trim():"")),k=y.slice(b+1),L=k.map((e=>{if(!e||0===e.length||e.every((e=>!e)))return null;const t={};return x.forEach(((s,a)=>{s&&(t[s]=e[a])})),t})).filter((e=>null!==e)),w=new Map;if(L.length>0){const e=L[5],s=R(e,"Long name"),a=R(e,"Short Name"),l=R(e,"Parent"),n=R(e,"Event Subtype"),r=R(e,"Prerequisites"),o=R(e,"Required");if(!s||!a)throw new Error("Could not find 'Long name' or 'Short Name' column in 'Syllabus Events' sheet.");console.log(`${P} Processing row: ${JSON.stringify(L[0])}`);for(const i of L){const e=i[a];if(!e)continue;const d=i[s]||e,c=String(i[l]).match(/\d+/),u=c?c[0]:"0",p=o&&i[o]||"";let g="X"!==p.toUpperCase();i[n].includes("ICW")&&(g=!0);const m={id:e,name:e,displayName:e,description:d,level:u,type:T(i[n]),rawSharpEventSubtype:i[n],prerequisites:(i[r]||"").split("\n").filter(Boolean).map((e=>{const t=e.split("/");if(t.length<3)return null;let s=t[t.length-1].trim();return s=s.replace(/\s*\((Event|PQS).*/i,"").trim(),s})).filter((e=>!!e)),isDefaultWaived:g};console.log(`${P} Parsed requirement: ${m.id} - ${m.description}: Level ${m.level}, Type ${m.type}, Prereqs: [${null===(t=m.prerequisites)||void 0===t?void 0:t.join()}]`),f.requirements.push(m),w.set(e,m)}}v.logInfo(`${P} Parsed ${f.requirements.length} requirements from 'Syllabus Events'.`);const S=h.Wp.sheet_to_json(i,{range:1});if(S.length>0){const e=S[0],t=R(e,"Syllabus event"),l=R(e,"Sequence");if(t&&l)for(const n of S){const e=null===(a=null===(s=n[t])||void 0===s?void 0:s.split("/").pop())||void 0===a?void 0:a.trim(),r=f.requirements.find((t=>t.name.includes(e)));r&&n[l]&&(r.sequence=parseInt(n[l],10))}}return v.logInfo(`${P} Added sequence data from 'Default' sheet.`),[f]}catch(l){return v.logError(`${P} Failed to process syllabus file.`,l),[]}}function F(){if("undefined"!==typeof window.UPSHOT_USER_SYLLABI&&Array.isArray(window.UPSHOT_USER_SYLLABI)){v.logInfo("User syllabi loaded successfully from window.UPSHOT_USER_SYLLABI.");try{return JSON.parse(JSON.stringify(window.UPSHOT_USER_SYLLABI))}catch(e){return v.logError("Error parsing user syllabi data from window.UPSHOT_USER_SYLLABI.",e),[]}}return v.logWarn("window.UPSHOT_USER_SYLLABI not found. No user syllabi loaded."),[]}const W=(0,l.nY)("syllabi",{state:()=>({allSyllabi:F(),isLoading:!1,isDirty:!1,lastLoadedSyllabiSnapshot:JSON.stringify(F()),pendingSyllabusForConfirmation:null}),getters:{getSyllabusById:e=>t=>e.allSyllabi.find((e=>e.id===t)),findSyllabus:e=>(t,s)=>e.allSyllabi.find((e=>e.position.toUpperCase().trim()===t.toUpperCase().trim()&&e.year.trim()===s.trim())),getRequirementsForSyllabus:e=>(t,s,a)=>{const l=e.allSyllabi.find((e=>e.position.toUpperCase().trim()===t.toUpperCase().trim()&&e.year.trim()===s.trim()));return l?void 0===a?l.requirements:l.requirements.filter((e=>String(e.level).trim()===a.trim())):[]},getAvailablePositions:e=>{const t=new Set(e.allSyllabi.map((e=>e.position.trim())));return Array.from(t).sort()},getAvailableYearsForPosition:e=>t=>{const s=new Set(e.allSyllabi.filter((e=>e.position.toUpperCase().trim()===t.toUpperCase().trim())).map((e=>e.year.trim())));return Array.from(s).sort(((e,t)=>t.localeCompare(e)))},getAvailableLevels:e=>(t,s)=>{const a=new Set,l=e.allSyllabi.find((e=>e.position.toUpperCase().trim()===t.toUpperCase().trim()&&e.year.trim()===s.trim()));return l&&l.requirements.forEach((e=>a.add(String(e.level).trim()))),Array.from(a).sort(((e,t)=>e.localeCompare(t,void 0,{numeric:!0})))}},actions:{setPendingSyllabus(e){this.pendingSyllabusForConfirmation=e},acceptPendingSyllabus(){this.pendingSyllabusForConfirmation&&(this.addSyllabus(this.pendingSyllabusForConfirmation),this.pendingSyllabusForConfirmation=null)},markAsDirty(){this.isDirty=!0},markAsSaved(){this.isDirty=!1,this.lastLoadedSyllabiSnapshot=JSON.stringify(this.allSyllabi)},addSyllabus(e){this.allSyllabi.push(e),this.markAsDirty()},updateSyllabus(e,t){const s=this.allSyllabi.findIndex((t=>t.id===e));-1!==s&&(this.allSyllabi[s]=t,this.markAsDirty())},removeSyllabus(e){this.allSyllabi=this.allSyllabi.filter((t=>t.id!==e)),this.markAsDirty()},async importSyllabiFromSharpExport(e){const t=y();t.addNotification({message:`Importing syllabus from "${e.name}"...`,type:"info",duration:3e3}),t.setGlobalLoading(!0),v.logInfo(`Attempting to import syllabi from SHARP export: ${e.name}`);try{const s=await N(e);if(!(s.length>0))throw new Error("Syllabus processor returned no syllabi.");this.setSyllabi(s),v.logInfo(`${s.length} syllabi successfully parsed and loaded from SHARP file: ${e.name}`),t.addNotification({message:`${s.length} syllabi imported successfully from "${e.name}". Please review and download to persist.`,type:"success",duration:7e3})}catch(s){v.logError(`Failed to import and process SHARP syllabus file: ${e.name}`,s),t.addNotification({message:"Failed to import syllabus file. See console for details.",type:"error"})}finally{t.setGlobalLoading(!1)}},downloadSyllabi(){const e="// UPSHOT User Syllabi File\nwindow.UPSHOT_USER_SYLLABI = "+JSON.stringify(this.allSyllabi,null,2)+";",t=new Blob([e],{type:"text/javascript;charset=utf-8"});(0,d.saveAs)(t,"user_syllabi.js"),this.markAsSaved()},setSyllabi(e){this.allSyllabi=e,this.markAsSaved()}}}),$={primary:{DEFAULT:"#4f46e5",hover:"#4338ca",foreground:"#ffffff"},secondary:{DEFAULT:"#e5e7eb",hover:"#d1d5db",foreground:"#111827"},accent:{DEFAULT:"#ec4899",hover:"#db2777",foreground:"#ffffff"},info:{DEFAULT:"#3b82f6",foreground:"#ffffff"},warning:{DEFAULT:"#f59e0b",foreground:"#111827"},action:{DEFAULT:"#22c55e",foreground:"#ffffff"},caution:{DEFAULT:"#ef4444",foreground:"#ffffff"}},U={squadron:"YOUR SQUADRON",departmentHead:"Dept Head Name",pilotLead:"Pilot Lead Name",nfoLead:"NFO Lead Name",aawLead:"AAW Lead Name",ewoLead:"EWO Lead Name"},M={200:{targetMonths:6,deadlineMonths:12},300:{targetMonths:10,deadlineMonths:18},400:{targetMonths:12,deadlineMonths:24}},q={200:{targetMonths:5,deadlineMonths:10},300:{targetMonths:9,deadlineMonths:16},400:{targetMonths:11,deadlineMonths:22}},O={200:{targetMonths:7,deadlineMonths:14},300:{targetMonths:8,deadlineMonths:18}},j={200:{targetMonths:6,deadlineMonths:13}," 300":{targetMonths:10,deadlineMonths:19}},X={useDerivedLevels:!0,deadlines:j},B={useDerivedLevels:!0,deadlines:O},K={useDerivedLevels:!0,deadlines:q},H={useDerivedLevels:!0,deadlines:M},G={version:1,positionSettings:{PILOT:H,NFO:K,AAW:B,EWO:X},useRoundedTrainingStartDate:!0,trainingDepartment:U,colorScheme:$};function V(e){if(null===e||"object"!==typeof e)return e;if(e instanceof Date)return new Date(e.getTime());if(Array.isArray(e))return e.map((e=>V(e)));const t={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=V(e[s]));return t}function Q(){let e=V(G);const t=window.UPSHOT_USER_APP_CONFIG;return console.log("User config from window object:",t),t&&"object"===typeof t?(v.logInfo("User application configuration found. Merging with defaults."),e=Object.assign(Object.assign({},e),t)):v.logInfo("No user configuration found. Using default application settings."),e}const Y=(0,l.nY)("appConfig",{state:()=>({config:Q(),isDirty:!1}),getters:{currentConfig:e=>e.config,getDeadlinesForPositionLevel:e=>(t,s)=>{var a;return(null===(a=e.config.positionSettings[t])||void 0===a?void 0:a.deadlines[s])||null},getPositionsWithSettings:e=>Object.keys(e.config.positionSettings)},actions:{applyColorScheme(){const e=document.documentElement;if(this.config.colorScheme)for(const[t,s]of Object.entries(this.config.colorScheme))for(const[a,l]of Object.entries(s))e.style.setProperty(`--color-${t}-${a}`,l)},updateConfig(e){this.config=Object.assign(Object.assign({},this.config),e),this.applyColorScheme(),this.isDirty=!0,v.logInfo("Application configuration updated by user.")},updateTrainingDepartmentProperty(e,t){this.config.trainingDepartment&&(this.config.trainingDepartment[e]=t,this.isDirty=!0)},updateUseRoundedTrainingStartDate(e){this.config.useRoundedTrainingStartDate=e,this.isDirty=!0},updateCurveDeadlineSetting(e,t,s){if(this.config.positionSettings[e]&&this.config.positionSettings[e].deadlines[t]){const a=this.config.positionSettings[e].deadlines[t];this.config.positionSettings[e].deadlines[t]=Object.assign(Object.assign({},a),s),this.isDirty=!0}},resetToDefaults(){this.config=V(G),this.isDirty=!0,v.logInfo("Configuration has been reset to defaults."),y().addNotification({message:"Configuration reset to defaults. Download to save these changes.",type:"info"})},downloadCurrentConfig(){try{const e=JSON.stringify(this.config,null,2),t=`// UPSHOT User Configuration File\n// Place this file in a 'config' folder next to your index.html file.\nwindow.UPSHOT_USER_APP_CONFIG = ${e};`,s=new Blob([t],{type:"application/javascript;charset=utf-8"});(0,d.saveAs)(s,"user_config.js"),this.isDirty=!1,v.logInfo("Configuration downloaded successfully.")}catch(e){v.logError("Error downloading application configuration:",e),y().addNotification({message:"Failed to download configuration file.",type:"error"})}}}});var z;function J(e,t){if(!e.prerequisites||0===e.prerequisites.length)return!0;const s=new Set(t.rawCompletions.map((e=>e.event.toUpperCase())));return e.prerequisites.every((e=>s.has(e.toUpperCase())))}function Z(e,t){var s;const a=t.rawCompletions.find((t=>t.event.toUpperCase()===e.name.toUpperCase()));return!!(null===(s=null===a||void 0===a?void 0:a.status)||void 0===s?void 0:s.toUpperCase().includes("WAIVED"))||!(!t.onWaiver||!e.isDefaultWaived)}function ee(e,t){if(!e||!(null===t||void 0===t?void 0:t.requirements))return[];const s=new Set(e.rawCompletions.map((e=>e.event.toUpperCase())));return t.requirements.filter((t=>{const a=Z(t,e),l=s.has(t.name.toUpperCase());return!a&&!l}))}function te(e,t,s){var a,l,n,r,o;const i=!0===(null===(a=s.positionSettings[e.assignedPosition])||void 0===a?void 0:a.useDerivedLevels);if(!i)return e.derivedPqsWorkingLevel=String(e.targetQualificationLevel).trim(),void(e.derivedEventsWorkingLevel=String(e.targetQualificationLevel).trim());const d=new Set(e.rawCompletions.map((e=>e.event.toUpperCase()))),c=Array.from(new Set(t.requirements.map((e=>String(e.level).trim())))).sort(((e,t)=>e.localeCompare(t,void 0,{numeric:!0})));let u="0";for(const v of c){const s=parseInt(v)<400||(null===(l=e.manuallyUnlockedLevels)||void 0===l?void 0:l.includes(parseInt(v)));if(!s)continue;const a=t.requirements.filter((t=>String(t.level).trim()===v&&t.type===_.PQS&&!Z(t,e))),i=a.length>0&&a.every((e=>d.has(e.name.toUpperCase()))),c=null===(o=null===(r=null===(n=e.actcLevelData)||void 0===n?void 0:n[v])||void 0===r?void 0:r.status)||void 0===o?void 0:o.toUpperCase(),p="COMPLETE"===c||"ACTIVE"===c;(i||p)&&(u=v)}const p=c.indexOf(u)+1,g=p<c.length?c[p]:u;let m="0"!==u?g:String(t.baseLevel).trim();parseInt(m)>=400&&(m=u),e.derivedPqsWorkingLevel=m,e.derivedEventsWorkingLevel=m}function se(e,t){var s;const a=new Set(e.rawCompletions.map((e=>e.event.toUpperCase()))),l=(null===(s=e.derivedPqsWorkingLevel)||void 0===s?void 0:s.trim())||String(t.baseLevel).trim(),n=t.requirements.filter((t=>String(t.level).trim()===l&&!Z(t,e))),r=n.filter((e=>e.type===_.PQS));if(r.length>0){const t=r.filter((e=>a.has(e.name.toUpperCase()))).reduce(((e,t)=>e+(t.difficulty||1)),0),s=r.reduce(((e,t)=>e+(t.difficulty||1)),0);e.pqsProgressPercentage=s>0?t/s*100:100}else e.pqsProgressPercentage=100;const o=n.filter((e=>e.type===_.Event));if(o.length>0){const t=o.filter((e=>a.has(e.name.toUpperCase()))).reduce(((e,t)=>e+(t.difficulty||1)),0),s=o.reduce(((e,t)=>e+(t.difficulty||1)),0);e.eventsProgressPercentage=s>0?t/s*100:100}else e.eventsProgressPercentage=100}function ae(e,t,s){var a;const l=[],n=s.positionSettings[e.assignedPosition];if(!n)return 0;for(const r of e.rawCompletions){const s=t.requirements.find((e=>e.name.toUpperCase()===r.event.toUpperCase()));if(!s)continue;const o=null===(a=n.deadlines[s.level])||void 0===a?void 0:a.targetMonths;if(null==o)continue;const i=L(e.startDate,30.44*o),d=w(r.date,i);l.push(d)}return 0===l.length?0:Math.round(l.reduce(((e,t)=>e+t),0)/l.length)}function le(e,t,s){var a,l;const n=e.assignedPosition,r=e.derivedPqsWorkingLevel||t.baseLevel,o=(null===(l=null===(a=s.positionSettings[n])||void 0===a?void 0:a.deadlines[r])||void 0===l?void 0:l.deadlineMonths)||0;if(0===o)return 0;let i=L(e.startDate,30.44*o);e.onWaiver&&(i=L(i,90));const d=w(e.startDate,i),c=w(e.startDate,S());if(d<=0||c<0)return 0;const u=Math.min(c/d,1),p=t.requirements.filter((t=>!Z(t,e))).length,g=p*u,m=e.rawCompletions.length,v=m-g,f=d>0?p/d:0;return f>0?Math.round(v/f):0}function ne(e,t,s){e.pacingAgainstTargetDays=e.onWaiver?void 0:ae(e,t,s),e.pacingAgainstDeadlineDays=le(e,t,s)}function re(e,t,s){var a,l;const n=S(),r=3,o=a=>{var l,n;const o=e.rawCompletions.map((e=>Object.assign(Object.assign({},e),{req:t.requirements.find((t=>t.name.toUpperCase()===e.event.toUpperCase()))}))).filter((e=>{var t;return(null===(t=e.req)||void 0===t?void 0:t.type)===a})).sort(((e,t)=>e.date.getTime()-t.date.getTime()));if(o.length>=r){const e=w(o[0].date,o[o.length-1].date);if(e>0){const t=o.reduce(((e,t)=>{var s;return e+((null===(s=t.req)||void 0===s?void 0:s.difficulty)||1)}),0);return t/e}}const i=t.requirements.filter((e=>e.type===a&&!e.isDefaultWaived)),d=i.reduce(((e,t)=>e+(t.difficulty||1)),0),c=(null===(n=null===(l=s.positionSettings[e.assignedPosition])||void 0===l?void 0:l.deadlines[t.baseLevel])||void 0===n?void 0:n.targetMonths)||12,u=30.44*c;return u>0?d/u:.1},i=o(_.PQS),d=o(_.Event),c=ee(e,t),u=c.filter((e=>e.type===_.PQS)).reduce(((e,t)=>e+(t.difficulty||1)),0);e.projectedPqsCompletionDate=i>0?L(n,u/i):void 0;const p=c.filter((e=>e.type===_.Event||e.type===_.Board)).reduce(((e,t)=>e+(t.difficulty||1)),0);e.projectedEventsCompletionDate=d>0?L(n,p/d):void 0;const g=(null===(a=e.projectedPqsCompletionDate)||void 0===a?void 0:a.getTime())||0,m=(null===(l=e.projectedEventsCompletionDate)||void 0===l?void 0:l.getTime())||0;e.projectedTotalCompletionDate=g>0||m>0?new Date(Math.max(g,m)):void 0}function oe(e){return null==e?z.Unknown:e<-30?z.BehindSchedule:e<0?z.AtRisk:z.OnTrack}function ie(e,t){const s=ee(e,t);if(s.length>0&&s.every((t=>!J(t,e))))return e.readinessAgainstTarget=z.Blocked,void(e.readinessAgainstDeadline=z.Blocked);const a=parseInt(e.derivedPqsWorkingLevel||"0");if(a>e.targetQualificationLevel)return e.readinessAgainstTarget=z.ReadyForNextLevel,void(e.readinessAgainstDeadline=z.ReadyForNextLevel);e.readinessAgainstTarget=oe(e.pacingAgainstTargetDays),e.readinessAgainstDeadline=oe(e.pacingAgainstDeadlineDays)}function de(e,t){const s=ee(e,t),a=e.derivedPqsWorkingLevel||t.baseLevel,l=s.filter((e=>String(e.level)===a)),n=new Map;t.requirements.forEach((e=>{var t;return null===(t=e.prerequisites)||void 0===t?void 0:t.forEach((e=>n.set(e,(n.get(e)||0)+1)))}));const r=l.map((t=>{let s=0;const a=J(t,e);return a&&(s+=1e3),s+=50*(n.get(t.name)||0),t.sequence&&(s+=100-t.sequence),Object.assign(Object.assign({},t),{priorityScore:s,isAvailable:a,unlocks:n.get(t.name)||0})}));return r.sort(((e,t)=>t.priorityScore-e.priorityScore))}function ce(e,t){const s=e.map((e=>{let s=0;e.pacingAgainstDeadlineDays&&e.pacingAgainstDeadlineDays<0&&(s+=Math.abs(e.pacingAgainstDeadlineDays));const a=ee(e,t);return a.length>0&&a.every((t=>!J(t,e)))&&(s+=1e3),Object.assign(Object.assign({},e),{priorityScore:s})}));return s.sort(((e,t)=>t.priorityScore-e.priorityScore))}(function(e){e["ReadyForNextLevel"]="Ready for Next Level",e["OnTrack"]="On Track",e["AtRisk"]="At Risk",e["BehindSchedule"]="Behind Schedule",e["Blocked"]="Blocked",e["Unknown"]="Unknown"})(z||(z={}));const ue=(0,l.nY)("personnel",{state:()=>({allPersonnel:[],personnelMap:new Map,isDirty:!1,isDataLoaded:!1}),getters:{getPersonnelById:e=>t=>{const s=t?t.trim():"";return e.allPersonnel.find((e=>e.id.trim()===s))},getUpgraderByName:e=>t=>{if(!t)return;const s=t.trim().toUpperCase();return e.allPersonnel.find((e=>e.name.trim().toUpperCase()===s))},allPersonnelSortedByName:e=>[...e.allPersonnel].sort(((e,t)=>e.name.localeCompare(t.name)))},actions:{async loadPersonnelFromFile(e){const t=y();t.setGlobalLoading(!0);try{const s=await E(e);this.setPersonnel(s),s.length>0?t.addNotification({message:`Successfully loaded ${s.length} personnel records.`,type:"success"}):t.addNotification({message:"Processed file, but no personnel records were found.",type:"warning"})}catch(s){console.error("Failed to process personnel file:",s),t.addNotification({message:"An error occurred while processing the personnel file.",type:"error"})}finally{t.setGlobalLoading(!1)}},setPersonnel(e){this.allPersonnel=e,this.personnelMap=new Map(e.map((e=>[e.id,e]))),this.isDataLoaded=e.length>0},updatePersonnel(e){const t=this.allPersonnel.findIndex((t=>t.id===e.id));-1!==t&&(this.allPersonnel[t]=e)},addCompletionsToUpgrader(e,t){const s=this.getPersonnelById(e);if(!s)return void console.error(`Could not find upgrader with ID ${e} to add completions.`);const a=JSON.parse(JSON.stringify(s));a.startDate=new Date(a.startDate),Array.isArray(a.rawCompletions)&&a.rawCompletions.forEach((e=>{e.date=new Date(e.date)})),Array.isArray(a.allCompletions)&&a.allCompletions.forEach((e=>{e.completionDate=new Date(e.completionDate)}));const l=t.map((e=>{var t;return{event:e.requirementId,date:e.completionDate,grade:null!==(t=e.grade)&&void 0!==t?t:void 0}}));a.rawCompletions.push(...l);const n=W(),r=Y(),o=n.findSyllabus(a.assignedPosition,a.assignedSyllabusYear);o&&(se(a,o),te(a,o,r.currentConfig),ne(a,o,r.currentConfig),re(a,o,r.currentConfig),ie(a,o),this.updatePersonnel(a))}}});function pe(e){if(!e)return null;const t=e.match(/\b([A-Z]{3})\b/);return t?t[1]:null}async function ge(e){var t,s,a;const l=y(),n=new Map;let r=null;try{const l=await e.arrayBuffer(),o=h.LF(l,{type:"array"}),i={},d=["Date Received","Instructor","Grade","Status"];for(const e of d){const t=o.Sheets[e];if(!t)throw new Error(`Required sheet "${e}" not found.`);i[e]=h.Wp.sheet_to_json(t,{header:1,raw:!1})}const c=i["Date Received"],u=c.findIndex((e=>e.some((e=>"string"===typeof e&&e.toUpperCase().includes("NAME")))));if(-1===u)throw new Error("Could not locate header row.");const p=c[u],g=p.findIndex((e=>"string"===typeof e&&e.toUpperCase().includes("NAME"))),m=u+1,v=p[g+1]||"Unknown PQS Version";r=pe(v);const f=new Map;f.set(g+1,{type:"pqs"}),p.forEach(((e,t)=>{if("string"===typeof e){const s=e.match(/Level\s*(\d{3})/i);s&&s[1]&&f.set(t,{type:"actc",level:parseInt(s[1],10)})}}));for(let e=m;e<c.length;e++){const l=i["Date Received"][e][g];if(!l)continue;const r={nameFromSharpFile:l,pqsVersionName:v,completions:[],actcLevelStatuses:new Map};for(let n=g+1;n<p.length;n++){const l=p[n];if(!l)continue;if(f.has(n)){const t=f.get(n);if("actc"===t.type&&t.level){const s=i["Status"][e][n]||"Not Started";r.actcLevelStatuses.set(t.level,s);continue}}const o=i["Date Received"][e][n];let d=null;if(null!=o&&""!==o)if("number"===typeof o)d=b(o);else if("string"===typeof o){const e=new Date(o);isNaN(e.getTime())||(d=e)}else o instanceof Date&&!isNaN(o.getTime())&&(d=o);d&&r.completions.push({event:l,date:d,instructor:(null===(t=i["Instructor"][e])||void 0===t?void 0:t[n])||void 0,grade:(null===(s=i["Grade"][e])||void 0===s?void 0:s[n])||void 0,status:(null===(a=i["Status"][e])||void 0===a?void 0:a[n])||void 0})}n.set(l,r)}}catch(o){return console.error("Error processing SHARP Training File:",o),l.addNotification({message:"An error occurred processing the SHARP file.",type:"error"}),{detectedTrack:null,data:new Map}}return{detectedTrack:r,data:n}}const me="[ProgressStore]",ve=(0,l.nY)("progress",{state:()=>({pendingSharpData:null,detectedTrack:null,lastMergedUpgraderIds:[]}),actions:{async loadAndProcessSharpFile(e){const t=y();if(this.pendingSharpData=null,this.detectedTrack=null,ue().isDataLoaded&&0!==W().allSyllabi.length){t.setGlobalLoading(!0);try{const{detectedTrack:s,data:a}=await ge(e);a.size>0?(this.pendingSharpData=a,this.detectedTrack=s):t.addNotification({message:"SHARP file processed, but no data was found.",type:"warning"})}catch(s){console.error("Error processing SHARP file:",s),t.addNotification({message:"An error occurred during SHARP file processing.",type:"error"})}finally{t.setGlobalLoading(!1)}}else t.addNotification({message:"Please load Personnel and Syllabi data first.",type:"warning"})},confirmAndMergeSharpData(){},async processAndMergeMultipleFiles(e){const t=ue(),s=y();let a=0;const l=new Set;v.logInfo(`${me} Starting batch processing of ${e.length} files.`);for(const r of e)try{const{data:e}=await ge(r);e.size>0&&e.forEach(((e,s)=>{const n=t.getUpgraderByName(s);if(n){l.add(n.id);const s=e.completions.map((e=>({requirementId:e.event,completionDate:e.date,grade:e.grade})));t.addCompletionsToUpgrader(n.id,s),a+=s.length}}))}catch(n){v.logError(`${me} Failed to process file ${r.name} in batch.`,n),s.addNotification({message:`Failed to process ${r.name}: ${n.message}`,type:"error"})}return this.lastMergedUpgraderIds=Array.from(l),v.logInfo(`${me} Batch processing complete. Merged ${a} records for ${l.size} personnel.`),{completionsFound:a,personnelUpdated:l.size}},cancelSharpDataMerge(){this.pendingSharpData=null,this.detectedTrack=null}}});var fe=s(7e3),ye=s(9183),he=s(8133),be=s(5133),xe=s(6582),ke=s(1123),Le=s(3737);const we={class:"p-4 sm:p-6 lg:p-8 bg-gray-100 min-h-full"},Se={class:"mt-8"},Ce={class:"mt-4","aria-hidden":"true"},Ee={class:"overflow-hidden rounded-full bg-gray-200"},Ae={class:"mt-2 hidden grid-cols-3 text-sm font-medium text-gray-600 sm:grid"},De={class:"mt-6 grid grid-cols-1 gap-8 lg:grid-cols-3"},_e={class:"overflow-hidden rounded-lg bg-white shadow"},Pe={class:"p-5"},Re={class:"flex items-center"},Te={class:"flex-shrink-0"},Ie={key:0,class:"flex-shrink-0"},Ne={class:"bg-gray-50 px-5 py-3"},Fe={class:"text-sm"},We={class:"overflow-hidden rounded-lg bg-white shadow"},$e={class:"p-5"},Ue={class:"flex items-center"},Me={class:"flex-shrink-0"},qe={class:"ml-4 w-0 flex-1"},Oe={key:0,class:"flex-shrink-0"},je={class:"text-sm"},Xe={key:1,class:"font-medium text-gray-500"},Be={class:"overflow-hidden rounded-lg bg-white shadow"},Ke={class:"p-5"},He={class:"flex items-center"},Ge={class:"flex-shrink-0"},Ve={class:"ml-4 w-0 flex-1"},Qe={class:"text-sm"},Ye={key:1,class:"font-medium text-gray-500"},ze={class:"mt-10"},Je={class:"mt-4 grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"},Ze={class:"flex-shrink-0 p-3 bg-green-500 rounded-lg"},et={class:"flex-shrink-0 p-3 bg-teal-500 rounded-lg"},tt={class:"flex-shrink-0 p-3 bg-purple-500 rounded-lg"},st={class:"flex-shrink-0 p-3 bg-blue-500 rounded-lg"};var at=(0,r.pM)({__name:"DashboardView",setup(e){const t=ue(),s=ve(),a=(0,r.EW)((()=>t.isDataLoaded)),l=(0,r.EW)((()=>s.lastMergedUpgraderIds.length>0)),n=(0,r.EW)((()=>a.value&&l.value)),d=(0,r.EW)((()=>n.value?100:a.value?50:10));return(e,t)=>{const s=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",we,[t[15]||(t[15]=(0,r.Lk)("div",{class:"md:flex md:items-center md:justify-between"},[(0,r.Lk)("div",{class:"min-w-0 flex-1"},[(0,r.Lk)("h1",{class:"text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight"}," Welcome to UPSHOT "),(0,r.Lk)("p",{class:"mt-1 text-sm text-gray-500"}," Your squadron's training analysis and reporting dashboard. ")])],-1)),(0,r.Lk)("div",Se,[(0,r.Lk)("div",null,[t[2]||(t[2]=(0,r.Lk)("h2",{class:"text-lg font-medium text-gray-900"},"Getting Started",-1)),t[3]||(t[3]=(0,r.Lk)("p",{class:"mt-1 text-sm text-gray-500"}," Follow these steps to load your data and generate reports. ",-1)),(0,r.Lk)("div",Ce,[(0,r.Lk)("div",Ee,[(0,r.Lk)("div",{class:"h-2 rounded-full bg-indigo-600",style:(0,o.Tr)({width:d.value+"%"})},null,4)]),(0,r.Lk)("div",Ae,[t[1]||(t[1]=(0,r.Lk)("div",{class:"text-indigo-600"},"Load Personnel",-1)),(0,r.Lk)("div",{class:(0,o.C4)([a.value?"text-indigo-600":"text-gray-500","text-center"])}," Load Training Data ",2),(0,r.Lk)("div",{class:(0,o.C4)([n.value?"text-indigo-600":"text-gray-500","text-right"])}," Analyze & Report ",2)])])]),(0,r.Lk)("div",De,[(0,r.Lk)("div",_e,[(0,r.Lk)("div",Pe,[(0,r.Lk)("div",Re,[(0,r.Lk)("div",Te,[(0,r.bF)((0,i.R1)(fe.A),{class:"h-6 w-6 text-gray-400","aria-hidden":"true"})]),t[5]||(t[5]=(0,r.Lk)("div",{class:"ml-4 w-0 flex-1"},[(0,r.Lk)("dl",null,[(0,r.Lk)("dt",{class:"truncate text-sm font-medium text-gray-500"}," Step 1 "),(0,r.Lk)("dd",null,[(0,r.Lk)("div",{class:"text-lg font-medium text-gray-900"}," Load Personnel ")])])],-1)),a.value?((0,r.uX)(),(0,r.CE)("div",Ie,t[4]||(t[4]=[(0,r.Lk)("span",{class:"inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800"},"Complete",-1)]))):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",Ne,[(0,r.Lk)("div",Fe,[(0,r.bF)(s,{to:"/personnel-upload",class:"font-medium text-indigo-700 hover:text-indigo-900"},{default:(0,r.k6)((()=>[(0,r.eW)((0,o.v_)(a.value?"View or Reload Roster":"Go to Personnel Upload")+" ",1),t[6]||(t[6]=(0,r.Lk)("span",{"aria-hidden":"true"}," →",-1))])),_:1,__:[6]})])])]),(0,r.Lk)("div",We,[(0,r.Lk)("div",$e,[(0,r.Lk)("div",Ue,[(0,r.Lk)("div",Me,[(0,r.bF)((0,i.R1)(ye.A),{class:(0,o.C4)(["h-6 w-6",a.value?"text-gray-400":"text-gray-300"]),"aria-hidden":"true"},null,8,["class"])]),(0,r.Lk)("div",qe,[(0,r.Lk)("dl",null,[(0,r.Lk)("dt",{class:(0,o.C4)(["truncate text-sm font-medium",a.value?"text-gray-500":"text-gray-400"])}," Step 2 ",2),(0,r.Lk)("dd",null,[(0,r.Lk)("div",{class:(0,o.C4)(["text-lg font-medium",a.value?"text-gray-900":"text-gray-500"])}," Load Training Data ",2)])])]),l.value?((0,r.uX)(),(0,r.CE)("div",Oe,t[7]||(t[7]=[(0,r.Lk)("span",{class:"inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800"},"Complete",-1)]))):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",{class:(0,o.C4)(["px-5 py-3",a.value?"bg-gray-50":"bg-gray-200"])},[(0,r.Lk)("div",je,[a.value?((0,r.uX)(),(0,r.Wv)(s,{key:0,to:"/training-upload",class:"font-medium text-indigo-700 hover:text-indigo-900"},{default:(0,r.k6)((()=>[(0,r.eW)((0,o.v_)(l.value?"Load More Data":"Go to Training Upload")+" ",1),t[8]||(t[8]=(0,r.Lk)("span",{"aria-hidden":"true"}," →",-1))])),_:1,__:[8]})):((0,r.uX)(),(0,r.CE)("span",Xe,"Personnel data required"))])],2)]),(0,r.Lk)("div",Be,[(0,r.Lk)("div",Ke,[(0,r.Lk)("div",He,[(0,r.Lk)("div",Ge,[(0,r.bF)((0,i.R1)(he.A),{class:(0,o.C4)(["h-6 w-6",n.value?"text-gray-400":"text-gray-300"]),"aria-hidden":"true"},null,8,["class"])]),(0,r.Lk)("div",Ve,[(0,r.Lk)("dl",null,[(0,r.Lk)("dt",{class:(0,o.C4)(["truncate text-sm font-medium",n.value?"text-gray-500":"text-gray-400"])}," Step 3 ",2),(0,r.Lk)("dd",null,[(0,r.Lk)("div",{class:(0,o.C4)(["text-lg font-medium",n.value?"text-gray-900":"text-gray-500"])}," Analyze & Report ",2)])])])])]),(0,r.Lk)("div",{class:(0,o.C4)(["px-5 py-3",n.value?"bg-gray-50":"bg-gray-200"])},[(0,r.Lk)("div",Qe,[n.value?((0,r.uX)(),(0,r.Wv)(s,{key:0,to:"/reports",class:"font-medium text-indigo-700 hover:text-indigo-900"},{default:(0,r.k6)((()=>t[9]||(t[9]=[(0,r.eW)(" View Reports "),(0,r.Lk)("span",{"aria-hidden":"true"}," →",-1)]))),_:1,__:[9]})):((0,r.uX)(),(0,r.CE)("span",Ye,"All data required"))])],2)])]),(0,r.Lk)("div",ze,[t[14]||(t[14]=(0,r.Lk)("h2",{class:"text-lg font-medium text-gray-900"},"Quick Access",-1)),(0,r.Lk)("div",Je,[(0,r.Lk)("div",{onClick:t[0]||(t[0]=(...e)=>(0,i.R1)(D)&&(0,i.R1)(D)(...e)),class:"group flex items-center p-4 bg-white rounded-lg shadow hover:shadow-md transition-shadow cursor-pointer"},[(0,r.Lk)("div",Ze,[(0,r.bF)((0,i.R1)(be.A),{class:"h-6 w-6 text-white"})]),t[10]||(t[10]=(0,r.Lk)("div",{class:"ml-4"},[(0,r.Lk)("p",{class:"text-sm font-medium text-gray-900"}," Personnel Template "),(0,r.Lk)("p",{class:"text-sm text-gray-500"},"Download Excel template")],-1))]),(0,r.bF)(s,{to:"/syllabi",class:"group flex items-center p-4 bg-white rounded-lg shadow hover:shadow-md transition-shadow"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",et,[(0,r.bF)((0,i.R1)(xe.A),{class:"h-6 w-6 text-white"})]),t[11]||(t[11]=(0,r.Lk)("div",{class:"ml-4"},[(0,r.Lk)("p",{class:"text-sm font-medium text-gray-900"}," Syllabus Management "),(0,r.Lk)("p",{class:"text-sm text-gray-500"},"View and edit syllabi")],-1))])),_:1,__:[11]}),(0,r.bF)(s,{to:"/settings",class:"group flex items-center p-4 bg-white rounded-lg shadow hover:shadow-md transition-shadow"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",tt,[(0,r.bF)((0,i.R1)(ke.A),{class:"h-6 w-6 text-white"})]),t[12]||(t[12]=(0,r.Lk)("div",{class:"ml-4"},[(0,r.Lk)("p",{class:"text-sm font-medium text-gray-900"},"Settings"),(0,r.Lk)("p",{class:"text-sm text-gray-500"},"Configure app options")],-1))])),_:1,__:[12]}),(0,r.bF)(s,{to:"/help",class:"group flex items-center p-4 bg-white rounded-lg shadow hover:shadow-md transition-shadow"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",st,[(0,r.bF)((0,i.R1)(Le.A),{class:"h-6 w-6 text-white"})]),t[13]||(t[13]=(0,r.Lk)("div",{class:"ml-4"},[(0,r.Lk)("p",{class:"text-sm font-medium text-gray-900"}," Help & Documentation "),(0,r.Lk)("p",{class:"text-sm text-gray-500"},"Read the guide")],-1))])),_:1,__:[13]})])])])])}}});const lt=at;var nt=lt,rt=s(1037),ot=s(7539),it=s(2468),dt=s(9530),ct=s(4605),ut=s(9420),pt=s(3468),gt=s(4527);const mt={class:"p-4 sm:p-6 lg:p-8 bg-gray-50 min-h-full"},vt={class:"mt-8"},ft={class:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3"},yt={class:"text-sm font-medium text-gray-500 truncate"},ht={class:"mt-1 text-3xl font-semibold text-gray-900"},bt={class:"mt-8 grid grid-cols-1 gap-8 lg:grid-cols-3"},xt={class:"lg:col-span-2 space-y-8"},kt={class:"bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow"},Lt={class:"overflow-x-auto"},wt={class:"min-w-full divide-y divide-gray-200"},St={class:"divide-y divide-gray-200 bg-white"},Ct={key:0},Et={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},At={class:"px-6 py-4 whitespace-nowrap text-sm"},Dt={class:"lg:col-span-1 space-y-8"},_t={class:"bg-white p-5 rounded-xl shadow-sm hover:shadow-md transition-shadow"},Pt={class:"mt-4 h-80 flex items-center justify-center"},Rt={key:1,class:"text-sm text-gray-500"},Tt={class:"space-y-4"},It={class:"flex items-center"},Nt={class:"ml-4"},Ft={class:"text-base font-semibold text-gray-900"},Wt={class:"text-sm text-gray-500"};var $t=(0,r.pM)({__name:"ReportsView",setup(e){pt.t1.register(pt.Bs,pt.m_,pt.s$);const t={name:"ReadinessDonutChart",components:{Doughnut:gt.nu},props:{chartData:{type:Object,required:!0}},setup(e){const t=(0,r.EW)((()=>({labels:e.chartData.labels,datasets:[{backgroundColor:e.chartData.backgroundColors,data:e.chartData.data,borderWidth:2,borderColor:"#fff"}]}))),s={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}}};return()=>(0,r.h)(gt.nu,{data:t.value,options:s})}},s=ue(),a=(0,r.EW)((()=>s.isDataLoaded)),l=(0,r.EW)((()=>[{name:"Total Personnel",stat:s.allPersonnel.length,icon:fe.A,bgColor:"bg-blue-100",iconColor:"text-blue-600"},{name:"At Risk or Behind",stat:s.allPersonnel.filter((e=>[z.AtRisk,z.BehindSchedule].includes(e.readinessAgainstDeadline))).length,icon:rt.A,bgColor:"bg-yellow-100",iconColor:"text-yellow-600"},{name:"Blocked",stat:s.allPersonnel.filter((e=>e.readinessAgainstDeadline===z.Blocked)).length,icon:ot.A,bgColor:"bg-red-100",iconColor:"text-red-600"}])),n=(0,r.EW)((()=>{const e=[z.OnTrack,z.AtRisk,z.BehindSchedule,z.Blocked,z.ReadyForNextLevel,z.Unknown],t={[z.OnTrack]:"#10B981",[z.AtRisk]:"#F59E0B",[z.BehindSchedule]:"#EF4444",[z.Blocked]:"#6B7280",[z.ReadyForNextLevel]:"#3B82F6",[z.Unknown]:"#A78BFA"},a=new Map;e.forEach((e=>a.set(e,0))),s.allPersonnel.forEach((e=>{const t=e.readinessAgainstDeadline||z.Unknown;a.has(t)&&a.set(t,a.get(t)+1)}));const l=[],n=[],r=[];return e.forEach((e=>{(a.get(e)||0)>0&&(l.push(e),n.push(a.get(e)||0),r.push(t[e]))})),{labels:l,data:n,backgroundColors:r}})),i=(0,r.EW)((()=>s.allPersonnel.filter((e=>e.readinessAgainstDeadline&&[z.AtRisk,z.BehindSchedule,z.Blocked].includes(e.readinessAgainstDeadline))).sort(((e,t)=>{var s,a;return(null!==(s=e.pacingAgainstDeadlineDays)&&void 0!==s?s:0)-(null!==(a=t.pacingAgainstDeadlineDays)&&void 0!==a?a:0)})).slice(0,5))),d=e=>void 0===e||null===e?"N/A":e>=0?`${e}d Ahead`:`${Math.abs(e)}d Behind`,c=e=>void 0===e||null===e?"text-gray-500":e<0?"text-red-600":"text-green-600",u=e=>{const t={[z.OnTrack]:"bg-green-100 text-green-800",[z.ReadyForNextLevel]:"bg-blue-100 text-blue-800",[z.AtRisk]:"bg-yellow-100 text-yellow-800",[z.BehindSchedule]:"bg-red-100 text-red-800",[z.Blocked]:"bg-gray-200 text-gray-800"};return t[e||z.Unknown]||"bg-gray-100 text-gray-800"},p=[{name:"Individual Reports",description:"View detailed progress for each student.",href:"/reports/individual",icon:it.A,color:"bg-blue-500"},{name:"Track Reports",description:"Compare progress across a specific track.",href:"/reports/track",icon:dt.A,color:"bg-purple-500"},{name:"Monthly Report",description:"Generate a summary of training activity.",href:"/reports/monthly",icon:ct.A,color:"bg-green-500"},{name:"LLM Report Generation",description:"Use AI to generate narrative reports.",href:"/reports/llm",icon:ut.A,color:"bg-rose-500"}];return(e,s)=>{const g=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",mt,[s[6]||(s[6]=(0,r.Lk)("div",null,[(0,r.Lk)("h1",{class:"text-3xl font-bold text-gray-900"},"Reports Dashboard"),(0,r.Lk)("p",{class:"mt-2 text-sm text-gray-600"}," High-level overview of personnel training status and readiness. ")],-1)),(0,r.Lk)("div",vt,[s[0]||(s[0]=(0,r.Lk)("h2",{class:"text-lg font-medium text-gray-900 sr-only"},"At a Glance",-1)),(0,r.Lk)("div",ft,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.value,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.name,class:"bg-white p-5 rounded-xl shadow-sm flex items-center space-x-4 hover:shadow-md transition-shadow"},[(0,r.Lk)("div",{class:(0,o.C4)(["flex-shrink-0 p-3 rounded-full",e.bgColor])},[((0,r.uX)(),(0,r.Wv)((0,r.$y)(e.icon),{class:(0,o.C4)(["h-6 w-6",e.iconColor]),"aria-hidden":"true"},null,8,["class"]))],2),(0,r.Lk)("div",null,[(0,r.Lk)("p",yt,(0,o.v_)(e.name),1),(0,r.Lk)("p",ht,(0,o.v_)(e.stat),1)])])))),128))])]),(0,r.Lk)("div",bt,[(0,r.Lk)("div",xt,[(0,r.Lk)("div",kt,[s[3]||(s[3]=(0,r.Lk)("div",{class:"p-5"},[(0,r.Lk)("h2",{class:"text-xl font-semibold text-gray-900"},"Watch List"),(0,r.Lk)("p",{class:"mt-1 text-sm text-gray-500"}," Upgraders who are at risk, behind, or blocked, sorted by urgency. ")],-1)),(0,r.Lk)("div",Lt,[(0,r.Lk)("table",wt,[s[2]||(s[2]=(0,r.Lk)("thead",{class:"bg-gray-50"},[(0,r.Lk)("tr",null,[(0,r.Lk)("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Name "),(0,r.Lk)("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Pacing "),(0,r.Lk)("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Status ")])],-1)),(0,r.Lk)("tbody",St,[0===i.value.length?((0,r.uX)(),(0,r.CE)("tr",Ct,s[1]||(s[1]=[(0,r.Lk)("td",{colspan:"3",class:"px-6 py-10 text-center text-sm text-gray-500"}," All personnel are on track. Great job! ",-1)]))):(0,r.Q3)("",!0),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.value,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id,class:"hover:bg-gray-50"},[(0,r.Lk)("td",Et,(0,o.v_)(e.displayName),1),(0,r.Lk)("td",{class:(0,o.C4)(["px-6 py-4 whitespace-nowrap text-sm font-semibold",c(e.pacingAgainstDeadlineDays)])},(0,o.v_)(d(e.pacingAgainstDeadlineDays)),3),(0,r.Lk)("td",At,[(0,r.Lk)("span",{class:(0,o.C4)(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",u(e.readinessAgainstDeadline)])},(0,o.v_)(e.readinessAgainstDeadline),3)])])))),128))])])])])]),(0,r.Lk)("div",Dt,[(0,r.Lk)("div",_t,[s[4]||(s[4]=(0,r.Lk)("h2",{class:"text-xl font-semibold text-gray-900"}," Squadron Readiness ",-1)),(0,r.Lk)("div",Pt,[a.value?((0,r.uX)(),(0,r.Wv)(t,{key:0,chartData:n.value},null,8,["chartData"])):((0,r.uX)(),(0,r.CE)("p",Rt," Load personnel data to view chart. "))])]),(0,r.Lk)("div",Tt,[s[5]||(s[5]=(0,r.Lk)("h2",{class:"text-xl font-semibold text-gray-900 px-1"}," Available Reports ",-1)),((0,r.uX)(),(0,r.CE)(r.FK,null,(0,r.pI)(p,(e=>(0,r.bF)(g,{key:e.name,to:e.href,class:"block p-4 bg-white rounded-xl shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",It,[(0,r.Lk)("div",{class:(0,o.C4)(["flex-shrink-0 p-3 rounded-lg",e.color])},[((0,r.uX)(),(0,r.Wv)((0,r.$y)(e.icon),{class:"h-6 w-6 text-white"}))],2),(0,r.Lk)("div",Nt,[(0,r.Lk)("h3",Ft,(0,o.v_)(e.name),1),(0,r.Lk)("p",Wt,(0,o.v_)(e.description),1)])])])),_:2},1032,["to"]))),64))])])])])}}});const Ut=$t;var Mt=Ut;const qt={class:"relative h-10 w-10"},Ot={class:"h-full w-full",viewBox:"0 0 100 100"},jt=["stroke-dashoffset"],Xt={class:"absolute inset-0 flex items-center justify-center text-xs font-semibold text-gray-700"};var Bt=(0,r.pM)({__name:"ProgressWheel",props:{progress:{type:Number,required:!0,default:0}},setup(e){const t=e,s=2*Math.PI*45,a=(0,r.EW)((()=>{const e=Math.max(0,Math.min(100,t.progress));return s-e/100*s})),l=(0,r.EW)((()=>t.progress<33?"text-red-500":t.progress<66?"text-yellow-500":"text-green-500"));return(t,n)=>((0,r.uX)(),(0,r.CE)("div",qt,[((0,r.uX)(),(0,r.CE)("svg",Ot,[n[0]||(n[0]=(0,r.Lk)("circle",{class:"text-gray-200","stroke-width":"10",stroke:"currentColor",fill:"transparent",r:"45",cx:"50",cy:"50"},null,-1)),(0,r.Lk)("circle",{class:(0,o.C4)(l.value),"stroke-width":"10","stroke-dasharray":s,"stroke-dashoffset":a.value,"stroke-linecap":"round",stroke:"currentColor",fill:"transparent",r:"45",cx:"50",cy:"50",transform:"rotate(-90 50 50)"},null,10,jt)])),(0,r.Lk)("span",Xt,(0,o.v_)(Math.round(e.progress))+"% ",1)]))}});const Kt=Bt;var Ht=Kt,Gt=s(1437);const Vt={class:"p-4 sm:p-6 lg:p-8"},Qt={class:"sm:flex sm:items-center sm:justify-between"},Yt={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},zt={class:"mt-8 flow-root"},Jt={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8"},Zt={class:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},es={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg"},ts={class:"min-w-full divide-y divide-gray-300"},ss={class:"divide-y divide-gray-200 bg-white"},as={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},ls={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},ns={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},rs={class:"flex justify-center"},os={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},is={class:"flex justify-center"},ds={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},cs={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},us={class:"sr-only"};var ps=(0,r.pM)({__name:"IndividualReportListView",setup(e){const t=ue(),s=(0,r.EW)((()=>t.allPersonnelSortedByName)),a=e=>{switch(e){case z.OnTrack:return"bg-green-100 text-green-800";case z.ReadyForNextLevel:return"bg-blue-100 text-blue-800";case z.AtRisk:return"bg-yellow-100 text-yellow-800";case z.BehindSchedule:return"bg-red-100 text-red-800";case z.Blocked:return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return(e,t)=>{const l=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",Vt,[(0,r.Lk)("div",Qt,[t[1]||(t[1]=(0,r.Lk)("div",{class:"sm:flex-auto"},[(0,r.Lk)("h1",{class:"text-2xl font-bold text-gray-900"},"Individual Reports"),(0,r.Lk)("p",{class:"mt-2 text-sm text-gray-500"}," Select an individual to view their detailed training report. ")],-1)),(0,r.Lk)("div",Yt,[(0,r.bF)(l,{to:{name:"Reports"},type:"button",class:"inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"},{default:(0,r.k6)((()=>[(0,r.bF)((0,i.R1)(Gt.A),{class:"-ml-0.5 mr-1.5 h-5 w-5 text-gray-400"}),t[0]||(t[0]=(0,r.eW)(" Back to Reports Dashboard "))])),_:1,__:[0]})])]),(0,r.Lk)("div",zt,[(0,r.Lk)("div",Jt,[(0,r.Lk)("div",Zt,[(0,r.Lk)("div",es,[(0,r.Lk)("table",ts,[t[3]||(t[3]=(0,r.Lk)("thead",{class:"bg-gray-50"},[(0,r.Lk)("tr",null,[(0,r.Lk)("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," Name "),(0,r.Lk)("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Position "),(0,r.Lk)("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," PQS Progress "),(0,r.Lk)("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Events Progress "),(0,r.Lk)("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Readiness Status "),(0,r.Lk)("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[(0,r.Lk)("span",{class:"sr-only"},"View")])])],-1)),(0,r.Lk)("tbody",ss,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.value,(e=>{var s,n;return(0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",as,(0,o.v_)(e.displayName),1),(0,r.Lk)("td",ls,(0,o.v_)(e.assignedPosition),1),(0,r.Lk)("td",ns,[(0,r.Lk)("div",rs,[(0,r.bF)(Ht,{progress:null!==(s=e.pqsProgressPercentage)&&void 0!==s?s:0},null,8,["progress"])])]),(0,r.Lk)("td",os,[(0,r.Lk)("div",is,[(0,r.bF)(Ht,{progress:null!==(n=e.eventsProgressPercentage)&&void 0!==n?n:0},null,8,["progress"])])]),(0,r.Lk)("td",ds,[(0,r.Lk)("span",{class:(0,o.C4)(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",a(e.readinessAgainstDeadline)])},(0,o.v_)(e.readinessAgainstDeadline||"Unknown"),3)]),(0,r.Lk)("td",cs,[(0,r.bF)(l,{to:`/student/${e.id}`,class:"text-indigo-600 hover:text-indigo-900"},{default:(0,r.k6)((()=>[t[2]||(t[2]=(0,r.eW)("View Report")),(0,r.Lk)("span",us,", "+(0,o.v_)(e.displayName),1)])),_:2,__:[2]},1032,["to"])])])})),128))])])])])])])])}}});const gs=ps;var ms=gs;const vs={class:"h-96 w-full"};var fs=(0,r.pM)({__name:"TrackLevelChart",props:{upgraders:{type:Array,required:!0},level:{type:String,required:!0},chartType:{type:String,required:!0,validator:e=>[_.PQS,_.Event].includes(e)}},setup(e){pt.t1.register(...pt.$L);const t=e,s=(0,i.KR)(null);let a=null;function l(e,t=1){const s=[`rgba(59, 130, 246, ${t})`,`rgba(16, 185, 129, ${t})`,`rgba(239, 68, 68, ${t})`,`rgba(245, 158, 11, ${t})`,`rgba(139, 92, 246, ${t})`,`rgba(236, 72, 153, ${t})`,`rgba(20, 184, 166, ${t})`,`rgba(99, 102, 241, ${t})`];return s[e%s.length]}const n=()=>{if(a&&a.destroy(),!s.value||0===t.upgraders.length)return;const e=W(),n=Y(),r=t.upgraders[0],o=e.findSyllabus(r.assignedPosition,r.assignedSyllabusYear);if(!o)return void console.warn(`No syllabus found for ${r.assignedPosition} ${r.assignedSyllabusYear}`);const i=n.getDeadlinesForPositionLevel(r.assignedPosition,t.level);if(!i)return void console.warn(`No deadlines configured for ${r.assignedPosition} level ${t.level}`);const{targetMonths:d,deadlineMonths:c}=i,u=c+3,p=Array.from({length:u+1},((e,t)=>`Month ${t}`)),g=o.requirements.filter((e=>String(e.level)===t.level&&e.type===t.chartType&&!e.isDefaultWaived)),m=g.length;if(0===m)return;const v=S(),f=[];t.upgraders.forEach(((e,t)=>{const s=w(e.startDate,v)/30.44,a=l(t),n=p.map(((t,a)=>{if(a>s)return null;const l=L(e.startDate,30.44*a),n=e.rawCompletions.filter((e=>{const t=g.find((t=>t.name.toUpperCase()===e.event.toUpperCase()));return t&&e.date<=l})).length;return n/m*100}));f.push({label:e.displayName,data:n,borderColor:a,backgroundColor:a.replace(/, \d?\.?\d*\)$/,", 0.1)"),tension:.1,borderWidth:2})})),f.push({label:"Squadron Target",data:p.map(((e,t)=>d>0?100/d*t:null)).map((e=>null!==e&&e>100?100:e)),borderColor:"rgba(234, 179, 8, 0.7)",borderDash:[10,5],pointRadius:0,fill:!1,borderWidth:2},{label:"Wing Deadline",data:p.map(((e,t)=>c>0?100/c*t:null)).map((e=>null!==e&&e>100?100:e)),borderColor:"rgba(220, 38, 38, 0.7)",borderDash:[10,5],pointRadius:0,fill:!1,borderWidth:2});const y=s.value.getContext("2d");y&&(a=new pt.t1(y,{type:"line",data:{labels:p,datasets:f},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:`L${t.level} ${t.chartType} Progress`,font:{size:16}},legend:{position:"bottom",labels:{boxWidth:20,font:{size:10}}}},scales:{y:{min:0,max:100,title:{display:!0,text:"% Complete"}},x:{title:{display:!0,text:"Months Since Student Start Date"}}}}}))};return(0,r.sV)(n),(0,r.wB)((()=>[t.upgraders,t.level,t.chartType]),n,{deep:!0}),(0,r.xo)((()=>{a&&a.destroy()})),(e,t)=>((0,r.uX)(),(0,r.CE)("div",vs,[(0,r.Lk)("canvas",{ref_key:"chartCanvas",ref:s},null,512)]))}});const ys=fs;var hs=ys;const bs={class:"p-4 lg:p-6 space-y-6 report-container"},xs={class:"flex justify-between items-center non-printable"},ks={class:"flex items-center gap-4"},Ls={class:"p-4 bg-gray-100 rounded-lg shadow-sm non-printable"},ws=["value"],Ss={key:0,class:"printable-content"},Cs={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3 mb-6"},Es={class:"bg-white p-3 rounded-lg shadow-sm flex items-center space-x-2"},As={class:"text-xl font-bold"},Ds={class:"bg-white p-3 rounded-lg shadow-sm flex items-center space-x-2"},_s={class:"text-xl font-bold"},Ps={class:"bg-white p-3 rounded-lg shadow-sm flex items-center space-x-2"},Rs={class:"text-xl font-bold"},Ts={class:"bg-white p-3 rounded-lg shadow-sm flex items-center space-x-2"},Is={class:"text-xl font-bold"},Ns={class:"bg-white p-3 rounded-lg shadow-sm flex items-center space-x-2"},Fs={class:"text-xl font-bold"},Ws={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},$s={class:"lg:col-span-1"},Us={class:"p-4 bg-white rounded-lg shadow-sm"},Ms={key:0,class:"space-y-2"},qs={class:"font-medium text-sm"},Os={class:"text-xs font-semibold"},js={key:1,class:"text-sm text-gray-500"},Xs={class:"lg:col-span-2 space-y-8"},Bs={class:"text-xl font-semibold"},Ks={class:"grid grid-cols-1 xl:grid-cols-2 gap-4 mt-2"},Hs={key:1,class:"text-center p-8 text-gray-500 bg-white rounded-lg shadow-sm"};var Gs=(0,r.pM)({__name:"TrackReportView",setup(e){const t=ue(),s=W(),l=(0,r.EW)((()=>Array.from(new Set(t.allPersonnel.map((e=>e.assignedPosition)))))),n=(0,i.KR)(l.value.length>0?l.value[0]:""),d=(0,r.EW)((()=>t.allPersonnel.filter((e=>{var t;if(e.assignedPosition!==n.value)return!1;if(!(null===(t=e.rawCompletions)||void 0===t?void 0:t.length))return!1;const s=parseInt(e.derivedPqsWorkingLevel||"0");return s>0})))),c=(0,r.EW)((()=>d.value.reduce(((e,t)=>{switch(e.total++,t.readinessAgainstDeadline){case z.Blocked:e.blocked++;break;case z.BehindSchedule:e.behind++;break;case z.AtRisk:e.atRisk++;break;case z.ReadyForNextLevel:e.readyForNext++;break}return e}),{total:0,blocked:0,behind:0,atRisk:0,readyForNext:0}))),u=(0,r.EW)((()=>{if(!d.value.length)return[];const e=s.findSyllabus(d.value[0].assignedPosition,d.value[0].assignedSyllabusYear);return e?ce(d.value,e).slice(0,3):[]})),p=(0,r.EW)((()=>{const e=new Set(d.value.map((e=>parseInt(e.derivedPqsWorkingLevel||"0"))).filter((e=>e>0)));return Array.from(e).sort(((e,t)=>e-t))})),g=e=>d.value.filter((t=>parseInt(t.derivedPqsWorkingLevel||"0")===e)),m=e=>{const t={[z.Blocked]:"bg-gray-200 text-gray-800",[z.BehindSchedule]:"bg-red-200 text-red-800",[z.AtRisk]:"bg-yellow-200 text-yellow-800",[z.ReadyForNextLevel]:"bg-purple-200 text-purple-800",[z.OnTrack]:"bg-green-200 text-green-800"};return t[e]||"bg-green-200 text-green-800"},v=e=>void 0===e||null===e?"N/A":e>=0?`${e}d Ahead`:`${Math.abs(e)}d Behind`,f=()=>{window.print()};return(e,t)=>{const s=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",bs,[(0,r.Lk)("div",xs,[(0,r.Lk)("div",ks,[(0,r.bF)(s,{to:"/reports",class:"flex items-center gap-1 text-sm p-2 rounded-md text-gray-600 hover:bg-gray-200 hover:text-gray-900"},{default:(0,r.k6)((()=>t[1]||(t[1]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[(0,r.Lk)("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1),(0,r.eW)(" Back ")]))),_:1,__:[1]}),t[2]||(t[2]=(0,r.Lk)("h1",{class:"text-2xl font-bold"},"Track Report",-1))]),(0,r.Lk)("button",{onClick:f,class:"p-2 rounded-full hover:bg-gray-200",title:"Print Report"},t[3]||(t[3]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})],-1)]))]),(0,r.Lk)("div",Ls,[t[4]||(t[4]=(0,r.Lk)("label",{for:"position-select",class:"block text-sm font-medium text-gray-700"},"Track/Position",-1)),(0,r.bo)((0,r.Lk)("select",{id:"position-select","onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.value,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,o.v_)(e),9,ws)))),128))],512),[[a.u1,n.value]])]),d.value.length>0?((0,r.uX)(),(0,r.CE)("div",Ss,[(0,r.Lk)("div",Cs,[(0,r.Lk)("div",Es,[t[6]||(t[6]=(0,r.Lk)("div",{class:"bg-blue-100 p-2 rounded-full"},[(0,r.Lk)("svg",{class:"h-5 w-5 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),(0,r.Lk)("div",null,[(0,r.Lk)("p",As,(0,o.v_)(c.value.total),1),t[5]||(t[5]=(0,r.Lk)("p",{class:"text-xs text-gray-500"},"Total",-1))])]),(0,r.Lk)("div",Ds,[t[8]||(t[8]=(0,r.Lk)("div",{class:"bg-red-100 p-2 rounded-full"},[(0,r.Lk)("svg",{class:"h-5 w-5 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})])],-1)),(0,r.Lk)("div",null,[(0,r.Lk)("p",_s,(0,o.v_)(c.value.behind),1),t[7]||(t[7]=(0,r.Lk)("p",{class:"text-xs text-gray-500"},"Behind",-1))])]),(0,r.Lk)("div",Ps,[t[10]||(t[10]=(0,r.Lk)("div",{class:"bg-yellow-100 p-2 rounded-full"},[(0,r.Lk)("svg",{class:"h-5 w-5 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),(0,r.Lk)("div",null,[(0,r.Lk)("p",Rs,(0,o.v_)(c.value.atRisk),1),t[9]||(t[9]=(0,r.Lk)("p",{class:"text-xs text-gray-500"},"At Risk",-1))])]),(0,r.Lk)("div",Ts,[t[12]||(t[12]=(0,r.Lk)("div",{class:"bg-purple-100 p-2 rounded-full"},[(0,r.Lk)("svg",{class:"h-5 w-5 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 11l3-3m0 0l3 3m-3-3v8m0-13a9 9 0 110 18 9 9 0 010-18z"})])],-1)),(0,r.Lk)("div",null,[(0,r.Lk)("p",Is,(0,o.v_)(c.value.readyForNext),1),t[11]||(t[11]=(0,r.Lk)("p",{class:"text-xs text-gray-500"},"Next Level",-1))])]),(0,r.Lk)("div",Ns,[t[14]||(t[14]=(0,r.Lk)("div",{class:"bg-gray-200 p-2 rounded-full"},[(0,r.Lk)("svg",{class:"h-5 w-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})])],-1)),(0,r.Lk)("div",null,[(0,r.Lk)("p",Fs,(0,o.v_)(c.value.blocked),1),t[13]||(t[13]=(0,r.Lk)("p",{class:"text-xs text-gray-500"},"Blocked",-1))])])]),(0,r.Lk)("div",Ws,[(0,r.Lk)("div",$s,[(0,r.Lk)("div",Us,[t[15]||(t[15]=(0,r.Lk)("h2",{class:"text-xl font-semibold mb-3"},"Top Priority Students",-1)),u.value.length>0?((0,r.uX)(),(0,r.CE)("ul",Ms,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(u.value,(e=>((0,r.uX)(),(0,r.CE)("li",{key:e.id,class:(0,o.C4)(["flex justify-between items-center p-2 rounded-md",m(e.readinessAgainstDeadline)])},[(0,r.Lk)("span",qs,(0,o.v_)(e.displayName),1),(0,r.Lk)("span",Os,(0,o.v_)(v(e.pacingAgainstDeadlineDays)),1)],2)))),128))])):((0,r.uX)(),(0,r.CE)("p",js," All students are on track. "))])]),(0,r.Lk)("div",Xs,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(p.value,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e},[(0,r.Lk)("h2",Bs,"Level "+(0,o.v_)(e)+" Progress",1),(0,r.Lk)("div",Ks,[(0,r.bF)(hs,{upgraders:g(e),level:String(e),"chart-type":(0,i.R1)(_).PQS},null,8,["upgraders","level","chart-type"]),(0,r.bF)(hs,{upgraders:g(e),level:String(e),"chart-type":(0,i.R1)(_).Event},null,8,["upgraders","level","chart-type"])])])))),128))])])])):((0,r.uX)(),(0,r.CE)("div",Hs,t[16]||(t[16]=[(0,r.Lk)("p",{class:"text-lg font-medium"}," No upgraders match the selected criteria. ",-1)])))])}}});const Vs=Gs;var Qs=Vs;function Ys(e){const t=new Map,s=e.map(((e,s)=>{const a=`Student ${s+1}`;t.set(a,e.displayName);const l=V(e);return l.displayName=a,l}));return{anonymizedPersonnel:s,keyMap:t}}function zs(e,t){let s=e;return t.forEach(((e,t)=>{const a=new RegExp(t,"g");s=s.replace(a,e)})),s}var Js=s(826);const Zs="[ReportGenerator]";function ea(e){v.logInfo(`${Zs} Generating individual report for ID: ${e}`);const t=ue(),s=W(),a=t.getPersonnelById(e);if(!a)return v.logError(`${Zs} Could not find upgrader with ID: ${e}`),null;const l=s.findSyllabus(a.assignedPosition,a.assignedSyllabusYear);if(!l)return v.logError(`${Zs} Could not find syllabus for upgrader: ${a.displayName}`),null;const n=de(a,l),r={upgrader:a,summary:{readinessAgainstDeadline:a.readinessAgainstDeadline||z.Unknown,pacingAgainstDeadlineDays:a.pacingAgainstDeadlineDays||0,projectedCompletionDate:a.projectedTotalCompletionDate||void 0},priorityTasks:n};return v.logInfo(`${Zs} Successfully generated individual report for ${a.displayName}.`),r}async function ta(){var e,t,s,a,l;const n=ue(),r=n.allPersonnel.filter((e=>{const t=e.rawCompletions&&e.rawCompletions.length>0,s=e.readinessAgainstDeadline&&e.readinessAgainstDeadline!==z.Unknown;return t&&s})),{anonymizedPersonnel:o,keyMap:i}=Ys(r),d=o.reduce(((e,t)=>{const s=t.assignedPosition;return e[s]||(e[s]=[]),e[s].push(t),e}),{}),c=[],u=S(),p=(0,Js.f)(u,-30);for(const[m,v]of Object.entries(d)){const n=v.sort(((e,t)=>{const s=parseInt(e.derivedPqsWorkingLevel||"0"),a=parseInt(t.derivedPqsWorkingLevel||"0");return s!==a?a-s:e.displayName.localeCompare(t.displayName)})),r=[];for(const i of n){let n="data_pending";const o=[];let d=i.derivedPqsWorkingLevel;if(i.readinessAgainstDeadline===z.ReadyForNextLevel){n="complete";const e=parseInt(i.derivedPqsWorkingLevel||"0")-100;d=String(e>0?e:i.derivedPqsWorkingLevel),o.push(`Status Note: Completed Level ${d}. Now working on Level ${i.derivedPqsWorkingLevel}.`),o.push("Pacing: N/A (Level Complete)")}else{switch(i.readinessAgainstDeadline){case z.OnTrack:n="on_track";break;case z.AtRisk:n="at_risk";break;case z.BehindSchedule:n="behind";break;case z.Blocked:n="blocked";break}o.push(`Pacing: ${null!==(e=i.pacingAgainstDeadlineDays)&&void 0!==e?e:"N/A"} days`)}o.push(`PQS Progress (current level): ${null!==(s=null===(t=i.pqsProgressPercentage)||void 0===t?void 0:t.toFixed(0))&&void 0!==s?s:"N/A"}%`),o.push(`Event Progress (current level): ${null!==(l=null===(a=i.eventsProgressPercentage)||void 0===a?void 0:a.toFixed(0))&&void 0!==l?l:"N/A"}%`);const c=i.rawCompletions.filter((e=>new Date(e.date)>=p)).length,u={anonymizedUpgraderId:i.displayName,assignedPosition:i.assignedPosition,currentPqsWorkingLevel:d,currentEventsWorkingLevel:i.derivedEventsWorkingLevel,overallStatus:n,completedLastMonthCount:c,summaryPoints:o};r.push(u)}const o=r.reduce(((e,t)=>{const s=parseInt(t.currentPqsWorkingLevel||"0");return e[s]||(e[s]=[]),e[s].push(t),e}),{});for(const[e,t]of Object.entries(o))c.push({positionName:m,level:parseInt(e),upgraderReports:t})}const g={reportGeneratedDate:u.toISOString().split("T")[0],positions:c.sort(((e,t)=>t.level-e.level))};return{reportData:g,keyMap:i}}function sa(e){const t={},s=e.positions.reduce(((e,t)=>(e[t.positionName]||(e[t.positionName]=[]),e[t.positionName].push(t),e)),{});for(const[a,l]of Object.entries(s)){const e=l.map((e=>e.upgraderReports)).flat().map((e=>{var t,s,a;return`- Student: ${e.anonymizedUpgraderId} (Level ${e.currentPqsWorkingLevel})\n  - Status: ${e.overallStatus}\n  - Pacing: ${null!==(a=null===(s=null===(t=e.summaryPoints)||void 0===t?void 0:t[0])||void 0===s?void 0:s.replace("Pacing: ",""))&&void 0!==a?a:"N/A"}\n  - Last 30 Days: ${e.completedLastMonthCount} item(s) completed.`})).join("\n"),s=`\n- Track: ${a}\n- Total Students: ${l.map((e=>e.upgraderReports.length)).reduce(((e,t)=>e+t),0)}\n    `.trim(),n=`\nYou are an expert training analyst for a military aviation unit. Your task is to provide a concise, insightful monthly training summary for a specific track.\n\nAnalyze the raw data provided below. The data is already sorted by ACTC level (descending) and then by student name (alphabetical). **Your report must follow this exact order.**\n\n**OUTPUT FORMAT:**\n\n1.  **Student Progress (Last 30 Days):**\n    * Following the provided order, write 1-2 sentences for each student summarizing their progress and status.\n\n2.  **Overall Track Health for '${a}':**\n    * Write a 3-4 sentence summary of this track's overall performance, noting any trends or widespread issues.\n\n3.  **Strategic Recommendations for '${a}':**\n    * Write 2-4 sentences outlining the most effective path forward for this specific track. Identify top priorities and suggest concrete actions.\n\n---\n**RAW DATA FOR ANALYSIS (DO NOT REPEAT THIS SECTION IN YOUR OUTPUT):**\n\n**Track Health Summary:**\n${s}\n\n**Sorted Student Data:**\n${e}\n---\n\nNow, please generate the complete narrative report for the '${a}' track based on the data and instructions provided.\n    `;t[a]=n.trim()}return t}function aa(){v.logInfo(`${Zs} Generating Monthly Report.`);const e=ue(),t=W(),s=S(),a=(0,Js.f)(s,-30),l=e.allPersonnel.filter((e=>e.assignedPosition&&e.rawCompletions&&e.rawCompletions.length>0)),n=new Map;t.allSyllabi.forEach((e=>{e.requirements.forEach((e=>{n.set(e.name.toUpperCase(),e.type)}))}));const r=l.reduce(((e,t)=>(e[t.assignedPosition]||(e[t.assignedPosition]=[]),e[t.assignedPosition].push(t),e)),{}),o=[];for(const[i,d]of Object.entries(r)){let e=0,t=0;d.forEach((s=>{const l=s.rawCompletions.filter((e=>new Date(e.date)>=a));l.forEach((s=>{const a=n.get(s.event.toUpperCase());a===_.Event?e++:a===_.PQS&&t++}))}));const s={trackName:i,totalEnrolled:d.length,numberBehind:d.filter((e=>e.readinessAgainstDeadline===z.BehindSchedule)).length,eventsCompletedThisMonth:e,pqsCompletedThisMonth:t};o.push(s)}return{reportDate:s,startDate:a,trackSummaries:o.sort(((e,t)=>e.trackName.localeCompare(t.trackName)))}}const la={class:"p-4 sm:p-6 lg:p-8 report-container"},na={class:"sm:flex sm:items-center sm:justify-between non-printable"},ra={key:0,class:"mt-2 text-sm text-gray-700"},oa={key:0,class:"mt-8 printable-content"},ia={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},da={class:"text-xl font-semibold text-gray-800 border-b pb-2 mb-4"},ca={class:"space-y-4"},ua={class:"flex justify-between items-baseline"},pa={class:"text-lg font-bold text-gray-900"},ga={class:"flex justify-between items-baseline"},ma={class:"flex justify-between items-baseline"},va={class:"text-lg font-bold text-gray-900"},fa={class:"flex justify-between items-baseline"},ya={class:"text-lg font-bold text-gray-900"},ha={key:1,class:"mt-8 text-center py-12 px-6 bg-white rounded-lg shadow-sm"};var ba=(0,r.pM)({__name:"MonthlyReportView",setup(e){const t=(0,i.KR)(null);(0,r.sV)((()=>{t.value=aa()}));const s=e=>new Intl.DateTimeFormat("en-US",{month:"long",day:"numeric",year:"numeric"}).format(e),a=()=>{window.print()};return(e,l)=>((0,r.uX)(),(0,r.CE)("div",la,[(0,r.Lk)("div",na,[(0,r.Lk)("div",null,[l[0]||(l[0]=(0,r.Lk)("h1",{class:"text-2xl font-bold text-gray-900"}," Monthly Training Summary ",-1)),t.value?((0,r.uX)(),(0,r.CE)("p",ra," Showing training activity from "+(0,o.v_)(s(t.value.startDate))+" to "+(0,o.v_)(s(t.value.reportDate))+". ",1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",{class:"mt-4 sm:mt-0"},[(0,r.Lk)("button",{onClick:a,class:"inline-flex items-center gap-x-2 rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},l[1]||(l[1]=[(0,r.Lk)("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[(0,r.Lk)("path",{"fill-rule":"evenodd",d:"M5 2.5a2.5 2.5 0 00-2.5 2.5v9a2.5 2.5 0 002.5 2.5h10a2.5 2.5 0 002.5-2.5v-9a2.5 2.5 0 00-2.5-2.5H5zM6 5a.5.5 0 01.5-.5h7a.5.5 0 010 1h-7A.5.5 0 016 5zm0 2.5a.5.5 0 01.5-.5h7a.5.5 0 010 1h-7a.5.5 0 01-.5-.5zm0 2.5a.5.5 0 01.5-.5h4a.5.5 0 010 1h-4a.5.5 0 01-.5-.5z","clip-rule":"evenodd"})],-1),(0,r.eW)(" Print Report ")]))])]),t.value&&t.value.trackSummaries.length>0?((0,r.uX)(),(0,r.CE)("div",oa,[(0,r.Lk)("div",ia,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(t.value.trackSummaries,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.trackName,class:"bg-white p-6 rounded-lg shadow-sm border border-gray-200"},[(0,r.Lk)("h2",da,(0,o.v_)(e.trackName),1),(0,r.Lk)("div",ca,[(0,r.Lk)("div",ua,[l[2]||(l[2]=(0,r.Lk)("span",{class:"text-sm font-medium text-gray-600"},"Students Enrolled:",-1)),(0,r.Lk)("span",pa,(0,o.v_)(e.totalEnrolled),1)]),(0,r.Lk)("div",ga,[l[3]||(l[3]=(0,r.Lk)("span",{class:"text-sm font-medium text-gray-600"},"Students Behind:",-1)),(0,r.Lk)("span",{class:(0,o.C4)(["text-lg font-bold",e.numberBehind>0?"text-red-600":"text-gray-900"])},(0,o.v_)(e.numberBehind),3)]),(0,r.Lk)("div",ma,[l[4]||(l[4]=(0,r.Lk)("span",{class:"text-sm font-medium text-gray-600"},"Events Completed (Month):",-1)),(0,r.Lk)("span",va,(0,o.v_)(e.eventsCompletedThisMonth),1)]),(0,r.Lk)("div",fa,[l[5]||(l[5]=(0,r.Lk)("span",{class:"text-sm font-medium text-gray-600"},"PQS Completed (Month):",-1)),(0,r.Lk)("span",ya,(0,o.v_)(e.pqsCompletedThisMonth),1)])])])))),128))])])):((0,r.uX)(),(0,r.CE)("div",ha,l[6]||(l[6]=[(0,r.Lk)("h3",{class:"text-lg font-medium text-gray-900"}," No Training Data Available ",-1),(0,r.Lk)("p",{class:"mt-1 text-sm text-gray-500"}," There is no monthly training data to display. Please ensure personnel have assigned tracks and recent completions. ",-1)])))]))}});const xa=ba;var ka=xa;const La="[GeminiService]",wa="https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent";async function Sa(e,t){var s,a,l,n,r,o;const i=`${wa}?key=${t}`;v.logInfo(`${La} Calling Gemini API.`);try{const t=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:e}]}]})});if(!t.ok){const e=await t.json();throw v.logError(`${La} API call failed with status: ${t.status}`,e),new Error(`Gemini API request failed: ${(null===(s=e.error)||void 0===s?void 0:s.message)||t.statusText}`)}const d=await t.json(),c=null===(o=null===(r=null===(n=null===(l=null===(a=d.candidates)||void 0===a?void 0:a[0])||void 0===l?void 0:l.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r[0])||void 0===o?void 0:o.text;if(!c)throw v.logWarn(`${La} API response did not contain valid text content.`,d),new Error("Received an invalid or empty response from the Gemini API.");return v.logInfo(`${La} Successfully received response from Gemini API.`),c}catch(d){throw v.logError(`${La} An error occurred during the Gemini API call.`,d),d}}var Ca=s(23);const Ea={class:"p-4 sm:p-6 lg:p-8"},Aa={class:"mt-8"},Da={class:"bg-white p-6 rounded-lg shadow-sm"},_a={key:0,class:"p-4 bg-yellow-50 border-l-4 border-yellow-400"},Pa={class:"text-sm text-yellow-700"},Ra={class:"mt-4 flex items-center gap-4"},Ta=["disabled"],Ia={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Na={key:0,class:"text-sm text-gray-600"},Fa={key:1,class:"mt-4 p-4 bg-red-50 border-l-4 border-red-400"},Wa={class:"mt-2 text-sm text-red-700"},$a={key:0,class:"mt-8"},Ua={key:0,class:"space-y-6"},Ma={class:"text-lg font-semibold text-gray-800"},qa=["value"],Oa=["onClick"],ja={class:"mt-4"},Xa=["for"],Ba=["onUpdate:modelValue","id"],Ka={key:1,class:"space-y-6"},Ha={class:"!text-2xl !font-bold !text-indigo-700"},Ga=["innerHTML"];var Va=(0,r.pM)({__name:"LlmReportView",setup(e){const t=Y(),s=y(),l=(0,i.KR)(!1),n=(0,i.KR)(""),d=(0,i.KR)(""),c=(0,i.KR)({}),u=(0,i.KR)({}),p=(0,i.KR)({}),g=(0,i.KR)(new Map),m=(0,i.KR)(!1),v=(0,r.EW)((()=>t.config.geminiApiKey)),f=(0,r.EW)((()=>l.value?"Generating...":v.value?"Generate Full Report":"Generate Prompts for Manual Entry")),h=async()=>{l.value=!0,d.value="",m.value=!1,c.value={},p.value={};try{n.value="Preparing and anonymizing data...";const{reportData:e,keyMap:t}=await ta();g.value=t,n.value="Generating prompts...";const s=sa(e);if(c.value=s,v.value){const e=Object.keys(s);for(let t=0;t<e.length;t++){const a=e[t];n.value=`Calling AI for ${a} report (${t+1}/${e.length})...`;const l=await Sa(s[a],v.value);p.value[a]=zs(l,g.value)}m.value=!0}}catch(e){d.value=e.message||"An unknown error occurred.",s.addNotification({type:"error",message:d.value})}finally{l.value=!1,n.value=""}},b=()=>{p.value={};for(const e in u.value){const t=u.value[e];t&&(p.value[e]=zs(t,g.value))}m.value=!0},x=e=>{navigator.clipboard.writeText(e),s.addNotification({type:"success",message:"Prompt copied to clipboard!"})},k=e=>(0,Ca.xI)(e);return(e,t)=>{const s=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",Ea,[t[5]||(t[5]=(0,r.Lk)("div",{class:"sm:flex sm:items-center"},[(0,r.Lk)("div",{class:"sm:flex-auto"},[(0,r.Lk)("h1",{class:"text-2xl font-bold text-gray-900"},"LLM Report Generation"),(0,r.Lk)("p",{class:"mt-2 text-sm text-gray-700"}," Use AI to generate narrative summaries for each track. ")])],-1)),(0,r.Lk)("div",Aa,[(0,r.Lk)("div",Da,[v.value?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",_a,[(0,r.Lk)("p",Pa,[t[1]||(t[1]=(0,r.eW)(" No Gemini API key found. Reports must be generated manually. ")),(0,r.bF)(s,{to:"/settings/app",class:"font-medium underline hover:text-yellow-800"},{default:(0,r.k6)((()=>t[0]||(t[0]=[(0,r.eW)("Add API Key in Settings")]))),_:1,__:[0]}),t[2]||(t[2]=(0,r.eW)(" to enable automatic report generation. "))])])),(0,r.Lk)("div",Ra,[(0,r.Lk)("button",{onClick:h,disabled:l.value,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 disabled:bg-gray-400"},[l.value?((0,r.uX)(),(0,r.CE)("svg",Ia,t[3]||(t[3]=[(0,r.Lk)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),(0,r.Lk)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(0,r.Q3)("",!0),(0,r.eW)(" "+(0,o.v_)(f.value),1)],8,Ta),l.value?((0,r.uX)(),(0,r.CE)("p",Na,(0,o.v_)(n.value),1)):(0,r.Q3)("",!0)]),d.value?((0,r.uX)(),(0,r.CE)("div",Fa,[t[4]||(t[4]=(0,r.Lk)("h3",{class:"text-sm font-medium text-red-800"}," Error Generating Report ",-1)),(0,r.Lk)("p",Wa,(0,o.v_)(d.value),1)])):(0,r.Q3)("",!0)]),Object.keys(c.value).length>0?((0,r.uX)(),(0,r.CE)("div",$a,[v.value||m.value?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",Ua,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(c.value,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{key:t,class:"bg-white p-6 rounded-lg shadow-sm"},[(0,r.Lk)("h3",Ma,(0,o.v_)(t)+" Report Prompt ",1),(0,r.Lk)("textarea",{readonly:"",value:e},null,8,qa),(0,r.Lk)("button",{onClick:t=>x(e),class:"mt-2 text-sm text-indigo-600 hover:text-indigo-800"}," Copy Prompt ",8,Oa),(0,r.Lk)("div",ja,[(0,r.Lk)("label",{for:`response-${t}`,class:"block text-sm font-medium text-gray-700"},"Paste AI Response for "+(0,o.v_)(t),9,Xa),(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":e=>u.value[t]=e,id:`response-${t}`,rows:"8",class:"w-full mt-1 p-2 border rounded shadow-sm"},null,8,Ba),[[a.Jo,u.value[t]]])])])))),128)),(0,r.Lk)("button",{onClick:b,class:"rounded-md bg-green-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500"}," Process Pasted Responses ")])),m.value?((0,r.uX)(),(0,r.CE)("div",Ka,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(p.value,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{key:t,class:"bg-white p-6 rounded-lg shadow-sm prose max-w-none"},[(0,r.Lk)("h2",Ha,(0,o.v_)(t)+" :: AI-Generated Narrative Report ",1),(0,r.Lk)("div",{innerHTML:k(e)},null,8,Ga)])))),128))])):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0)])])}}});const Qa=Va;var Ya=Qa;const za={class:"h-80 w-full"};var Ja=(0,r.pM)({__name:"ProgressChart",props:{upgrader:{type:Object,required:!0},chartType:{type:String,required:!0}},setup(e){pt.t1.register(...pt.$L);const t=e,s=(0,i.KR)(null);let a=null;return(0,r.sV)((()=>{var e;if(!s.value)return;const l=Y(),n=W(),r=n.findSyllabus(t.upgrader.assignedPosition,t.upgrader.assignedSyllabusYear);if(!r)return;const o=t.chartType===_.PQS?t.upgrader.derivedPqsWorkingLevel:t.upgrader.derivedEventsWorkingLevel;if(!o)return;const i=null===(e=l.currentConfig.positionSettings[t.upgrader.assignedPosition])||void 0===e?void 0:e.deadlines[o];if(!i)return;const{targetMonths:d,deadlineMonths:c}=i,u=Array.from({length:c+1},((e,t)=>`Month ${t}`)),p=r.requirements.filter((e=>String(e.level)===o&&e.type===t.chartType&&!e.isDefaultWaived)),g=p.length;if(0===g)return;const m=S(),v=w(t.upgrader.startDate,m)/30.44,f=u.map(((e,s)=>{if(s>v)return null;const a=L(t.upgrader.startDate,30.44*s),l=t.upgrader.rawCompletions.filter((e=>{const t=p.find((t=>t.name.toUpperCase()===e.event.toUpperCase()));return t&&e.date<=a})).length;return l/g*100})),y=f.findLastIndex((e=>null!==e)),h=y>-1?f[y]:0,b=t.chartType===_.PQS?t.upgrader.projectedPqsCompletionDate:t.upgrader.projectedEventsCompletionDate,x=new Array(u.length).fill(null);if(b&&null!=h&&h<100){x[y]=h;const e=Math.ceil(w(t.upgrader.startDate,b)/30.44);e>y&&e<u.length&&(x[e]=100)}const k=s.value.getContext("2d");k&&(a=new pt.t1(k,{type:"line",data:{labels:u,datasets:[{label:"Squadron Target",data:u.map(((e,t)=>d>0?100/d*t:null)),borderColor:"rgba(234, 179, 8, 0.7)",borderDash:[10,5],pointRadius:0,fill:!1},{label:"Wing Deadline",data:u.map(((e,t)=>c>0?100/c*t:null)),borderColor:"rgba(220, 38, 38, 0.7)",borderDash:[10,5],pointRadius:0,fill:!1},{label:"Actual Progress",data:f,borderColor:"rgba(59, 130, 246, 1)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.1,fill:!1},{label:"Projection",data:x,borderColor:"rgba(22, 163, 74, 1)",borderDash:[3,4],pointRadius:0,fill:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:`${t.chartType} Progress`}},scales:{y:{min:0,max:100,title:{display:!0,text:"% Complete"}},x:{title:{display:!0,text:"Months Since Start Date"}}}}}))})),(0,r.xo)((()=>{a&&a.destroy()})),(e,t)=>((0,r.uX)(),(0,r.CE)("div",za,[(0,r.Lk)("canvas",{ref_key:"chartCanvas",ref:s},null,512)]))}});const Za=Ja;var el=Za,tl=s(1822),sl=s(3834),al=s(395),ll=s(6362),nl=s(5044),rl=s(3860),ol=s(9616);const il={key:0,class:"space-y-6"},dl={class:"md:flex md:items-center md:justify-between"},cl={class:"min-w-0 flex-1"},ul={class:"text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight"},pl={class:"mt-1 flex flex-col sm:flex-row sm:flex-wrap sm:space-x-6 text-sm text-gray-500"},gl={class:"font-semibold text-gray-700"},ml={class:"font-semibold text-gray-700"},vl={class:"mt-4 flex md:mt-0 md:ml-4"},fl={class:"bg-white shadow-lg rounded-lg border border-gray-200 overflow-hidden"},yl={class:"p-6"},hl={class:"mt-1 max-w-2xl text-sm leading-6 text-gray-500"},bl={class:"mt-6 grid grid-cols-1 gap-x-6 gap-y-4 sm:grid-cols-2 lg:grid-cols-4"},xl={class:"flex items-center text-sm font-medium text-gray-500"},kl={class:"border-t border-gray-200 p-6"},Ll={class:"mt-4 grid grid-cols-1 md:grid-cols-2 print:grid-cols-2 gap-8"},wl={class:"border-t border-gray-200 p-6"},Sl={key:0,role:"list",class:"mt-4 divide-y divide-gray-200 border-t border-b border-gray-200"},Cl={class:"flex-none"},El={class:"flex-auto text-sm font-semibold text-gray-900"},Al={class:"flex-none text-xs text-gray-500"},Dl={key:1,class:"mt-4 text-sm text-gray-500 italic"},_l={key:1,class:"text-center p-8 bg-white rounded-lg shadow"};var Pl=(0,r.pM)({__name:"IndividualReport",props:{upgraderId:{}},setup(e){const t=e,s=(0,i.KR)(null);(0,r.sV)((()=>{s.value=ea(t.upgraderId)}));const a=(0,r.EW)((()=>{if(!s.value)return"";const{upgrader:e,summary:t}=s.value,a=t.pacingAgainstDeadlineDays,l=a>=0?`${a} days ahead of`:`${Math.abs(a)} days behind`;return`${e.displayName} is currently rated as ${t.readinessAgainstDeadline}. They are pacing ${l} schedule to meet their deadline.`})),l=(0,r.EW)((()=>{var e,t,a,l;if(!s.value)return[];const{summary:r,upgrader:o}=s.value;return[{name:"Readiness Status",value:r.readinessAgainstDeadline,icon:tl.A,color:n(r.readinessAgainstDeadline)},{name:"Pacing (Deadline)",value:`${null!==(e=r.pacingAgainstDeadlineDays)&&void 0!==e?e:"N/A"} days`,icon:sl.A,color:(null!==(t=r.pacingAgainstDeadlineDays)&&void 0!==t?t:0)<0?"text-red-600":"text-green-600"},{name:"Projected Completion",value:k(r.projectedCompletionDate),icon:al.A,color:"text-gray-900"},{name:"Overall Progress",value:`${(((null!==(a=o.pqsProgressPercentage)&&void 0!==a?a:0)+(null!==(l=o.eventsProgressPercentage)&&void 0!==l?l:0))/2).toFixed(0)}%`,icon:ll.A,color:"text-gray-900"}]})),n=e=>{switch(e){case z.OnTrack:return"text-green-600 font-semibold";case z.AtRisk:return"text-yellow-600 font-semibold";case z.BehindSchedule:return"text-red-600 font-semibold";case z.Blocked:return"text-red-800 font-bold";default:return"text-gray-900 font-semibold"}},d=()=>{window.print()};return(e,t)=>{const n=(0,r.g2)("router-link");return s.value?((0,r.uX)(),(0,r.CE)("div",il,[(0,r.Lk)("div",dl,[(0,r.Lk)("div",cl,[(0,r.Lk)("h1",ul," Individual Report: "+(0,o.v_)(s.value.upgrader.displayName),1),(0,r.Lk)("p",pl,[(0,r.Lk)("span",null,[t[0]||(t[0]=(0,r.eW)("PQS Level: ")),(0,r.Lk)("strong",gl,(0,o.v_)(s.value.upgrader.derivedPqsWorkingLevel||"N/A"),1)]),(0,r.Lk)("span",null,[t[1]||(t[1]=(0,r.eW)("Events Level: ")),(0,r.Lk)("strong",ml,(0,o.v_)(s.value.upgrader.derivedEventsWorkingLevel||"N/A"),1)])])]),(0,r.Lk)("div",vl,[(0,r.bF)(n,{to:{name:"IndividualReportList"},type:"button",class:"inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"},{default:(0,r.k6)((()=>[(0,r.bF)((0,i.R1)(nl.A),{class:"-ml-0.5 mr-1.5 h-5 w-5 text-gray-400"}),t[2]||(t[2]=(0,r.eW)(" Back to List "))])),_:1,__:[2]}),(0,r.Lk)("button",{onClick:d,type:"button",class:"ml-3 inline-flex items-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500"},[(0,r.bF)((0,i.R1)(rl.A),{class:"-ml-0.5 mr-1.5 h-5 w-5"}),t[3]||(t[3]=(0,r.eW)(" Print to PDF "))])])]),(0,r.Lk)("div",fl,[(0,r.Lk)("div",yl,[t[4]||(t[4]=(0,r.Lk)("h3",{class:"text-base font-semibold leading-7 text-gray-900"}," Training Summary ",-1)),(0,r.Lk)("p",hl,(0,o.v_)(a.value),1),(0,r.Lk)("dl",bl,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.value,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.name,class:"rounded-lg bg-gray-50 p-4"},[(0,r.Lk)("dt",xl,[((0,r.uX)(),(0,r.Wv)((0,r.$y)(e.icon),{class:"h-5 w-5 text-gray-400 mr-2"})),(0,r.Lk)("span",null,(0,o.v_)(e.name),1)]),(0,r.Lk)("dd",{class:(0,o.C4)(["mt-1 text-xl font-semibold tracking-tight text-gray-900",e.color])},(0,o.v_)(e.value),3)])))),128))])]),(0,r.Lk)("div",kl,[t[5]||(t[5]=(0,r.Lk)("h3",{class:"text-base font-semibold leading-7 text-gray-900"}," Level Progression ",-1)),(0,r.Lk)("div",Ll,[(0,r.bF)(el,{upgrader:s.value.upgrader,"chart-type":(0,i.R1)(_).PQS},null,8,["upgrader","chart-type"]),(0,r.bF)(el,{upgrader:s.value.upgrader,"chart-type":(0,i.R1)(_).Event},null,8,["upgrader","chart-type"])])]),(0,r.Lk)("div",wl,[t[6]||(t[6]=(0,r.Lk)("h3",{class:"text-base font-semibold leading-7 text-gray-900"}," Priority Tasks ",-1)),t[7]||(t[7]=(0,r.Lk)("p",{class:"mt-1 text-sm text-gray-500"}," Top 5 recommended next steps to continue progression. ",-1)),s.value.priorityTasks.length>0?((0,r.uX)(),(0,r.CE)("ul",Sl,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.value.priorityTasks.slice(0,5),(e=>((0,r.uX)(),(0,r.CE)("li",{key:e.id,class:"flex items-center gap-x-3 py-3 px-2"},[(0,r.Lk)("div",Cl,[e.isAvailable?((0,r.uX)(),(0,r.Wv)((0,i.R1)(ol.A),{key:0,class:"h-6 w-6 text-green-500"})):((0,r.uX)(),(0,r.Wv)((0,i.R1)(ot.A),{key:1,class:"h-6 w-6 text-gray-400"}))]),(0,r.Lk)("p",El,(0,o.v_)(e.displayName)+" (L"+(0,o.v_)(e.level)+") ",1),(0,r.Lk)("p",Al," P-Score: "+(0,o.v_)(e.priorityScore.toFixed(0)),1)])))),128))])):((0,r.uX)(),(0,r.CE)("p",Dl," No remaining tasks. "))])])])):((0,r.uX)(),(0,r.CE)("div",_l,t[8]||(t[8]=[(0,r.Lk)("p",null,"Generating report...",-1)])))}}});const Rl=Pl;var Tl=Rl;const Il={class:"p-4 sm:p-6 lg:p-8"},Nl={key:0},Fl={class:"flex items-center justify-between"},Wl={class:"text-2xl font-bold text-gray-900"},$l={class:"mt-1 text-sm text-gray-600"},Ul={class:"mt-6"},Ml={key:1,class:"text-center py-12"},ql={class:"mt-2 text-gray-500"},Ol={class:"mt-6"};var jl=(0,r.pM)({__name:"StudentDetailView",props:{id:{type:String,required:!0}},setup(e){const t=e,s=ue(),a=((0,n.rd)(),(0,r.EW)((()=>s.getPersonnelById(t.id))));return(t,s)=>{const l=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",Il,[a.value?((0,r.uX)(),(0,r.CE)("div",Nl,[(0,r.Lk)("div",Fl,[(0,r.Lk)("div",null,[(0,r.Lk)("h1",Wl,(0,o.v_)(a.value.displayName),1),(0,r.Lk)("p",$l,(0,o.v_)(a.value.rank)+" | "+(0,o.v_)(a.value.assignedPosition)+" | Start Date: "+(0,o.v_)(new Date(a.value.startDate).toLocaleDateString()),1)]),(0,r.Lk)("button",{onClick:s[0]||(s[0]=e=>t.$router.back()),class:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"}," ← Back to Reports ")]),(0,r.Lk)("div",Ul,[(0,r.bF)(Tl,{"upgrader-id":e.id},null,8,["upgrader-id"])])])):((0,r.uX)(),(0,r.CE)("div",Ml,[s[2]||(s[2]=(0,r.Lk)("h2",{class:"text-xl font-semibold text-gray-700"},"Upgrader Not Found",-1)),(0,r.Lk)("p",ql," Could not find a student with the ID: "+(0,o.v_)(e.id),1),(0,r.Lk)("div",Ol,[(0,r.bF)(l,{to:"/reports/individual",class:"text-indigo-600 hover:text-indigo-500 font-semibold"},{default:(0,r.k6)((()=>s[1]||(s[1]=[(0,r.eW)(" ← Return to Individual Reports List ")]))),_:1,__:[1]})])]))])}}});const Xl=jl;var Bl=Xl;const Kl={class:"p-8"},Hl={class:"mt-6 grid grid-cols-1 gap-8 sm:grid-cols-2"},Gl={class:"flex items-center"},Vl={class:"flex items-center"};var Ql=(0,r.pM)({__name:"SettingsSyllabiView",setup(e){return(e,t)=>{const s=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",Kl,[t[2]||(t[2]=(0,r.Lk)("h1",{class:"text-2xl font-bold text-gray-900 border-b pb-4"},"Settings",-1)),(0,r.Lk)("div",Hl,[(0,r.bF)(s,{to:"/settings/app",class:"block p-6 bg-white rounded-lg shadow hover:shadow-lg transition-transform transform hover:-translate-y-1"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",Gl,[(0,r.bF)((0,i.R1)(ke.A),{class:"h-10 w-10 text-indigo-500"}),t[0]||(t[0]=(0,r.Lk)("div",{class:"ml-4"},[(0,r.Lk)("h2",{class:"text-lg font-semibold text-gray-800"}," App Configuration "),(0,r.Lk)("p",{class:"text-sm text-gray-600"}," Adjust global application settings and deadlines. ")],-1))])])),_:1}),(0,r.bF)(s,{to:"/syllabi",class:"block p-6 bg-white rounded-lg shadow hover:shadow-lg transition-transform transform hover:-translate-y-1"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",Vl,[(0,r.bF)((0,i.R1)(xe.A),{class:"h-10 w-10 text-teal-500"}),t[1]||(t[1]=(0,r.Lk)("div",{class:"ml-4"},[(0,r.Lk)("h2",{class:"text-lg font-semibold text-gray-800"}," Syllabus Management "),(0,r.Lk)("p",{class:"text-sm text-gray-600"}," Upload, view, and edit training syllabi. ")],-1))])])),_:1})])])}}});const Yl=Ql;var zl=Yl;const Jl={class:"bg-white shadow rounded-lg"},Zl={class:"px-4 py-5 sm:p-6"},en={key:0,class:"mt-4"},tn={role:"list",class:"divide-y divide-gray-200"},sn={class:"min-w-0 flex-1"},an={class:"text-sm font-medium text-indigo-600 truncate"},ln={class:"text-sm text-gray-500"},nn={class:"ml-4 flex-shrink-0 space-x-2"},rn=["onClick"],on={key:1,class:"text-center py-6"};var dn=(0,r.pM)({__name:"SyllabusList",setup(e){const t=W(),s=e=>{if(confirm("Are you sure you want to delete this syllabus? This cannot be undone.")){const s=t.allSyllabi.some((t=>t.id===e));s?t.removeSyllabus(e):console.warn(`Attempted to delete a syllabus that does not exist with id: ${e}`)}};return(e,a)=>{const l=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",Jl,[(0,r.Lk)("div",Zl,[a[2]||(a[2]=(0,r.Lk)("h3",{class:"text-lg font-medium leading-6 text-gray-900"}," Loaded Syllabi ",-1)),(0,i.R1)(t).allSyllabi.length>0?((0,r.uX)(),(0,r.CE)("div",en,[(0,r.Lk)("ul",tn,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)((0,i.R1)(t).allSyllabi,(e=>((0,r.uX)(),(0,r.CE)("li",{key:e.id,class:"flex items-center justify-between py-3"},[(0,r.Lk)("div",sn,[(0,r.Lk)("p",an,(0,o.v_)(e.displayName),1),(0,r.Lk)("p",ln,(0,o.v_)(e.position)+" - "+(0,o.v_)(e.year),1)]),(0,r.Lk)("div",nn,[(0,r.bF)(l,{to:{name:"SyllabusEdit",params:{id:e.id}},class:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:(0,r.k6)((()=>a[0]||(a[0]=[(0,r.eW)(" Edit ")]))),_:2,__:[0]},1032,["to"]),(0,r.Lk)("button",{onClick:t=>s(e.id),class:"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200"}," Delete ",8,rn)])])))),128))])])):((0,r.uX)(),(0,r.CE)("div",on,a[1]||(a[1]=[(0,r.Lk)("p",{class:"text-gray-500"},"No syllabi have been loaded.",-1)])))])])}}});const cn=dn;var un=cn;const pn=["aria-labelledby"],gn={class:"px-6 py-4 border-b border-gray-200"},mn={class:"flex items-center justify-between"},vn=["id"],fn={class:"px-6 py-5"},yn={key:0,class:"px-6 py-4 bg-gray-50 border-t border-gray-200 text-right space-x-3 rounded-b-lg"};var hn=(0,r.pM)({__name:"BaseModal",props:{isOpen:{type:Boolean,required:!0},title:{type:String,default:"Modal Title"},size:{type:String,default:"2xl"}},emits:["close"],setup(e,{emit:t}){const s=e,l=t,n=`modal-${Math.random().toString(36).substring(2,9)}`,i=(0,r.Ht)(),d=(0,r.EW)((()=>!!i.footer)),c=()=>{l("close")},u=e=>{"Escape"===e.key&&s.isOpen&&c()};(0,r.sV)((()=>{document.addEventListener("keydown",u)})),(0,r.hi)((()=>{document.removeEventListener("keydown",u)})),(0,r.wB)((()=>s.isOpen),(e=>{"undefined"!==typeof document&&document.body&&(document.body.style.overflow=e?"hidden":"")}));const p=(0,r.EW)((()=>{switch(s.size){case"sm":return"sm:max-w-sm";case"md":return"sm:max-w-md";case"lg":return"sm:max-w-lg";case"xl":return"sm:max-w-xl";case"full":return"sm:max-w-full h-full";case"2xl":default:return"sm:max-w-2xl"}}));return(t,s)=>((0,r.uX)(),(0,r.Wv)(r.Im,{to:"body"},[(0,r.bF)(a.eB,{name:"modal-fade"},{default:(0,r.k6)((()=>[e.isOpen?((0,r.uX)(),(0,r.CE)("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center p-4",onClick:(0,a.D$)(c,["self"])},[(0,r.Lk)("div",{class:(0,o.C4)(["bg-white rounded-lg shadow-xl transform transition-all sm:max-w-2xl w-full",p.value]),role:"dialog","aria-modal":"true","aria-labelledby":`modal-title-${n}`},[(0,r.Lk)("div",gn,[(0,r.Lk)("div",mn,[(0,r.Lk)("h3",{id:`modal-title-${n}`,class:"text-lg font-medium text-gray-900"},[(0,r.RG)(t.$slots,"header",{},(()=>[(0,r.eW)((0,o.v_)(e.title),1)]))],8,vn),(0,r.Lk)("button",{onClick:c,type:"button",class:"text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-md","aria-label":"Close modal"},s[0]||(s[0]=[(0,r.Lk)("svg",{class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),(0,r.Lk)("div",fn,[(0,r.RG)(t.$slots,"body")]),d.value?((0,r.uX)(),(0,r.CE)("div",yn,[(0,r.RG)(t.$slots,"footer")])):(0,r.Q3)("",!0)],10,pn)])):(0,r.Q3)("",!0)])),_:3})]))}}),bn=s(6262);const xn=(0,bn.A)(hn,[["__scopeId","data-v-7fee56be"]]);var kn=xn;function Ln(e){return e?[...new Set(e)]:[]}var wn=s(3240),Sn=s(5495),Cn=s(6097);const En={key:0,class:"space-y-4"},An={class:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-green-100"},Dn={class:"mt-6 border-t border-b border-gray-200 divide-y divide-gray-200"},_n={class:"py-4 flex items-center justify-between"},Pn={class:"text-sm font-medium text-gray-600 flex items-center"},Rn={class:"text-sm font-semibold text-gray-900"},Tn={class:"py-4 flex items-center justify-between"},In={class:"text-sm font-medium text-gray-600 flex items-center"},Nn={class:"text-sm font-semibold text-gray-900"},Fn={class:"py-4 flex items-center justify-between"},Wn={class:"text-sm font-medium text-gray-600 flex items-center"},$n={class:"text-sm font-semibold text-gray-900"},Un={class:"py-4 flex items-center justify-between"},Mn={class:"text-sm font-medium text-gray-600 flex items-center"},qn={class:"text-sm font-semibold text-gray-900"},On={key:1,class:"text-center"},jn={class:"flex flex-col sm:flex-row-reverse gap-3"};var Xn=(0,r.pM)({__name:"SyllabusUploadConfirmation",props:{isOpen:{type:Boolean,required:!0},syllabus:{type:Object,default:null}},emits:["accept","edit","deny"],setup(e){const t=e,s=(0,r.EW)((()=>{if(!t.syllabus||!Array.isArray(t.syllabus.requirements)||0===t.syllabus.requirements.length)return"N/A";try{const e=Ln(t.syllabus.requirements.map((e=>e.level.toString())));return e.sort(((e,t)=>e.localeCompare(t,void 0,{numeric:!0}))).join(", ")}catch(e){return v.error("Could not compute distinct levels:",e),"Error"}}));return(t,a)=>((0,r.uX)(),(0,r.Wv)(kn,{"is-open":e.isOpen,title:"Confirm Syllabus",onClose:a[3]||(a[3]=e=>t.$emit("deny"))},{body:(0,r.k6)((()=>[e.syllabus?((0,r.uX)(),(0,r.CE)("div",En,[(0,r.Lk)("div",An,[(0,r.bF)((0,i.R1)(wn.A),{class:"h-6 w-6 text-green-600","aria-hidden":"true"})]),a[8]||(a[8]=(0,r.Lk)("div",{class:"mt-3 text-center sm:mt-5"},[(0,r.Lk)("h3",{class:"text-lg font-medium leading-6 text-gray-900"}," Syllabus Parsed "),(0,r.Lk)("p",{class:"mt-2 text-sm text-gray-500"}," Please review the details below before saving. ")],-1)),(0,r.Lk)("div",Dn,[(0,r.Lk)("div",_n,[(0,r.Lk)("dt",Pn,[(0,r.bF)((0,i.R1)(dt.A),{class:"h-5 w-5 text-gray-400 mr-3"}),a[4]||(a[4]=(0,r.eW)(" Track / Position "))]),(0,r.Lk)("dd",Rn,(0,o.v_)(e.syllabus.position||"N/A"),1)]),(0,r.Lk)("div",Tn,[(0,r.Lk)("dt",In,[(0,r.bF)((0,i.R1)(ct.A),{class:"h-5 w-5 text-gray-400 mr-3"}),a[5]||(a[5]=(0,r.eW)(" Year "))]),(0,r.Lk)("dd",Nn,(0,o.v_)(e.syllabus.year||"N/A"),1)]),(0,r.Lk)("div",Fn,[(0,r.Lk)("dt",Wn,[(0,r.bF)((0,i.R1)(Sn.A),{class:"h-5 w-5 text-gray-400 mr-3"}),a[6]||(a[6]=(0,r.eW)(" Total Requirements "))]),(0,r.Lk)("dd",$n,(0,o.v_)(Array.isArray(e.syllabus.requirements)?e.syllabus.requirements.length:0),1)]),(0,r.Lk)("div",Un,[(0,r.Lk)("dt",Mn,[(0,r.bF)((0,i.R1)(Cn.A),{class:"h-5 w-5 text-gray-400 mr-3"}),a[7]||(a[7]=(0,r.eW)(" Detected Levels "))]),(0,r.Lk)("dd",qn,(0,o.v_)(s.value),1)])])])):((0,r.uX)(),(0,r.CE)("div",On,a[9]||(a[9]=[(0,r.Lk)("p",null,"Loading syllabus details...",-1)])))])),footer:(0,r.k6)((()=>[(0,r.Lk)("div",jn,[(0,r.Lk)("button",{type:"button",onClick:a[0]||(a[0]=e=>t.$emit("accept")),class:"inline-flex w-full justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-indigo-700 sm:w-auto sm:text-sm"}," Accept & Save "),(0,r.Lk)("button",{type:"button",onClick:a[1]||(a[1]=e=>t.$emit("edit")),class:"inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 sm:mt-0 sm:w-auto sm:text-sm"}," Edit "),(0,r.Lk)("button",{type:"button",onClick:a[2]||(a[2]=e=>t.$emit("deny")),class:"inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 sm:mt-0 sm:w-auto sm:text-sm"}," Deny ")])])),_:1},8,["is-open"]))}});const Bn=Xn;var Kn=Bn;const Hn={downloadSyllabi(e){const t=`window.UPSHOT_USER_SYLLABI = ${JSON.stringify(e,null,2)};`,s=new Blob([t],{type:"text/javascript;charset=utf-8"});(0,d.saveAs)(s,"user_syllabi.json")},downloadAppConfig(){const e=Y(),t=`window.UPSHOT_USER_APP_CONFIG = ${JSON.stringify(e.currentConfig,null,2)};`,s=new Blob([t],{type:"text/javascript;charset=utf-8"});(0,d.saveAs)(s,"user_app_config.json")}},Gn={class:"p-4 sm:p-6 lg:p-8 space-y-6"},Vn={class:"flex justify-between items-center"},Qn=["disabled"];var Yn=(0,r.pM)({__name:"SyllabusManagementView",setup(e){const t=(0,n.rd)(),s=W(),l=y(),d=(0,r.EW)((()=>s.allSyllabi)),c=(0,i.KR)(!1),u=(0,i.KR)(null),p=(0,i.KR)(null),g=(0,i.KR)(!1),m=()=>{var e;null===(e=p.value)||void 0===e||e.click()},v=e=>{var t;g.value=!1;const s=null===(t=e.dataTransfer)||void 0===t?void 0:t.files;s&&s.length>0&&h(s[0])},f=e=>{const t=e.target,s=t.files;s&&s.length>0&&h(s[0])},h=async e=>{if(e){l.setGlobalLoading(!0);try{const t=await N(e);if(!(t&&t.length>0))throw new Error("No syllabi could be parsed from the file.");{const e=t[0];if(!e||!e.id)throw new Error("Parsed syllabus is malformed or missing an ID.");u.value=e,c.value=!0}}catch(t){console.error("Error during syllabus processing:",t),l.addNotification({message:`Error parsing syllabus: ${t.message}`,type:"error"})}finally{l.setGlobalLoading(!1),p.value&&(p.value.value="")}}},b=()=>{u.value&&s.addSyllabus(u.value),w()},x=()=>{u.value&&u.value.id&&(s.addSyllabus(u.value),t.push({name:"SyllabusEdit",params:{id:u.value.id}})),w()},k=e=>{t.push({name:"SyllabusEdit",params:{id:e}})},L=()=>{w()},w=()=>{c.value=!1,u.value=null},S=()=>{Hn.downloadSyllabi(s.allSyllabi)};return(e,t)=>((0,r.uX)(),(0,r.CE)("div",Gn,[(0,r.Lk)("header",Vn,[t[2]||(t[2]=(0,r.Lk)("div",null,[(0,r.Lk)("h1",{class:"text-2xl font-bold text-gray-800"},"Syllabus Management"),(0,r.Lk)("p",{class:"text-gray-600"}," Manage existing syllabi or upload a new one. ")],-1)),(0,r.Lk)("button",{onClick:S,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:bg-gray-400",disabled:!(0,i.R1)(s).isDirty,title:"Download all current syllabi as a user_syllabi.js file"}," Download Syllabi ",8,Qn)]),(0,r.Lk)("div",{class:(0,o.C4)(["relative border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-indigo-500 transition-colors",{"bg-indigo-50 border-indigo-500":g.value}]),onDragover:t[0]||(t[0]=(0,a.D$)((e=>g.value=!0),["prevent"])),onDragleave:t[1]||(t[1]=(0,a.D$)((e=>g.value=!1),["prevent"])),onDrop:(0,a.D$)(v,["prevent"]),onClick:m},[(0,r.Lk)("input",{ref_key:"fileInput",ref:p,type:"file",class:"hidden",accept:".xlsx, .xls",onChange:f},null,544),t[3]||(t[3]=(0,r.Lk)("div",{class:"space-y-2"},[(0,r.Lk)("p",{class:"text-gray-500"}," Drag & drop your SHARP syllabus export here, or click to select a file. ")],-1))],34),(0,r.bF)(un,{syllabi:d.value,onEdit:k},null,8,["syllabi"]),u.value?((0,r.uX)(),(0,r.Wv)(Kn,{key:0,"is-open":c.value,syllabus:u.value,onAccept:b,onEdit:x,onDeny:L},null,8,["is-open","syllabus"])):(0,r.Q3)("",!0)]))}});const zn=Yn;var Jn=zn,Zn=s(6971),er=s(3291),tr=s(5186);const sr={class:"overflow-x-auto rounded-lg border border-gray-200 shadow-sm"},ar={class:"min-w-full divide-y divide-gray-200"},lr={class:"bg-gray-50"},nr=["onClick"],rr={class:"bg-white divide-y divide-gray-200"},or={key:0},ir=["colspan"],dr=["onClick"],cr={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-800"},ur={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},pr={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},gr={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},mr={class:"px-6 py-4 text-sm text-gray-500"},vr={key:0,class:"whitespace-normal"},fr={key:1,class:"text-gray-400"},yr={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},hr={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800"},br={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},xr={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"};var kr=(0,r.pM)({__name:"SyllabusRequirementsTable",props:{requirements:{type:Array,required:!0}},emits:["edit-requirement"],setup(e){const t=e=>{const t="h-4 w-4 text-gray-400";return e.sortKey!==e.currentSortKey?(0,r.h)(Zn.A,{class:t}):"asc"===e.sortDirection?(0,r.h)(er.A,{class:"h-4 w-4 text-gray-600"}):(0,r.h)(tr.A,{class:"h-4 w-4 text-gray-600"})},s=e,a=(0,i.KR)([{key:"displayName",label:"Display Name",sortable:!0},{key:"type",label:"Type",sortable:!0},{key:"level",label:"Level",sortable:!0},{key:"difficulty",label:"Difficulty",sortable:!0},{key:"prerequisites",label:"Prereqs",sortable:!1},{key:"isDefaultWaived",label:"Waived",sortable:!0},{key:"rawSharpEventSubtype",label:"SubType",sortable:!0}]),l=(0,i.KR)("displayName"),n=(0,i.KR)("asc"),d=(0,r.EW)((()=>s.requirements?[...s.requirements].sort(((e,t)=>{let s=e[l.value],a=t[l.value];if(null==s)return 1;if(null==a)return-1;let r=0;return"string"===typeof s&&"string"===typeof a?r=s.localeCompare(a):"boolean"===typeof s&&"boolean"===typeof a?r=s===a?0:s?-1:1:s>a?r=1:s<a&&(r=-1),"asc"===n.value?r:-r})):[]));function c(e){l.value===e?n.value="asc"===n.value?"desc":"asc":(l.value=e,n.value="asc")}return(e,s)=>((0,r.uX)(),(0,r.CE)("div",sr,[(0,r.Lk)("table",ar,[(0,r.Lk)("thead",lr,[(0,r.Lk)("tr",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.value,(e=>((0,r.uX)(),(0,r.CE)("th",{key:e.key,scope:"col",class:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider"},[(0,r.Lk)("div",{class:"flex items-center gap-x-2 cursor-pointer",onClick:t=>e.sortable?c(e.key):null},[(0,r.eW)((0,o.v_)(e.label)+" ",1),e.sortable?((0,r.uX)(),(0,r.Wv)(t,{key:0,sortKey:e.key,currentSortKey:l.value,sortDirection:n.value},null,8,["sortKey","currentSortKey","sortDirection"])):(0,r.Q3)("",!0)],8,nr)])))),128))])]),(0,r.Lk)("tbody",rr,[0===d.value.length?((0,r.uX)(),(0,r.CE)("tr",or,[(0,r.Lk)("td",{colspan:a.value.length,class:"text-center py-10 text-gray-500"}," No requirements match the current filters. ",8,ir)])):(0,r.Q3)("",!0),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(d.value,(t=>{var s,a;return(0,r.uX)(),(0,r.CE)("tr",{key:t.id,onClick:s=>e.$emit("edit-requirement",t),class:"hover:bg-gray-50 cursor-pointer transition-colors duration-150"},[(0,r.Lk)("td",cr,(0,o.v_)(t.displayName),1),(0,r.Lk)("td",ur,(0,o.v_)(t.type),1),(0,r.Lk)("td",pr,(0,o.v_)(t.level),1),(0,r.Lk)("td",gr,(0,o.v_)(null!==(s=t.difficulty)&&void 0!==s?s:"N/A"),1),(0,r.Lk)("td",mr,[t.prerequisites&&t.prerequisites.length>0?((0,r.uX)(),(0,r.CE)("span",vr,(0,o.v_)(t.prerequisites.join(", ")),1)):((0,r.uX)(),(0,r.CE)("span",fr,"N/A"))]),(0,r.Lk)("td",yr,[t.isDefaultWaived?((0,r.uX)(),(0,r.CE)("span",hr," Waived ")):((0,r.uX)(),(0,r.CE)("span",br," Required "))]),(0,r.Lk)("td",xr,(0,o.v_)(null!==(a=t.rawSharpEventSubtype)&&void 0!==a?a:"N/A"),1)],8,dr)})),128))])])]))}});const Lr=kr;var wr=Lr;const Sr={class:"bg-white rounded-lg max-w-4xl mx-auto"},Cr={key:0,class:"space-y-6"},Er={class:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 p-4 border rounded-md"},Ar={class:"md:col-span-2"},Dr={class:"grid grid-cols-1 md:grid-cols-4 gap-x-6 gap-y-4 p-4 border rounded-md"},_r=["value"],Pr={class:"md:col-span-4"},Rr=["value"],Tr={class:"md:col-span-4 flex items-center"},Ir={class:"flex items-center space-x-3 cursor-pointer"},Nr={class:"mt-6 flex justify-end space-x-3"};var Fr=(0,r.pM)({__name:"RequirementItem",props:{requirement:{type:Object,required:!0}},emits:["update:requirement","cancel"],setup(e,{emit:t}){const s=e,l=t,n=(0,i.KR)(Object.assign({},s.requirement)),d=(0,r.EW)((()=>{var e;return(null===(e=n.value.prerequisites)||void 0===e?void 0:e.join(", "))||""})),c=e=>{n.value.prerequisites=e.split(",").map((e=>e.trim())).filter(Boolean)};(0,r.wB)((()=>s.requirement),(e=>{n.value=Object.assign(Object.assign({},e),{isDefaultWaived:!!e.isDefaultWaived})}),{deep:!0,immediate:!0});const u=()=>{l("update:requirement",n.value)};return(e,t)=>((0,r.uX)(),(0,r.CE)("div",Sr,[t[19]||(t[19]=(0,r.Lk)("h4",{class:"text-xl font-semibold mb-4 text-gray-800"},"Edit Requirement",-1)),n.value?((0,r.uX)(),(0,r.CE)("div",Cr,[(0,r.Lk)("div",Er,[(0,r.Lk)("div",null,[t[10]||(t[10]=(0,r.Lk)("label",{for:"displayName",class:"block text-sm font-medium text-gray-700"},"Display Name",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",id:"displayName","onUpdate:modelValue":t[0]||(t[0]=e=>n.value.displayName=e),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-1.5"},null,512),[[a.Jo,n.value.displayName]])]),(0,r.Lk)("div",null,[t[11]||(t[11]=(0,r.Lk)("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Unique Name / ID",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>n.value.name=e),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-1.5"},null,512),[[a.Jo,n.value.name]])]),(0,r.Lk)("div",Ar,[t[12]||(t[12]=(0,r.Lk)("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),(0,r.bo)((0,r.Lk)("textarea",{id:"description","onUpdate:modelValue":t[2]||(t[2]=e=>n.value.description=e),rows:"2",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-1.5"},null,512),[[a.Jo,n.value.description]])])]),(0,r.Lk)("div",Dr,[(0,r.Lk)("div",null,[t[13]||(t[13]=(0,r.Lk)("label",{for:"type",class:"block text-sm font-medium text-gray-700"},"Type",-1)),(0,r.bo)((0,r.Lk)("select",{id:"type","onUpdate:modelValue":t[3]||(t[3]=e=>n.value.type=e),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-1.5"},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)((0,i.R1)(_),(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,o.v_)(e),9,_r)))),128))],512),[[a.u1,n.value.type]])]),(0,r.Lk)("div",null,[t[14]||(t[14]=(0,r.Lk)("label",{for:"rawSharpEventSubtype",class:"block text-sm font-medium text-gray-700"},"SHARP SubType",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",id:"rawSharpEventSubtype","onUpdate:modelValue":t[4]||(t[4]=e=>n.value.rawSharpEventSubtype=e),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-1.5"},null,512),[[a.Jo,n.value.rawSharpEventSubtype]])]),(0,r.Lk)("div",null,[t[15]||(t[15]=(0,r.Lk)("label",{for:"level",class:"block text-sm font-medium text-gray-700"},"Level",-1)),(0,r.bo)((0,r.Lk)("input",{type:"number",id:"level","onUpdate:modelValue":t[5]||(t[5]=e=>n.value.level=e),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-1.5"},null,512),[[a.Jo,n.value.level,void 0,{number:!0}]])]),(0,r.Lk)("div",null,[t[16]||(t[16]=(0,r.Lk)("label",{for:"difficulty",class:"block text-sm font-medium text-gray-700"},"Difficulty",-1)),(0,r.bo)((0,r.Lk)("input",{type:"number",id:"difficulty","onUpdate:modelValue":t[6]||(t[6]=e=>n.value.difficulty=e),placeholder:"Default: 1",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-1.5"},null,512),[[a.Jo,n.value.difficulty,void 0,{number:!0}]])]),(0,r.Lk)("div",Pr,[t[17]||(t[17]=(0,r.Lk)("label",{for:"prerequisites",class:"block text-sm font-medium text-gray-700"},"Prerequisites",-1)),(0,r.Lk)("input",{type:"text",id:"prerequisites",value:d.value,onInput:t[7]||(t[7]=e=>c(e.target.value)),placeholder:"Enter req IDs, comma-separated",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-1.5"},null,40,Rr)]),(0,r.Lk)("div",Tr,[(0,r.Lk)("label",Ir,[(0,r.bo)((0,r.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=e=>n.value.isDefaultWaived=e),class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"},null,512),[[a.lH,n.value.isDefaultWaived]]),t[18]||(t[18]=(0,r.Lk)("span",{class:"text-sm font-medium text-gray-700"},"Waived by Default",-1))])])]),(0,r.Lk)("div",Nr,[(0,r.Lk)("button",{type:"button",onClick:t[9]||(t[9]=t=>e.$emit("cancel")),class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500"}," Cancel "),(0,r.Lk)("button",{type:"button",onClick:u,class:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500"}," Save Changes ")])])):(0,r.Q3)("",!0)]))}});const Wr=Fr;var $r=Wr,Ur=s(9529);const Mr={class:"flex flex-col h-full bg-gray-50 p-4 sm:p-6 lg:p-8"},qr={key:0,class:"mb-6 pb-4 border-b border-gray-200"},Or={class:"flex items-center justify-between"},jr={class:"text-2xl font-bold text-gray-900"},Xr={class:"mt-1 text-sm text-gray-500"},Br={key:1,class:"flex flex-grow overflow-hidden bg-white rounded-lg shadow"},Kr={class:"w-64 flex-shrink-0 border-r border-gray-200 p-6"},Hr={class:"space-y-6"},Gr=["value"],Vr=["value"],Qr=["value"],Yr={class:"border-t border-gray-200 pt-6"},zr={class:"space-y-2"},Jr=["disabled"],Zr=["disabled"],eo={class:"flex-1 p-6 overflow-y-auto"},to={key:"table"},so={key:2,class:"flex items-center justify-center h-full text-gray-500"};var ao=(0,r.pM)({__name:"SyllabusEditView",setup(e){const t=(0,n.lq)(),s=W(),l=(0,i.KR)(null),d=(0,i.KR)(null),c=(0,i.KR)(null),u=(0,i.KR)(null),p=(0,i.KR)(null),g=(0,r.EW)((()=>l.value?Ln(l.value.requirements.map((e=>e.level.toString()))).sort(((e,t)=>e.localeCompare(t,void 0,{numeric:!0}))):[])),m=(0,r.EW)((()=>l.value?Ln(l.value.requirements.map((e=>e.type))).sort():[])),v=(0,r.EW)((()=>{if(!l.value)return[];const e=l.value.requirements.map((e=>e.rawSharpEventSubtype)).filter((e=>!!e));return Ln(e).sort()})),f=(0,r.EW)((()=>l.value?l.value.requirements.filter((e=>{const t=!d.value||e.level.toString()===d.value,s=!c.value||e.type===c.value,a=!u.value||e.rawSharpEventSubtype===u.value;return t&&s&&a})):[]));(0,r.sV)((()=>{const e=t.params.id,a=s.getSyllabusById(e);a?(l.value=JSON.parse(JSON.stringify(a)),l.value&&l.value.baseLevel&&(d.value=l.value.baseLevel.toString())):console.error(`Syllabus with ID "${e}" was not found in the store.`)}));const y=()=>{if(!l.value)return;const e=new Set(f.value.map((e=>e.id))),t=l.value.requirements.map((t=>e.has(t.id)?Object.assign(Object.assign({},t),{isDefaultWaived:!0}):t));l.value.requirements=t,s.updateSyllabus(l.value.id,l.value)},h=()=>{if(!l.value)return;const e=new Set(f.value.map((e=>e.id))),t=l.value.requirements.map((t=>e.has(t.id)?Object.assign(Object.assign({},t),{isDefaultWaived:!1}):t));l.value.requirements=t,s.updateSyllabus(l.value.id,l.value)};function b(e){p.value=Object.assign({},e)}function x(){p.value=null}function k(e){if(!l.value)return;const t=l.value.requirements.findIndex((t=>t.id===e.id));-1!==t&&(l.value.requirements[t]=e,s.updateSyllabus(l.value.id,l.value)),p.value=null}return(e,t)=>{const s=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",Mr,[l.value?((0,r.uX)(),(0,r.CE)("header",qr,[(0,r.Lk)("div",Or,[(0,r.Lk)("div",null,[(0,r.Lk)("h1",jr,(0,o.v_)(l.value.displayName),1),(0,r.Lk)("p",Xr," Editing "+(0,o.v_)(l.value.position)+" Syllabus ("+(0,o.v_)(l.value.year)+") ",1)]),(0,r.bF)(s,{to:{name:"SyllabusManagement"},class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500"},{default:(0,r.k6)((()=>[(0,r.bF)((0,i.R1)(Ur.A),{class:"h-5 w-5 mr-2"}),t[3]||(t[3]=(0,r.eW)(" Back to Management "))])),_:1,__:[3]})])])):(0,r.Q3)("",!0),l.value?((0,r.uX)(),(0,r.CE)("div",Br,[(0,r.Lk)("aside",Kr,[t[11]||(t[11]=(0,r.Lk)("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Filters",-1)),(0,r.Lk)("div",Hr,[(0,r.Lk)("div",null,[t[5]||(t[5]=(0,r.Lk)("label",{for:"level-filter",class:"block text-sm font-medium text-gray-700"},"Level",-1)),(0,r.bo)((0,r.Lk)("select",{id:"level-filter","onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"},[t[4]||(t[4]=(0,r.Lk)("option",{value:null},"All Levels",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(g.value,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,o.v_)(e),9,Gr)))),128))],512),[[a.u1,d.value]])]),(0,r.Lk)("div",null,[t[7]||(t[7]=(0,r.Lk)("label",{for:"type-filter",class:"block text-sm font-medium text-gray-700"},"Type",-1)),(0,r.bo)((0,r.Lk)("select",{id:"type-filter","onUpdate:modelValue":t[1]||(t[1]=e=>c.value=e),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"},[t[6]||(t[6]=(0,r.Lk)("option",{value:null},"All Types",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(m.value,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,o.v_)(e),9,Vr)))),128))],512),[[a.u1,c.value]])]),(0,r.Lk)("div",null,[t[9]||(t[9]=(0,r.Lk)("label",{for:"subtype-filter",class:"block text-sm font-medium text-gray-700"},"SubType",-1)),(0,r.bo)((0,r.Lk)("select",{id:"subtype-filter","onUpdate:modelValue":t[2]||(t[2]=e=>u.value=e),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"},[t[8]||(t[8]=(0,r.Lk)("option",{value:null},"All SubTypes",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(v.value,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,o.v_)(e),9,Qr)))),128))],512),[[a.u1,u.value]])]),(0,r.Lk)("div",Yr,[t[10]||(t[10]=(0,r.Lk)("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Actions",-1)),(0,r.Lk)("div",zr,[(0,r.Lk)("button",{onClick:y,class:"w-full inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-yellow-600 hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:0===f.value.length,title:"Mark all requirements currently visible in the table as waived"}," Waive All Displayed ("+(0,o.v_)(f.value.length)+") ",9,Jr),(0,r.Lk)("button",{onClick:h,class:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:0===f.value.length,title:"Mark all requirements currently visible in the table as required"}," Unwaive All Displayed ("+(0,o.v_)(f.value.length)+") ",9,Zr)])])])]),(0,r.Lk)("main",eo,[(0,r.bF)(a.eB,{name:"fade",mode:"out-in"},{default:(0,r.k6)((()=>[p.value?((0,r.uX)(),(0,r.Wv)($r,{requirement:p.value,"onUpdate:requirement":k,onCancel:x,key:p.value.id},null,8,["requirement"])):((0,r.uX)(),(0,r.CE)("div",to,[(0,r.bF)(wr,{requirements:f.value,onEditRequirement:b},null,8,["requirements"])]))])),_:1})])])):((0,r.uX)(),(0,r.CE)("div",so,t[12]||(t[12]=[(0,r.Lk)("p",null,"Loading syllabus...",-1)])))])}}});const lo=(0,bn.A)(ao,[["__scopeId","data-v-19a1eeb4"]]);var no=lo,ro=s(4140);function oo(e){return(0,ro.A)(e).darken(10).toHexString()}function io(e){return ro.A.isReadable(e,"#000",{level:"AA",size:"small"})?"#000000":"#ffffff"}const co={class:"p-4 sm:p-6 lg:p-8"},uo={key:0,class:"mt-8 space-y-10"},po={class:"grid grid-cols-1 gap-x-8 gap-y-8 md:grid-cols-3 bg-white p-6 rounded-lg shadow-sm"},go={class:"md:col-span-2 space-y-6"},mo={class:"relative flex items-start"},vo={class:"flex h-6 items-center"},fo={class:"grid grid-cols-1 gap-x-8 gap-y-8 md:grid-cols-3 bg-white p-6 rounded-lg shadow-sm"},yo={class:"md:col-span-2 space-y-8"},ho={class:"font-medium text-secondary uppercase"},bo={class:"space-y-4 pl-4 border-l-2 border-secondary/20"},xo=["for"],ko={class:"sm:col-span-1"},Lo=["for"],wo=["id","value","onInput"],So={class:"sm:col-span-1"},Co=["for"],Eo=["id","value","onInput"],Ao={class:"grid grid-cols-1 gap-x-8 gap-y-8 md:grid-cols-3 bg-white p-6 rounded-lg shadow-sm"},Do={class:"grid grid-cols-1 gap-6 md:col-span-2 sm:grid-cols-2"},_o=["for"],Po={class:"mt-1 flex items-center gap-x-3"},Ro=["id","value","onInput"],To={class:"grid grid-cols-1 gap-x-8 gap-y-8 md:grid-cols-3 bg-white p-6 rounded-lg shadow-sm"},Io={class:"md:col-span-2 space-y-8"},No={class:"grid grid-cols-1 gap-x-6 gap-y-4 sm:grid-cols-6 mt-2"},Fo=["for"],Wo=["id","onUpdate:modelValue"],$o={class:"mt-2"},Uo={key:1,class:"text-center mt-8"};var Mo=(0,r.pM)({__name:"AppSettingsView",setup(e){const t=Y(),s=y(),l=(0,i.KR)(null);function n(e,t){if(l.value){const s=l.value.colorScheme[e];s.DEFAULT=t,s.hover=oo(t),s.foreground=io(t)}}(0,r.sV)((()=>{const e=V(t.config);for(const t in G)void 0===e[t]&&(e[t]=G[t]);e.trainingDepartment||(e.trainingDepartment=V(G.trainingDepartment)),l.value=e}));const d=()=>{l.value&&(t.updateConfig(l.value),t.downloadCurrentConfig(),s.addNotification({message:"Configuration saved and downloaded as 'user_app_config.js'.",type:"success"}))};return(e,s)=>((0,r.uX)(),(0,r.CE)("div",co,[(0,r.Lk)("div",{class:"sm:flex sm:items-center sm:justify-between"},[s[3]||(s[3]=(0,r.Lk)("div",{class:"sm:flex-auto"},[(0,r.Lk)("h1",{class:"text-2xl font-bold text-primary"},"Application Settings"),(0,r.Lk)("p",{class:"mt-2 text-sm text-secondary"}," Manage global settings, department info, API keys, and track deadlines. ")],-1)),(0,r.Lk)("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[(0,r.Lk)("button",{onClick:d,type:"button",class:"inline-flex items-center justify-center rounded-md border border-transparent bg-action px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-action/90 focus:outline-none focus:ring-2 focus:ring-action focus:ring-offset-2 sm:w-auto"}," Save and Download ")])]),l.value?((0,r.uX)(),(0,r.CE)("div",uo,[(0,r.Lk)("div",po,[s[6]||(s[6]=(0,r.Lk)("div",null,[(0,r.Lk)("h2",{class:"text-base font-semibold leading-7 text-secondary"}," General "),(0,r.Lk)("p",{class:"mt-1 text-sm leading-6 text-secondary/80"}," High-level application settings. ")],-1)),(0,r.Lk)("div",go,[(0,r.Lk)("div",null,[s[4]||(s[4]=(0,r.Lk)("label",{for:"primary-user",class:"block text-sm font-medium text-secondary"},"Training Officer",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=e=>l.value.trainingDepartment.departmentHead=e),id:"primary-user",class:"mt-1 block w-full max-w-xs shadow-sm sm:text-sm border-secondary/30 rounded-md px-3 py-1.5"},null,512),[[a.Jo,l.value.trainingDepartment.departmentHead]])]),(0,r.Lk)("fieldset",null,[(0,r.Lk)("div",mo,[(0,r.Lk)("div",vo,[(0,r.bo)((0,r.Lk)("input",{id:"round-dates",type:"checkbox","onUpdate:modelValue":s[1]||(s[1]=e=>l.value.useRoundedTrainingStartDate=e),class:"h-4 w-4 rounded border-secondary/30 text-primary focus:ring-primary"},null,512),[[a.lH,l.value.useRoundedTrainingStartDate]])]),s[5]||(s[5]=(0,r.Lk)("div",{class:"ml-3 text-sm leading-6"},[(0,r.Lk)("label",{for:"round-dates",class:"font-medium text-secondary"},"Use Rounded Training Start Dates"),(0,r.Lk)("p",{class:"text-secondary/80"}," If checked, start dates after the 15th will round to the 1st of the next month. ")],-1))])])])]),(0,r.Lk)("div",fo,[s[7]||(s[7]=(0,r.Lk)("div",null,[(0,r.Lk)("h2",{class:"text-base font-semibold leading-7 text-secondary"}," Track Deadlines "),(0,r.Lk)("p",{class:"mt-1 text-sm leading-6 text-secondary/80"}," Define target and deadline months for each qualification level by position. ")],-1)),(0,r.Lk)("div",yo,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.value.positionSettings,((e,s)=>((0,r.uX)(),(0,r.CE)("div",{key:s,class:"space-y-4"},[(0,r.Lk)("h3",ho,(0,o.v_)(s),1),(0,r.Lk)("div",bo,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.deadlines,((e,a)=>((0,r.uX)(),(0,r.CE)("div",{key:a,class:"grid grid-cols-1 sm:grid-cols-3 items-center gap-4"},[(0,r.Lk)("label",{class:"text-sm font-medium text-secondary/90",for:`target-${s}-${a}`},"Level "+(0,o.v_)(a),9,xo),(0,r.Lk)("div",ko,[(0,r.Lk)("label",{for:`target-${s}-${a}`,class:"block text-xs font-medium text-secondary/70"},"Target Months",8,Lo),(0,r.Lk)("input",{type:"number",min:"0",id:`target-${s}-${a}`,value:e.targetMonths,onInput:e=>(0,i.R1)(t).updateCurveDeadlineSetting(s,parseInt(a),{targetMonths:parseInt(e.target.value)}),class:"mt-1 block w-full rounded-md border-secondary/30 shadow-sm sm:text-sm px-3 py-1.5"},null,40,wo)]),(0,r.Lk)("div",So,[(0,r.Lk)("label",{for:`deadline-${s}-${a}`,class:"block text-xs font-medium text-secondary/70"},"Deadline Months",8,Co),(0,r.Lk)("input",{type:"number",min:"0",id:`deadline-${s}-${a}`,value:e.deadlineMonths,onInput:e=>(0,i.R1)(t).updateCurveDeadlineSetting(s,parseInt(a),{deadlineMonths:parseInt(e.target.value)}),class:"mt-1 block w-full rounded-md border-secondary/30 shadow-sm sm:text-sm px-3 py-1.5"},null,40,Eo)])])))),128))])])))),128))])]),(0,r.Lk)("div",Ao,[s[8]||(s[8]=(0,r.Lk)("div",null,[(0,r.Lk)("h2",{class:"text-base font-semibold leading-7 text-secondary"}," Color Scheme "),(0,r.Lk)("p",{class:"mt-1 text-sm leading-6 text-secondary/80"}," Select the base colors for the application theme. Hover and text colors will be generated automatically. ")],-1)),(0,r.Lk)("div",Do,[((0,r.uX)(),(0,r.CE)(r.FK,null,(0,r.pI)(["primary","secondary","accent"],(e=>(0,r.Lk)("div",{key:e,class:"flex flex-col"},[(0,r.Lk)("label",{for:e,class:"block text-sm font-medium capitalize text-secondary"},(0,o.v_)(e),9,_o),(0,r.Lk)("div",Po,[(0,r.Lk)("input",{type:"color",id:e,value:l.value.colorScheme[e].DEFAULT,onInput:t=>n(e,t.target.value),class:"h-10 w-20 rounded-md border-secondary/30 cursor-pointer"},null,40,Ro),(0,r.Lk)("span",{class:"px-3 py-1.5 rounded-md text-sm",style:(0,o.Tr)({backgroundColor:l.value.colorScheme[e].DEFAULT,color:l.value.colorScheme[e].foreground})},"Aa",4)])]))),64))])]),(0,r.Lk)("div",To,[s[12]||(s[12]=(0,r.Lk)("div",null,[(0,r.Lk)("h2",{class:"text-base font-semibold leading-7 text-secondary"}," Department & API "),(0,r.Lk)("p",{class:"mt-1 text-sm leading-6 text-secondary/80"}," Info for report headers and AI integration. ")],-1)),(0,r.Lk)("div",Io,[(0,r.Lk)("div",null,[s[9]||(s[9]=(0,r.Lk)("h3",{class:"font-medium text-secondary"},"Training Department Info",-1)),(0,r.Lk)("div",No,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(Object.keys(l.value.trainingDepartment),(e=>((0,r.uX)(),(0,r.CE)("div",{key:e,class:"sm:col-span-3"},[(0,r.Lk)("label",{for:e,class:"block text-sm font-medium capitalize text-secondary"},(0,o.v_)(e.replace(/([A-Z])/g," $1").trim()),9,Fo),(0,r.bo)((0,r.Lk)("input",{type:"text",id:e,"onUpdate:modelValue":t=>l.value.trainingDepartment[e]=t,class:"mt-1 block w-full rounded-md border-secondary/30 shadow-sm focus:border-primary focus:ring-primary sm:text-sm px-3 py-1.5"},null,8,Wo),[[a.Jo,l.value.trainingDepartment[e]]])])))),128))])]),(0,r.Lk)("div",null,[s[11]||(s[11]=(0,r.Lk)("h3",{class:"font-medium text-secondary"},"API Keys",-1)),(0,r.Lk)("div",$o,[s[10]||(s[10]=(0,r.Lk)("label",{for:"gemini-api-key",class:"block text-sm font-medium text-secondary"},"Gemini API Key",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password","onUpdate:modelValue":s[2]||(s[2]=e=>l.value.geminiApiKey=e),id:"gemini-api-key",class:"mt-1 block w-full rounded-md border-secondary/30 shadow-sm focus:border-primary focus:ring-primary sm:text-sm px-3 py-1.5",placeholder:"Enter your Gemini API key"},null,512),[[a.Jo,l.value.geminiApiKey]])])])])])])):((0,r.uX)(),(0,r.CE)("div",Uo,s[13]||(s[13]=[(0,r.Lk)("p",null,"Loading configuration...",-1)])))]))}});const qo=Mo;var Oo=qo;const jo={class:"overflow-x-auto"},Xo={class:"min-w-full divide-y divide-gray-200"},Bo={class:"bg-white divide-y divide-gray-200"},Ko={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Ho={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Go={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Vo={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"};var Qo=(0,r.pM)({__name:"PersonnelTable",props:{personnel:{type:Array,required:!0}},setup(e){return(t,s)=>{const a=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",jo,[(0,r.Lk)("table",Xo,[s[0]||(s[0]=(0,r.Lk)("thead",{class:"bg-gray-50"},[(0,r.Lk)("tr",null,[(0,r.Lk)("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Name "),(0,r.Lk)("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rank "),(0,r.Lk)("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Position "),(0,r.Lk)("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Start Date ")])],-1)),(0,r.Lk)("tbody",Bo,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.personnel,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",Ko,[(0,r.bF)(a,{to:{name:"StudentDetail",params:{id:e.id}},class:"text-indigo-600 hover:text-indigo-900 hover:underline"},{default:(0,r.k6)((()=>[(0,r.eW)((0,o.v_)(e.displayName),1)])),_:2},1032,["to"])]),(0,r.Lk)("td",Ho,(0,o.v_)(e.rank),1),(0,r.Lk)("td",Go,(0,o.v_)(e.assignedPosition),1),(0,r.Lk)("td",Vo,(0,o.v_)(new Date(e.startDate).toLocaleDateString()),1)])))),128))])])])}}});const Yo=Qo;var zo=Yo,Jo=s(3502);const Zo={class:"p-4 sm:p-6 lg:p-8 bg-gray-50 min-h-full"},ei={class:"border-b border-gray-200 pb-5"},ti={class:"sm:flex sm:items-baseline sm:justify-between"},si={class:"mt-4 flex items-center justify-start sm:mt-0 sm:ml-4"},ai=["disabled"],li={class:"mt-8 grid grid-cols-1 gap-12 lg:grid-cols-3"},ni={class:"lg:col-span-1"},ri={class:"space-y-2"},oi={key:0,class:"mt-4"},ii={class:"lg:col-span-2"},di={class:"text-lg font-medium text-gray-900"},ci={class:"mt-1 text-sm text-gray-500"},ui={class:"mt-4 flow-root"},pi={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},gi={class:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},mi={key:0,class:"text-center py-10 px-4 rounded-lg bg-yellow-50 border border-yellow-200"};var vi=(0,r.pM)({__name:"PersonnelUploadView",setup(e){const t=(0,n.rd)(),s=ue(),l=y(),d=(0,r.EW)((()=>s.isDataLoaded)),c=(0,i.KR)([]),u=(0,i.KR)(!1),p=(0,r.EW)((()=>(u.value?c.value:s.allPersonnel)||[])),g=(0,i.KR)(null),m=(0,i.KR)(!1),v=()=>{var e;null===(e=g.value)||void 0===e||e.click()},f=e=>{var t;m.value=!1;const s=null===(t=e.dataTransfer)||void 0===t?void 0:t.files;s&&s.length>0&&b(s[0])},h=e=>{const t=e.target,s=t.files;s&&s.length>0&&b(s[0])},b=async e=>{if(e){u.value=!0,l.setGlobalLoading(!0);try{const t=await E(e);c.value=t,t.length>0?l.addNotification({message:`${t.length} records loaded for preview.`,type:"info"}):l.addNotification({message:"No valid records found in file. Check column headers.",type:"warn",duration:8e3})}catch(t){l.addNotification({message:`Error processing file: ${t.message}`,type:"error"}),c.value=[]}finally{l.setGlobalLoading(!1),g.value&&(g.value.value="")}}},x=()=>{D()},k=()=>{s.allPersonnel.length>0?A(s.allPersonnel):l.addNotification({message:"No personnel data loaded to download.",type:"warn"})},L=()=>{c.value.length>0&&(s.setPersonnel(c.value),l.addNotification({message:"Personnel roster has been updated.",type:"success"}),c.value=[],u.value=!1,t.push({name:"Dashboard"}))};return(e,t)=>((0,r.uX)(),(0,r.CE)("div",Zo,[(0,r.Lk)("div",ei,[(0,r.Lk)("div",ti,[t[4]||(t[4]=(0,r.Lk)("div",null,[(0,r.Lk)("h1",{class:"text-2xl font-bold tracking-tight text-gray-900"}," Personnel Roster "),(0,r.Lk)("p",{class:"mt-2 text-sm text-gray-500"}," Upload, view, and manage your squadron's personnel data. ")],-1)),(0,r.Lk)("div",si,[(0,r.Lk)("button",{onClick:x,type:"button",class:"ml-3 inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"},[(0,r.bF)((0,i.R1)(be.A),{class:"-ml-0.5 mr-1.5 h-5 w-5 text-gray-400"}),t[2]||(t[2]=(0,r.Lk)("span",null,"Download Template",-1))]),(0,r.Lk)("button",{onClick:k,type:"button",disabled:!d.value,class:"ml-3 inline-flex items-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:bg-gray-400"},[(0,r.bF)((0,i.R1)(Jo.A),{class:"-ml-0.5 mr-1.5 h-5 w-5"}),t[3]||(t[3]=(0,r.Lk)("span",null,"Download Current Roster",-1))],8,ai)])])]),(0,r.Lk)("div",li,[(0,r.Lk)("div",ni,[t[6]||(t[6]=(0,r.Lk)("h2",{class:"text-lg font-medium text-gray-900"},"Upload Roster File",-1)),t[7]||(t[7]=(0,r.Lk)("p",{class:"mt-1 text-sm text-gray-500"}," Upload an Excel file with your personnel data. Use the template for the correct format. ",-1)),(0,r.Lk)("div",{class:(0,o.C4)(["mt-4 relative border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-indigo-500 transition-colors",{"bg-indigo-50 border-indigo-500":m.value}]),onDragover:t[0]||(t[0]=(0,a.D$)((e=>m.value=!0),["prevent"])),onDragleave:t[1]||(t[1]=(0,a.D$)((e=>m.value=!1),["prevent"])),onDrop:(0,a.D$)(f,["prevent"]),onClick:v},[(0,r.Lk)("input",{ref_key:"fileInput",ref:g,type:"file",class:"hidden",accept:".xlsx, .xls",onChange:h},null,544),(0,r.Lk)("div",ri,[(0,r.bF)((0,i.R1)(fe.A),{class:"mx-auto h-12 w-12 text-gray-400"}),t[5]||(t[5]=(0,r.Lk)("p",{class:"text-gray-500"},"Drag & drop file, or click to browse.",-1))])],34),c.value.length>0?((0,r.uX)(),(0,r.CE)("div",oi,[(0,r.Lk)("button",{onClick:L,type:"button",class:"w-full inline-flex items-center justify-center rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500"}," Confirm and Save "+(0,o.v_)(c.value.length)+" Records ",1)])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",ii,[(0,r.Lk)("h2",di,(0,o.v_)(u.value?"Upload Preview":"Current Roster"),1),(0,r.Lk)("p",ci,(0,o.v_)(u.value?'Review the data below. Click "Confirm and Save" to replace the current roster.':"This is the personnel data currently loaded in the application."),1),(0,r.Lk)("div",ui,[(0,r.Lk)("div",pi,[(0,r.Lk)("div",gi,[u.value&&0===p.value.length?((0,r.uX)(),(0,r.CE)("div",mi,[(0,r.bF)((0,i.R1)(rt.A),{class:"mx-auto h-12 w-12 text-yellow-400"}),t[8]||(t[8]=(0,r.Lk)("h3",{class:"mt-2 text-sm font-semibold text-yellow-800"}," No Valid Records Found ",-1)),t[9]||(t[9]=(0,r.Lk)("p",{class:"mt-1 text-sm text-yellow-700"}," The file was processed, but no valid personnel records were found. Please ensure the column headers in your file exactly match the provided template. ",-1)),(0,r.Lk)("div",{class:"mt-4"},[(0,r.Lk)("button",{onClick:x,type:"button",class:"text-sm font-medium text-yellow-800 hover:text-yellow-700 underline"}," Download Template ")])])):((0,r.uX)(),(0,r.Wv)(zo,{key:1,personnel:p.value},null,8,["personnel"]))])])])])])]))}});const fi=vi;var yi=fi,hi=s(1429),bi=s(2725);const xi={class:"p-4 sm:p-6 lg:p-8 bg-gray-50 min-h-full"},ki={class:"border-b border-gray-200 pb-5"},Li={class:"sm:flex sm:items-baseline sm:justify-between"},wi={class:"mt-4 flex items-center justify-start sm:mt-0 sm:ml-4"},Si={class:"mt-8 grid grid-cols-1 gap-12 lg:grid-cols-2"},Ci={class:"lg:col-span-1 space-y-6"},Ei={class:"space-y-2"},Ai=["disabled"],Di={class:"lg:col-span-1"},_i={class:"mt-4 flow-root"},Pi={key:0,role:"list",class:"divide-y divide-gray-200 border-t border-b border-gray-200"},Ri={class:"flex-1 min-w-0"},Ti={class:"text-sm font-medium text-gray-900 truncate"},Ii={class:"text-sm text-gray-500"},Ni=["onClick"],Fi={key:1,class:"text-center py-10 px-4 rounded-lg bg-white border border-gray-200"},Wi={key:0,class:"mt-6 p-4 rounded-lg bg-green-50 border border-green-200"},$i={class:"mt-2 text-sm text-green-700"},Ui={class:"font-bold"};var Mi=(0,r.pM)({__name:"TrainingUploadView",setup(e){const t=y(),s=ve(),l=(0,i.KR)([]),n=(0,i.Kh)({completionsFound:0}),d=(0,i.KR)(null),c=(0,i.KR)(!1),u=()=>{var e;null===(e=d.value)||void 0===e||e.click()},p=e=>{var t;c.value=!1;const s=null===(t=e.dataTransfer)||void 0===t?void 0:t.files;s&&m(Array.from(s))},g=e=>{const t=e.target,s=t.files;s&&m(Array.from(s)),d.value&&(d.value.value="")},m=e=>{const t=e.filter((e=>/\.(xlsx|xls)$/i.test(e.name)));l.value.push(...t)},v=e=>{l.value.splice(e,1)},f=async()=>{if(0===l.value.length)return;t.setGlobalLoading(!0),n.completionsFound=0;const e=await s.processAndMergeMultipleFiles(l.value);n.completionsFound=e.completionsFound,e.completionsFound>0?t.addNotification({message:"Training data successfully merged.",type:"success"}):t.addNotification({message:"No new training completions were found in the provided file(s).",type:"warn"}),l.value=[],t.setGlobalLoading(!1)};return(e,t)=>{const s=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",xi,[(0,r.Lk)("div",ki,[(0,r.Lk)("div",Li,[t[3]||(t[3]=(0,r.Lk)("div",null,[(0,r.Lk)("h1",{class:"text-2xl font-bold tracking-tight text-gray-900"}," Load Training Data "),(0,r.Lk)("p",{class:"mt-2 text-sm text-gray-500"}," Upload one or more SHARP Syllabus Export files to merge training completions. ")],-1)),(0,r.Lk)("div",wi,[(0,r.bF)(s,{to:{name:"Dashboard"},class:"inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"},{default:(0,r.k6)((()=>[(0,r.bF)((0,i.R1)(nl.A),{class:"-ml-0.5 mr-1.5 h-5 w-5 text-gray-400"}),t[2]||(t[2]=(0,r.Lk)("span",null,"Back to Dashboard",-1))])),_:1,__:[2]})])])]),(0,r.Lk)("div",Si,[(0,r.Lk)("div",Ci,[(0,r.Lk)("div",null,[t[5]||(t[5]=(0,r.Lk)("h2",{class:"text-lg font-medium text-gray-900"},"1. Stage Files",-1)),t[6]||(t[6]=(0,r.Lk)("p",{class:"mt-1 text-sm text-gray-500"}," Drag files into the box below or click to browse. You can add multiple files. ",-1)),(0,r.Lk)("div",{class:(0,o.C4)(["mt-4 relative border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-indigo-500 transition-colors",{"bg-indigo-50 border-indigo-500":c.value}]),onDragover:t[0]||(t[0]=(0,a.D$)((e=>c.value=!0),["prevent"])),onDragleave:t[1]||(t[1]=(0,a.D$)((e=>c.value=!1),["prevent"])),onDrop:(0,a.D$)(p,["prevent"]),onClick:u},[(0,r.Lk)("input",{ref_key:"fileInput",ref:d,type:"file",class:"hidden",accept:".xlsx, .xls",onChange:g,multiple:""},null,544),(0,r.Lk)("div",Ei,[(0,r.bF)((0,i.R1)(ye.A),{class:"mx-auto h-12 w-12 text-gray-400"}),t[4]||(t[4]=(0,r.Lk)("p",{class:"text-gray-500"}," Drag & drop files, or click to browse. ",-1))])],34)]),(0,r.Lk)("div",null,[t[7]||(t[7]=(0,r.Lk)("h2",{class:"text-lg font-medium text-gray-900"},"2. Process Files",-1)),t[8]||(t[8]=(0,r.Lk)("p",{class:"mt-1 text-sm text-gray-500"}," Review your staged files, then click below to process them all. ",-1)),(0,r.Lk)("button",{onClick:f,type:"button",disabled:0===l.value.length,class:"mt-4 w-full inline-flex items-center justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 disabled:bg-gray-400"}," Process "+(0,o.v_)(l.value.length)+" Staged Files ",9,Ai)])]),(0,r.Lk)("div",Di,[t[14]||(t[14]=(0,r.Lk)("h2",{class:"text-lg font-medium text-gray-900"},"Staging Area",-1)),(0,r.Lk)("div",_i,[l.value.length>0?((0,r.uX)(),(0,r.CE)("ul",Pi,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.value,((e,t)=>((0,r.uX)(),(0,r.CE)("li",{key:e.name+t,class:"flex items-center space-x-4 p-3 bg-white"},[(0,r.bF)((0,i.R1)(hi.A),{class:"h-6 w-6 flex-shrink-0 text-gray-400"}),(0,r.Lk)("div",Ri,[(0,r.Lk)("p",Ti,(0,o.v_)(e.name),1),(0,r.Lk)("p",Ii,(0,o.v_)((e.size/1024).toFixed(2))+" KB ",1)]),(0,r.Lk)("button",{onClick:e=>v(t),type:"button",class:"p-1 rounded-full hover:bg-gray-100"},[(0,r.bF)((0,i.R1)(bi.A),{class:"h-5 w-5 text-gray-500"})],8,Ni)])))),128))])):((0,r.uX)(),(0,r.CE)("div",Fi,t[9]||(t[9]=[(0,r.Lk)("p",{class:"text-sm text-gray-500"},"No files staged for processing.",-1)])))]),n.completionsFound>0?((0,r.uX)(),(0,r.CE)("div",Wi,[t[12]||(t[12]=(0,r.Lk)("h3",{class:"text-base font-medium text-green-800"}," Batch Processing Complete ",-1)),(0,r.Lk)("p",$i,[t[10]||(t[10]=(0,r.eW)(" Successfully merged ")),(0,r.Lk)("span",Ui,(0,o.v_)(n.completionsFound),1),t[11]||(t[11]=(0,r.eW)(" total training completions from the processed files. "))]),t[13]||(t[13]=(0,r.Lk)("p",{class:"text-sm text-green-700 mt-1"}," You can now view the updated reports. ",-1))])):(0,r.Q3)("",!0)])])])}}});const qi=Mi;var Oi=qi,ji=s(8771);const Xi={class:"py-5 border-b border-gray-200"},Bi={class:"text-base font-medium text-gray-900"},Ki={class:"ml-6 flex h-7 items-center"},Hi={key:0,class:"mt-4 pr-12"},Gi={class:"text-base text-gray-600"};var Vi=(0,r.pM)({__name:"AccordionItem",props:{question:{type:String,required:!0}},setup(e){const t=(0,i.KR)(!1),s=()=>{t.value=!t.value};return(l,n)=>((0,r.uX)(),(0,r.CE)("div",Xi,[(0,r.Lk)("dt",null,[(0,r.Lk)("button",{onClick:s,type:"button",class:"flex w-full items-start justify-between text-left text-gray-400"},[(0,r.Lk)("span",Bi,(0,o.v_)(e.question),1),(0,r.Lk)("span",Ki,[(0,r.bF)((0,i.R1)(ji.A),{class:(0,o.C4)([t.value?"-rotate-180":"rotate-0","h-6 w-6 transform transition-transform"])},null,8,["class"])])])]),(0,r.bF)(a.eB,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 -translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-1"},{default:(0,r.k6)((()=>[t.value?((0,r.uX)(),(0,r.CE)("dd",Hi,[(0,r.Lk)("p",Gi,[(0,r.RG)(l.$slots,"default")])])):(0,r.Q3)("",!0)])),_:3})]))}});const Qi=Vi;var Yi=Qi,zi=s(4428);const Ji={class:"bg-gray-50"},Zi={class:"mx-auto max-w-7xl py-12 px-4 sm:py-16 sm:px-6 lg:px-8"},ed={class:"mx-auto max-w-3xl"},td={class:"mt-12 space-y-6"},sd={class:"mt-4"},ad={class:"list-decimal list-inside mt-2 space-y-2 text-gray-600"};var ld=(0,r.pM)({__name:"HelpView",setup(e){return(e,t)=>{const s=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",Ji,[(0,r.Lk)("div",Zi,[(0,r.Lk)("div",ed,[t[19]||(t[19]=(0,r.Lk)("div",{class:"text-center"},[(0,r.Lk)("h2",{class:"text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl"}," Help & Documentation "),(0,r.Lk)("p",{class:"mt-4 text-lg text-gray-500"}," Answers to common questions about using UPSHOT. If you can't find what you're looking for, check the project's README file. ")],-1)),(0,r.Lk)("dl",td,[(0,r.bF)(Yi,{question:"What is the main workflow?"},{default:(0,r.k6)((()=>t[1]||(t[1]=[(0,r.eW)(" The application follows a simple 3-step process: "),(0,r.Lk)("br",null,null,-1),(0,r.eW)("1. **Load Personnel:** Import your squadron roster. "),(0,r.Lk)("br",null,null,-1),(0,r.eW)("2. **Load Training Data:** Import one or more SHARP training exports. "),(0,r.Lk)("br",null,null,-1),(0,r.eW)("3. **Analyze & Report:** View individual and track-level reports. ")]))),_:1,__:[1]}),(0,r.bF)(Yi,{question:"What is the correct format for the Personnel file?"},{default:(0,r.k6)((()=>[t[3]||(t[3]=(0,r.eW)(" The personnel file must be an Excel file (`.xlsx` or `.xls`) with a header row containing at least 'Full Name' and 'Position'. Other columns like 'Crew', 'Seat', and 'Notes' are optional but recommended. ")),(0,r.Lk)("div",sd,[(0,r.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>(0,i.R1)(D)&&(0,i.R1)(D)(...e)),type:"button",class:"inline-flex items-center gap-x-2 rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},[(0,r.bF)((0,i.R1)(zi.A),{class:"-ml-0.5 h-5 w-5"}),t[2]||(t[2]=(0,r.eW)(" Download Personnel Template "))])])])),_:1,__:[3]}),(0,r.bF)(Yi,{question:"Where do I get the training data file?"},{default:(0,r.k6)((()=>t[4]||(t[4]=[(0,r.eW)(' The training data must be a **Syllabus Export** from SHARP (Sierra Hotel Aviation Readiness Program). Navigate to the syllabus section in SHARP and look for an export option that generates an Excel file with multiple sheets, including "Syllabus Events" and "Default". ')]))),_:1,__:[4]}),(0,r.bF)(Yi,{question:"How do I save changes to a Syllabus or App Configuration?"},{default:(0,r.k6)((()=>t[5]||(t[5]=[(0,r.Lk)("p",{class:"text-gray-700"}," This application runs entirely in your browser and does not have a backend server to store data. All changes are saved by downloading a file that you must then place in the application's directory. ",-1),(0,r.Lk)("br",null,null,-1),(0,r.Lk)("p",{class:"text-gray-700"},[(0,r.eW)(" When you modify settings in the "),(0,r.Lk)("strong",null,"Application Settings"),(0,r.eW)(" or "),(0,r.Lk)("strong",null,"Syllabus Manager"),(0,r.eW)(' pages and click a "Save" or "Download" button, your browser will download a file. ')],-1),(0,r.Lk)("ul",{class:"list-disc list-inside mt-2 space-y-1 text-gray-600"},[(0,r.Lk)("li",null,[(0,r.eW)(" For app settings, this will be "),(0,r.Lk)("code",null,"user_config.js"),(0,r.eW)(". ")]),(0,r.Lk)("li",null,[(0,r.eW)(" For a syllabus, this will be a JSON file like "),(0,r.Lk)("code",null,"PILOT.json"),(0,r.eW)(". ")])],-1),(0,r.Lk)("br",null,null,-1),(0,r.Lk)("p",{class:"text-gray-700"},[(0,r.eW)(" For the application to load your changes automatically next time, you must move the downloaded "),(0,r.Lk)("code",null,"user_config.js"),(0,r.eW)(" file into the "),(0,r.Lk)("code",null,"/config"),(0,r.eW)(" folder located next to the main "),(0,r.Lk)("code",null,"index.html"),(0,r.eW)(" file. For syllabi, you can upload the downloaded JSON file directly in the Syllabus Manager. ")],-1)]))),_:1,__:[5]}),(0,r.bF)(Yi,{question:"How do I set up AI-powered features (Gemini API)?"},{default:(0,r.k6)((()=>[t[12]||(t[12]=(0,r.Lk)("p",{class:"text-gray-700"}," To enable AI-powered reporting, you need to provide your own Google Gemini API key. ",-1)),t[13]||(t[13]=(0,r.Lk)("br",null,null,-1)),t[14]||(t[14]=(0,r.Lk)("h4",{class:"font-semibold text-gray-800"}," Step 1: Create Your API Key ",-1)),t[15]||(t[15]=(0,r.Lk)("ol",{class:"list-decimal list-inside mt-2 space-y-2 text-gray-600"},[(0,r.Lk)("li",null,[(0,r.eW)(" Navigate to the "),(0,r.Lk)("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",class:"text-indigo-600 hover:underline"},"Google AI Studio"),(0,r.eW)(". ")]),(0,r.Lk)("li",null,'Sign in and click "Create API key" to generate your key.'),(0,r.Lk)("li",null,"Copy the generated key to your clipboard.")],-1)),t[16]||(t[16]=(0,r.Lk)("br",null,null,-1)),t[17]||(t[17]=(0,r.Lk)("h4",{class:"font-semibold text-gray-800"}," Step 2: Save the Key in UPSHOT ",-1)),(0,r.Lk)("ol",ad,[(0,r.Lk)("li",null,[t[7]||(t[7]=(0,r.eW)(" Go to the ")),(0,r.bF)(s,{to:"/settings/app",class:"text-indigo-600 hover:underline"},{default:(0,r.k6)((()=>t[6]||(t[6]=[(0,r.eW)("Application Settings")]))),_:1,__:[6]}),t[8]||(t[8]=(0,r.eW)(" page. "))]),t[9]||(t[9]=(0,r.Lk)("li",null,'Paste your key into the "Gemini API Key" field.',-1)),t[10]||(t[10]=(0,r.Lk)("li",null,[(0,r.eW)(' Click the "Save and Download" button. This downloads the '),(0,r.Lk)("code",null,"user_config.js"),(0,r.eW)(" file with your key included. ")],-1)),t[11]||(t[11]=(0,r.Lk)("li",null,[(0,r.eW)(" Place this file into the "),(0,r.Lk)("code",null,"/config"),(0,r.eW)(" folder as described in the section above. ")],-1))])])),_:1,__:[12,13,14,15,16,17]}),(0,r.bF)(Yi,{question:"Why are some requirements waived by default?"},{default:(0,r.k6)((()=>t[18]||(t[18]=[(0,r.eW)(' Some training items, particularly `ICW` (Interactive Courseware) events from SHARP, are often used for computer-based training that is tracked separately. They are automatically marked as "waived" during the syllabus import to prevent them from showing up as overdue. You can change this for any requirement in the Syllabus Edit page. ')]))),_:1,__:[18]})])])])])}}});const nd=ld;var rd=nd,od=s(4811);const id={class:"flex flex-col h-full bg-gray-100"},dd={class:"flex-shrink-0 bg-white border-b border-gray-200 p-4 sm:p-6"},cd={class:"flex items-center justify-between"},ud={class:"flex-grow overflow-hidden"},pd={class:"pr-4 text-gray-500"},gd={class:"flex-1 whitespace-pre-wrap text-gray-200"},md={key:0,class:"text-gray-500"},vd={class:"text-center"},fd={class:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-blue-100"},yd={class:"flex justify-end"};var hd=(0,r.pM)({__name:"LogsView",setup(e){const t=(0,i.KR)(v.getLogs()),s=(0,i.KR)(!1),a=(0,i.KR)(null);let l;const n=()=>{v.exportLogs(),s.value=!0},d=e=>new Date(e).toLocaleTimeString(),c=e=>{switch(e){case"ERROR":return"text-red-400";case"WARN":return"text-yellow-400";case"INFO":return"text-blue-400";case"DEBUG":return"text-green-400";default:return"text-gray-400"}},u=()=>{(0,r.dY)((()=>{a.value&&(a.value.scrollTop=a.value.scrollHeight)}))};return(0,r.sV)((()=>{l=window.setInterval((()=>{t.value=v.getLogs()}),2e3),u()})),(0,r.xo)((()=>{clearInterval(l)})),(0,r.wB)(t,(()=>{u()}),{deep:!0}),(e,l)=>((0,r.uX)(),(0,r.CE)("div",id,[(0,r.Lk)("header",dd,[(0,r.Lk)("div",cd,[l[3]||(l[3]=(0,r.Lk)("div",null,[(0,r.Lk)("h1",{class:"text-2xl font-bold text-gray-900"},"Session Logs"),(0,r.Lk)("p",{class:"mt-1 text-sm text-gray-500"}," A real-time record of application events. Useful for debugging. ")],-1)),(0,r.Lk)("button",{onClick:n,type:"button",class:"inline-flex items-center gap-x-2 rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},[(0,r.bF)((0,i.R1)(zi.A),{class:"-ml-0.5 h-5 w-5"}),l[2]||(l[2]=(0,r.eW)(" Download Logs "))])])]),(0,r.Lk)("main",ud,[(0,r.Lk)("div",{ref_key:"logContainer",ref:a,class:"h-full overflow-y-auto bg-gray-900 p-4 font-mono text-sm"},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(t.value,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{key:t,class:"flex items-start"},[(0,r.Lk)("span",pd,(0,o.v_)(d(e.timestamp)),1),(0,r.Lk)("span",{class:(0,o.C4)(["pr-2 font-bold",c(e.level)])},"["+(0,o.v_)(e.level)+"]",3),(0,r.Lk)("p",gd,(0,o.v_)(e.message),1)])))),128)),0===t.value.length?((0,r.uX)(),(0,r.CE)("div",md," No log entries for this session yet. ")):(0,r.Q3)("",!0)],512)]),(0,r.bF)(kn,{"is-open":s.value,title:"Log File Downloaded",onClose:l[1]||(l[1]=e=>s.value=!1)},{body:(0,r.k6)((()=>[(0,r.Lk)("div",vd,[(0,r.Lk)("div",fd,[(0,r.bF)((0,i.R1)(od.A),{class:"h-6 w-6 text-blue-600"})]),l[4]||(l[4]=(0,r.Lk)("div",{class:"mt-3"},[(0,r.Lk)("p",{class:"text-base text-gray-600"},[(0,r.eW)(" Your log file "),(0,r.Lk)("code",{class:"text-sm bg-gray-200 p-1 rounded"},"UPSHOT_Debug_Report_...txt"),(0,r.eW)(" has been saved to your downloads folder. ")])],-1))]),l[5]||(l[5]=(0,r.Lk)("div",{class:"mt-4 text-left border-t pt-4"},[(0,r.Lk)("h4",{class:"font-medium text-gray-800"},"Submission Instructions:"),(0,r.Lk)("p",{class:"mt-2 text-sm text-gray-600"}," To help us resolve your issue, please attach the downloaded log file in an email to our support team or post it in the appropriate support channel. "),(0,r.Lk)("div",{class:"mt-3 p-2 bg-gray-100 rounded"},[(0,r.Lk)("span",{class:"font-semibold"},"Email:"),(0,r.Lk)("a",{href:"mailto:support@example.com",class:"text-indigo-600 hover:underline"}," support@example.com")])],-1))])),footer:(0,r.k6)((()=>[(0,r.Lk)("div",yd,[(0,r.Lk)("button",{onClick:l[0]||(l[0]=e=>s.value=!1),class:"px-4 py-2 border rounded-md text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700"}," OK ")])])),_:1},8,["is-open"])]))}});const bd=hd;var xd=bd;const kd=[{path:"/",name:"Dashboard",component:nt},{path:"/personnel-upload",name:"PersonnelUpload",component:yi},{path:"/training-upload",name:"TrainingUpload",component:Oi},{path:"/reports",name:"Reports",component:Mt},{path:"/reports/individual",name:"IndividualReportList",component:ms},{path:"/reports/track",name:"TrackReport",component:Qs},{path:"/reports/monthly",name:"MonthlyReport",component:ka},{path:"/reports/llm",name:"LlmReport",component:Ya},{path:"/student/:id",name:"StudentDetail",component:Bl,props:!0},{path:"/settings",name:"Settings",component:zl},{path:"/syllabi",name:"SyllabusManagement",component:Jn},{path:"/settings/app",name:"App Config",component:Oo},{path:"/syllabi/confirm",name:"SyllabusConfirm",component:Kn},{path:"/syllabi/edit/:id",name:"SyllabusEdit",component:no,props:!0},{path:"/help",name:"Help",component:rd},{path:"/logs",name:"Logs",component:xd},{path:"/:pathMatch(.*)*",redirect:"/"}],Ld=(0,n.aE)({history:(0,n.Bt)(),routes:kd});var wd=Ld,Sd=s(4232),Cd=s(7770),Ed=s(2083),Ad=s(7015),Dd=s(9982),_d=s(6407);const Pd={class:"fixed inset-0 flex"},Rd={class:"absolute top-0 left-full flex w-16 justify-center pt-5"},Td={class:"flex grow flex-col gap-y-5 overflow-y-auto bg-white px-6 pb-4"},Id={class:"flex flex-1 flex-col"},Nd={role:"list",class:"flex flex-1 flex-col gap-y-7"},Fd={role:"list",class:"-mx-2 space-y-1"},Wd={class:"hidden lg:fixed lg:inset-y-0 lg:z-50 lg:flex lg:w-72 lg:flex-col"},$d={class:"flex grow flex-col gap-y-5 overflow-y-auto border-r border-gray-200 bg-white px-6 pb-4"},Ud={class:"flex flex-1 flex-col"},Md={role:"list",class:"flex flex-1 flex-col gap-y-7"},qd={role:"list",class:"-mx-2 space-y-1"},Od={class:"lg:pl-72"},jd={class:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:hidden"},Xd={class:"flex-1 text-sm font-semibold leading-6 text-gray-900"},Bd={class:"py-10"},Kd={class:"px-4 sm:px-6 lg:px-8"};var Hd=(0,r.pM)({__name:"AppLayout",setup(e){const t=[{name:"Dashboard",href:"/",icon:Ed.A},{name:"Reports",href:"/reports",icon:he.A},{name:"Settings",href:"/settings",icon:Ad.A},{name:"Help",href:"/help",icon:Le.A},{name:"Logs",href:"/logs",icon:Dd.A}],s=(0,i.KR)(!1);(0,n.lq)();return(e,a)=>{const l=(0,r.g2)("router-link"),n=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.bF)((0,i.R1)(Sd.O),{as:"template",show:s.value},{default:(0,r.k6)((()=>[(0,r.bF)((0,i.R1)(Cd.lG),{class:"relative z-50 lg:hidden",onClose:a[1]||(a[1]=e=>s.value=!1)},{default:(0,r.k6)((()=>[(0,r.bF)((0,i.R1)(Sd._),{as:"template",enter:"transition-opacity ease-linear duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-linear duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:(0,r.k6)((()=>a[3]||(a[3]=[(0,r.Lk)("div",{class:"fixed inset-0 bg-gray-900/80"},null,-1)]))),_:1,__:[3]}),(0,r.Lk)("div",Pd,[(0,r.bF)((0,i.R1)(Sd._),{as:"template",enter:"transition ease-in-out duration-300 transform","enter-from":"-translate-x-full","enter-to":"translate-x-0",leave:"transition ease-in-out duration-300 transform","leave-from":"translate-x-0","leave-to":"-translate-x-full"},{default:(0,r.k6)((()=>[(0,r.bF)((0,i.R1)(Cd.Lj),{class:"relative mr-16 flex w-full max-w-xs flex-1"},{default:(0,r.k6)((()=>[(0,r.bF)((0,i.R1)(Sd._),{as:"template",enter:"ease-in-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in-out duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",Rd,[(0,r.Lk)("button",{type:"button",class:"-m-2.5 p-2.5",onClick:a[0]||(a[0]=e=>s.value=!1)},[a[4]||(a[4]=(0,r.Lk)("span",{class:"sr-only"},"Close sidebar",-1)),(0,r.bF)((0,i.R1)(bi.A),{class:"h-6 w-6 text-white","aria-hidden":"true"})])])])),_:1}),(0,r.Lk)("div",Td,[a[5]||(a[5]=(0,r.Lk)("div",{class:"flex h-16 shrink-0 items-center"},[(0,r.Lk)("h1",{class:"text-2xl font-bold text-indigo-600"},"UPSHOT")],-1)),(0,r.Lk)("nav",Id,[(0,r.Lk)("ul",Nd,[(0,r.Lk)("li",null,[(0,r.Lk)("ul",Fd,[((0,r.uX)(),(0,r.CE)(r.FK,null,(0,r.pI)(t,(t=>(0,r.Lk)("li",{key:t.name},[(0,r.bF)(l,{to:t.href,class:(0,o.C4)([e.$route.name===t.name?"bg-gray-50 text-indigo-600":"text-gray-700 hover:text-indigo-600 hover:bg-gray-50","group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold"])},{default:(0,r.k6)((()=>[((0,r.uX)(),(0,r.Wv)((0,r.$y)(t.icon),{class:(0,o.C4)([e.$route.name===t.name?"text-indigo-600":"text-gray-400 group-hover:text-indigo-600","h-6 w-6 shrink-0"]),"aria-hidden":"true"},null,8,["class"])),(0,r.eW)(" "+(0,o.v_)(t.name),1)])),_:2},1032,["to","class"])]))),64))])])])])])])),_:1})])),_:1})])])),_:1})])),_:1},8,["show"]),(0,r.Lk)("div",Wd,[(0,r.Lk)("div",$d,[a[6]||(a[6]=(0,r.Lk)("div",{class:"flex h-16 shrink-0 items-center"},[(0,r.Lk)("h1",{class:"text-2xl font-bold text-indigo-600"},"UPSHOT")],-1)),(0,r.Lk)("nav",Ud,[(0,r.Lk)("ul",Md,[(0,r.Lk)("li",null,[(0,r.Lk)("ul",qd,[((0,r.uX)(),(0,r.CE)(r.FK,null,(0,r.pI)(t,(t=>(0,r.Lk)("li",{key:t.name},[(0,r.bF)(l,{to:t.href,class:(0,o.C4)([e.$route.name===t.name?"bg-gray-50 text-indigo-600":"text-gray-700 hover:text-indigo-600 hover:bg-gray-50","group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold"])},{default:(0,r.k6)((()=>[((0,r.uX)(),(0,r.Wv)((0,r.$y)(t.icon),{class:(0,o.C4)([e.$route.name===t.name?"text-indigo-600":"text-gray-400 group-hover:text-indigo-600","h-6 w-6 shrink-0"]),"aria-hidden":"true"},null,8,["class"])),(0,r.eW)(" "+(0,o.v_)(t.name),1)])),_:2},1032,["to","class"])]))),64))])])])])])]),(0,r.Lk)("div",Od,[(0,r.Lk)("div",jd,[(0,r.Lk)("button",{type:"button",class:"-m-2.5 p-2.5 text-gray-700 lg:hidden",onClick:a[2]||(a[2]=e=>s.value=!0)},[a[7]||(a[7]=(0,r.Lk)("span",{class:"sr-only"},"Open sidebar",-1)),(0,r.bF)((0,i.R1)(_d.A),{class:"h-6 w-6","aria-hidden":"true"})]),(0,r.Lk)("div",Xd,(0,o.v_)(e.$route.name),1)]),(0,r.Lk)("main",Bd,[(0,r.Lk)("div",Kd,[(0,r.bF)(n)])])])])}}});const Gd=Hd;var Vd=Gd;const Qd={class:"fixed top-4 right-4 z-50 space-y-2"},Yd=["onClick"];var zd=(0,r.pM)({__name:"AppNotifications",setup(e){const t=y();return(e,s)=>((0,r.uX)(),(0,r.CE)("div",Qd,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)((0,i.R1)(t).notifications,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,onClick:s=>(0,i.R1)(t).removeNotification(e.id),class:(0,o.C4)(["p-4 rounded-md shadow-lg cursor-pointer",{"bg-blue-500 text-white":"info"===e.type,"bg-green-500 text-white":"success"===e.type,"bg-yellow-500 text-black":"warning"===e.type,"bg-red-500 text-white":"error"===e.type}])},(0,o.v_)(e.message),11,Yd)))),128))]))}});const Jd=zd;var Zd=Jd;const ec={id:"app",class:"h-full bg-gray-50"};var tc=(0,r.pM)({__name:"App",setup(e){return(e,t)=>((0,r.uX)(),(0,r.CE)("div",ec,[(0,r.bF)(Vd),(0,r.bF)(Zd)]))}});const sc=tc;var ac=sc;v.init(),v.logInfo("Application booting up...");const lc=(0,a.Ef)(ac);lc.use(wd);const nc=(0,l.Ey)();lc.use(nc);const rc=y(),oc=Y();v.logInfo(`App config version loaded: ${oc.currentConfig.version}`),lc.config.errorHandler=(e,t,s)=>{var a,l,n;const r=e,o=(null===(a=null===t||void 0===t?void 0:t.$options)||void 0===a?void 0:a.name)||(null===(n=null===(l=null===t||void 0===t?void 0:t._)||void 0===l?void 0:l.type)||void 0===n?void 0:n.name)||"UnknownComponent";v.logError("Vue Error",{message:r.message,stack:r.stack,componentName:o,lifecycleHook:s}),rc.addNotification({message:`An error occurred in component ${o}: ${r.message}`,type:"error",duration:1e4})},window.onerror=(e,t,s,a,l)=>(v.logError("Global window.onerror:",{message:e,source:t,lineno:s,colno:a,error:l?{name:l.name,message:l.message,stack:l.stack}:"N/A"}),l&&("ChunkLoadError"===l.name||l.message.includes("Failed to fetch dynamically imported module"))?rc.setCriticalError(l,"Failed to load a critical part of the application. Please check your network or try refreshing. If the problem persists, the application files might be corrupted or incomplete."):rc.addNotification({message:`An unexpected global error occurred: ${e}`,type:"error",duration:1e4}),!0),window.onunhandledrejection=e=>{const t=e.reason;let s="An unknown promise rejection occurred.",a=e.reason;t instanceof Error?(s=t.message,a={name:t.name,message:t.message,stack:t.stack}):"string"===typeof t?s=t:t&&"string"===typeof t.message&&(s=t.message),v.logError("Global unhandledrejection:",a),rc.addNotification({message:`Unhandled promise rejection: ${s}`,type:"error",duration:1e4})},v.logInfo("Global error handlers configured."),lc.config.globalProperties.$exportLogs=v.exportLogs,v.logInfo("Global properties ($exportLogs) added.");try{lc.mount("#app"),v.logInfo("Application mounted successfully.")}catch(ic){const e=ic;v.logError("CRITICAL: Application failed to mount!",{message:e.message,stack:e.stack}),rc.setCriticalError(e,"The application could not start due to a critical error during initialization. Please download the debug report and contact support.")}}},t={};function s(a){var l=t[a];if(void 0!==l)return l.exports;var n=t[a]={exports:{}};return e[a].call(n.exports,n,n.exports,s),n.exports}s.m=e,function(){var e=[];s.O=function(t,a,l,n){if(!a){var r=1/0;for(c=0;c<e.length;c++){a=e[c][0],l=e[c][1],n=e[c][2];for(var o=!0,i=0;i<a.length;i++)(!1&n||r>=n)&&Object.keys(s.O).every((function(e){return s.O[e](a[i])}))?a.splice(i--,1):(o=!1,n<r&&(r=n));if(o){e.splice(c--,1);var d=l();void 0!==d&&(t=d)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[a,l,n]}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var l,n,r=a[0],o=a[1],i=a[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(l in o)s.o(o,l)&&(s.m[l]=o[l]);if(i)var c=i(s)}for(t&&t(a);d<r.length;d++)n=r[d],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(c)},a=self["webpackChunkupshot_refactor"]=self["webpackChunkupshot_refactor"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],(function(){return s(7287)}));a=s.O(a)})();
//# sourceMappingURL=app.48eb07dd.js.map